function Zd(s,r){const i=Object.create(null),c=s.split(",");for(let l=0;l<c.length;l++)i[c[l]]=!0;return r?l=>!!i[l.toLowerCase()]:l=>!!i[l]}function Qd(s){if(Be(s)){const r={};for(let i=0;i<s.length;i++){const c=s[i],l=wt(c)?NS(c):Qd(c);if(l)for(const h in l)r[h]=l[h]}return r}else{if(wt(s))return s;if(_t(s))return s}}const wS=/;(?![^(]*\))/g,AS=/:([^]+)/,LS=/\/\*.*?\*\//gs;function NS(s){const r={};return s.replace(LS,"").split(wS).forEach(i=>{if(i){const c=i.split(AS);c.length>1&&(r[c[0].trim()]=c[1].trim())}}),r}function Aa(s){let r="";if(wt(s))r=s;else if(Be(s))for(let i=0;i<s.length;i++){const c=Aa(s[i]);c&&(r+=c+" ")}else if(_t(s))for(const i in s)s[i]&&(r+=i+" ");return r.trim()}const DS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",MS=Zd(DS);function LT(s){return!!s||s===""}const iA=s=>wt(s)?s:s==null?"":Be(s)||_t(s)&&(s.toString===xT||!He(s.toString))?JSON.stringify(s,NT,2):String(s),NT=(s,r)=>r&&r.__v_isRef?NT(s,r.value):Qn(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((i,[c,l])=>(i[`${c} =>`]=l,i),{})}:DT(r)?{[`Set(${r.size})`]:[...r.values()]}:_t(r)&&!Be(r)&&!BT(r)?String(r):r,pt={},Zn=[],go=()=>{},xS=()=>!1,BS=/^on[^a-z]/,La=s=>BS.test(s),ep=s=>s.startsWith("onUpdate:"),Vt=Object.assign,tp=(s,r)=>{const i=s.indexOf(r);i>-1&&s.splice(i,1)},PS=Object.prototype.hasOwnProperty,ot=(s,r)=>PS.call(s,r),Be=Array.isArray,Qn=s=>Na(s)==="[object Map]",DT=s=>Na(s)==="[object Set]",He=s=>typeof s=="function",wt=s=>typeof s=="string",sp=s=>typeof s=="symbol",_t=s=>s!==null&&typeof s=="object",MT=s=>_t(s)&&He(s.then)&&He(s.catch),xT=Object.prototype.toString,Na=s=>xT.call(s),FS=s=>Na(s).slice(8,-1),BT=s=>Na(s)==="[object Object]",op=s=>wt(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,ha=Zd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Da=s=>{const r=Object.create(null);return i=>r[i]||(r[i]=s(i))},GS=/-(\w)/g,Xs=Da(s=>s.replace(GS,(r,i)=>i?i.toUpperCase():"")),US=/\B([A-Z])/g,cr=Da(s=>s.replace(US,"-$1").toLowerCase()),ln=Da(s=>s.charAt(0).toUpperCase()+s.slice(1)),da=Da(s=>s?`on${ln(s)}`:""),Sl=(s,r)=>!Object.is(s,r),ed=(s,r)=>{for(let i=0;i<s.length;i++)s[i](r)},ga=(s,r,i)=>{Object.defineProperty(s,r,{configurable:!0,enumerable:!1,value:i})},ip=s=>{const r=parseFloat(s);return isNaN(r)?s:r};let e$;const HS=()=>e$||(e$=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Hs;class PT{constructor(r=!1){this.detached=r,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Hs,!r&&Hs&&(this.index=(Hs.scopes||(Hs.scopes=[])).push(this)-1)}run(r){if(this.active){const i=Hs;try{return Hs=this,r()}finally{Hs=i}}}on(){Hs=this}off(){Hs=this.parent}stop(r){if(this.active){let i,c;for(i=0,c=this.effects.length;i<c;i++)this.effects[i].stop();for(i=0,c=this.cleanups.length;i<c;i++)this.cleanups[i]();if(this.scopes)for(i=0,c=this.scopes.length;i<c;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!r){const l=this.parent.scopes.pop();l&&l!==this&&(this.parent.scopes[this.index]=l,l.index=this.index)}this.parent=void 0,this.active=!1}}}function Bl(s){return new PT(s)}function VS(s,r=Hs){r&&r.active&&r.effects.push(s)}function cn(s){Hs&&Hs.cleanups.push(s)}const np=s=>{const r=new Set(s);return r.w=0,r.n=0,r},FT=s=>(s.w&vi)>0,GT=s=>(s.n&vi)>0,WS=({deps:s})=>{if(s.length)for(let r=0;r<s.length;r++)s[r].w|=vi},jS=s=>{const{deps:r}=s;if(r.length){let i=0;for(let c=0;c<r.length;c++){const l=r[c];FT(l)&&!GT(l)?l.delete(s):r[i++]=l,l.w&=~vi,l.n&=~vi}r.length=i}},Cd=new WeakMap;let $l=0,vi=1;const kd=30;let po;const sn=Symbol(""),Od=Symbol("");class rp{constructor(r,i=null,c){this.fn=r,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,VS(this,c)}run(){if(!this.active)return this.fn();let r=po,i=Ti;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=po,po=this,Ti=!0,vi=1<<++$l,$l<=kd?WS(this):t$(this),this.fn()}finally{$l<=kd&&jS(this),vi=1<<--$l,po=this.parent,Ti=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){po===this?this.deferStop=!0:this.active&&(t$(this),this.onStop&&this.onStop(),this.active=!1)}}function t$(s){const{deps:r}=s;if(r.length){for(let i=0;i<r.length;i++)r[i].delete(s);r.length=0}}let Ti=!0;const UT=[];function ar(){UT.push(Ti),Ti=!1}function ur(){const s=UT.pop();Ti=s===void 0?!0:s}function Ns(s,r,i){if(Ti&&po){let c=Cd.get(s);c||Cd.set(s,c=new Map);let l=c.get(i);l||c.set(i,l=np()),HT(l)}}function HT(s,r){let i=!1;$l<=kd?GT(s)||(s.n|=vi,i=!FT(s)):i=!s.has(po),i&&(s.add(po),po.deps.push(s))}function Jo(s,r,i,c,l,h){const d=Cd.get(s);if(!d)return;let _=[];if(r==="clear")_=[...d.values()];else if(i==="length"&&Be(s)){const $=ip(c);d.forEach((u,g)=>{(g==="length"||g>=$)&&_.push(u)})}else switch(i!==void 0&&_.push(d.get(i)),r){case"add":Be(s)?op(i)&&_.push(d.get("length")):(_.push(d.get(sn)),Qn(s)&&_.push(d.get(Od)));break;case"delete":Be(s)||(_.push(d.get(sn)),Qn(s)&&_.push(d.get(Od)));break;case"set":Qn(s)&&_.push(d.get(sn));break}if(_.length===1)_[0]&&wd(_[0]);else{const $=[];for(const u of _)u&&$.push(...u);wd(np($))}}function wd(s,r){const i=Be(s)?s:[...s];for(const c of i)c.computed&&s$(c);for(const c of i)c.computed||s$(c)}function s$(s,r){(s!==po||s.allowRecurse)&&(s.scheduler?s.scheduler():s.run())}const XS=Zd("__proto__,__v_isRef,__isVue"),VT=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(sp)),YS=lp(),zS=lp(!1,!0),KS=lp(!0),o$=JS();function JS(){const s={};return["includes","indexOf","lastIndexOf"].forEach(r=>{s[r]=function(...i){const c=it(this);for(let h=0,d=this.length;h<d;h++)Ns(c,"get",h+"");const l=c[r](...i);return l===-1||l===!1?c[r](...i.map(it)):l}}),["push","pop","shift","unshift","splice"].forEach(r=>{s[r]=function(...i){ar();const c=it(this)[r].apply(this,i);return ur(),c}}),s}function lp(s=!1,r=!1){return function(c,l,h){if(l==="__v_isReactive")return!s;if(l==="__v_isReadonly")return s;if(l==="__v_isShallow")return r;if(l==="__v_raw"&&h===(s?r?dR:zT:r?YT:XT).get(c))return c;const d=Be(c);if(!s&&d&&ot(o$,l))return Reflect.get(o$,l,h);const _=Reflect.get(c,l,h);return(sp(l)?VT.has(l):XS(l))||(s||Ns(c,"get",l),r)?_:Et(_)?d&&op(l)?_:_.value:_t(_)?s?Pl(_):as(_):_}}const qS=WT(),ZS=WT(!0);function WT(s=!1){return function(i,c,l,h){let d=i[c];if(nr(d)&&Et(d)&&!Et(l))return!1;if(!s&&(!fa(l)&&!nr(l)&&(d=it(d),l=it(l)),!Be(i)&&Et(d)&&!Et(l)))return d.value=l,!0;const _=Be(i)&&op(c)?Number(c)<i.length:ot(i,c),$=Reflect.set(i,c,l,h);return i===it(h)&&(_?Sl(l,d)&&Jo(i,"set",c,l):Jo(i,"add",c,l)),$}}function QS(s,r){const i=ot(s,r);s[r];const c=Reflect.deleteProperty(s,r);return c&&i&&Jo(s,"delete",r,void 0),c}function eR(s,r){const i=Reflect.has(s,r);return(!sp(r)||!VT.has(r))&&Ns(s,"has",r),i}function tR(s){return Ns(s,"iterate",Be(s)?"length":sn),Reflect.ownKeys(s)}const jT={get:YS,set:qS,deleteProperty:QS,has:eR,ownKeys:tR},sR={get:KS,set(s,r){return!0},deleteProperty(s,r){return!0}},oR=Vt({},jT,{get:zS,set:ZS}),cp=s=>s,Ma=s=>Reflect.getPrototypeOf(s);function ea(s,r,i=!1,c=!1){s=s.__v_raw;const l=it(s),h=it(r);i||(r!==h&&Ns(l,"get",r),Ns(l,"get",h));const{has:d}=Ma(l),_=c?cp:i?hp:Rl;if(d.call(l,r))return _(s.get(r));if(d.call(l,h))return _(s.get(h));s!==l&&s.get(r)}function ta(s,r=!1){const i=this.__v_raw,c=it(i),l=it(s);return r||(s!==l&&Ns(c,"has",s),Ns(c,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)}function sa(s,r=!1){return s=s.__v_raw,!r&&Ns(it(s),"iterate",sn),Reflect.get(s,"size",s)}function i$(s){s=it(s);const r=it(this);return Ma(r).has.call(r,s)||(r.add(s),Jo(r,"add",s,s)),this}function n$(s,r){r=it(r);const i=it(this),{has:c,get:l}=Ma(i);let h=c.call(i,s);h||(s=it(s),h=c.call(i,s));const d=l.call(i,s);return i.set(s,r),h?Sl(r,d)&&Jo(i,"set",s,r):Jo(i,"add",s,r),this}function r$(s){const r=it(this),{has:i,get:c}=Ma(r);let l=i.call(r,s);l||(s=it(s),l=i.call(r,s)),c&&c.call(r,s);const h=r.delete(s);return l&&Jo(r,"delete",s,void 0),h}function l$(){const s=it(this),r=s.size!==0,i=s.clear();return r&&Jo(s,"clear",void 0,void 0),i}function oa(s,r){return function(c,l){const h=this,d=h.__v_raw,_=it(d),$=r?cp:s?hp:Rl;return!s&&Ns(_,"iterate",sn),d.forEach((u,g)=>c.call(l,$(u),$(g),h))}}function ia(s,r,i){return function(...c){const l=this.__v_raw,h=it(l),d=Qn(h),_=s==="entries"||s===Symbol.iterator&&d,$=s==="keys"&&d,u=l[s](...c),g=i?cp:r?hp:Rl;return!r&&Ns(h,"iterate",$?Od:sn),{next(){const{value:m,done:b}=u.next();return b?{value:m,done:b}:{value:_?[g(m[0]),g(m[1])]:g(m),done:b}},[Symbol.iterator](){return this}}}}function _i(s){return function(...r){return s==="delete"?!1:this}}function iR(){const s={get(h){return ea(this,h)},get size(){return sa(this)},has:ta,add:i$,set:n$,delete:r$,clear:l$,forEach:oa(!1,!1)},r={get(h){return ea(this,h,!1,!0)},get size(){return sa(this)},has:ta,add:i$,set:n$,delete:r$,clear:l$,forEach:oa(!1,!0)},i={get(h){return ea(this,h,!0)},get size(){return sa(this,!0)},has(h){return ta.call(this,h,!0)},add:_i("add"),set:_i("set"),delete:_i("delete"),clear:_i("clear"),forEach:oa(!0,!1)},c={get(h){return ea(this,h,!0,!0)},get size(){return sa(this,!0)},has(h){return ta.call(this,h,!0)},add:_i("add"),set:_i("set"),delete:_i("delete"),clear:_i("clear"),forEach:oa(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(h=>{s[h]=ia(h,!1,!1),i[h]=ia(h,!0,!1),r[h]=ia(h,!1,!0),c[h]=ia(h,!0,!0)}),[s,i,r,c]}const[nR,rR,lR,cR]=iR();function ap(s,r){const i=r?s?cR:lR:s?rR:nR;return(c,l,h)=>l==="__v_isReactive"?!s:l==="__v_isReadonly"?s:l==="__v_raw"?c:Reflect.get(ot(i,l)&&l in c?i:c,l,h)}const aR={get:ap(!1,!1)},uR={get:ap(!1,!0)},hR={get:ap(!0,!1)},XT=new WeakMap,YT=new WeakMap,zT=new WeakMap,dR=new WeakMap;function pR(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _R(s){return s.__v_skip||!Object.isExtensible(s)?0:pR(FS(s))}function as(s){return nr(s)?s:up(s,!1,jT,aR,XT)}function KT(s){return up(s,!1,oR,uR,YT)}function Pl(s){return up(s,!0,sR,hR,zT)}function up(s,r,i,c,l){if(!_t(s)||s.__v_raw&&!(r&&s.__v_isReactive))return s;const h=l.get(s);if(h)return h;const d=_R(s);if(d===0)return s;const _=new Proxy(s,d===2?c:i);return l.set(s,_),_}function er(s){return nr(s)?er(s.__v_raw):!!(s&&s.__v_isReactive)}function nr(s){return!!(s&&s.__v_isReadonly)}function fa(s){return!!(s&&s.__v_isShallow)}function JT(s){return er(s)||nr(s)}function it(s){const r=s&&s.__v_raw;return r?it(r):s}function qT(s){return ga(s,"__v_skip",!0),s}const Rl=s=>_t(s)?as(s):s,hp=s=>_t(s)?Pl(s):s;function ZT(s){Ti&&po&&(s=it(s),HT(s.dep||(s.dep=np())))}function QT(s,r){s=it(s),s.dep&&wd(s.dep)}function Et(s){return!!(s&&s.__v_isRef===!0)}function we(s){return eb(s,!1)}function gR(s){return eb(s,!0)}function eb(s,r){return Et(s)?s:new fR(s,r)}class fR{constructor(r,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?r:it(r),this._value=i?r:Rl(r)}get value(){return ZT(this),this._value}set value(r){const i=this.__v_isShallow||fa(r)||nr(r);r=i?r:it(r),Sl(r,this._rawValue)&&(this._rawValue=r,this._value=i?r:Rl(r),QT(this))}}function tr(s){return Et(s)?s.value:s}const mR={get:(s,r,i)=>tr(Reflect.get(s,r,i)),set:(s,r,i,c)=>{const l=s[r];return Et(l)&&!Et(i)?(l.value=i,!0):Reflect.set(s,r,i,c)}};function tb(s){return er(s)?s:new Proxy(s,mR)}function dp(s){const r=Be(s)?new Array(s.length):{};for(const i in s)r[i]=It(s,i);return r}class $R{constructor(r,i,c){this._object=r,this._key=i,this._defaultValue=c,this.__v_isRef=!0}get value(){const r=this._object[this._key];return r===void 0?this._defaultValue:r}set value(r){this._object[this._key]=r}}function It(s,r,i){const c=s[r];return Et(c)?c:new $R(s,r,i)}var sb;class TR{constructor(r,i,c,l){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[sb]=!1,this._dirty=!0,this.effect=new rp(r,()=>{this._dirty||(this._dirty=!0,QT(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!l,this.__v_isReadonly=c}get value(){const r=it(this);return ZT(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}sb="__v_isReadonly";function bR(s,r,i=!1){let c,l;const h=He(s);return h?(c=s,l=go):(c=s.get,l=s.set),new TR(c,l,h||!l,i)}function bi(s,r,i,c){let l;try{l=c?s(...c):s()}catch(h){xa(h,r,i)}return l}function Vs(s,r,i,c){if(He(s)){const h=bi(s,r,i,c);return h&&MT(h)&&h.catch(d=>{xa(d,r,i)}),h}const l=[];for(let h=0;h<s.length;h++)l.push(Vs(s[h],r,i,c));return l}function xa(s,r,i,c=!0){const l=r?r.vnode:null;if(r){let h=r.parent;const d=r.proxy,_=i;for(;h;){const u=h.ec;if(u){for(let g=0;g<u.length;g++)if(u[g](s,d,_)===!1)return}h=h.parent}const $=r.appContext.config.errorHandler;if($){bi($,null,10,[s,d,_]);return}}ER(s,i,l,c)}function ER(s,r,i,c=!0){console.error(s)}let Cl=!1,Ad=!1;const ts=[];let Ao=0;const sr=[];let Ko=null,qi=0;const ob=Promise.resolve();let pp=null;function fo(s){const r=pp||ob;return s?r.then(this?s.bind(this):s):r}function vR(s){let r=Ao+1,i=ts.length;for(;r<i;){const c=r+i>>>1;kl(ts[c])<s?r=c+1:i=c}return r}function _p(s){(!ts.length||!ts.includes(s,Cl&&s.allowRecurse?Ao+1:Ao))&&(s.id==null?ts.push(s):ts.splice(vR(s.id),0,s),ib())}function ib(){!Cl&&!Ad&&(Ad=!0,pp=ob.then(rb))}function IR(s){const r=ts.indexOf(s);r>Ao&&ts.splice(r,1)}function yR(s){Be(s)?sr.push(...s):(!Ko||!Ko.includes(s,s.allowRecurse?qi+1:qi))&&sr.push(s),ib()}function c$(s,r=Cl?Ao+1:0){for(;r<ts.length;r++){const i=ts[r];i&&i.pre&&(ts.splice(r,1),r--,i())}}function nb(s){if(sr.length){const r=[...new Set(sr)];if(sr.length=0,Ko){Ko.push(...r);return}for(Ko=r,Ko.sort((i,c)=>kl(i)-kl(c)),qi=0;qi<Ko.length;qi++)Ko[qi]();Ko=null,qi=0}}const kl=s=>s.id==null?1/0:s.id,SR=(s,r)=>{const i=kl(s)-kl(r);if(i===0){if(s.pre&&!r.pre)return-1;if(r.pre&&!s.pre)return 1}return i};function rb(s){Ad=!1,Cl=!0,ts.sort(SR);const r=go;try{for(Ao=0;Ao<ts.length;Ao++){const i=ts[Ao];i&&i.active!==!1&&bi(i,null,14)}}finally{Ao=0,ts.length=0,nb(),Cl=!1,pp=null,(ts.length||sr.length)&&rb()}}function RR(s,r,...i){if(s.isUnmounted)return;const c=s.vnode.props||pt;let l=i;const h=r.startsWith("update:"),d=h&&r.slice(7);if(d&&d in c){const g=`${d==="modelValue"?"model":d}Modifiers`,{number:m,trim:b}=c[g]||pt;b&&(l=i.map(E=>wt(E)?E.trim():E)),m&&(l=i.map(ip))}let _,$=c[_=da(r)]||c[_=da(Xs(r))];!$&&h&&($=c[_=da(cr(r))]),$&&Vs($,s,6,l);const u=c[_+"Once"];if(u){if(!s.emitted)s.emitted={};else if(s.emitted[_])return;s.emitted[_]=!0,Vs(u,s,6,l)}}function lb(s,r,i=!1){const c=r.emitsCache,l=c.get(s);if(l!==void 0)return l;const h=s.emits;let d={},_=!1;if(!He(s)){const $=u=>{const g=lb(u,r,!0);g&&(_=!0,Vt(d,g))};!i&&r.mixins.length&&r.mixins.forEach($),s.extends&&$(s.extends),s.mixins&&s.mixins.forEach($)}return!h&&!_?(_t(s)&&c.set(s,null),null):(Be(h)?h.forEach($=>d[$]=null):Vt(d,h),_t(s)&&c.set(s,d),d)}function Ba(s,r){return!s||!La(r)?!1:(r=r.slice(2).replace(/Once$/,""),ot(s,r[0].toLowerCase()+r.slice(1))||ot(s,cr(r))||ot(s,r))}let Yt=null,Pa=null;function ma(s){const r=Yt;return Yt=s,Pa=s&&s.type.__scopeId||null,r}function nA(s){Pa=s}function rA(){Pa=null}function CR(s,r=Yt,i){if(!r||s._n)return s;const c=(...l)=>{c._d&&T$(-1);const h=ma(r);let d;try{d=s(...l)}finally{ma(h),c._d&&T$(1)}return d};return c._n=!0,c._c=!0,c._d=!0,c}function td(s){const{type:r,vnode:i,proxy:c,withProxy:l,props:h,propsOptions:[d],slots:_,attrs:$,emit:u,render:g,renderCache:m,data:b,setupState:E,ctx:I,inheritAttrs:y}=s;let F,B;const N=ma(s);try{if(i.shapeFlag&4){const z=l||c;F=wo(g.call(z,z,m,h,E,b,I)),B=$}else{const z=r;F=wo(z.length>1?z(h,{attrs:$,slots:_,emit:u}):z(h,null)),B=r.props?$:kR($)}}catch(z){vl.length=0,xa(z,s,1),F=M(Ws)}let R=F;if(B&&y!==!1){const z=Object.keys(B),{shapeFlag:le}=R;z.length&&le&7&&(d&&z.some(ep)&&(B=OR(B,d)),R=yi(R,B))}return i.dirs&&(R=yi(R),R.dirs=R.dirs?R.dirs.concat(i.dirs):i.dirs),i.transition&&(R.transition=i.transition),F=R,ma(N),F}const kR=s=>{let r;for(const i in s)(i==="class"||i==="style"||La(i))&&((r||(r={}))[i]=s[i]);return r},OR=(s,r)=>{const i={};for(const c in s)(!ep(c)||!(c.slice(9)in r))&&(i[c]=s[c]);return i};function wR(s,r,i){const{props:c,children:l,component:h}=s,{props:d,children:_,patchFlag:$}=r,u=h.emitsOptions;if(r.dirs||r.transition)return!0;if(i&&$>=0){if($&1024)return!0;if($&16)return c?a$(c,d,u):!!d;if($&8){const g=r.dynamicProps;for(let m=0;m<g.length;m++){const b=g[m];if(d[b]!==c[b]&&!Ba(u,b))return!0}}}else return(l||_)&&(!_||!_.$stable)?!0:c===d?!1:c?d?a$(c,d,u):!0:!!d;return!1}function a$(s,r,i){const c=Object.keys(r);if(c.length!==Object.keys(s).length)return!0;for(let l=0;l<c.length;l++){const h=c[l];if(r[h]!==s[h]&&!Ba(i,h))return!0}return!1}function AR({vnode:s,parent:r},i){for(;r&&r.subTree===s;)(s=r.vnode).el=i,r=r.parent}const LR=s=>s.__isSuspense;function NR(s,r){r&&r.pendingBranch?Be(s)?r.effects.push(...s):r.effects.push(s):yR(s)}function Si(s,r){if(Ht){let i=Ht.provides;const c=Ht.parent&&Ht.parent.provides;c===i&&(i=Ht.provides=Object.create(c)),i[s]=r}}function os(s,r,i=!1){const c=Ht||Yt;if(c){const l=c.parent==null?c.vnode.appContext&&c.vnode.appContext.provides:c.parent.provides;if(l&&s in l)return l[s];if(arguments.length>1)return i&&He(r)?r.call(c.proxy):r}}function Qo(s,r){return gp(s,null,r)}const na={};function nt(s,r,i){return gp(s,r,i)}function gp(s,r,{immediate:i,deep:c,flush:l,onTrack:h,onTrigger:d}=pt){const _=Ht;let $,u=!1,g=!1;if(Et(s)?($=()=>s.value,u=fa(s)):er(s)?($=()=>s,c=!0):Be(s)?(g=!0,u=s.some(R=>er(R)||fa(R)),$=()=>s.map(R=>{if(Et(R))return R.value;if(er(R))return en(R);if(He(R))return bi(R,_,2)})):He(s)?r?$=()=>bi(s,_,2):$=()=>{if(!(_&&_.isUnmounted))return m&&m(),Vs(s,_,3,[b])}:$=go,r&&c){const R=$;$=()=>en(R())}let m,b=R=>{m=B.onStop=()=>{bi(R,_,4)}},E;if(Ll)if(b=go,r?i&&Vs(r,_,3,[$(),g?[]:void 0,b]):$(),l==="sync"){const R=CC();E=R.__watcherHandles||(R.__watcherHandles=[])}else return go;let I=g?new Array(s.length).fill(na):na;const y=()=>{if(!!B.active)if(r){const R=B.run();(c||u||(g?R.some((z,le)=>Sl(z,I[le])):Sl(R,I)))&&(m&&m(),Vs(r,_,3,[R,I===na?void 0:g&&I[0]===na?[]:I,b]),I=R)}else B.run()};y.allowRecurse=!!r;let F;l==="sync"?F=y:l==="post"?F=()=>Ts(y,_&&_.suspense):(y.pre=!0,_&&(y.id=_.uid),F=()=>_p(y));const B=new rp($,F);r?i?y():I=B.run():l==="post"?Ts(B.run.bind(B),_&&_.suspense):B.run();const N=()=>{B.stop(),_&&_.scope&&tp(_.scope.effects,B)};return E&&E.push(N),N}function DR(s,r,i){const c=this.proxy,l=wt(s)?s.includes(".")?cb(c,s):()=>c[s]:s.bind(c,c);let h;He(r)?h=r:(h=r.handler,i=r);const d=Ht;rr(this);const _=gp(l,h.bind(c),i);return d?rr(d):on(),_}function cb(s,r){const i=r.split(".");return()=>{let c=s;for(let l=0;l<i.length&&c;l++)c=c[i[l]];return c}}function en(s,r){if(!_t(s)||s.__v_skip||(r=r||new Set,r.has(s)))return s;if(r.add(s),Et(s))en(s.value,r);else if(Be(s))for(let i=0;i<s.length;i++)en(s[i],r);else if(DT(s)||Qn(s))s.forEach(i=>{en(i,r)});else if(BT(s))for(const i in s)en(s[i],r);return s}function ab(){const s={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return an(()=>{s.isMounted=!0}),hr(()=>{s.isUnmounting=!0}),s}const Us=[Function,Array],MR={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Us,onEnter:Us,onAfterEnter:Us,onEnterCancelled:Us,onBeforeLeave:Us,onLeave:Us,onAfterLeave:Us,onLeaveCancelled:Us,onBeforeAppear:Us,onAppear:Us,onAfterAppear:Us,onAppearCancelled:Us},setup(s,{slots:r}){const i=Va(),c=ab();let l;return()=>{const h=r.default&&fp(r.default(),!0);if(!h||!h.length)return;let d=h[0];if(h.length>1){for(const y of h)if(y.type!==Ws){d=y;break}}const _=it(s),{mode:$}=_;if(c.isLeaving)return sd(d);const u=u$(d);if(!u)return sd(d);const g=Ol(u,_,c,i);wl(u,g);const m=i.subTree,b=m&&u$(m);let E=!1;const{getTransitionKey:I}=u.type;if(I){const y=I();l===void 0?l=y:y!==l&&(l=y,E=!0)}if(b&&b.type!==Ws&&(!Zi(u,b)||E)){const y=Ol(b,_,c,i);if(wl(b,y),$==="out-in")return c.isLeaving=!0,y.afterLeave=()=>{c.isLeaving=!1,i.update.active!==!1&&i.update()},sd(d);$==="in-out"&&u.type!==Ws&&(y.delayLeave=(F,B,N)=>{const R=hb(c,b);R[String(b.key)]=b,F._leaveCb=()=>{B(),F._leaveCb=void 0,delete g.delayedLeave},g.delayedLeave=N})}return d}}},ub=MR;function hb(s,r){const{leavingVNodes:i}=s;let c=i.get(r.type);return c||(c=Object.create(null),i.set(r.type,c)),c}function Ol(s,r,i,c){const{appear:l,mode:h,persisted:d=!1,onBeforeEnter:_,onEnter:$,onAfterEnter:u,onEnterCancelled:g,onBeforeLeave:m,onLeave:b,onAfterLeave:E,onLeaveCancelled:I,onBeforeAppear:y,onAppear:F,onAfterAppear:B,onAppearCancelled:N}=r,R=String(s.key),z=hb(i,s),le=(V,de)=>{V&&Vs(V,c,9,de)},he=(V,de)=>{const J=de[1];le(V,de),Be(V)?V.every(ue=>ue.length<=1)&&J():V.length<=1&&J()},Q={mode:h,persisted:d,beforeEnter(V){let de=_;if(!i.isMounted)if(l)de=y||_;else return;V._leaveCb&&V._leaveCb(!0);const J=z[R];J&&Zi(s,J)&&J.el._leaveCb&&J.el._leaveCb(),le(de,[V])},enter(V){let de=$,J=u,ue=g;if(!i.isMounted)if(l)de=F||$,J=B||u,ue=N||g;else return;let Z=!1;const ne=V._enterCb=$e=>{Z||(Z=!0,$e?le(ue,[V]):le(J,[V]),Q.delayedLeave&&Q.delayedLeave(),V._enterCb=void 0)};de?he(de,[V,ne]):ne()},leave(V,de){const J=String(s.key);if(V._enterCb&&V._enterCb(!0),i.isUnmounting)return de();le(m,[V]);let ue=!1;const Z=V._leaveCb=ne=>{ue||(ue=!0,de(),ne?le(I,[V]):le(E,[V]),V._leaveCb=void 0,z[J]===s&&delete z[J])};z[J]=s,b?he(b,[V,Z]):Z()},clone(V){return Ol(V,r,i,c)}};return Q}function sd(s){if(Fa(s))return s=yi(s),s.children=null,s}function u$(s){return Fa(s)?s.children?s.children[0]:void 0:s}function wl(s,r){s.shapeFlag&6&&s.component?wl(s.component.subTree,r):s.shapeFlag&128?(s.ssContent.transition=r.clone(s.ssContent),s.ssFallback.transition=r.clone(s.ssFallback)):s.transition=r}function fp(s,r=!1,i){let c=[],l=0;for(let h=0;h<s.length;h++){let d=s[h];const _=i==null?d.key:String(i)+String(d.key!=null?d.key:h);d.type===Xt?(d.patchFlag&128&&l++,c=c.concat(fp(d.children,r,_))):(r||d.type!==Ws)&&c.push(_!=null?yi(d,{key:_}):d)}if(l>1)for(let h=0;h<c.length;h++)c[h].patchFlag=-2;return c}function mp(s){return He(s)?{setup:s,name:s.name}:s}const Tl=s=>!!s.type.__asyncLoader,Fa=s=>s.type.__isKeepAlive;function xR(s,r){db(s,"a",r)}function BR(s,r){db(s,"da",r)}function db(s,r,i=Ht){const c=s.__wdc||(s.__wdc=()=>{let l=i;for(;l;){if(l.isDeactivated)return;l=l.parent}return s()});if(Ga(r,c,i),i){let l=i.parent;for(;l&&l.parent;)Fa(l.parent.vnode)&&PR(c,r,i,l),l=l.parent}}function PR(s,r,i,c){const l=Ga(r,s,c,!0);gb(()=>{tp(c[r],l)},i)}function Ga(s,r,i=Ht,c=!1){if(i){const l=i[s]||(i[s]=[]),h=r.__weh||(r.__weh=(...d)=>{if(i.isUnmounted)return;ar(),rr(i);const _=Vs(r,i,s,d);return on(),ur(),_});return c?l.unshift(h):l.push(h),h}}const ei=s=>(r,i=Ht)=>(!Ll||s==="sp")&&Ga(s,(...c)=>r(...c),i),pb=ei("bm"),an=ei("m"),FR=ei("bu"),_b=ei("u"),hr=ei("bum"),gb=ei("um"),GR=ei("sp"),UR=ei("rtg"),HR=ei("rtc");function VR(s,r=Ht){Ga("ec",s,r)}function Ii(s,r){const i=Yt;if(i===null)return s;const c=Wa(i)||i.proxy,l=s.dirs||(s.dirs=[]);for(let h=0;h<r.length;h++){let[d,_,$,u=pt]=r[h];d&&(He(d)&&(d={mounted:d,updated:d}),d.deep&&en(_),l.push({dir:d,instance:c,value:_,oldValue:void 0,arg:$,modifiers:u}))}return s}function Yi(s,r,i,c){const l=s.dirs,h=r&&r.dirs;for(let d=0;d<l.length;d++){const _=l[d];h&&(_.oldValue=h[d].value);let $=_.dir[c];$&&(ar(),Vs($,i,8,[s.el,_,s,r]),ur())}}const $p="components",WR="directives";function lA(s,r){return Tp($p,s,!0,r)||s}const fb=Symbol();function jR(s){return wt(s)?Tp($p,s,!1)||s:s||fb}function Fl(s){return Tp(WR,s)}function Tp(s,r,i=!0,c=!1){const l=Yt||Ht;if(l){const h=l.type;if(s===$p){const _=yC(h,!1);if(_&&(_===r||_===Xs(r)||_===ln(Xs(r))))return h}const d=h$(l[s]||h[s],r)||h$(l.appContext[s],r);return!d&&c?h:d}}function h$(s,r){return s&&(s[r]||s[Xs(r)]||s[ln(Xs(r))])}function cA(s,r,i,c){let l;const h=i&&i[c];if(Be(s)||wt(s)){l=new Array(s.length);for(let d=0,_=s.length;d<_;d++)l[d]=r(s[d],d,void 0,h&&h[d])}else if(typeof s=="number"){l=new Array(s);for(let d=0;d<s;d++)l[d]=r(d+1,d,void 0,h&&h[d])}else if(_t(s))if(s[Symbol.iterator])l=Array.from(s,(d,_)=>r(d,_,void 0,h&&h[_]));else{const d=Object.keys(s);l=new Array(d.length);for(let _=0,$=d.length;_<$;_++){const u=d[_];l[_]=r(s[u],u,_,h&&h[_])}}else l=[];return i&&(i[c]=l),l}function XR(s,r,i={},c,l){if(Yt.isCE||Yt.parent&&Tl(Yt.parent)&&Yt.parent.isCE)return r!=="default"&&(i.name=r),M("slot",i,c&&c());let h=s[r];h&&h._c&&(h._d=!1),Ta();const d=h&&mb(h(i)),_=Cb(Xt,{key:i.key||d&&d.key||`_${r}`},d||(c?c():[]),d&&s._===1?64:-2);return!l&&_.scopeId&&(_.slotScopeIds=[_.scopeId+"-s"]),h&&h._c&&(h._d=!0),_}function mb(s){return s.some(r=>ba(r)?!(r.type===Ws||r.type===Xt&&!mb(r.children)):!0)?s:null}function od(s,r){const i={};for(const c in s)i[r&&/[A-Z]/.test(c)?`on:${c}`:da(c)]=s[c];return i}const Ld=s=>s?Ob(s)?Wa(s)||s.proxy:Ld(s.parent):null,bl=Vt(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Ld(s.parent),$root:s=>Ld(s.root),$emit:s=>s.emit,$options:s=>bp(s),$forceUpdate:s=>s.f||(s.f=()=>_p(s.update)),$nextTick:s=>s.n||(s.n=fo.bind(s.proxy)),$watch:s=>DR.bind(s)}),id=(s,r)=>s!==pt&&!s.__isScriptSetup&&ot(s,r),YR={get({_:s},r){const{ctx:i,setupState:c,data:l,props:h,accessCache:d,type:_,appContext:$}=s;let u;if(r[0]!=="$"){const E=d[r];if(E!==void 0)switch(E){case 1:return c[r];case 2:return l[r];case 4:return i[r];case 3:return h[r]}else{if(id(c,r))return d[r]=1,c[r];if(l!==pt&&ot(l,r))return d[r]=2,l[r];if((u=s.propsOptions[0])&&ot(u,r))return d[r]=3,h[r];if(i!==pt&&ot(i,r))return d[r]=4,i[r];Nd&&(d[r]=0)}}const g=bl[r];let m,b;if(g)return r==="$attrs"&&Ns(s,"get",r),g(s);if((m=_.__cssModules)&&(m=m[r]))return m;if(i!==pt&&ot(i,r))return d[r]=4,i[r];if(b=$.config.globalProperties,ot(b,r))return b[r]},set({_:s},r,i){const{data:c,setupState:l,ctx:h}=s;return id(l,r)?(l[r]=i,!0):c!==pt&&ot(c,r)?(c[r]=i,!0):ot(s.props,r)||r[0]==="$"&&r.slice(1)in s?!1:(h[r]=i,!0)},has({_:{data:s,setupState:r,accessCache:i,ctx:c,appContext:l,propsOptions:h}},d){let _;return!!i[d]||s!==pt&&ot(s,d)||id(r,d)||(_=h[0])&&ot(_,d)||ot(c,d)||ot(bl,d)||ot(l.config.globalProperties,d)},defineProperty(s,r,i){return i.get!=null?s._.accessCache[r]=0:ot(i,"value")&&this.set(s,r,i.value,null),Reflect.defineProperty(s,r,i)}};let Nd=!0;function zR(s){const r=bp(s),i=s.proxy,c=s.ctx;Nd=!1,r.beforeCreate&&d$(r.beforeCreate,s,"bc");const{data:l,computed:h,methods:d,watch:_,provide:$,inject:u,created:g,beforeMount:m,mounted:b,beforeUpdate:E,updated:I,activated:y,deactivated:F,beforeDestroy:B,beforeUnmount:N,destroyed:R,unmounted:z,render:le,renderTracked:he,renderTriggered:Q,errorCaptured:V,serverPrefetch:de,expose:J,inheritAttrs:ue,components:Z,directives:ne,filters:$e}=r;if(u&&KR(u,c,null,s.appContext.config.unwrapInjectedRef),d)for(const ke in d){const fe=d[ke];He(fe)&&(c[ke]=fe.bind(i))}if(l){const ke=l.call(i,i);_t(ke)&&(s.data=as(ke))}if(Nd=!0,h)for(const ke in h){const fe=h[ke],et=He(fe)?fe.bind(i,i):He(fe.get)?fe.get.bind(i,i):go,Se=!He(fe)&&He(fe.set)?fe.set.bind(i):go,A=X({get:et,set:Se});Object.defineProperty(c,ke,{enumerable:!0,configurable:!0,get:()=>A.value,set:oe=>A.value=oe})}if(_)for(const ke in _)$b(_[ke],c,i,ke);if($){const ke=He($)?$.call(i):$;Reflect.ownKeys(ke).forEach(fe=>{Si(fe,ke[fe])})}g&&d$(g,s,"c");function ce(ke,fe){Be(fe)?fe.forEach(et=>ke(et.bind(i))):fe&&ke(fe.bind(i))}if(ce(pb,m),ce(an,b),ce(FR,E),ce(_b,I),ce(xR,y),ce(BR,F),ce(VR,V),ce(HR,he),ce(UR,Q),ce(hr,N),ce(gb,z),ce(GR,de),Be(J))if(J.length){const ke=s.exposed||(s.exposed={});J.forEach(fe=>{Object.defineProperty(ke,fe,{get:()=>i[fe],set:et=>i[fe]=et})})}else s.exposed||(s.exposed={});le&&s.render===go&&(s.render=le),ue!=null&&(s.inheritAttrs=ue),Z&&(s.components=Z),ne&&(s.directives=ne)}function KR(s,r,i=go,c=!1){Be(s)&&(s=Dd(s));for(const l in s){const h=s[l];let d;_t(h)?"default"in h?d=os(h.from||l,h.default,!0):d=os(h.from||l):d=os(h),Et(d)&&c?Object.defineProperty(r,l,{enumerable:!0,configurable:!0,get:()=>d.value,set:_=>d.value=_}):r[l]=d}}function d$(s,r,i){Vs(Be(s)?s.map(c=>c.bind(r.proxy)):s.bind(r.proxy),r,i)}function $b(s,r,i,c){const l=c.includes(".")?cb(i,c):()=>i[c];if(wt(s)){const h=r[s];He(h)&&nt(l,h)}else if(He(s))nt(l,s.bind(i));else if(_t(s))if(Be(s))s.forEach(h=>$b(h,r,i,c));else{const h=He(s.handler)?s.handler.bind(i):r[s.handler];He(h)&&nt(l,h,s)}}function bp(s){const r=s.type,{mixins:i,extends:c}=r,{mixins:l,optionsCache:h,config:{optionMergeStrategies:d}}=s.appContext,_=h.get(r);let $;return _?$=_:!l.length&&!i&&!c?$=r:($={},l.length&&l.forEach(u=>$a($,u,d,!0)),$a($,r,d)),_t(r)&&h.set(r,$),$}function $a(s,r,i,c=!1){const{mixins:l,extends:h}=r;h&&$a(s,h,i,!0),l&&l.forEach(d=>$a(s,d,i,!0));for(const d in r)if(!(c&&d==="expose")){const _=JR[d]||i&&i[d];s[d]=_?_(s[d],r[d]):r[d]}return s}const JR={data:p$,props:Ji,emits:Ji,methods:Ji,computed:Ji,beforeCreate:cs,created:cs,beforeMount:cs,mounted:cs,beforeUpdate:cs,updated:cs,beforeDestroy:cs,beforeUnmount:cs,destroyed:cs,unmounted:cs,activated:cs,deactivated:cs,errorCaptured:cs,serverPrefetch:cs,components:Ji,directives:Ji,watch:ZR,provide:p$,inject:qR};function p$(s,r){return r?s?function(){return Vt(He(s)?s.call(this,this):s,He(r)?r.call(this,this):r)}:r:s}function qR(s,r){return Ji(Dd(s),Dd(r))}function Dd(s){if(Be(s)){const r={};for(let i=0;i<s.length;i++)r[s[i]]=s[i];return r}return s}function cs(s,r){return s?[...new Set([].concat(s,r))]:r}function Ji(s,r){return s?Vt(Vt(Object.create(null),s),r):r}function ZR(s,r){if(!s)return r;if(!r)return s;const i=Vt(Object.create(null),s);for(const c in r)i[c]=cs(s[c],r[c]);return i}function QR(s,r,i,c=!1){const l={},h={};ga(h,Ha,1),s.propsDefaults=Object.create(null),Tb(s,r,l,h);for(const d in s.propsOptions[0])d in l||(l[d]=void 0);i?s.props=c?l:KT(l):s.type.props?s.props=l:s.props=h,s.attrs=h}function eC(s,r,i,c){const{props:l,attrs:h,vnode:{patchFlag:d}}=s,_=it(l),[$]=s.propsOptions;let u=!1;if((c||d>0)&&!(d&16)){if(d&8){const g=s.vnode.dynamicProps;for(let m=0;m<g.length;m++){let b=g[m];if(Ba(s.emitsOptions,b))continue;const E=r[b];if($)if(ot(h,b))E!==h[b]&&(h[b]=E,u=!0);else{const I=Xs(b);l[I]=Md($,_,I,E,s,!1)}else E!==h[b]&&(h[b]=E,u=!0)}}}else{Tb(s,r,l,h)&&(u=!0);let g;for(const m in _)(!r||!ot(r,m)&&((g=cr(m))===m||!ot(r,g)))&&($?i&&(i[m]!==void 0||i[g]!==void 0)&&(l[m]=Md($,_,m,void 0,s,!0)):delete l[m]);if(h!==_)for(const m in h)(!r||!ot(r,m)&&!0)&&(delete h[m],u=!0)}u&&Jo(s,"set","$attrs")}function Tb(s,r,i,c){const[l,h]=s.propsOptions;let d=!1,_;if(r)for(let $ in r){if(ha($))continue;const u=r[$];let g;l&&ot(l,g=Xs($))?!h||!h.includes(g)?i[g]=u:(_||(_={}))[g]=u:Ba(s.emitsOptions,$)||(!($ in c)||u!==c[$])&&(c[$]=u,d=!0)}if(h){const $=it(i),u=_||pt;for(let g=0;g<h.length;g++){const m=h[g];i[m]=Md(l,$,m,u[m],s,!ot(u,m))}}return d}function Md(s,r,i,c,l,h){const d=s[i];if(d!=null){const _=ot(d,"default");if(_&&c===void 0){const $=d.default;if(d.type!==Function&&He($)){const{propsDefaults:u}=l;i in u?c=u[i]:(rr(l),c=u[i]=$.call(null,r),on())}else c=$}d[0]&&(h&&!_?c=!1:d[1]&&(c===""||c===cr(i))&&(c=!0))}return c}function bb(s,r,i=!1){const c=r.propsCache,l=c.get(s);if(l)return l;const h=s.props,d={},_=[];let $=!1;if(!He(s)){const g=m=>{$=!0;const[b,E]=bb(m,r,!0);Vt(d,b),E&&_.push(...E)};!i&&r.mixins.length&&r.mixins.forEach(g),s.extends&&g(s.extends),s.mixins&&s.mixins.forEach(g)}if(!h&&!$)return _t(s)&&c.set(s,Zn),Zn;if(Be(h))for(let g=0;g<h.length;g++){const m=Xs(h[g]);_$(m)&&(d[m]=pt)}else if(h)for(const g in h){const m=Xs(g);if(_$(m)){const b=h[g],E=d[m]=Be(b)||He(b)?{type:b}:Object.assign({},b);if(E){const I=m$(Boolean,E.type),y=m$(String,E.type);E[0]=I>-1,E[1]=y<0||I<y,(I>-1||ot(E,"default"))&&_.push(m)}}}const u=[d,_];return _t(s)&&c.set(s,u),u}function _$(s){return s[0]!=="$"}function g$(s){const r=s&&s.toString().match(/^\s*function (\w+)/);return r?r[1]:s===null?"null":""}function f$(s,r){return g$(s)===g$(r)}function m$(s,r){return Be(r)?r.findIndex(i=>f$(i,s)):He(r)&&f$(r,s)?0:-1}const Eb=s=>s[0]==="_"||s==="$stable",Ep=s=>Be(s)?s.map(wo):[wo(s)],tC=(s,r,i)=>{if(r._n)return r;const c=CR((...l)=>Ep(r(...l)),i);return c._c=!1,c},vb=(s,r,i)=>{const c=s._ctx;for(const l in s){if(Eb(l))continue;const h=s[l];if(He(h))r[l]=tC(l,h,c);else if(h!=null){const d=Ep(h);r[l]=()=>d}}},Ib=(s,r)=>{const i=Ep(r);s.slots.default=()=>i},sC=(s,r)=>{if(s.vnode.shapeFlag&32){const i=r._;i?(s.slots=it(r),ga(r,"_",i)):vb(r,s.slots={})}else s.slots={},r&&Ib(s,r);ga(s.slots,Ha,1)},oC=(s,r,i)=>{const{vnode:c,slots:l}=s;let h=!0,d=pt;if(c.shapeFlag&32){const _=r._;_?i&&_===1?h=!1:(Vt(l,r),!i&&_===1&&delete l._):(h=!r.$stable,vb(r,l)),d=r}else r&&(Ib(s,r),d={default:1});if(h)for(const _ in l)!Eb(_)&&!(_ in d)&&delete l[_]};function yb(){return{app:null,config:{isNativeTag:xS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let iC=0;function nC(s,r){return function(c,l=null){He(c)||(c=Object.assign({},c)),l!=null&&!_t(l)&&(l=null);const h=yb(),d=new Set;let _=!1;const $=h.app={_uid:iC++,_component:c,_props:l,_container:null,_context:h,_instance:null,version:kC,get config(){return h.config},set config(u){},use(u,...g){return d.has(u)||(u&&He(u.install)?(d.add(u),u.install($,...g)):He(u)&&(d.add(u),u($,...g))),$},mixin(u){return h.mixins.includes(u)||h.mixins.push(u),$},component(u,g){return g?(h.components[u]=g,$):h.components[u]},directive(u,g){return g?(h.directives[u]=g,$):h.directives[u]},mount(u,g,m){if(!_){const b=M(c,l);return b.appContext=h,g&&r?r(b,u):s(b,u,m),_=!0,$._container=u,u.__vue_app__=$,Wa(b.component)||b.component.proxy}},unmount(){_&&(s(null,$._container),delete $._container.__vue_app__)},provide(u,g){return h.provides[u]=g,$}};return $}}function xd(s,r,i,c,l=!1){if(Be(s)){s.forEach((b,E)=>xd(b,r&&(Be(r)?r[E]:r),i,c,l));return}if(Tl(c)&&!l)return;const h=c.shapeFlag&4?Wa(c.component)||c.component.proxy:c.el,d=l?null:h,{i:_,r:$}=s,u=r&&r.r,g=_.refs===pt?_.refs={}:_.refs,m=_.setupState;if(u!=null&&u!==$&&(wt(u)?(g[u]=null,ot(m,u)&&(m[u]=null)):Et(u)&&(u.value=null)),He($))bi($,_,12,[d,g]);else{const b=wt($),E=Et($);if(b||E){const I=()=>{if(s.f){const y=b?ot(m,$)?m[$]:g[$]:$.value;l?Be(y)&&tp(y,h):Be(y)?y.includes(h)||y.push(h):b?(g[$]=[h],ot(m,$)&&(m[$]=g[$])):($.value=[h],s.k&&(g[s.k]=$.value))}else b?(g[$]=d,ot(m,$)&&(m[$]=d)):E&&($.value=d,s.k&&(g[s.k]=d))};d?(I.id=-1,Ts(I,i)):I()}}}const Ts=NR;function rC(s){return lC(s)}function lC(s,r){const i=HS();i.__VUE__=!0;const{insert:c,remove:l,patchProp:h,createElement:d,createText:_,createComment:$,setText:u,setElementText:g,parentNode:m,nextSibling:b,setScopeId:E=go,insertStaticContent:I}=s,y=(C,L,U,K=null,Y=null,ee=null,re=!1,H=null,ie=!!L.dynamicChildren)=>{if(C===L)return;C&&!Zi(C,L)&&(K=St(C),oe(C,Y,ee,!0),C=null),L.patchFlag===-2&&(ie=!1,L.dynamicChildren=null);const{type:q,ref:Ee,shapeFlag:_e}=L;switch(q){case Ua:F(C,L,U,K);break;case Ws:B(C,L,U,K);break;case nd:C==null&&N(L,U,K,re);break;case Xt:Z(C,L,U,K,Y,ee,re,H,ie);break;default:_e&1?le(C,L,U,K,Y,ee,re,H,ie):_e&6?ne(C,L,U,K,Y,ee,re,H,ie):(_e&64||_e&128)&&q.process(C,L,U,K,Y,ee,re,H,ie,Kt)}Ee!=null&&Y&&xd(Ee,C&&C.ref,ee,L||C,!L)},F=(C,L,U,K)=>{if(C==null)c(L.el=_(L.children),U,K);else{const Y=L.el=C.el;L.children!==C.children&&u(Y,L.children)}},B=(C,L,U,K)=>{C==null?c(L.el=$(L.children||""),U,K):L.el=C.el},N=(C,L,U,K)=>{[C.el,C.anchor]=I(C.children,L,U,K,C.el,C.anchor)},R=({el:C,anchor:L},U,K)=>{let Y;for(;C&&C!==L;)Y=b(C),c(C,U,K),C=Y;c(L,U,K)},z=({el:C,anchor:L})=>{let U;for(;C&&C!==L;)U=b(C),l(C),C=U;l(L)},le=(C,L,U,K,Y,ee,re,H,ie)=>{re=re||L.type==="svg",C==null?he(L,U,K,Y,ee,re,H,ie):de(C,L,Y,ee,re,H,ie)},he=(C,L,U,K,Y,ee,re,H)=>{let ie,q;const{type:Ee,props:_e,shapeFlag:ye,transition:Oe,dirs:Le}=C;if(ie=C.el=d(C.type,ee,_e&&_e.is,_e),ye&8?g(ie,C.children):ye&16&&V(C.children,ie,null,K,Y,ee&&Ee!=="foreignObject",re,H),Le&&Yi(C,null,K,"created"),_e){for(const j in _e)j!=="value"&&!ha(j)&&h(ie,j,null,_e[j],ee,C.children,K,Y,be);"value"in _e&&h(ie,"value",null,_e.value),(q=_e.onVnodeBeforeMount)&&Oo(q,K,C)}Q(ie,C,C.scopeId,re,K),Le&&Yi(C,null,K,"beforeMount");const Xe=(!Y||Y&&!Y.pendingBranch)&&Oe&&!Oe.persisted;Xe&&Oe.beforeEnter(ie),c(ie,L,U),((q=_e&&_e.onVnodeMounted)||Xe||Le)&&Ts(()=>{q&&Oo(q,K,C),Xe&&Oe.enter(ie),Le&&Yi(C,null,K,"mounted")},Y)},Q=(C,L,U,K,Y)=>{if(U&&E(C,U),K)for(let ee=0;ee<K.length;ee++)E(C,K[ee]);if(Y){let ee=Y.subTree;if(L===ee){const re=Y.vnode;Q(C,re,re.scopeId,re.slotScopeIds,Y.parent)}}},V=(C,L,U,K,Y,ee,re,H,ie=0)=>{for(let q=ie;q<C.length;q++){const Ee=C[q]=H?mi(C[q]):wo(C[q]);y(null,Ee,L,U,K,Y,ee,re,H)}},de=(C,L,U,K,Y,ee,re)=>{const H=L.el=C.el;let{patchFlag:ie,dynamicChildren:q,dirs:Ee}=L;ie|=C.patchFlag&16;const _e=C.props||pt,ye=L.props||pt;let Oe;U&&zi(U,!1),(Oe=ye.onVnodeBeforeUpdate)&&Oo(Oe,U,L,C),Ee&&Yi(L,C,U,"beforeUpdate"),U&&zi(U,!0);const Le=Y&&L.type!=="foreignObject";if(q?J(C.dynamicChildren,q,H,U,K,Le,ee):re||fe(C,L,H,null,U,K,Le,ee,!1),ie>0){if(ie&16)ue(H,L,_e,ye,U,K,Y);else if(ie&2&&_e.class!==ye.class&&h(H,"class",null,ye.class,Y),ie&4&&h(H,"style",_e.style,ye.style,Y),ie&8){const Xe=L.dynamicProps;for(let j=0;j<Xe.length;j++){const at=Xe[j],Jt=_e[at],ds=ye[at];(ds!==Jt||at==="value")&&h(H,at,Jt,ds,Y,C.children,U,K,be)}}ie&1&&C.children!==L.children&&g(H,L.children)}else!re&&q==null&&ue(H,L,_e,ye,U,K,Y);((Oe=ye.onVnodeUpdated)||Ee)&&Ts(()=>{Oe&&Oo(Oe,U,L,C),Ee&&Yi(L,C,U,"updated")},K)},J=(C,L,U,K,Y,ee,re)=>{for(let H=0;H<L.length;H++){const ie=C[H],q=L[H],Ee=ie.el&&(ie.type===Xt||!Zi(ie,q)||ie.shapeFlag&70)?m(ie.el):U;y(ie,q,Ee,null,K,Y,ee,re,!0)}},ue=(C,L,U,K,Y,ee,re)=>{if(U!==K){if(U!==pt)for(const H in U)!ha(H)&&!(H in K)&&h(C,H,U[H],null,re,L.children,Y,ee,be);for(const H in K){if(ha(H))continue;const ie=K[H],q=U[H];ie!==q&&H!=="value"&&h(C,H,q,ie,re,L.children,Y,ee,be)}"value"in K&&h(C,"value",U.value,K.value)}},Z=(C,L,U,K,Y,ee,re,H,ie)=>{const q=L.el=C?C.el:_(""),Ee=L.anchor=C?C.anchor:_("");let{patchFlag:_e,dynamicChildren:ye,slotScopeIds:Oe}=L;Oe&&(H=H?H.concat(Oe):Oe),C==null?(c(q,U,K),c(Ee,U,K),V(L.children,U,Ee,Y,ee,re,H,ie)):_e>0&&_e&64&&ye&&C.dynamicChildren?(J(C.dynamicChildren,ye,U,Y,ee,re,H),(L.key!=null||Y&&L===Y.subTree)&&vp(C,L,!0)):fe(C,L,U,Ee,Y,ee,re,H,ie)},ne=(C,L,U,K,Y,ee,re,H,ie)=>{L.slotScopeIds=H,C==null?L.shapeFlag&512?Y.ctx.activate(L,U,K,re,ie):$e(L,U,K,Y,ee,re,ie):Ae(C,L,ie)},$e=(C,L,U,K,Y,ee,re)=>{const H=C.component=TC(C,K,Y);if(Fa(C)&&(H.ctx.renderer=Kt),bC(H),H.asyncDep){if(Y&&Y.registerDep(H,ce),!C.el){const ie=H.subTree=M(Ws);B(null,ie,L,U)}return}ce(H,C,L,U,Y,ee,re)},Ae=(C,L,U)=>{const K=L.component=C.component;if(wR(C,L,U))if(K.asyncDep&&!K.asyncResolved){ke(K,L,U);return}else K.next=L,IR(K.update),K.update();else L.el=C.el,K.vnode=L},ce=(C,L,U,K,Y,ee,re)=>{const H=()=>{if(C.isMounted){let{next:Ee,bu:_e,u:ye,parent:Oe,vnode:Le}=C,Xe=Ee,j;zi(C,!1),Ee?(Ee.el=Le.el,ke(C,Ee,re)):Ee=Le,_e&&ed(_e),(j=Ee.props&&Ee.props.onVnodeBeforeUpdate)&&Oo(j,Oe,Ee,Le),zi(C,!0);const at=td(C),Jt=C.subTree;C.subTree=at,y(Jt,at,m(Jt.el),St(Jt),C,Y,ee),Ee.el=at.el,Xe===null&&AR(C,at.el),ye&&Ts(ye,Y),(j=Ee.props&&Ee.props.onVnodeUpdated)&&Ts(()=>Oo(j,Oe,Ee,Le),Y)}else{let Ee;const{el:_e,props:ye}=L,{bm:Oe,m:Le,parent:Xe}=C,j=Tl(L);if(zi(C,!1),Oe&&ed(Oe),!j&&(Ee=ye&&ye.onVnodeBeforeMount)&&Oo(Ee,Xe,L),zi(C,!0),_e&&Is){const at=()=>{C.subTree=td(C),Is(_e,C.subTree,C,Y,null)};j?L.type.__asyncLoader().then(()=>!C.isUnmounted&&at()):at()}else{const at=C.subTree=td(C);y(null,at,U,K,C,Y,ee),L.el=at.el}if(Le&&Ts(Le,Y),!j&&(Ee=ye&&ye.onVnodeMounted)){const at=L;Ts(()=>Oo(Ee,Xe,at),Y)}(L.shapeFlag&256||Xe&&Tl(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&C.a&&Ts(C.a,Y),C.isMounted=!0,L=U=K=null}},ie=C.effect=new rp(H,()=>_p(q),C.scope),q=C.update=()=>ie.run();q.id=C.uid,zi(C,!0),q()},ke=(C,L,U)=>{L.component=C;const K=C.vnode.props;C.vnode=L,C.next=null,eC(C,L.props,K,U),oC(C,L.children,U),ar(),c$(),ur()},fe=(C,L,U,K,Y,ee,re,H,ie=!1)=>{const q=C&&C.children,Ee=C?C.shapeFlag:0,_e=L.children,{patchFlag:ye,shapeFlag:Oe}=L;if(ye>0){if(ye&128){Se(q,_e,U,K,Y,ee,re,H,ie);return}else if(ye&256){et(q,_e,U,K,Y,ee,re,H,ie);return}}Oe&8?(Ee&16&&be(q,Y,ee),_e!==q&&g(U,_e)):Ee&16?Oe&16?Se(q,_e,U,K,Y,ee,re,H,ie):be(q,Y,ee,!0):(Ee&8&&g(U,""),Oe&16&&V(_e,U,K,Y,ee,re,H,ie))},et=(C,L,U,K,Y,ee,re,H,ie)=>{C=C||Zn,L=L||Zn;const q=C.length,Ee=L.length,_e=Math.min(q,Ee);let ye;for(ye=0;ye<_e;ye++){const Oe=L[ye]=ie?mi(L[ye]):wo(L[ye]);y(C[ye],Oe,U,null,Y,ee,re,H,ie)}q>Ee?be(C,Y,ee,!0,!1,_e):V(L,U,K,Y,ee,re,H,ie,_e)},Se=(C,L,U,K,Y,ee,re,H,ie)=>{let q=0;const Ee=L.length;let _e=C.length-1,ye=Ee-1;for(;q<=_e&&q<=ye;){const Oe=C[q],Le=L[q]=ie?mi(L[q]):wo(L[q]);if(Zi(Oe,Le))y(Oe,Le,U,null,Y,ee,re,H,ie);else break;q++}for(;q<=_e&&q<=ye;){const Oe=C[_e],Le=L[ye]=ie?mi(L[ye]):wo(L[ye]);if(Zi(Oe,Le))y(Oe,Le,U,null,Y,ee,re,H,ie);else break;_e--,ye--}if(q>_e){if(q<=ye){const Oe=ye+1,Le=Oe<Ee?L[Oe].el:K;for(;q<=ye;)y(null,L[q]=ie?mi(L[q]):wo(L[q]),U,Le,Y,ee,re,H,ie),q++}}else if(q>ye)for(;q<=_e;)oe(C[q],Y,ee,!0),q++;else{const Oe=q,Le=q,Xe=new Map;for(q=Le;q<=ye;q++){const f=L[q]=ie?mi(L[q]):wo(L[q]);f.key!=null&&Xe.set(f.key,q)}let j,at=0;const Jt=ye-Le+1;let ds=!1,No=0;const zs=new Array(Jt);for(q=0;q<Jt;q++)zs[q]=0;for(q=Oe;q<=_e;q++){const f=C[q];if(at>=Jt){oe(f,Y,ee,!0);continue}let v;if(f.key!=null)v=Xe.get(f.key);else for(j=Le;j<=ye;j++)if(zs[j-Le]===0&&Zi(f,L[j])){v=j;break}v===void 0?oe(f,Y,ee,!0):(zs[v-Le]=q+1,v>=No?No=v:ds=!0,y(f,L[v],U,null,Y,ee,re,H,ie),at++)}const Mt=ds?cC(zs):Zn;for(j=Mt.length-1,q=Jt-1;q>=0;q--){const f=Le+q,v=L[f],O=f+1<Ee?L[f+1].el:K;zs[q]===0?y(null,v,U,O,Y,ee,re,H,ie):ds&&(j<0||q!==Mt[j]?A(v,U,O,2):j--)}}},A=(C,L,U,K,Y=null)=>{const{el:ee,type:re,transition:H,children:ie,shapeFlag:q}=C;if(q&6){A(C.component.subTree,L,U,K);return}if(q&128){C.suspense.move(L,U,K);return}if(q&64){re.move(C,L,U,Kt);return}if(re===Xt){c(ee,L,U);for(let _e=0;_e<ie.length;_e++)A(ie[_e],L,U,K);c(C.anchor,L,U);return}if(re===nd){R(C,L,U);return}if(K!==2&&q&1&&H)if(K===0)H.beforeEnter(ee),c(ee,L,U),Ts(()=>H.enter(ee),Y);else{const{leave:_e,delayLeave:ye,afterLeave:Oe}=H,Le=()=>c(ee,L,U),Xe=()=>{_e(ee,()=>{Le(),Oe&&Oe()})};ye?ye(ee,Le,Xe):Xe()}else c(ee,L,U)},oe=(C,L,U,K=!1,Y=!1)=>{const{type:ee,props:re,ref:H,children:ie,dynamicChildren:q,shapeFlag:Ee,patchFlag:_e,dirs:ye}=C;if(H!=null&&xd(H,null,U,C,!0),Ee&256){L.ctx.deactivate(C);return}const Oe=Ee&1&&ye,Le=!Tl(C);let Xe;if(Le&&(Xe=re&&re.onVnodeBeforeUnmount)&&Oo(Xe,L,C),Ee&6)Ys(C.component,U,K);else{if(Ee&128){C.suspense.unmount(U,K);return}Oe&&Yi(C,null,L,"beforeUnmount"),Ee&64?C.type.remove(C,L,U,Y,Kt,K):q&&(ee!==Xt||_e>0&&_e&64)?be(q,L,U,!1,!0):(ee===Xt&&_e&384||!Y&&Ee&16)&&be(ie,L,U),K&&Ft(C)}(Le&&(Xe=re&&re.onVnodeUnmounted)||Oe)&&Ts(()=>{Xe&&Oo(Xe,L,C),Oe&&Yi(C,null,L,"unmounted")},U)},Ft=C=>{const{type:L,el:U,anchor:K,transition:Y}=C;if(L===Xt){Pe(U,K);return}if(L===nd){z(C);return}const ee=()=>{l(U),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(C.shapeFlag&1&&Y&&!Y.persisted){const{leave:re,delayLeave:H}=Y,ie=()=>re(U,ee);H?H(C.el,ee,ie):ie()}else ee()},Pe=(C,L)=>{let U;for(;C!==L;)U=b(C),l(C),C=U;l(L)},Ys=(C,L,U)=>{const{bum:K,scope:Y,update:ee,subTree:re,um:H}=C;K&&ed(K),Y.stop(),ee&&(ee.active=!1,oe(re,C,L,U)),H&&Ts(H,L),Ts(()=>{C.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},be=(C,L,U,K=!1,Y=!1,ee=0)=>{for(let re=ee;re<C.length;re++)oe(C[re],L,U,K,Y)},St=C=>C.shapeFlag&6?St(C.component.subTree):C.shapeFlag&128?C.suspense.next():b(C.anchor||C.el),hs=(C,L,U)=>{C==null?L._vnode&&oe(L._vnode,null,null,!0):y(L._vnode||null,C,L,null,null,null,U),c$(),nb(),L._vnode=C},Kt={p:y,um:oe,m:A,r:Ft,mt:$e,mc:V,pc:fe,pbc:J,n:St,o:s};let vs,Is;return r&&([vs,Is]=r(Kt)),{render:hs,hydrate:vs,createApp:nC(hs,vs)}}function zi({effect:s,update:r},i){s.allowRecurse=r.allowRecurse=i}function vp(s,r,i=!1){const c=s.children,l=r.children;if(Be(c)&&Be(l))for(let h=0;h<c.length;h++){const d=c[h];let _=l[h];_.shapeFlag&1&&!_.dynamicChildren&&((_.patchFlag<=0||_.patchFlag===32)&&(_=l[h]=mi(l[h]),_.el=d.el),i||vp(d,_)),_.type===Ua&&(_.el=d.el)}}function cC(s){const r=s.slice(),i=[0];let c,l,h,d,_;const $=s.length;for(c=0;c<$;c++){const u=s[c];if(u!==0){if(l=i[i.length-1],s[l]<u){r[c]=l,i.push(c);continue}for(h=0,d=i.length-1;h<d;)_=h+d>>1,s[i[_]]<u?h=_+1:d=_;u<s[i[h]]&&(h>0&&(r[c]=i[h-1]),i[h]=c)}}for(h=i.length,d=i[h-1];h-- >0;)i[h]=d,d=r[d];return i}const aC=s=>s.__isTeleport,El=s=>s&&(s.disabled||s.disabled===""),$$=s=>typeof SVGElement<"u"&&s instanceof SVGElement,Bd=(s,r)=>{const i=s&&s.to;return wt(i)?r?r(i):null:i},uC={__isTeleport:!0,process(s,r,i,c,l,h,d,_,$,u){const{mc:g,pc:m,pbc:b,o:{insert:E,querySelector:I,createText:y,createComment:F}}=u,B=El(r.props);let{shapeFlag:N,children:R,dynamicChildren:z}=r;if(s==null){const le=r.el=y(""),he=r.anchor=y("");E(le,i,c),E(he,i,c);const Q=r.target=Bd(r.props,I),V=r.targetAnchor=y("");Q&&(E(V,Q),d=d||$$(Q));const de=(J,ue)=>{N&16&&g(R,J,ue,l,h,d,_,$)};B?de(i,he):Q&&de(Q,V)}else{r.el=s.el;const le=r.anchor=s.anchor,he=r.target=s.target,Q=r.targetAnchor=s.targetAnchor,V=El(s.props),de=V?i:he,J=V?le:Q;if(d=d||$$(he),z?(b(s.dynamicChildren,z,de,l,h,d,_),vp(s,r,!0)):$||m(s,r,de,J,l,h,d,_,!1),B)V||ra(r,i,le,u,1);else if((r.props&&r.props.to)!==(s.props&&s.props.to)){const ue=r.target=Bd(r.props,I);ue&&ra(r,ue,null,u,0)}else V&&ra(r,he,Q,u,1)}Sb(r)},remove(s,r,i,c,{um:l,o:{remove:h}},d){const{shapeFlag:_,children:$,anchor:u,targetAnchor:g,target:m,props:b}=s;if(m&&h(g),(d||!El(b))&&(h(u),_&16))for(let E=0;E<$.length;E++){const I=$[E];l(I,r,i,!0,!!I.dynamicChildren)}},move:ra,hydrate:hC};function ra(s,r,i,{o:{insert:c},m:l},h=2){h===0&&c(s.targetAnchor,r,i);const{el:d,anchor:_,shapeFlag:$,children:u,props:g}=s,m=h===2;if(m&&c(d,r,i),(!m||El(g))&&$&16)for(let b=0;b<u.length;b++)l(u[b],r,i,2);m&&c(_,r,i)}function hC(s,r,i,c,l,h,{o:{nextSibling:d,parentNode:_,querySelector:$}},u){const g=r.target=Bd(r.props,$);if(g){const m=g._lpa||g.firstChild;if(r.shapeFlag&16)if(El(r.props))r.anchor=u(d(s),r,_(s),i,c,l,h),r.targetAnchor=m;else{r.anchor=d(s);let b=m;for(;b;)if(b=d(b),b&&b.nodeType===8&&b.data==="teleport anchor"){r.targetAnchor=b,g._lpa=r.targetAnchor&&d(r.targetAnchor);break}u(m,r,g,i,c,l,h)}Sb(r)}return r.anchor&&d(r.anchor)}const dC=uC;function Sb(s){const r=s.ctx;if(r&&r.ut){let i=s.children[0].el;for(;i!==s.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",r.uid),i=i.nextSibling;r.ut()}}const Xt=Symbol(void 0),Ua=Symbol(void 0),Ws=Symbol(void 0),nd=Symbol(void 0),vl=[];let _o=null;function Ta(s=!1){vl.push(_o=s?null:[])}function pC(){vl.pop(),_o=vl[vl.length-1]||null}let Al=1;function T$(s){Al+=s}function Rb(s){return s.dynamicChildren=Al>0?_o||Zn:null,pC(),Al>0&&_o&&_o.push(s),s}function b$(s,r,i,c,l,h){return Rb(Ip(s,r,i,c,l,h,!0))}function Cb(s,r,i,c,l){return Rb(M(s,r,i,c,l,!0))}function ba(s){return s?s.__v_isVNode===!0:!1}function Zi(s,r){return s.type===r.type&&s.key===r.key}const Ha="__vInternal",kb=({key:s})=>s!=null?s:null,pa=({ref:s,ref_key:r,ref_for:i})=>s!=null?wt(s)||Et(s)||He(s)?{i:Yt,r:s,k:r,f:!!i}:s:null;function Ip(s,r=null,i=null,c=0,l=null,h=s===Xt?0:1,d=!1,_=!1){const $={__v_isVNode:!0,__v_skip:!0,type:s,props:r,key:r&&kb(r),ref:r&&pa(r),scopeId:Pa,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:h,patchFlag:c,dynamicProps:l,dynamicChildren:null,appContext:null,ctx:Yt};return _?(yp($,i),h&128&&s.normalize($)):i&&($.shapeFlag|=wt(i)?8:16),Al>0&&!d&&_o&&($.patchFlag>0||h&6)&&$.patchFlag!==32&&_o.push($),$}const M=_C;function _C(s,r=null,i=null,c=0,l=null,h=!1){if((!s||s===fb)&&(s=Ws),ba(s)){const _=yi(s,r,!0);return i&&yp(_,i),Al>0&&!h&&_o&&(_.shapeFlag&6?_o[_o.indexOf(s)]=_:_o.push(_)),_.patchFlag|=-2,_}if(SC(s)&&(s=s.__vccOpts),r){r=gC(r);let{class:_,style:$}=r;_&&!wt(_)&&(r.class=Aa(_)),_t($)&&(JT($)&&!Be($)&&($=Vt({},$)),r.style=Qd($))}const d=wt(s)?1:LR(s)?128:aC(s)?64:_t(s)?4:He(s)?2:0;return Ip(s,r,i,c,l,d,h,!0)}function gC(s){return s?JT(s)||Ha in s?Vt({},s):s:null}function yi(s,r,i=!1){const{props:c,ref:l,patchFlag:h,children:d}=s,_=r?ss(c||{},r):c;return{__v_isVNode:!0,__v_skip:!0,type:s.type,props:_,key:_&&kb(_),ref:r&&r.ref?i&&l?Be(l)?l.concat(pa(r)):[l,pa(r)]:pa(r):l,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:d,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:r&&s.type!==Xt?h===-1?16:h|16:h,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:s.transition,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&yi(s.ssContent),ssFallback:s.ssFallback&&yi(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx}}function Pd(s=" ",r=0){return M(Ua,null,s,r)}function fC(s="",r=!1){return r?(Ta(),Cb(Ws,null,s)):M(Ws,null,s)}function wo(s){return s==null||typeof s=="boolean"?M(Ws):Be(s)?M(Xt,null,s.slice()):typeof s=="object"?mi(s):M(Ua,null,String(s))}function mi(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:yi(s)}function yp(s,r){let i=0;const{shapeFlag:c}=s;if(r==null)r=null;else if(Be(r))i=16;else if(typeof r=="object")if(c&65){const l=r.default;l&&(l._c&&(l._d=!1),yp(s,l()),l._c&&(l._d=!0));return}else{i=32;const l=r._;!l&&!(Ha in r)?r._ctx=Yt:l===3&&Yt&&(Yt.slots._===1?r._=1:(r._=2,s.patchFlag|=1024))}else He(r)?(r={default:r,_ctx:Yt},i=32):(r=String(r),c&64?(i=16,r=[Pd(r)]):i=8);s.children=r,s.shapeFlag|=i}function ss(...s){const r={};for(let i=0;i<s.length;i++){const c=s[i];for(const l in c)if(l==="class")r.class!==c.class&&(r.class=Aa([r.class,c.class]));else if(l==="style")r.style=Qd([r.style,c.style]);else if(La(l)){const h=r[l],d=c[l];d&&h!==d&&!(Be(h)&&h.includes(d))&&(r[l]=h?[].concat(h,d):d)}else l!==""&&(r[l]=c[l])}return r}function Oo(s,r,i,c=null){Vs(s,r,7,[i,c])}const mC=yb();let $C=0;function TC(s,r,i){const c=s.type,l=(r?r.appContext:s.appContext)||mC,h={uid:$C++,vnode:s,type:c,parent:r,appContext:l,root:null,next:null,subTree:null,effect:null,update:null,scope:new PT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(l.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bb(c,l),emitsOptions:lb(c,l),emit:null,emitted:null,propsDefaults:pt,inheritAttrs:c.inheritAttrs,ctx:pt,data:pt,props:pt,attrs:pt,slots:pt,refs:pt,setupState:pt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return h.ctx={_:h},h.root=r?r.root:h,h.emit=RR.bind(null,h),s.ce&&s.ce(h),h}let Ht=null;const Va=()=>Ht||Yt,rr=s=>{Ht=s,s.scope.on()},on=()=>{Ht&&Ht.scope.off(),Ht=null};function Ob(s){return s.vnode.shapeFlag&4}let Ll=!1;function bC(s,r=!1){Ll=r;const{props:i,children:c}=s.vnode,l=Ob(s);QR(s,i,l,r),sC(s,c);const h=l?EC(s,r):void 0;return Ll=!1,h}function EC(s,r){const i=s.type;s.accessCache=Object.create(null),s.proxy=qT(new Proxy(s.ctx,YR));const{setup:c}=i;if(c){const l=s.setupContext=c.length>1?IC(s):null;rr(s),ar();const h=bi(c,s,0,[s.props,l]);if(ur(),on(),MT(h)){if(h.then(on,on),r)return h.then(d=>{E$(s,d,r)}).catch(d=>{xa(d,s,0)});s.asyncDep=h}else E$(s,h,r)}else wb(s,r)}function E$(s,r,i){He(r)?s.type.__ssrInlineRender?s.ssrRender=r:s.render=r:_t(r)&&(s.setupState=tb(r)),wb(s,i)}let v$;function wb(s,r,i){const c=s.type;if(!s.render){if(!r&&v$&&!c.render){const l=c.template||bp(s).template;if(l){const{isCustomElement:h,compilerOptions:d}=s.appContext.config,{delimiters:_,compilerOptions:$}=c,u=Vt(Vt({isCustomElement:h,delimiters:_},d),$);c.render=v$(l,u)}}s.render=c.render||go}rr(s),ar(),zR(s),ur(),on()}function vC(s){return new Proxy(s.attrs,{get(r,i){return Ns(s,"get","$attrs"),r[i]}})}function IC(s){const r=c=>{s.exposed=c||{}};let i;return{get attrs(){return i||(i=vC(s))},slots:s.slots,emit:s.emit,expose:r}}function Wa(s){if(s.exposed)return s.exposeProxy||(s.exposeProxy=new Proxy(tb(qT(s.exposed)),{get(r,i){if(i in r)return r[i];if(i in bl)return bl[i](s)},has(r,i){return i in r||i in bl}}))}function yC(s,r=!0){return He(s)?s.displayName||s.name:s.name||r&&s.__name}function SC(s){return He(s)&&"__vccOpts"in s}const X=(s,r)=>bR(s,r,Ll);function Ri(s,r,i){const c=arguments.length;return c===2?_t(r)&&!Be(r)?ba(r)?M(s,null,[r]):M(s,r):M(s,null,r):(c>3?i=Array.prototype.slice.call(arguments,2):c===3&&ba(i)&&(i=[i]),M(s,r,i))}const RC=Symbol(""),CC=()=>os(RC),kC="3.2.45",OC="http://www.w3.org/2000/svg",Qi=typeof document<"u"?document:null,I$=Qi&&Qi.createElement("template"),wC={insert:(s,r,i)=>{r.insertBefore(s,i||null)},remove:s=>{const r=s.parentNode;r&&r.removeChild(s)},createElement:(s,r,i,c)=>{const l=r?Qi.createElementNS(OC,s):Qi.createElement(s,i?{is:i}:void 0);return s==="select"&&c&&c.multiple!=null&&l.setAttribute("multiple",c.multiple),l},createText:s=>Qi.createTextNode(s),createComment:s=>Qi.createComment(s),setText:(s,r)=>{s.nodeValue=r},setElementText:(s,r)=>{s.textContent=r},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Qi.querySelector(s),setScopeId(s,r){s.setAttribute(r,"")},insertStaticContent(s,r,i,c,l,h){const d=i?i.previousSibling:r.lastChild;if(l&&(l===h||l.nextSibling))for(;r.insertBefore(l.cloneNode(!0),i),!(l===h||!(l=l.nextSibling)););else{I$.innerHTML=c?`<svg>${s}</svg>`:s;const _=I$.content;if(c){const $=_.firstChild;for(;$.firstChild;)_.appendChild($.firstChild);_.removeChild($)}r.insertBefore(_,i)}return[d?d.nextSibling:r.firstChild,i?i.previousSibling:r.lastChild]}};function AC(s,r,i){const c=s._vtc;c&&(r=(r?[r,...c]:[...c]).join(" ")),r==null?s.removeAttribute("class"):i?s.setAttribute("class",r):s.className=r}function LC(s,r,i){const c=s.style,l=wt(i);if(i&&!l){for(const h in i)Fd(c,h,i[h]);if(r&&!wt(r))for(const h in r)i[h]==null&&Fd(c,h,"")}else{const h=c.display;l?r!==i&&(c.cssText=i):r&&s.removeAttribute("style"),"_vod"in s&&(c.display=h)}}const y$=/\s*!important$/;function Fd(s,r,i){if(Be(i))i.forEach(c=>Fd(s,r,c));else if(i==null&&(i=""),r.startsWith("--"))s.setProperty(r,i);else{const c=NC(s,r);y$.test(i)?s.setProperty(cr(c),i.replace(y$,""),"important"):s[c]=i}}const S$=["Webkit","Moz","ms"],rd={};function NC(s,r){const i=rd[r];if(i)return i;let c=Xs(r);if(c!=="filter"&&c in s)return rd[r]=c;c=ln(c);for(let l=0;l<S$.length;l++){const h=S$[l]+c;if(h in s)return rd[r]=h}return r}const R$="http://www.w3.org/1999/xlink";function DC(s,r,i,c,l){if(c&&r.startsWith("xlink:"))i==null?s.removeAttributeNS(R$,r.slice(6,r.length)):s.setAttributeNS(R$,r,i);else{const h=MS(r);i==null||h&&!LT(i)?s.removeAttribute(r):s.setAttribute(r,h?"":i)}}function MC(s,r,i,c,l,h,d){if(r==="innerHTML"||r==="textContent"){c&&d(c,l,h),s[r]=i==null?"":i;return}if(r==="value"&&s.tagName!=="PROGRESS"&&!s.tagName.includes("-")){s._value=i;const $=i==null?"":i;(s.value!==$||s.tagName==="OPTION")&&(s.value=$),i==null&&s.removeAttribute(r);return}let _=!1;if(i===""||i==null){const $=typeof s[r];$==="boolean"?i=LT(i):i==null&&$==="string"?(i="",_=!0):$==="number"&&(i=0,_=!0)}try{s[r]=i}catch{}_&&s.removeAttribute(r)}function xC(s,r,i,c){s.addEventListener(r,i,c)}function BC(s,r,i,c){s.removeEventListener(r,i,c)}function PC(s,r,i,c,l=null){const h=s._vei||(s._vei={}),d=h[r];if(c&&d)d.value=c;else{const[_,$]=FC(r);if(c){const u=h[r]=HC(c,l);xC(s,_,u,$)}else d&&(BC(s,_,d,$),h[r]=void 0)}}const C$=/(?:Once|Passive|Capture)$/;function FC(s){let r;if(C$.test(s)){r={};let c;for(;c=s.match(C$);)s=s.slice(0,s.length-c[0].length),r[c[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):cr(s.slice(2)),r]}let ld=0;const GC=Promise.resolve(),UC=()=>ld||(GC.then(()=>ld=0),ld=Date.now());function HC(s,r){const i=c=>{if(!c._vts)c._vts=Date.now();else if(c._vts<=i.attached)return;Vs(VC(c,i.value),r,5,[c])};return i.value=s,i.attached=UC(),i}function VC(s,r){if(Be(r)){const i=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{i.call(s),s._stopped=!0},r.map(c=>l=>!l._stopped&&c&&c(l))}else return r}const k$=/^on[a-z]/,WC=(s,r,i,c,l=!1,h,d,_,$)=>{r==="class"?AC(s,c,l):r==="style"?LC(s,i,c):La(r)?ep(r)||PC(s,r,i,c,d):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):jC(s,r,c,l))?MC(s,r,c,h,d,_,$):(r==="true-value"?s._trueValue=c:r==="false-value"&&(s._falseValue=c),DC(s,r,c,l))};function jC(s,r,i,c){return c?!!(r==="innerHTML"||r==="textContent"||r in s&&k$.test(r)&&He(i)):r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&s.tagName==="INPUT"||r==="type"&&s.tagName==="TEXTAREA"||k$.test(r)&&wt(i)?!1:r in s}const gi="transition",pl="animation",un=(s,{slots:r})=>Ri(ub,Lb(s),r);un.displayName="Transition";const Ab={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},XC=un.props=Vt({},ub.props,Ab),Ki=(s,r=[])=>{Be(s)?s.forEach(i=>i(...r)):s&&s(...r)},O$=s=>s?Be(s)?s.some(r=>r.length>1):s.length>1:!1;function Lb(s){const r={};for(const Z in s)Z in Ab||(r[Z]=s[Z]);if(s.css===!1)return r;const{name:i="v",type:c,duration:l,enterFromClass:h=`${i}-enter-from`,enterActiveClass:d=`${i}-enter-active`,enterToClass:_=`${i}-enter-to`,appearFromClass:$=h,appearActiveClass:u=d,appearToClass:g=_,leaveFromClass:m=`${i}-leave-from`,leaveActiveClass:b=`${i}-leave-active`,leaveToClass:E=`${i}-leave-to`}=s,I=YC(l),y=I&&I[0],F=I&&I[1],{onBeforeEnter:B,onEnter:N,onEnterCancelled:R,onLeave:z,onLeaveCancelled:le,onBeforeAppear:he=B,onAppear:Q=N,onAppearCancelled:V=R}=r,de=(Z,ne,$e)=>{fi(Z,ne?g:_),fi(Z,ne?u:d),$e&&$e()},J=(Z,ne)=>{Z._isLeaving=!1,fi(Z,m),fi(Z,E),fi(Z,b),ne&&ne()},ue=Z=>(ne,$e)=>{const Ae=Z?Q:N,ce=()=>de(ne,Z,$e);Ki(Ae,[ne,ce]),w$(()=>{fi(ne,Z?$:h),zo(ne,Z?g:_),O$(Ae)||A$(ne,c,y,ce)})};return Vt(r,{onBeforeEnter(Z){Ki(B,[Z]),zo(Z,h),zo(Z,d)},onBeforeAppear(Z){Ki(he,[Z]),zo(Z,$),zo(Z,u)},onEnter:ue(!1),onAppear:ue(!0),onLeave(Z,ne){Z._isLeaving=!0;const $e=()=>J(Z,ne);zo(Z,m),Db(),zo(Z,b),w$(()=>{!Z._isLeaving||(fi(Z,m),zo(Z,E),O$(z)||A$(Z,c,F,$e))}),Ki(z,[Z,$e])},onEnterCancelled(Z){de(Z,!1),Ki(R,[Z])},onAppearCancelled(Z){de(Z,!0),Ki(V,[Z])},onLeaveCancelled(Z){J(Z),Ki(le,[Z])}})}function YC(s){if(s==null)return null;if(_t(s))return[cd(s.enter),cd(s.leave)];{const r=cd(s);return[r,r]}}function cd(s){return ip(s)}function zo(s,r){r.split(/\s+/).forEach(i=>i&&s.classList.add(i)),(s._vtc||(s._vtc=new Set)).add(r)}function fi(s,r){r.split(/\s+/).forEach(c=>c&&s.classList.remove(c));const{_vtc:i}=s;i&&(i.delete(r),i.size||(s._vtc=void 0))}function w$(s){requestAnimationFrame(()=>{requestAnimationFrame(s)})}let zC=0;function A$(s,r,i,c){const l=s._endId=++zC,h=()=>{l===s._endId&&c()};if(i)return setTimeout(h,i);const{type:d,timeout:_,propCount:$}=Nb(s,r);if(!d)return c();const u=d+"end";let g=0;const m=()=>{s.removeEventListener(u,b),h()},b=E=>{E.target===s&&++g>=$&&m()};setTimeout(()=>{g<$&&m()},_+1),s.addEventListener(u,b)}function Nb(s,r){const i=window.getComputedStyle(s),c=I=>(i[I]||"").split(", "),l=c(`${gi}Delay`),h=c(`${gi}Duration`),d=L$(l,h),_=c(`${pl}Delay`),$=c(`${pl}Duration`),u=L$(_,$);let g=null,m=0,b=0;r===gi?d>0&&(g=gi,m=d,b=h.length):r===pl?u>0&&(g=pl,m=u,b=$.length):(m=Math.max(d,u),g=m>0?d>u?gi:pl:null,b=g?g===gi?h.length:$.length:0);const E=g===gi&&/\b(transform|all)(,|$)/.test(c(`${gi}Property`).toString());return{type:g,timeout:m,propCount:b,hasTransform:E}}function L$(s,r){for(;s.length<r.length;)s=s.concat(s);return Math.max(...r.map((i,c)=>N$(i)+N$(s[c])))}function N$(s){return Number(s.slice(0,-1).replace(",","."))*1e3}function Db(){return document.body.offsetHeight}const Mb=new WeakMap,xb=new WeakMap,KC={name:"TransitionGroup",props:Vt({},XC,{tag:String,moveClass:String}),setup(s,{slots:r}){const i=Va(),c=ab();let l,h;return _b(()=>{if(!l.length)return;const d=s.moveClass||`${s.name||"v"}-move`;if(!ek(l[0].el,i.vnode.el,d))return;l.forEach(qC),l.forEach(ZC);const _=l.filter(QC);Db(),_.forEach($=>{const u=$.el,g=u.style;zo(u,d),g.transform=g.webkitTransform=g.transitionDuration="";const m=u._moveCb=b=>{b&&b.target!==u||(!b||/transform$/.test(b.propertyName))&&(u.removeEventListener("transitionend",m),u._moveCb=null,fi(u,d))};u.addEventListener("transitionend",m)})}),()=>{const d=it(s),_=Lb(d);let $=d.tag||Xt;l=h,h=r.default?fp(r.default()):[];for(let u=0;u<h.length;u++){const g=h[u];g.key!=null&&wl(g,Ol(g,_,c,i))}if(l)for(let u=0;u<l.length;u++){const g=l[u];wl(g,Ol(g,_,c,i)),Mb.set(g,g.el.getBoundingClientRect())}return M($,null,h)}}},JC=KC;function qC(s){const r=s.el;r._moveCb&&r._moveCb(),r._enterCb&&r._enterCb()}function ZC(s){xb.set(s,s.el.getBoundingClientRect())}function QC(s){const r=Mb.get(s),i=xb.get(s),c=r.left-i.left,l=r.top-i.top;if(c||l){const h=s.el.style;return h.transform=h.webkitTransform=`translate(${c}px,${l}px)`,h.transitionDuration="0s",s}}function ek(s,r,i){const c=s.cloneNode();s._vtc&&s._vtc.forEach(d=>{d.split(/\s+/).forEach(_=>_&&c.classList.remove(_))}),i.split(/\s+/).forEach(d=>d&&c.classList.add(d)),c.style.display="none";const l=r.nodeType===1?r:r.parentNode;l.appendChild(c);const{hasTransform:h}=Nb(c);return l.removeChild(c),h}const ja={beforeMount(s,{value:r},{transition:i}){s._vod=s.style.display==="none"?"":s.style.display,i&&r?i.beforeEnter(s):_l(s,r)},mounted(s,{value:r},{transition:i}){i&&r&&i.enter(s)},updated(s,{value:r,oldValue:i},{transition:c}){!r!=!i&&(c?r?(c.beforeEnter(s),_l(s,!0),c.enter(s)):c.leave(s,()=>{_l(s,!1)}):_l(s,r))},beforeUnmount(s,{value:r}){_l(s,r)}};function _l(s,r){s.style.display=r?s._vod:"none"}const tk=Vt({patchProp:WC},wC);let D$;function sk(){return D$||(D$=rC(tk))}const aA=(...s)=>{const r=sk().createApp(...s),{mount:i}=r;return r.mount=c=>{const l=ok(c);if(!l)return;const h=r._component;!He(h)&&!h.render&&!h.template&&(h.template=l.innerHTML),l.innerHTML="";const d=i(l,!1,l instanceof SVGElement);return l instanceof Element&&(l.removeAttribute("v-cloak"),l.setAttribute("data-v-app","")),d},r};function ok(s){return wt(s)?document.querySelector(s):s}function ik(s,r,i){const c=r.length-1;if(c<0)return s===void 0?i:s;for(let l=0;l<c;l++){if(s==null)return i;s=s[r[l]]}return s==null||s[r[c]]===void 0?i:s[r[c]]}function Bb(s,r){if(s===r)return!0;if(s instanceof Date&&r instanceof Date&&s.getTime()!==r.getTime()||s!==Object(s)||r!==Object(r))return!1;const i=Object.keys(s);return i.length!==Object.keys(r).length?!1:i.every(c=>Bb(s[c],r[c]))}function M$(s,r,i){return s==null||!r||typeof r!="string"?i:s[r]!==void 0?s[r]:(r=r.replace(/\[(\w+)\]/g,".$1"),r=r.replace(/^\./,""),ik(s,r.split("."),i))}function nk(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:s},(i,c)=>r+c)}function Ve(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(s==null||s===""))return isNaN(+s)?String(s):isFinite(+s)?`${Number(s)}${r}`:void 0}function Gd(s){return s!==null&&typeof s=="object"&&!Array.isArray(s)}function rk(s){return s==null?void 0:s.$el}const x$=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function Pb(s){return Object.keys(s)}function Sp(s,r){const i=Object.create(null),c=Object.create(null);for(const l in s)r.some(h=>h instanceof RegExp?h.test(l):h===l)?i[l]=s[l]:c[l]=s[l];return[i,c]}function Fb(s,r){const i={...s};return r.forEach(c=>delete i[c]),i}function lk(s){return s==null?[]:Array.isArray(s)?s:[s]}function Ea(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(r,Math.min(i,s))}function qo(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const c={};for(const l in s)c[l]=s[l];for(const l in r){const h=s[l],d=r[l];if(Gd(h)&&Gd(d)){c[l]=qo(h,d,i);continue}if(Array.isArray(h)&&Array.isArray(d)&&i){c[l]=i(h,d);continue}c[l]=d}return c}function Gb(s){return s.map(r=>r.type===Xt?Gb(r.children):r).flat()}function Xa(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase()}function Il(s,r){if(!r||typeof r!="object")return[];if(Array.isArray(r))return r.map(i=>Il(s,i)).flat(1);if(Array.isArray(r.children))return r.children.map(i=>Il(s,i)).flat(1);if(r.component){if(Object.getOwnPropertySymbols(r.component.provides).includes(s))return[r.component];if(r.component.subTree)return Il(s,r.component.subTree).flat(1)}return[]}function Rp(s){const r=as({}),i=X(s);return Qo(()=>{for(const c in i.value)r[c]=i.value[c]},{flush:"sync"}),dp(r)}function va(s,r){return s.includes(r)}function B$(s,r){return r="on"+ln(r),!!(s[r]||s[`${r}Once`]||s[`${r}Capture`]||s[`${r}OnceCapture`]||s[`${r}CaptureOnce`])}const Ub=["top","bottom"],ck=["start","end","left","right"];function Ud(s,r){let[i,c]=s.split(" ");return c||(c=va(Ub,i)?"start":va(ck,i)?"top":"center"),{side:P$(i,r),align:P$(c,r)}}function P$(s,r){return s==="start"?r?"right":"left":s==="end"?r?"left":"right":s}function ad(s){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[s.side],align:s.align}}function ud(s){return{side:s.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[s.align]}}function F$(s){return{side:s.align,align:s.side}}function G$(s){return va(Ub,s.side)?"y":"x"}class or{constructor(r){let{x:i,y:c,width:l,height:h}=r;this.x=i,this.y=c,this.width=l,this.height=h}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function U$(s,r){return{x:{before:Math.max(0,r.left-s.left),after:Math.max(0,s.right-r.right)},y:{before:Math.max(0,r.top-s.top),after:Math.max(0,s.bottom-r.bottom)}}}function ak(s){const r=s.getBoundingClientRect(),i=getComputedStyle(s),c=i.transform;if(c){let l,h,d,_,$;if(c.startsWith("matrix3d("))l=c.slice(9,-1).split(/, /),h=+l[0],d=+l[5],_=+l[12],$=+l[13];else if(c.startsWith("matrix("))l=c.slice(7,-1).split(/, /),h=+l[0],d=+l[3],_=+l[4],$=+l[5];else return new or(r);const u=i.transformOrigin,g=r.x-_-(1-h)*parseFloat(u),m=r.y-$-(1-d)*parseFloat(u.slice(u.indexOf(" ")+1)),b=h?r.width/h:s.offsetWidth+1,E=d?r.height/d:s.offsetHeight+1;return new or({x:g,y:m,width:b,height:E})}else return new or(r)}function Hb(s,r,i){if(typeof s.animate>"u")return{finished:Promise.resolve()};const c=s.animate(r,i);return typeof c.finished>"u"&&(c.finished=new Promise(l=>{c.onfinish=()=>{l(c)}})),c}function Vb(s,r,i){if(i&&(r={_isVue:!0,$parent:i,$options:r}),r){if(r.$_alreadyWarned=r.$_alreadyWarned||[],r.$_alreadyWarned.includes(s))return;r.$_alreadyWarned.push(s)}return`[Vuetify] ${s}`+(r?dk(r):"")}function ir(s,r,i){const c=Vb(s,r,i);c!=null&&console.warn(c)}function Hd(s,r,i){const c=Vb(s,r,i);c!=null&&console.error(c)}const uk=/(?:^|[-_])(\w)/g,hk=s=>s.replace(uk,r=>r.toUpperCase()).replace(/[-_]/g,"");function hd(s,r){if(s.$root===s)return"<Root>";const i=typeof s=="function"&&s.cid!=null?s.options:s._isVue?s.$options||s.constructor.options:s||{};let c=i.name||i._componentTag;const l=i.__file;if(!c&&l){const h=l.match(/([^/\\]+)\.vue$/);c=h==null?void 0:h[1]}return(c?`<${hk(c)}>`:"<Anonymous>")+(l&&r!==!1?` at ${l}`:"")}function dk(s){if(s._isVue&&s.$parent){const r=[];let i=0;for(;s;){if(r.length>0){const c=r[r.length-1];if(c.constructor===s.constructor){i++,s=s.$parent;continue}else i>0&&(r[r.length-1]=[c,i],i=0)}r.push(s),s=s.$parent}return`

found in

`+r.map((c,l)=>`${l===0?"---> ":" ".repeat(5+l*2)}${Array.isArray(c)?`${hd(c[0])}... (${c[1]} recursive calls)`:hd(c)}`).join(`
`)}else return`

(found in ${hd(s)})`}const pk=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],_k=s=>s<=.0031308?s*12.92:1.055*s**(1/2.4)-.055,gk=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],fk=s=>s<=.04045?s/12.92:((s+.055)/1.055)**2.4;function Wb(s){const r=Array(3),i=_k,c=pk;for(let l=0;l<3;++l)r[l]=Math.round(Ea(i(c[l][0]*s[0]+c[l][1]*s[1]+c[l][2]*s[2]))*255);return(r[0]<<16)+(r[1]<<8)+(r[2]<<0)}function Cp(s){const r=[0,0,0],i=fk,c=gk,l=i((s>>16&255)/255),h=i((s>>8&255)/255),d=i((s>>0&255)/255);for(let _=0;_<3;++_)r[_]=c[_][0]*l+c[_][1]*h+c[_][2]*d;return r}const Ia=.20689655172413793,mk=s=>s>Ia**3?Math.cbrt(s):s/(3*Ia**2)+4/29,$k=s=>s>Ia?s**3:3*Ia**2*(s-4/29);function jb(s){const r=mk,i=r(s[1]);return[116*i-16,500*(r(s[0]/.95047)-i),200*(i-r(s[2]/1.08883))]}function Xb(s){const r=$k,i=(s[0]+16)/116;return[r(i+s[1]/500)*.95047,r(i),r(i-s[2]/200)*1.08883]}function H$(s){return!!s&&/^(#|var\(--|(rgb|hsl)a?\()/.test(s)}function ya(s){let r;if(typeof s=="number")r=s;else if(typeof s=="string"){let i=s.startsWith("#")?s.substring(1):s;i.length===3&&(i=i.split("").map(c=>c+c).join("")),i.length!==6&&i.length!==8&&ir(`'${s}' is not a valid rgb color`),r=parseInt(i,16)}else throw new TypeError(`Colors can only be numbers or strings, recieved ${s==null?s:s.constructor.name} instead`);return r<0?(ir(`Colors cannot be negative: '${s}'`),r=0):(r>4294967295||isNaN(r))&&(ir(`'${s}' is not a valid rgb color`),r=16777215),r}function Tk(s){let r=s.toString(16);return r.length<6&&(r="0".repeat(6-r.length)+r),"#"+r}function Yb(s){const r=ya(s);return{r:(r&16711680)>>16,g:(r&65280)>>8,b:r&255}}function bk(s,r){const i=jb(Cp(s));return i[0]=i[0]+r*10,Wb(Xb(i))}function Ek(s,r){const i=jb(Cp(s));return i[0]=i[0]-r*10,Wb(Xb(i))}function vk(s){const r=ya(s);return Cp(r)[1]}function us(s,r){const i=Va();if(!i)throw new Error(`[Vuetify] ${s} ${r||"must be called from inside a setup function"}`);return i}function hn(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const r=us(s).type;return Xa((r==null?void 0:r.aliasName)||(r==null?void 0:r.name))}let zb=0,_a=new WeakMap;function Ya(){const s=us("getUid");if(_a.has(s))return _a.get(s);{const r=zb++;return _a.set(s,r),r}}Ya.reset=()=>{zb=0,_a=new WeakMap};function Ik(s){const{provides:r}=us("injectSelf");if(r&&s in r)return r[s]}function rt(s,r){return i=>Object.keys(s).reduce((c,l)=>{const d=typeof s[l]=="object"&&s[l]!=null&&!Array.isArray(s[l])?s[l]:{type:s[l]};return i&&l in i?c[l]={...d,default:i[l]}:c[l]=d,r&&!c[l].source&&(c[l].source=r),c},{})}function yk(s,r){var i,c;return((i=s.props)==null?void 0:i.hasOwnProperty(r))||((c=s.props)==null?void 0:c.hasOwnProperty(Xa(r)))}const lt=function(r){var i,c;return r._setup=(i=r._setup)!=null?i:r.setup,r.name?(r._setup&&(r.props=(c=r.props)!=null?c:{},r.props=rt(r.props,Xa(r.name))(),r.props._as=String,r.setup=function(h,d){const _=Va(),$=qb(),u=gR(),g=KT({...it(h)});Qo(()=>{var y,F,B;const E=$.value.global,I=$.value[(y=h._as)!=null?y:r.name];if(I){const N=Object.entries(I).filter(R=>{let[z]=R;return z.startsWith(z[0].toUpperCase())});N.length&&(u.value=Object.fromEntries(N))}for(const N of Object.keys(h)){let R=h[N];yk(_.vnode,N)||(R=(B=(F=I==null?void 0:I[N])!=null?F:E==null?void 0:E[N])!=null?B:h[N]),g[N]!==R&&(g[N]=R)}});const m=r._setup(g,d);let b;return nt(u,(E,I)=>{!E&&b?b.stop():E&&!I&&(b=Bl(),b.run(()=>{var F;var y;dr(qo((F=(y=Ik(Nl))==null?void 0:y.value)!=null?F:{},E))}))},{immediate:!0}),m}),r):(ir("The component is missing an explicit name, unable to generate default prop value"),r)};function Ci(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r=>(s?lt:mp)(r)}function za(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",i=arguments.length>2?arguments[2]:void 0;return lt({name:i!=null?i:ln(Xs(s.replace(/__/g,"-"))),props:{tag:{type:String,default:r}},setup(c,l){let{slots:h}=l;return()=>{var d;return Ri(c.tag,{class:s},(d=h.default)==null?void 0:d.call(h))}}})}function Kb(s){if(typeof s.getRootNode!="function"){for(;s.parentNode;)s=s.parentNode;return s!==document?null:document}const r=s.getRootNode();return r!==document&&r.getRootNode({composed:!0})!==document?null:r}const Jb="cubic-bezier(0.4, 0, 0.2, 1)";function Sk(s){for(;s;){if(kp(s))return s;s=s.parentElement}return document.scrollingElement}function Sa(s,r){const i=[];if(r&&s&&!r.contains(s))return i;for(;s&&(kp(s)&&i.push(s),s!==r);)s=s.parentElement;return i}function kp(s){if(!s||s.nodeType!==Node.ELEMENT_NODE)return!1;const r=window.getComputedStyle(s);return r.overflowY==="scroll"||r.overflowY==="auto"&&s.scrollHeight>s.clientHeight}const yt=typeof window<"u",Op=yt&&"IntersectionObserver"in window,Rk=yt&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),Ck=yt&&typeof CSS<"u"&&CSS.supports("selector(:focus-visible)");function kk(s){for(;s;){if(window.getComputedStyle(s).position==="fixed")return!0;s=s.offsetParent}return!1}function gt(s){const r=us("useRender");r.render=s}const Nl=Symbol.for("vuetify:defaults");function Ok(s){return we(s!=null?s:{})}function qb(){const s=os(Nl);if(!s)throw new Error("[Vuetify] Could not find defaults instance");return s}function dr(s,r){const i=qb(),c=we(s),l=X(()=>{const h=tr(r==null?void 0:r.scoped),d=tr(r==null?void 0:r.reset),_=tr(r==null?void 0:r.root);let $=qo(c.value,{prev:i.value});if(h)return $;if(d||_){const u=Number(d||1/0);for(let g=0;g<=u&&$.prev;g++)$=$.prev;return $}return qo($.prev,$)});return Si(Nl,l),l}const Vd=Symbol.for("vuetify:display"),V$={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},wk=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V$;return qo(V$,s)};function W$(s){return yt&&!s?window.innerWidth:0}function j$(s){return yt&&!s?window.innerHeight:0}function Ak(){const s=yt?window.navigator.userAgent:"ssr";function r(I){return Boolean(s.match(I))}const i=r(/android/i),c=r(/iphone|ipad|ipod/i),l=r(/cordova/i),h=r(/electron/i),d=r(/chrome/i),_=r(/edge/i),$=r(/firefox/i),u=r(/opera/i),g=r(/win/i),m=r(/mac/i),b=r(/linux/i),E=r(/ssr/i);return{android:i,ios:c,cordova:l,electron:h,chrome:d,edge:_,firefox:$,opera:u,win:g,mac:m,linux:b,touch:Rk,ssr:E}}function Lk(s,r){const{thresholds:i,mobileBreakpoint:c}=wk(s),l=we(j$(r)),h=Ak(),d=as({}),_=we(W$(r));function $(){l.value=j$(),_.value=W$()}return Qo(()=>{const u=_.value<i.sm,g=_.value<i.md&&!u,m=_.value<i.lg&&!(g||u),b=_.value<i.xl&&!(m||g||u),E=_.value<i.xxl&&!(b||m||g||u),I=_.value>=i.xxl,y=u?"xs":g?"sm":m?"md":b?"lg":E?"xl":"xxl",F=typeof c=="number"?c:i[c],B=h.ssr?h.android||h.ios||h.opera:_.value<F;d.xs=u,d.sm=g,d.md=m,d.lg=b,d.xl=E,d.xxl=I,d.smAndUp=!u,d.mdAndUp=!(u||g),d.lgAndUp=!(u||g||m),d.xlAndUp=!(u||g||m||b),d.smAndDown=!(m||b||E||I),d.mdAndDown=!(b||E||I),d.lgAndDown=!(E||I),d.xlAndDown=!I,d.name=y,d.height=l.value,d.width=_.value,d.mobile=B,d.mobileBreakpoint=c,d.platform=h,d.thresholds=i}),yt&&window.addEventListener("resize",$,{passive:!0}),{...dp(d),update:$}}function Nk(){const s=os(Vd);if(!s)throw new Error("Could not find Vuetify display injection");return s}const Dk={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sort:"mdi-arrow-up",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},Mk={component:s=>Ri(Qb,{...s,class:"mdi"})},Es=[String,Function,Object],Wd=Symbol.for("vuetify:icons"),Ka=rt({icon:{type:Es,required:!0},tag:{type:String,required:!0}},"icon"),xk=lt({name:"VComponentIcon",props:Ka(),setup(s){return()=>M(s.tag,null,{default:()=>[M(s.icon,null,null)]})}}),Zb=lt({name:"VSvgIcon",inheritAttrs:!1,props:Ka(),setup(s,r){let{attrs:i}=r;return()=>M(s.tag,ss(i,{style:null}),{default:()=>[M("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[M("path",{d:s.icon},null)])]})}});lt({name:"VLigatureIcon",props:Ka(),setup(s){return()=>M(s.tag,null,{default:()=>[s.icon]})}});const Qb=lt({name:"VClassIcon",props:Ka(),setup(s){return()=>M(s.tag,{class:s.icon},null)}}),Bk={svg:{component:Zb},class:{component:Qb}};function Pk(s){return qo({defaultSet:"mdi",sets:{...Bk,mdi:Mk},aliases:Dk},s)}const Fk=s=>{const r=os(Wd);if(!r)throw new Error("Missing Vuetify Icons provide!");return{iconData:X(()=>{const c=Et(s)?s.value:s.icon;if(!c)throw new Error("Icon value is undefined or null");let l=c;if(typeof l=="string"&&(l=l.trim(),l.startsWith("$"))){var h;l=(h=r.aliases)==null?void 0:h[l.slice(1)]}if(!l)throw new Error(`Could not find aliased icon "${c}"`);if(typeof l!="string")return{component:xk,icon:l};const d=Object.keys(r.sets).find(u=>typeof l=="string"&&l.startsWith(`${u}:`)),_=d?l.slice(d.length+1):l;return{component:r.sets[d!=null?d:r.defaultSet].component,icon:_}})}};function wp(s,r){let i;nt(s,c=>{if(c&&!i)i=Bl(),i.run(r);else{var l;(l=i)==null||l.stop(),i=void 0}},{immediate:!0})}function dn(s,r,i){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:m=>m,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:m=>m;const h=us("useProxiedModel"),d=we(s[r]!==void 0?s[r]:i),_=Xa(r),u=X(_!==r?()=>{var m,b,E,I;return s[r],!!(((m=h.vnode.props)!=null&&m.hasOwnProperty(r)||(b=h.vnode.props)!=null&&b.hasOwnProperty(_))&&((E=h.vnode.props)!=null&&E.hasOwnProperty(`onUpdate:${r}`)||(I=h.vnode.props)!=null&&I.hasOwnProperty(`onUpdate:${_}`)))}:()=>{var m,b;return s[r],!!((m=h.vnode.props)!=null&&m.hasOwnProperty(r)&&(b=h.vnode.props)!=null&&b.hasOwnProperty(`onUpdate:${r}`))});wp(()=>!u.value,()=>{nt(()=>s[r],m=>{d.value=m})});const g=X({get(){return c(u.value?s[r]:d.value)},set(m){const b=l(m);(u.value?s[r]:d.value)===b||c(u.value?s[r]:d.value)===m||(d.value=b,h==null||h.emit(`update:${r}`,b))}});return Object.defineProperty(g,"externalValue",{get:()=>u.value?s[r]:d.value}),g}const Gk={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Goto Page {0}",currentPage:"Page {0}, Current Page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}}},X$="$vuetify.",Y$=(s,r)=>s.replace(/\{(\d+)\}/g,(i,c)=>String(r[+c])),eE=(s,r,i)=>function(c){for(var l=arguments.length,h=new Array(l>1?l-1:0),d=1;d<l;d++)h[d-1]=arguments[d];if(!c.startsWith(X$))return Y$(c,h);const _=c.replace(X$,""),$=s.value&&i.value[s.value],u=r.value&&i.value[r.value];let g=M$($,_,null);return g||(ir(`Translation key "${c}" not found in "${s.value}", trying fallback locale`),g=M$(u,_,null)),g||(Hd(`Translation key "${c}" not found in fallback`),g=c),typeof g!="string"&&(Hd(`Translation key "${c}" has a non-string value`),g=c),Y$(g,h)};function tE(s,r){return(i,c)=>new Intl.NumberFormat([s.value,r.value],c).format(i)}function dd(s,r,i){var l,h;const c=dn(s,r,(l=s[r])!=null?l:i.value);return c.value=(h=s[r])!=null?h:i.value,nt(i,d=>{s[r]==null&&(c.value=i.value)}),c}function sE(s){return r=>{const i=dd(r,"locale",s.current),c=dd(r,"fallback",s.fallback),l=dd(r,"messages",s.messages);return{name:"vuetify",current:i,fallback:c,messages:l,t:eE(i,c,l),n:tE(i,c),provide:sE({current:i,fallback:c,messages:l})}}}function Uk(s){var l,h;const r=we((l=s==null?void 0:s.locale)!=null?l:"en"),i=we((h=s==null?void 0:s.fallback)!=null?h:"en"),c=we({en:Gk,...s==null?void 0:s.messages});return{name:"vuetify",current:r,fallback:i,messages:c,t:eE(r,i,c),n:tE(r,i),provide:sE({current:r,fallback:i,messages:c})}}const Hk={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!1,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1},Ra=Symbol.for("vuetify:locale");function Vk(s){return s.name!=null}function Wk(s){const r=s!=null&&s.adapter&&Vk(s==null?void 0:s.adapter)?s==null?void 0:s.adapter:Uk(s),i=jk(r,s);return{...r,...i}}function oE(){const s=os(Ra);if(!s)throw new Error("[Vuetify] Could not find injected locale instance");return s}function jk(s,r){var l;const i=we((l=r==null?void 0:r.rtl)!=null?l:Hk),c=X(()=>{var h;return(h=i.value[s.current.value])!=null?h:!1});return{isRtl:c,rtl:i,rtlClasses:X(()=>`v-locale--is-${c.value?"rtl":"ltr"}`)}}function pr(){const s=os(Ra);if(!s)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:s.isRtl,rtlClasses:s.rtlClasses}}const Yn=2.4,z$=.2126729,K$=.7151522,J$=.072175,Xk=.55,Yk=.58,zk=.57,Kk=.62,la=.03,q$=1.45,Jk=5e-4,qk=1.25,Zk=1.25,Z$=.078,Q$=12.82051282051282,ca=.06,eT=.001;function tT(s,r){const i=((s>>16&255)/255)**Yn,c=((s>>8&255)/255)**Yn,l=((s>>0&255)/255)**Yn,h=((r>>16&255)/255)**Yn,d=((r>>8&255)/255)**Yn,_=((r>>0&255)/255)**Yn;let $=i*z$+c*K$+l*J$,u=h*z$+d*K$+_*J$;if($<=la&&($+=(la-$)**q$),u<=la&&(u+=(la-u)**q$),Math.abs(u-$)<Jk)return 0;let g;if(u>$){const m=(u**Xk-$**Yk)*qk;g=m<eT?0:m<Z$?m-m*Q$*ca:m-ca}else{const m=(u**Kk-$**zk)*Zk;g=m>-eT?0:m>-Z$?m-m*Q$*ca:m+ca}return g*100}const Dl=Symbol.for("vuetify:theme"),Ds=rt({theme:String},"theme"),gl={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function Qk(){var l;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gl;if(!s)return{...gl,isDisabled:!0};const r={};for(const[h,d]of Object.entries((l=s.themes)!=null?l:{})){var i,c;const _=d.dark||h==="dark"?(i=gl.themes)==null?void 0:i.dark:(c=gl.themes)==null?void 0:c.light;r[h]=qo(_,d)}return qo(gl,{...s,themes:r})}function eO(s){const r=as(Qk(s)),i=we(r.defaultTheme),c=we(r.themes),l=X(()=>{const u={};for(const[g,m]of Object.entries(c.value)){const b=u[g]={...m,colors:{...m.colors}};if(r.variations)for(const E of r.variations.colors){const I=b.colors[E];if(!!I)for(const y of["lighten","darken"]){const F=y==="lighten"?bk:Ek;for(const B of nk(r.variations[y],1))b.colors[`${E}-${y}-${B}`]=Tk(F(ya(I),B))}}for(const E of Object.keys(b.colors)){if(/^on-[a-z]/.test(E)||b.colors[`on-${E}`])continue;const I=`on-${E}`,y=ya(b.colors[E]),F=Math.abs(tT(0,y)),B=Math.abs(tT(16777215,y));b.colors[I]=B>Math.min(F,50)?"#fff":"#000"}}return u}),h=X(()=>l.value[i.value]),d=X(()=>{const u=[];h.value.dark&&zn(u,":root",["color-scheme: dark"]);for(const[E,I]of Object.entries(l.value)){const{variables:y,dark:F}=I;zn(u,`.v-theme--${E}`,[`color-scheme: ${F?"dark":"normal"}`,...sO(I),...Object.keys(y).map(B=>{const N=y[B],R=typeof N=="string"&&N.startsWith("#")?Yb(N):void 0,z=R?`${R.r}, ${R.g}, ${R.b}`:void 0;return`--v-${B}: ${z!=null?z:N}`})])}const g=[],m=[],b=new Set(Object.values(l.value).flatMap(E=>Object.keys(E.colors)));for(const E of b)/^on-[a-z]/.test(E)?zn(m,`.${E}`,[`color: rgb(var(--v-theme-${E})) !important`]):(zn(g,`.bg-${E}`,[`--v-theme-overlay-multiplier: var(--v-theme-${E}-overlay-multiplier)`,`background: rgb(var(--v-theme-${E})) !important`,`color: rgb(var(--v-theme-on-${E})) !important`]),zn(m,`.text-${E}`,[`color: rgb(var(--v-theme-${E})) !important`]),zn(m,`.border-${E}`,[`--v-border-color: var(--v-theme-${E})`]));return u.push(...g,...m),u.map((E,I)=>I===0?E:`    ${E}`).join("")});function _(u){const g=u._context.provides.usehead;if(g)g.addHeadObjs(X(()=>{const m={children:d.value,type:"text/css",id:"vuetify-theme-stylesheet"};return r.cspNonce&&(m.nonce=r.cspNonce),{style:[m]}})),yt&&Qo(()=>g.updateDOM());else{let b=function(){if(!r.isDisabled){if(typeof document<"u"&&!m){const E=document.createElement("style");E.type="text/css",E.id="vuetify-theme-stylesheet",r.cspNonce&&E.setAttribute("nonce",r.cspNonce),m=E,document.head.appendChild(m)}m&&(m.innerHTML=d.value)}},m=yt?document.getElementById("vuetify-theme-stylesheet"):null;nt(d,b,{immediate:!0})}}const $=X(()=>r.isDisabled?void 0:`v-theme--${i.value}`);return{install:_,isDisabled:r.isDisabled,name:i,themes:c,current:h,computedThemes:l,themeClasses:$,styles:d,global:{name:i,current:h}}}function mo(s){us("provideTheme");const r=os(Dl,null);if(!r)throw new Error("Could not find Vuetify theme injection");const i=X(()=>{var h;return(h=s.theme)!=null?h:r==null?void 0:r.name.value}),c=X(()=>r.isDisabled?void 0:`v-theme--${i.value}`),l={...r,name:i,themeClasses:c};return Si(Dl,l),l}function tO(){us("useTheme");const s=os(Dl,null);if(!s)throw new Error("Could not find Vuetify theme injection");return s}function zn(s,r,i){s.push(`${r} {
`,...i.map(c=>`  ${c};
`),`}
`)}function sO(s){const r=s.dark?2:1,i=s.dark?1:2,c=[];for(const[l,h]of Object.entries(s.colors)){const d=Yb(h);c.push(`--v-theme-${l}: ${d.r},${d.g},${d.b}`),l.startsWith("on-")||c.push(`--v-theme-${l}-overlay-multiplier: ${vk(h)>.18?r:i}`)}return c}function Ca(s){const r=we(),i=we();if(yt){const c=new ResizeObserver(l=>{s==null||s(l,c),l.length&&(i.value=l[0].contentRect)});hr(()=>{c.disconnect()}),nt(r,(l,h)=>{h&&(c.unobserve(h),i.value=void 0),l&&c.observe(l)},{flush:"post"})}return{resizeRef:r,contentRect:Pl(i)}}const sT=Symbol.for("vuetify:layout"),oO=Symbol.for("vuetify:layout-item"),oT=1e3,iO=rt({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),nO=(s,r,i,c)=>{let l={top:0,left:0,right:0,bottom:0};const h=[{id:"",layer:{...l}}];for(const d of s){const _=r.get(d),$=i.get(d),u=c.get(d);if(!_||!$||!u)continue;const g={...l,[_.value]:parseInt(l[_.value],10)+(u.value?parseInt($.value,10):0)};h.push({id:d,layer:g}),l=g}return h};function rO(s){const r=os(sT,null),i=X(()=>r?r.rootZIndex.value-100:oT),c=we([]),l=as(new Map),h=as(new Map),d=as(new Map),_=as(new Map),$=as(new Map),{resizeRef:u,contentRect:g}=Ca(),m=X(()=>{var V;const he=new Map,Q=(V=s.overlaps)!=null?V:[];for(const de of Q.filter(J=>J.includes(":"))){const[J,ue]=de.split(":");if(!c.value.includes(J)||!c.value.includes(ue))continue;const Z=l.get(J),ne=l.get(ue),$e=h.get(J),Ae=h.get(ue);!Z||!ne||!$e||!Ae||(he.set(ue,{position:Z.value,amount:parseInt($e.value,10)}),he.set(J,{position:ne.value,amount:-parseInt(Ae.value,10)}))}return he}),b=X(()=>{const he=[...new Set([...d.values()].map(V=>V.value))].sort((V,de)=>V-de),Q=[];for(const V of he){const de=c.value.filter(J=>{var ue;return((ue=d.get(J))==null?void 0:ue.value)===V});Q.push(...de)}return nO(Q,l,h,_)}),E=X(()=>!Array.from($.values()).some(he=>he.value)),I=X(()=>b.value[b.value.length-1].layer),y=X(()=>({"--v-layout-left":Ve(I.value.left),"--v-layout-right":Ve(I.value.right),"--v-layout-top":Ve(I.value.top),"--v-layout-bottom":Ve(I.value.bottom),...E.value?void 0:{transition:"none"}})),F=X(()=>b.value.slice(1).map((he,Q)=>{let{id:V}=he;const{layer:de}=b.value[Q],J=h.get(V),ue=l.get(V);return{id:V,...de,size:Number(J.value),position:ue.value}})),B=he=>F.value.find(Q=>Q.id===he),N=us("createLayout"),R=we(!1);an(()=>{R.value=!0}),Si(sT,{register:(he,Q)=>{let{id:V,order:de,position:J,layoutSize:ue,elementSize:Z,active:ne,disableTransitions:$e,absolute:Ae}=Q;d.set(V,de),l.set(V,J),h.set(V,ue),_.set(V,ne),$e&&$.set(V,$e);const ke=Il(oO,N==null?void 0:N.vnode).indexOf(he);ke>-1?c.value.splice(ke,0,V):c.value.push(V);const fe=X(()=>F.value.findIndex(oe=>oe.id===V)),et=X(()=>i.value+b.value.length*2-fe.value*2),Se=X(()=>{const oe=J.value==="left"||J.value==="right",Ft=J.value==="right",Pe=J.value==="bottom",Ys={[J.value]:0,zIndex:et.value,transform:`translate${oe?"X":"Y"}(${(ne.value?0:-110)*(Ft||Pe?-1:1)}%)`,position:Ae.value||i.value!==oT?"absolute":"fixed",...E.value?void 0:{transition:"none"}};if(!R.value)return Ys;const be=F.value[fe.value];if(!be)throw new Error(`[Vuetify] Could not find layout item "${V}"`);const St=m.value.get(V);return St&&(be[St.position]+=St.amount),{...Ys,height:oe?`calc(100% - ${be.top}px - ${be.bottom}px)`:Z.value?`${Z.value}px`:void 0,left:Ft?void 0:`${be.left}px`,right:Ft?`${be.right}px`:void 0,top:J.value!=="bottom"?`${be.top}px`:void 0,bottom:J.value!=="top"?`${be.bottom}px`:void 0,width:oe?Z.value?`${Z.value}px`:void 0:`calc(100% - ${be.left}px - ${be.right}px)`}}),A=X(()=>({zIndex:et.value-1}));return{layoutItemStyles:Se,layoutItemScrimStyles:A,zIndex:et}},unregister:he=>{d.delete(he),l.delete(he),h.delete(he),_.delete(he),$.delete(he),c.value=c.value.filter(Q=>Q!==he)},mainRect:I,mainStyles:y,getLayoutItem:B,items:F,layoutRect:g,rootZIndex:i});const z=X(()=>["v-layout",{"v-layout--full-height":s.fullHeight}]),le=X(()=>({zIndex:i.value,position:r?"relative":void 0,overflow:r?"hidden":void 0}));return{layoutClasses:z,layoutStyles:le,getLayoutItem:B,items:F,layoutRect:g,layoutRef:u}}function lO(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:r,...i}=s,c=qo(r,i),{aliases:l={},components:h={},directives:d={}}=c,_=Ok(c.defaults),$=Lk(c.display,c.ssr),u=eO(c.theme),g=Pk(c.icons),m=Wk(c.locale);return{install:E=>{for(const I in d)E.directive(I,d[I]);for(const I in h)E.component(I,h[I]);for(const I in l)E.component(I,lt({...l[I],name:I,aliasName:l[I].name}));if(u.install(E),E.provide(Nl,_),E.provide(Vd,$),E.provide(Dl,u),E.provide(Wd,g),E.provide(Ra,m),yt&&c.ssr)if(E.$nuxt)E.$nuxt.hook("app:suspense:resolve",()=>{$.update()});else{const{mount:I}=E;E.mount=function(){const y=I(...arguments);return fo(()=>$.update()),E.mount=I,y}}Ya.reset(),E.mixin({computed:{$vuetify(){return as({defaults:fl.call(this,Nl),display:fl.call(this,Vd),theme:fl.call(this,Dl),icons:fl.call(this,Wd),locale:fl.call(this,Ra)})}}})},defaults:_,display:$,theme:u,icons:g,locale:m}}const cO="3.0.1";lO.version=cO;function fl(s){var h;var r,i;const c=this.$,l=(h=(r=c.parent)==null?void 0:r.provides)!=null?h:(i=c.vnode.appContext)==null?void 0:i.provides;if(l&&s in l)return l[s]}var js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iE={exports:{}},pd={exports:{}},_d={exports:{}},gd={exports:{}},fd={exports:{}},iT;function Ap(){return iT||(iT=1,function(s,r){(function(i,c){s.exports=c()})(js,function(){var i={},c=function(e,t){l(),e.changedTouches&&e.changedTouches.length!==1||(yc=setTimeout(function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),t&&t.handleRightClick(e)},xy))},l=function(){yc&&(clearTimeout(yc),yc=0)},h=function(){Sr=null},d=function(e){return!g(e)||$(e)},_=function(e){return e instanceof PointerEvent?String(e.pointerId):e instanceof MouseEvent?"mouse":e.changedTouches&&e.changedTouches[0]&&e.changedTouches[0].identifier!==void 0&&e.changedTouches[0].identifier!==null?String(e.changedTouches[0].identifier):"mouse"},$=function(e){const t=_(e);return Sr!=null?Sr===t:e.type==="mousedown"||e.type==="touchstart"||e.type==="pointerdown"?(Sr=t,!0):!1},u=function(e){if(e.type.startsWith("touch")&&e.changedTouches){const t=e.changedTouches[0];e.clientX=t.clientX,e.clientY=t.clientY}},g=function(e){return e.type.startsWith("touch")||e.type.startsWith("mouse")||e.type.startsWith("pointer")},m=function(e){return e.type.startsWith("touch")||e.type.startsWith("pointer")},b=function(e){const t=[];if(e.changedTouches)for(let o=0;o<e.changedTouches.length;o++)t[o]={type:e.type,changedTouches:[e.changedTouches[o]],target:e.target,stopPropagation(){e.stopPropagation()},preventDefault(){e.preventDefault()}};else t.push(e);return t},E=function(e,t,o,n,a,p){function T(ze){const es=!a;ze=b(ze);for(let Xi=0;Xi<ze.length;Xi++){const pi=ze[Xi];(!es||d(pi))&&(u(pi),o?n.call(o,pi):n(pi),S=!0)}}let S=!1;const P=[];if(globalThis.PointerEvent&&t in Rs)for(var te=0;te<Rs[t].length;te++){var Ge=Rs[t][te];e.addEventListener(Ge,T,!1),P.push([e,Ge,T])}else if(e.addEventListener(t,T,!1),P.push([e,t,T]),t in Rs)for(te=ze=>{T(ze),S&&!p&&ze.preventDefault()},Ge=0;Ge<Rs[t].length;Ge++){const ze=Rs[t][Ge];e.addEventListener(ze,te,!1),P.push([e,ze,te])}return P},I=function(e,t,o,n){function a(P){o?n.call(o,P):n(P)}const p=[];if(globalThis.PointerEvent&&t in Rs)for(var T=0;T<Rs[t].length;T++){var S=Rs[t][T];e.addEventListener(S,a,!1),p.push([e,S,a])}else if(e.addEventListener(t,a,!1),p.push([e,t,a]),t in Rs)for(T=P=>{if(P instanceof TouchEvent&&P.changedTouches&&P.changedTouches.length===1){const te=P.changedTouches[0];P.clientX=te.clientX,P.clientY=te.clientY}a(P),P.preventDefault()},S=0;S<Rs[t].length;S++){const P=Rs[t][S];e.addEventListener(P,T,!1),p.push([e,P,T])}return p},y=function(e){const t=e[e.length-1][2];for(;e.length;){const o=e.pop();o[0].removeEventListener(o[1],o[2],!1)}return t},F=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},B=function(e){return e.ctrlKey&&ju?!0:e.button===2},N=function(e,t,o){const n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,o||(o=t.getScreenCTM().inverse()),n.matrixTransform(o)},R=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*Pg,y:e.deltaY*Pg};case 2:return{x:e.deltaX*Fg,y:e.deltaY*Fg}}},z=function(e){return bn[e]||null},le=function(){const e=[];for(const t in bn)e.push(bn[t]);return e},he=function(e){bn[e.id]=e},Q=function(e){delete bn[e.id]},V=function(){return Gg},de=function(e){Gg=e},J=function(){return Yu},ue=function(e){Yu=e},Z=function(){return Ug},ne=function(e){Ug=e},$e=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),o=e.getCachedParentSvgSize();var n=t.parentElement;if(n instanceof HTMLElement){var a=n.offsetWidth;n=n.offsetHeight,o.width!==a&&(t.setAttribute("width",a+"px"),e.setCachedParentSvgSize(a,null)),o.height!==n&&(t.setAttribute("height",n+"px"),e.setCachedParentSvgSize(null,n)),e.resize()}},Ae=function(e,t){const o=Object.create(null),n=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=n.indexOf(e),n.splice(e,n.length-e));for(let a=0,p;p=n[a];a++)o[p.type]?o[p.type]++:o[p.type]=1;return o},ce=function(e){return function(){this.jsonInit(e)}},ke=function(e){zu.defineBlocksWithJsonArrayInternal(e)},fe=function(e){Se(et(e))},et=function(e){const t={};for(let o=0;o<e.length;o++){const n=e[o];if(!n){console.warn(`Block definition #${o} in JSON array is ${n}. Skipping`);continue}const a=n.type;a?t[a]={init:ce(n)}:console.warn(`Block definition #${o} in JSON array is missing a type attribute. Skipping.`)}return t},Se=function(e){for(const t of Object.keys(e)){const o=e[t];t in gs&&console.warn(`Block definiton "${t}" overwrites previous definition.`),gs[t]=o}},A=function(e,t,o){e=document.createElementNS(En,String(e));for(const n in t)e.setAttribute(n,`${t[n]}`);return o&&o.appendChild(e),e},oe=function(e,t){return t=t.split(" "),t.every(o=>e.classList.contains(o))?!1:(e.classList.add(...t),!0)},Ft=function(e,t){e.classList.remove(...t.split(" "))},Pe=function(e,t){return t=t.split(" "),t.every(o=>!e.classList.contains(o))?!1:(e.classList.remove(...t),!0)},Ys=function(e,t){return e.classList.contains(t)},be=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},St=function(e,t){const o=t.nextSibling;if(t=t.parentNode,!t)throw Error("Reference node has no parent.");o?t.insertBefore(e,o):t.appendChild(e)},hs=function(e,t){return!!(e.compareDocumentPosition(t)&Eo.DOCUMENT_POSITION_CONTAINED_BY)},Kt=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},vs=function(){Ku++,so||(so=Object.create(null))},Is=function(){Ku--,Ku||(so=null)},C=function(e){const t=e.textContent+`
`+e.className.baseVal;let o;if(so&&(o=so[t]))return o;try{o=e.getComputedTextLength()}catch{return 8*e.textContent.length}return so&&(so[t]=o),o},L=function(e,t,o,n){return U(e,t+"pt",o,n)},U=function(e,t,o,n){const a=e.textContent;e=a+`
`+e.className.baseVal;var p;return so&&(p=so[e])||(kc||(p=document.createElement("canvas"),p.className="blocklyComputeCanvas",document.body.appendChild(p),kc=p.getContext("2d")),kc.font=o+" "+t+" "+n,p=a?kc.measureText(a).width:0,so&&(so[e]=p)),p},K=function(e,t,o,n){const a=document.createElement("span");a.style.font=o+" "+t+" "+n,a.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",t=document.createElement("div"),t.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),t.appendChild(a),t.appendChild(e),document.body.appendChild(t),o={height:0,baseline:0};try{t.style.alignItems="baseline",o.baseline=e.offsetTop-a.offsetTop,t.style.alignItems="flex-end",o.height=e.offsetTop-a.offsetTop}finally{document.body.removeChild(t)}return o},Y=function(e){return e*Math.PI/180},ee=function(e){return 180*e/Math.PI},re=function(e,t,o){if(o<e){const n=o;o=e,e=n}return Math.max(e,Math.min(t,o))},H=function(e,t,o,n){e=e+" was deprecated in "+t+" and will be deleted in "+o+".",n&&(e+=`
Use `+n+" instead."),console.warn(e)},ie=function(e){return Hg.getSizeInternal(e)},q=function(e){if(_e(e,"display")!=="none")return Ee(e);const t=e.style,o=t.display,n=t.visibility,a=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const p=e.offsetWidth;return e=e.offsetHeight,t.display=o,t.position=a,t.visibility=n,new Gt(p,e)},Ee=function(e){return new Gt(e.offsetWidth,e.offsetHeight)},_e=function(e,t){return e=window.getComputedStyle(e),e[t]||e.getPropertyValue(t)},ye=function(e,t){return H("Blockly.utils.style.getCascadedStyle","version 9","version 10"),e.currentStyle?e.currentStyle[t]:""},Oe=function(e){const t=new ae(0,0);e=e.getBoundingClientRect();var o=document.documentElement;return o=new ae(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),t.x=e.left+o.x,t.y=e.top+o.y,t},Le=function(){const e=document.body,t=document.documentElement;return new ae(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},Xe=function(e){const t=parseFloat(_e(e,"borderLeftWidth")),o=parseFloat(_e(e,"borderRightWidth")),n=parseFloat(_e(e,"borderTopWidth"));return e=parseFloat(_e(e,"borderBottomWidth")),new Tt(n,e,t,o)},j=function(e,t,o){e=at(e,t,o),t.scrollLeft=e.x,t.scrollTop=e.y},at=function(e,t,o){var n=Oe(e),a=Oe(t),p=Xe(t);const T=n.x-a.x-p.left;return n=n.y-a.y-p.top,a=Ee(e),e=t.clientWidth-a.width,a=t.clientHeight-a.height,p=t.scrollLeft,t=t.scrollTop,o?(p+=T-e/2,t+=n-a/2):(p+=Math.min(T,Math.max(T-e,0)),t+=Math.min(n,Math.max(n-a,0))),new ae(p,t)},Jt=function(){Je||(Je=document.createElement("div"),Je.className="blocklyDropDownDiv",(Z()||document.body).appendChild(Je),yn=document.createElement("div"),yn.className="blocklyDropDownContent",Je.appendChild(yn),Mi=document.createElement("div"),Mi.className="blocklyDropDownArrow",Je.appendChild(Mi),Je.style.opacity="0",Je.style.transition="transform "+wc+"s, opacity "+wc+"s",Je.addEventListener("focusin",function(){oe(Je,"blocklyFocused")}),Je.addEventListener("focusout",function(){Pe(Je,"blocklyFocused")}))},ds=function(e){Qu=e},No=function(){return yn},zs=function(){yn.textContent="",yn.style.width=""},Mt=function(e,t){Je.style.backgroundColor=e,Je.style.borderColor=t},f=function(e,t,o,n){return G(O(t),e,o,n)},v=function(e,t,o){return Wg=!0,G(x(e),e,t,o)},O=function(e){var t=e.getSvgRoot();const o=e.workspace.scale,n=e.height*o;return e=e.width*o,t=Oe(t),new Tt(t.y,t.y+n,t.x,t.x+e)},x=function(e){return e=e.getScaledBBox(),new Tt(e.top,e.bottom,e.left,e.right)},G=function(e,t,o,n){const a=e.left+(e.right-e.left)/2,p=e.bottom;e=e.top,n&&(e+=n),n=t.getSourceBlock();let T=n.workspace;for(;T.options.parentWorkspace;)T=T.options.parentWorkspace;return ds(T.getParentSvg().parentNode),Ke(t,n.RTL,a,p,a,e,o)},Ke=function(e,t,o,n,a,p,T){return xi=e,Di=T||null,Je.style.direction=t?"rtl":"ltr",e=V(),vn=e.getRenderer().getClassName(),In=e.getTheme().getClassName(),vn&&oe(Je,vn),In&&oe(Je,In),jp(o,n,a,p)},ki=function(e,t,o,n){return e=Zl(e,o.left,o.right,n.width),{initialX:e.divX,initialY:t,finalX:e.divX,finalY:t+qu,arrowX:e.arrowX,arrowY:-(Rr/2+Ju),arrowAtTop:!0,arrowVisible:!0}},Vp=function(e,t,o,n){return e=Zl(e,o.left,o.right,n.width),{initialX:e.divX,initialY:t-n.height,finalX:e.divX,finalY:t-n.height-qu,arrowX:e.arrowX,arrowY:n.height-2*Ju-Rr/2,arrowAtTop:!1,arrowVisible:!0}},JE=function(e,t,o){return e=Zl(e,t.left,t.right,o.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Zl=function(e,t,o,n){return t=re(t,e-n/2,o-n),e=e-Rr/2-t,o=Vg,e=re(o,e,n-o-Rr),{arrowX:e,divX:t}},Wp=function(){return!!xi},fr=function(e,t){return xi===e?(t?$o():su(),!0):!1},su=function(){Je.style.transform="translate(0, 0)",Je.style.opacity="0",Zu=setTimeout(function(){$o()},1e3*wc),Di&&(Di(),Di=null)},$o=function(){Wp()&&(Zu&&clearTimeout(Zu),Je.style.transform="",Je.style.left="",Je.style.top="",Je.style.opacity="0",Je.style.display="none",Je.style.backgroundColor="",Je.style.borderColor="",Di&&(Di(),Di=null),zs(),xi=null,vn&&(Pe(Je,vn),vn=""),In&&(Pe(Je,In),In=""),V().markFocused())},jp=function(e,t,o,n){e=eh.getPositionMetrics(e,t,o,n),e.arrowVisible?(Mi.style.display="",Mi.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",Mi.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Mi.style.display="none",t=Math.floor(e.initialX),o=Math.floor(e.initialY),n=Math.floor(e.finalX);const a=Math.floor(e.finalY);return Je.style.left=t+"px",Je.style.top=o+"px",Je.style.display="block",Je.style.opacity="1",Je.style.transform="translate("+(n-t)+"px,"+(a-o)+"px)",!!e.arrowAtTop},qE=function(){if(xi){var e=xi.getSourceBlock();e=Wg?x(xi):O(e);const t=e.left+(e.right-e.left)/2;jp(t,e.bottom,t,e.top)}else su()},We=function(e,t,o,n){if(!(e instanceof se)&&typeof e!="string"||String(e).trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),typeof t!="string"||t.trim()==="")throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const a=t.toLowerCase();if(!o)throw Error("Can not register a null value");let p=ri[e],T=Ac[e];if(p||(p=ri[e]=Object.create(null),T=Ac[e]=Object.create(null)),ZE(e,o),!n&&p[a])throw Error('Name "'+a+'" with type "'+e+'" already registered.');p[a]=o,T[a]=t},ZE=function(e,t){switch(e){case String(se.FIELD):if(typeof t.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},Ql=function(e,t){e=String(e).toLowerCase(),t=t.toLowerCase();const o=ri[e];o&&o[t]?(delete ri[e][t],delete Ac[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},Xp=function(e,t,o){e=String(e).toLowerCase(),t=t.toLowerCase();const n=ri[e];if(!n||!n[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",o)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return n[t]},Yp=function(e,t){return e=String(e).toLowerCase(),t=t.toLowerCase(),(e=ri[e])?!!e[t]:!1},pn=function(e,t,o){return Xp(e,t,o)},ec=function(e,t,o){return Xp(e,t,o)},ou=function(e,t,o){e=String(e).toLowerCase();var n=ri[e];if(!n){if(n=`Unable to find [${e}] in the registry.`,o)throw Error(`${n} You must require or register a ${e} plugin.`);return console.warn(n),null}if(!t)return n;e=Ac[e],o=Object.create(null),t=Object.keys(n);for(let a=0;a<t.length;a++){const p=t[a];o[e[p]]=n[p]}return o},xs=function(e,t,o){return t=t.plugins[e.toString()]||Po,typeof t=="function"?t:pn(e,t,o)},mr=function(){return"blockly-"+(Fy++).toString(36)},Ks=function(){return Xg.genUid()},ys=function(e){Cr=e},Js=function(){return Cr},Re=function(e){oh.fireInternal(e)},QE=function(e){xt()&&(On.length||setTimeout(zp,0),On.push(e))},zp=function(){const e=tc(On,!0);On.length=0;for(let t=0,o;o=e[t];t++){if(!o.workspaceId)continue;const n=z(o.workspaceId);n&&n.fireChangeListener(o)}},tc=function(e,t){e=e.slice(),t||e.reverse();const o=[],n=Object.create(null);for(let T=0,S;S=e[T];T++)if(!S.isNull()){var a=[S.isUiEvent?Or:S.type,S.blockId,S.workspaceId].join(" "),p=n[a];const P=p?p.event:null;p?S.type===is&&p.index===T-1?(a=S,P.newParentId=a.newParentId,P.newInputName=a.newInputName,P.newCoordinate=a.newCoordinate,p.index=T):S.type===Pt&&S.element===P.element&&S.name===P.name?P.newValue=S.newValue:S.type===Pi?(p=S,P.viewTop=p.viewTop,P.viewLeft=p.viewLeft,P.scale=p.scale,P.oldScale=p.oldScale):(S.type!==ci||P.type!==Fo)&&(n[a]={event:S,index:T},o.push(S)):(n[a]={event:S,index:T},o.push(S))}e=o.filter(function(T){return!T.isNull()}),t||e.reverse();for(let T=1,S;S=e[T];T++)S.type===Pt&&S.element==="mutation"&&e.unshift(e.splice(T,1)[0]);return e},iu=function(){for(let e=0,t;t=On[e];e++)t.recordUndo=!1},At=function(){th++},Lt=function(){th--},xt=function(){return th===0},ut=function(){return Yg},ve=function(e){oh.setGroupInternal(e)},ev=function(e){Yg=typeof e=="boolean"?e?Ks():"":e},sc=function(e){const t=[];e=e.getDescendants(!1);for(let o=0,n;n=e[o];o++)t[o]=n.id;return t},Kp=function(e,t){var o=Ce(e.type);if(!o)throw Error("Unknown event type.");return o=new o,o.fromJson(e),o.workspaceId=t.id,o},Ce=function(e){const t=pn(se.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},nu=function(e){if((e.type===is||e.type===Wt)&&e.workspaceId){var t=z(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const o=Cr;try{Cr=!1;const n=e.getParent();if(n&&n.isEnabled()){const a=e.getDescendants(!1);for(let p=0,T;T=a[p];p++)T.setEnabled(!0)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do e.setEnabled(!1),e=e.getNextBlock();while(e)}finally{Cr=o}}}},tv=function(){return Mr},sv=function(e){Mr=e},tt=function(e){return Mr.createElementNS(ih,e)},oi=function(e){return Mr.createTextNode(e)},Jp=function(e){return new DOMParser().parseFromString(e,"text/xml")},qp=function(e){return new XMLSerializer().serializeToString(e)},oc=function(e,t){zg(e,t)},ov=function(e){zg=e},ru=function(e,t){qg.confirmInternal(e,t)},iv=function(e,t){Kg(e,t)},nv=function(e){Kg=e},lu=function(e,t,o){Jg(e,t,o)},rv=function(e){Jg=e},cu=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let o=0;o<e.length;o++){const n=e[o].getVarModels();if(n)for(let a=0;a<n.length;a++){const p=n[a];p.getId()&&t.add(p)}}return Array.from(t.values())},lv=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let n=0,a;a=e[n];n++){var o=a.getDeveloperVariables;if(o){o=o();for(let p=0;p<o.length;p++)t.add(o[p])}}return Array.from(t.values())},au=function(e){let t=[];const o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(n){$r(n.getTargetWorkspace())}),t.push(o),e=Zp(e),t=t.concat(e)},Zp=function(e){e=e.getVariablesOfType("");const t=[];if(0<e.length){var o=e[e.length-1];if(gs.variables_set){var n=tt("block");n.setAttribute("type","variables_set"),n.setAttribute("gap",gs.math_change?"8":"24"),n.appendChild(_n(o)),t.push(n)}if(gs.math_change&&(n=tt("block"),n.setAttribute("type","math_change"),n.setAttribute("gap",gs.variables_get?"20":"8"),n.appendChild(_n(o)),o=eo('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),n.appendChild(o),t.push(n)),gs.variables_get){e.sort(xr.compareByName);for(let a=0,p;p=e[a];a++)o=tt("block"),o.setAttribute("type","variables_get"),o.setAttribute("gap","8"),o.appendChild(_n(p)),t.push(o)}}return t},Qp=function(e){return rh.generateUniqueNameInternal(e)},cv=function(e){return uu(Mc.charAt(0),e.getAllVariableNames())},uu=function(e,t){if(!t.length)return e;const o=Mc;let n="",a=o.indexOf(e);for(;;){let p=!1;for(let T=0;T<t.length;T++)if(t[T].toLowerCase()===e){p=!0;break}if(!p)return e;a++,a===o.length&&(a=0,n=`${Number(n)+1}`),e=o.charAt(a)+n}},$r=function(e,t,o){function n(p){hu(Ne.NEW_VARIABLE_TITLE,p,function(T){if(T){const S=t_(T,e);if(S){let P;S.type===a?P=Ne.VARIABLE_ALREADY_EXISTS.replace("%1",S.name):(P=Ne.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,P=P.replace("%1",S.name).replace("%2",S.type)),oc(P,function(){n(T)})}else e.createVariable(T,a),t&&t(T)}else t&&t(null)})}const a=o||"";n("")},e_=function(e,t,o){function n(a){const p=Ne.RENAME_VARIABLE_TITLE.replace("%1",t.name);hu(p,a,function(T){if(T){var S=av(T,t.type,e);S?(S=Ne.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",S.name).replace("%2",S.type),oc(S,function(){n(T)})):(e.renameVariableById(t.getId(),T),o&&o(T))}else o&&o(null)})}n("")},hu=function(e,t,o){lu(e,t,function(n){n&&(n=n.replace(/[\s\xa0]+/g," ").trim(),n===Ne.RENAME_VARIABLE||n===Ne.NEW_VARIABLE)&&(n=null),o(n)})},av=function(e,t,o){o=o.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let n=0,a;a=o[n];n++)if(a.name.toLowerCase()===e&&a.type!==t)return a;return null},t_=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let o=0,n;n=t[o];o++)if(n.name.toLowerCase()===e)return n;return null},_n=function(e){const t=tt("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=oi(e.name),t.appendChild(e),t},ic=function(e,t,o,n){let a=nc(e,t,o,n);return a||(a=uv(e,t,o,n)),a},nc=function(e,t,o,n){const a=e.getPotentialVariableMap();let p=null;if(t&&(p=e.getVariableById(t),!p&&a&&(p=a.getVariableById(t)),p))return p;if(o){if(n===void 0)throw Error("Tried to look up a variable by name without a type");p=e.getVariable(o,n),!p&&a&&(p=a.getVariable(o,n))}return p},uv=function(e,t,o,n){const a=e.getPotentialVariableMap();return o||(o=Qp(e.isFlyout?e.targetWorkspace:e)),a?a.createVariable(o,n,t):e.createVariable(o,n,t)},du=function(e,t){e=e.getAllVariables();const o=[];if(t.length!==e.length)for(let n=0;n<e.length;n++){const a=e[n];t.indexOf(a)===-1&&o.push(a)}return o},qs=function(e){if(lh)throw Error("CSS already injected");ch+=`
`+e},s_=function(e,t){lh||(lh=!0,e&&(e=t.replace(/[\\/]$/,""),t=ch.replace(/<<<PATH>>>/g,e),ch="",e=document.createElement("style"),e.id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},Zs=function(e){const t=new ae(0,0);var o=e.x&&e.getAttribute("x");const n=e.y&&e.getAttribute("y");return o&&(t.x=parseInt(o)),n&&(t.y=parseInt(n)),(o=(o=e.getAttribute("transform"))&&o.match(ef))&&(t.x+=Number(o[1]),o[3]&&(t.y+=Number(o[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(tf))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},rc=function(e){let t=0,o=0;for(;e;){const n=Zs(e);if(t+=n.x,o+=n.y,(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;e=e.parentNode}return new ae(t,o)},o_=function(){return H("Blockly.utils.svgMath.is3dSupported","version 9","version 10"),!0},pu=function(){const e=Le();return new Tt(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},_u=function(){const e=document.documentElement,t=window;return new ae(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},i_=function(e,t){var o=t.x;t=t.y;const n=e.getInjectionDiv().getBoundingClientRect();return o=new ae(o-n.left,t-n.top),t=e.getOriginOffsetInPixels(),ae.difference(o,t).scale(1/e.scale)},hv=function(e,t){const o=tt("xml");var n=n_(cu(e));n.hasChildNodes()&&o.appendChild(n),n=e.getTopComments(!0);for(let a=0;a<n.length;a++)o.appendChild(n[a].toXmlWithXY(t));for(e=e.getTopBlocks(!0),n=0;n<e.length;n++)o.appendChild(lc(e[n],t));return o},n_=function(e){const t=tt("variables");for(let o=0;o<e.length;o++){const n=e[o],a=tt("variable");a.appendChild(oi(n.name)),n.type&&a.setAttribute("type",n.type),a.id=n.getId(),t.appendChild(a)}return t},lc=function(e,t){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let o=0;e.workspace.RTL&&(o=e.workspace.getWidth()),t=Oi(e,t);const n=e.getRelativeToSurfaceXY();return t.setAttribute("x",Math.round(e.workspace.RTL?o-n.x:n.x)),t.setAttribute("y",Math.round(n.y)),t},dv=function(e){if(e.isSerializable()){const t=tt("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},pv=function(e,t){for(let o=0;o<e.inputList.length;o++){const n=e.inputList[o];for(let a=0;a<n.fieldRow.length;a++){const p=dv(n.fieldRow[a]);p&&t.appendChild(p)}}},Oi=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?Oi(t):new DocumentFragment;const o=tt(e.isShadow()?"shadow":"block");if(o.setAttribute("type",e.type),t||o.setAttribute("id",e.id),e.mutationToDom){var n=e.mutationToDom();n&&(n.hasChildNodes()||n.hasAttributes())&&o.appendChild(n)}if(pv(e,o),n=e.getCommentText()){var a=e.commentModel.size,p=e.commentModel.pinned,T=tt("comment");T.appendChild(oi(n)),T.setAttribute("pinned",p),T.setAttribute("h",a.height),T.setAttribute("w",a.width),o.appendChild(T)}for(e.data&&(n=tt("data"),n.appendChild(oi(e.data)),o.appendChild(n)),n=0;n<e.inputList.length;n++){a=e.inputList[n];var S=void 0;if(p=!0,a.type!==xe.DUMMY){T=a.connection.targetBlock(),a.type===xe.VALUE?S=tt("value"):a.type===xe.STATEMENT&&(S=tt("statement"));const te=a.connection.getShadowDom();!te||T&&T.isShadow()||S.appendChild(r_(te,t)),T&&(T=Oi(T,t),T.nodeType===Eo.ELEMENT_NODE&&(S.appendChild(T),p=!1)),S.setAttribute("name",a.name),p||o.appendChild(S)}}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&o.setAttribute("inline",e.inputsInline.toString()),e.isCollapsed()&&o.setAttribute("collapsed","true"),e.isEnabled()||o.setAttribute("disabled","true"),e.isDeletable()||e.isShadow()||o.setAttribute("deletable","false"),e.isMovable()||e.isShadow()||o.setAttribute("movable","false"),e.isEditable()||o.setAttribute("editable","false"),S=e.getNextBlock();let P;return S&&(n=Oi(S,t),n.nodeType===Eo.ELEMENT_NODE&&(P=tt("next"),P.appendChild(n),o.appendChild(P))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||S&&S.isShadow()||P.appendChild(r_(e,t)),o},r_=function(e,t){let o=e=e.cloneNode(!0),n;for(;o;)if(t&&o.nodeName==="shadow"&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;){n=o,o=o.parentNode;let a;n.nodeType===Eo.TEXT_NODE&&n.data.trim()===""&&((a=o)==null?void 0:a.firstChild)!==n&&be(n)}o&&(n=o,o=o.nextSibling,n.nodeType===Eo.TEXT_NODE&&n.data.trim()===""&&be(n))}return e},Qs=function(e){return qp(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},_v=function(e){e=Qs(e).split("<");let t="";for(let o=1;o<e.length;o++){const n=e[o];n[0]==="/"&&(t=t.substring(2)),e[o]=t+"<"+n,n[0]!=="/"&&n.slice(-2)!=="/>"&&(t+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},eo=function(e){const t=Jp(e);if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return t.documentElement},gv=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=Tr(e,t),t.setResizesEnabled(!0),e},Tr=function(e,t){let o=0;t.RTL&&(o=t.getWidth());const n=[];vs();const a=ut();a||ve(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let p=!0;try{for(let T=0,S;S=e.childNodes[T];T++){const P=S.nodeName.toLowerCase(),te=S;if(P==="block"||P==="shadow"&&!Js()){const Ge=gn(te,t);n.push(Ge.id);const ze=te.hasAttribute("x")?parseInt(te.getAttribute("x")):10,es=te.hasAttribute("y")?parseInt(te.getAttribute("y")):10;isNaN(ze)||isNaN(es)||Ge.moveBy(t.RTL?o-ze:ze,es),p=!1}else{if(P==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(P==="comment")t.rendered?Zt.fromXmlRendered(te,t,o):yo.fromXml(te,t);else if(P==="variables"){if(p)l_(te,t);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");p=!1}}}}finally{a||ve(!1),Is()}return t.setResizesEnabled&&t.setResizesEnabled(!0),Re(new(Ce(kn))(t)),n},fv=function(e,t){if(!t.getBlocksBoundingBox)return Tr(e,t);var o=t.getBlocksBoundingBox();if(e=Tr(e,t),o&&o.top!==o.bottom){var n=o.bottom;o=t.RTL?o.right:o.left;var a=1/0;let p=-1/0,T=1/0;for(let S=0;S<e.length;S++){const P=t.getBlockById(e[S]).getRelativeToSurfaceXY();P.y<T&&(T=P.y),P.x<a&&(a=P.x),P.x>p&&(p=P.x)}for(n=n-T+10,o=t.RTL?o-p:o-a,a=0;a<e.length;a++)t.getBlockById(e[a]).moveBy(o,n)}return e},gn=function(e,t){At();var o=t.getAllVariables();let n;try{if(n=gu(e,t),t.rendered){const a=n,p=n.getDescendants(!1);a.setConnectionTracking(!1);for(let T=p.length-1;0<=T;T--)p[T].initSvg();for(let T=p.length-1;0<=T;T--)p[T].render(!1);setTimeout(function(){a.disposed||a.setConnectionTracking(!0)},1),a.updateDisabled(),t.resizeContents()}else{const a=n.getDescendants(!1);for(let p=a.length-1;0<=p;p--)a[p].initModel()}}finally{Lt()}if(xt()){for(e=du(t,o),t=0;t<e.length;t++)o=e[t],Re(new(Ce(Bi))(o));Re(new(Ce(Wt))(n))}return n},l_=function(e,t){for(let o=0;o<e.children.length;o++){const n=e.children[o],a=n.getAttribute("type"),p=n.getAttribute("id");t.createVariable(n.textContent,a,p)}},mv=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let o=0;o<e.children.length;o++){const n=e.children[o];if(n.nodeType!==Eo.TEXT_NODE)switch(n.nodeName.toLowerCase()){case"mutation":t.mutation.push(n);break;case"comment":t.comment.push(n);break;case"data":t.data.push(n);break;case"title":case"field":t.field.push(n);break;case"value":case"statement":t.input.push(n);break;case"next":t.next.push(n);break;default:console.warn("Ignoring unknown tag: "+n.nodeName)}}return t},$v=function(e,t){let o=!1;for(let n=0;n<e.length;n++){const a=e[n];t.domToMutation&&(t.domToMutation(a),t.initSvg&&(o=!0))}return o},Tv=function(e,t){for(let n=0;n<e.length;n++){var o=e[n];const a=o.textContent,p=o.getAttribute("pinned")==="true",T=parseInt(o.getAttribute("w"));if(o=parseInt(o.getAttribute("h")),t.setCommentText(a),t.commentModel.pinned=p,isNaN(T)||isNaN(o)||(t.commentModel.size=new Gt(T,o)),p&&t.getCommentIcon&&!t.isInFlyout){const S=t;setTimeout(function(){S.getCommentIcon().setVisible(!0)},1)}}},bv=function(e,t){for(let o=0;o<e.length;o++)t.data=e[o].textContent},Ev=function(e,t){for(let o=0;o<e.length;o++){const n=e[o],a=n.getAttribute("name");yv(t,a,n)}},c_=function(e){const t={childBlockElement:null,childShadowElement:null};for(let o=0;o<e.childNodes.length;o++){const n=e.childNodes[o];n.nodeType===Eo.ELEMENT_NODE&&(n.nodeName.toLowerCase()==="block"?t.childBlockElement=n:n.nodeName.toLowerCase()==="shadow"&&(t.childShadowElement=n))}return t},vv=function(e,t,o,n){for(let p=0;p<e.length;p++){var a=e[p];const T=a.getAttribute("name"),S=o.getInput(T);if(!S){console.warn("Ignoring non-existent input "+T+" in block "+n);break}if(a=c_(a),a.childBlockElement){if(!S.connection)throw TypeError("Input connection does not exist.");gu(a.childBlockElement,t,S.connection,!1)}if(a.childShadowElement){let P;(P=S.connection)==null||P.setShadowDom(a.childShadowElement)}}},Iv=function(e,t,o){for(let n=0;n<e.length;n++){const a=c_(e[n]);if(a.childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");gu(a.childBlockElement,t,o.nextConnection,!0)}a.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(a.childShadowElement)}},gu=function(e,t,o,n){const a=e.getAttribute("type");if(!a)throw TypeError("Block type unspecified: "+e.outerHTML);var p=e.getAttribute("id");p=t.newBlock(a,p);const T=mv(e),S=$v(T.mutation,p);if(Tv(T.comment,p),bv(T.data,p),o)if(n)if(p.previousConnection)o.connect(p.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(p.outputConnection)o.connect(p.outputConnection);else if(p.previousConnection)o.connect(p.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Ev(T.field,p),vv(T.input,t,p,a),Iv(T.next,t,p),S&&p.initSvg(),(t=e.getAttribute("inline"))&&p.setInputsInline(t==="true"),(t=e.getAttribute("disabled"))&&p.setEnabled(t!=="true"&&t!=="disabled"),(t=e.getAttribute("deletable"))&&p.setDeletable(t==="true"),(t=e.getAttribute("movable"))&&p.setMovable(t==="true"),(t=e.getAttribute("editable"))&&p.setEditable(t==="true"),(t=e.getAttribute("collapsed"))&&p.setCollapsed(t==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=p.getChildren(!1),t=0;t<e.length;t++)if(!e[t].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(p.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");p.setShadow(!0)}return p},yv=function(e,t,o){const n=e.getField(t);n?n.fromXml(o):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},Sv=function(e){for(let t=0;t<e.childNodes.length;t++){const o=e.childNodes[t];if(o.nodeName.toLowerCase()==="next"){e.removeChild(o);break}}},Rv=function(e,t){return H("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),e.startsWith(t)},cc=function(e){return e.length?e.reduce(function(t,o){return t.length<o.length?t:o}).length:0},a_=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let o=0;t=t||cc(e);let n;for(n=0;n<t;n++){for(var a=e[0][n],p=1;p<e.length;p++)if(a!==e[p][n])return o;a===" "&&(o=n+1)}for(a=1;a<e.length;a++)if((p=e[a][n])&&p!==" ")return o;return t},u_=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let o=0;t=t||cc(e);let n;for(n=0;n<t;n++){for(var a=e[0].substr(-n-1,1),p=1;p<e.length;p++)if(a!==e[p].substr(-n-1,1))return o;a===" "&&(o=n+1)}for(a=1;a<e.length;a++)if((p=e[a].charAt(e[a].length-n-1))&&p!==" ")return o;return t},h_=function(e,t){e=e.split(`
`);for(let o=0;o<e.length;o++)e[o]=Cv(e[o],t);return e.join(`
`)},Cv=function(e,t){if(e.length<=t)return e;const o=e.trim().split(/\s+/);for(var n=0;n<o.length;n++)o[n].length>t&&(t=o[n].length);var a=-1/0;let p,T=1;do{n=a,p=e,e=[],a=o.length/T;let S=1;for(let P=0;P<o.length-1;P++)S<(P+1.5)/a?(S++,e[P]=!0):e[P]=!1;e=d_(o,e,t),a=fu(o,e,t),e=kv(o,e),T++}while(a>n);return p},fu=function(e,t,o){const n=[0],a=[];for(var p=0;p<e.length;p++)n[n.length-1]+=e[p].length,t[p]===!0?(n.push(0),a.push(e[p].charAt(e[p].length-1))):t[p]===!1&&n[n.length-1]++;for(e=Math.max(...n),t=0,p=0;p<n.length;p++)t-=2*Math.pow(Math.abs(o-n[p]),1.5),t-=Math.pow(e-n[p],1.5),".?!".indexOf(a[p])!==-1?t+=o/3:",;)]}".indexOf(a[p])!==-1&&(t+=o/4);return 1<n.length&&n[n.length-1]<=n[n.length-2]&&(t+=.5),t},d_=function(e,t,o){let n=fu(e,t,o),a;for(let p=0;p<t.length-1;p++){if(t[p]===t[p+1])continue;const T=[].concat(t);T[p]=!T[p],T[p+1]=!T[p+1];const S=fu(e,T,o);S>n&&(n=S,a=T)}return a?d_(e,a,o):t},kv=function(e,t){const o=[];for(let n=0;n<e.length;n++)o.push(e[n]),t[n]!==void 0&&o.push(t[n]?`
`:" ");return o.join("")},p_=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Ov=function(e){Bc=e},wv=function(){return Bc},Av=function(){return Fr},Lv=function(){return kt},br=function(e){if(e=__(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},__=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},g_=function(){kt||(kt=document.createElement("div"),kt.className="blocklyTooltipDiv",(Z()||document.body).appendChild(kt))},ac=function(e){e.mouseOverWrapper_=I(e,"mouseover",null,Nv),e.mouseOutWrapper_=I(e,"mouseout",null,Dv),e.addEventListener("mousemove",f_,!1)},uc=function(e){e&&(y(e.mouseOverWrapper_),y(e.mouseOutWrapper_),e.removeEventListener("mousemove",f_))},Nv=function(e){Ln||(e=__(e.currentTarget),Ps!==e&&(wi(),Ur=null,Ps=e),clearTimeout(of))},Dv=function(e){Ln||(of=setTimeout(function(){Ur=Ps=null,wi()},1),clearTimeout(Gr))},f_=function(e){if(Ps&&Ps.tooltip&&!Ln)if(Fr){const t=uh-e.pageX;e=hh-e.pageY,Math.sqrt(t*t+e*e)>nf&&wi()}else Ur!==Ps&&(clearTimeout(Gr),uh=e.pageX,hh=e.pageY,Gr=setTimeout(Pv,rf))},m_=function(){Ur=Ps=null,wi()},wi=function(){Fr&&(Fr=!1,kt&&(kt.style.display="none")),Gr&&clearTimeout(Gr)},$_=function(){wi(),Ln=!0},T_=function(){Ln=!1},Mv=function(){kt&&Ps&&(typeof Bc=="function"?Bc(kt,Ps):xv())},xv=function(){var e=br(Ps);e=h_(e,sf),e=e.split(`
`);for(let t=0;t<e.length;t++){const o=document.createElement("div");o.appendChild(document.createTextNode(e[t])),kt.appendChild(o)}},Bv=function(e){const t=document.documentElement.clientWidth,o=document.documentElement.clientHeight;let n=uh;n=e?n-(dh+kt.offsetWidth):n+dh;let a=hh+ph;return a+kt.offsetHeight>o+window.scrollY&&(a-=kt.offsetHeight+2*ph),e?n=Math.max(Pc-window.scrollX,n):n+kt.offsetWidth>t+window.scrollX-2*Pc&&(n=t-kt.offsetWidth-2*Pc),{x:n,y:a}},Pv=function(){if(!Ln&&(Ur=Ps,kt)){kt.textContent="",Mv();var e=Ps.RTL;kt.style.direction=e?"rtl":"ltr",kt.style.display="block",Fr=!0;var{x:t,y:o}=Bv(e);kt.style.left=t+"px",kt.style.top=o+"px"}},b_=function(){return _h},Fv=function(e){_h=e},E_=function(){return gh},Gv=function(e){gh=e},Ai=function(e){e=String(e).toLowerCase().trim();var t=lf[e];if(t||(t=e.substring(0,2)==="0x"?"#"+e.substring(2):e,t=t[0]==="#"?t:"#"+t,/^#[0-9a-f]{6}$/.test(t)))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var o=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(e=Number(o[1]),t=Number(o[2]),o=Number(o[3]),0<=e&&256>e&&0<=t&&256>t&&0<=o&&256>o)?hc(e,t,o):null},hc=function(e,t,o){return t=e<<16|t<<8|o,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},mu=function(e){return e=Ai(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},$u=function(e,t,o){let n=0,a=0,p=0;if(t===0)p=a=n=o;else{const T=Math.floor(e/60),S=e/60-T;e=o*(1-t);const P=o*(1-t*S);switch(t=o*(1-t*(1-S)),T){case 1:n=P,a=o,p=e;break;case 2:n=e,a=o,p=t;break;case 3:n=e,a=P,p=o;break;case 4:n=t,a=e,p=o;break;case 5:n=o,a=e,p=P;break;case 6:case 0:n=o,a=t,p=e}}return hc(Math.floor(n),Math.floor(a),Math.floor(p))},fn=function(e,t,o){return e=Ai(e),!e||(t=Ai(t),!t)?null:(e=mu(e),t=mu(t),hc(Math.round(t[0]+o*(e[0]-t[0])),Math.round(t[1]+o*(e[1]-t[1])),Math.round(t[2]+o*(e[2]-t[2]))))},Tu=function(e){return $u(e,_h,255*gh)},bu=function(e,t){const o=[];var n=e.split("");n.push("");var a=0;e=[];let p=null;for(let P=0;P<n.length;P++){var T=n[P];if(a===0)T==="%"?((a=e.join(""))&&o.push(a),e.length=0,a=1):e.push(T);else if(a===1)T==="%"?(e.push(T),a=0):t&&"0"<=T&&"9">=T?(a=2,p=T,(T=e.join(""))&&o.push(T),e.length=0):T==="{"?a=3:(e.push("%",T),a=0);else if(a===2)if("0"<=T&&"9">=T)p+=T;else{var S=void 0;o.push(parseInt((S=p)!=null?S:"",10)),P--,a=0}else a===3&&(T===""?(e.splice(0,0,"%{"),P--,a=0):T!=="}"?e.push(T):(a=e.join(""),/[A-Z]\w*/i.test(a)?(T=a.toUpperCase(),(T=T.startsWith("BKY_")?T.substring(4):null)&&T in Ne?(a=Ne[T],typeof a=="string"?Array.prototype.push.apply(o,bu(a,t)):t?o.push(String(a)):o.push(a)):o.push("%{"+a+"}")):o.push("%{"+a+"}"),a=e.length=0))}for((t=e.join(""))&&o.push(t),S=[],e.length=0,n=0;n<o.length;n++)typeof o[n]=="string"?e.push(o[n]):((t=e.join(""))&&S.push(t),e.length=0,S.push(o[n]));return(t=e.join(""))&&S.push(t),e.length=0,S},Eu=function(e){return bu(e,!0)},$t=function(e){return typeof e!="string"?e:(e=bu(e,!1),e.length?String(e[0]):"")},dc=function(e){let t=!0;const o=Ne,n=e.match(/%{BKY_[A-Z]\w*}/ig);if(n)for(let a=0;a<n.length;a++){const p=n[a].toUpperCase();o[p.slice(6,-1)]===void 0&&(console.warn("No message string for "+n[a]+" in "+e),t=!1)}return t},mn=function(e){const t=typeof e=="string"?$t(e):e;var o=Number(t);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:$u(o,b_(),255*E_())};if(o=Ai(t))return{hue:null,hex:o};throw o='Invalid colour: "'+t+'"',e!==t&&(o+=' (from "'+e+'")'),Error(o)},$n=function(){return no},Uv=function(e){no=e},v_=function(){no||(no=document.createElement("div"),no.className="blocklyWidgetDiv",(Z()||document.body).appendChild(no))},vu=function(e,t,o){To(),Fc=e,Gc=o,(e=no)&&(e.style.direction=t?"rtl":"ltr",e.style.display="block",t=V(),Nn=t.getRenderer().getClassName(),Dn=t.getTheme().getClassName(),Nn&&oe(e,Nn),Dn&&oe(e,Dn))},To=function(){if(I_()){Fc=null;var e=no;e&&(e.style.display="none",e.style.left="",e.style.top="",Gc&&Gc(),Gc=null,e.textContent="",Nn&&(Pe(e,Nn),Nn=""),Dn&&(Pe(e,Dn),Dn=""),V().markFocused())}},I_=function(){return!!Fc},Iu=function(e){Fc===e&&To()},y_=function(e,t,o){no.style.left=e+"px",no.style.top=t+"px",no.style.height=o+"px"},S_=function(e,t,o,n){const a=Vv(e,t,o);e=Hv(e,t,o,n),0>a?y_(e,0,o.height+a):y_(e,a,o.height)},Hv=function(e,t,o,n){return n?Math.min(Math.max(t.right-o.width,e.left),e.right-o.width):Math.max(Math.min(t.left,e.right-o.width),e.left)},Vv=function(e,t,o){return t.bottom+o.height>=e.bottom?t.top-o.height:t.bottom},Bs=function(e,t){We(se.FIELD,e,t)},Wv=function(e){Ql(se.FIELD,e)},yu=function(e){return cf.fromJsonInternal(e)},jv=function(e){const t=ec(se.FIELD,e.type);if(t){if(typeof t.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return t.fromJson(e)}return console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},bo=function(e,t){e.setAttribute(Wy,t)},ft=function(e,t,o){Array.isArray(o)&&(o=o.join(" ")),e.setAttribute(Vy+t,`${o}`)},Xv=function(e){return e!==je.SKIP_SETUP},Yv=function(e){let t=!1;const o=e.map(([T,S])=>typeof T=="string"?[$t(T),S]:(t=!0,[T.alt!==null?Object.assign({},T,{alt:$t(T.alt)}):Object.assign({},T),S]));if(t||2>e.length)return{options:o};var n=o.map(([T])=>T),a=cc(n);e=a_(n,a);const p=u_(n,a);return!e&&!p||a<=e+p?{options:o}:(a=e?n[0].substring(0,e-1):void 0,n=p?n[0].substr(1-p):void 0,{options:zv(o,e,p),prefix:a,suffix:n})},zv=function(e,t,o){return e.map(([n,a])=>[n.substring(t,n.length-o),a])},R_=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let o=0;o<e.length;o++){const n=e[o];Array.isArray(n)?typeof n[1]!="string"?(t=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option id must be a string. Found "+n[1]+" in: ",n)):n[0]&&typeof n[0]!="string"&&typeof n[0].src!="string"&&(t=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must have a string label or image description. Found"+n[0]+" in: ",n)):(t=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must be an array. Found: ",n))}if(t)throw TypeError("Found invalid FieldDropdown options.")},Kv=function(e,t){H("Blockly.utils.object.inherits","version 9","version 10"),e.superClass_=t.prototype,Object.setPrototypeOf(e,t),e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Jv=function(e,t){H("Blockly.utils.object.mixin","May 2022","May 2023","Object.assign");for(const o in t)e[o]=t[o]},ii=function(e,t){for(const o in t)e[o]=t[o]!==null&&typeof t[o]=="object"?ii(e[o]||Object.create(null),t[o]):t[o];return e},qv=function(e){return H("Blockly.utils.object.values","version 9","version 10","Object.values"),Object.values(e)},pc=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=k_(e),e=eI(e)),Zv(e),e):null},Zv=function(e){const t=e.kind;if(e=e.contents,t&&t!==hf&&t!==bh)throw Error("Invalid toolbox kind "+t+". Please supply either "+hf+" or "+bh);if(!e)throw Error("Toolbox must have a contents attribute.")},_c=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:Cu(e):[]},Su=function(e){return df.hasCategoriesInternal(e)},Qv=function(e){if(!e)return!1;const t=e.kind;return t?t===bh:!!e.contents.filter(function(o){return o.kind.toUpperCase()==="CATEGORY"}).length},Ru=function(e){return e&&e.contents?!!e.contents.filter(function(t){return t.kind.toUpperCase()==="CATEGORY"}).length:!1},eI=function(e){const t={contents:Cu(e)};return e instanceof Node&&C_(e,t),t},Cu=function(e){const t=[];let o=e.childNodes;o||(o=e);for(let n=0,a;a=o[n];n++){if(!a.tagName)continue;e={};const p=a.tagName.toUpperCase();e.kind=p,p==="BLOCK"?e.blockxml=a:a.childNodes&&0<a.childNodes.length&&(e.contents=Cu(a)),C_(a,e),t.push(e)}return t},C_=function(e,t){for(let o=0;o<e.attributes.length;o++){const n=e.attributes[o];-1<n.nodeName.indexOf("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[n.nodeName.replace("css-","")]=n.value):t[n.nodeName]=n.value}},k_=function(e){let t=null;if(e)if(typeof e=="string"){if(t=eo(e),t.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},gc=function(e,t){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(Mn[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof t!="function")throw Error('Error: Extension "'+e+'" must be a function');Mn[e]=t},tI=function(e,t){if(!t||typeof t!="object")throw Error('Error: Mixin "'+e+'" must be a object');gc(e,function(){this.mixin(t)})},sI=function(e,t,o,n){const a='Error when registering mutator "'+e+'": ';A_(a,t);const p=w_(t,a);if(o&&typeof o!="function")throw Error(a+'Extension "'+e+'" is not a function');gc(e,function(){p&&this.setMutator(new i.Mutator$$module$build$src$core$mutator(n||[],this)),this.mixin(t),o&&o.apply(this)})},oI=function(e){O_(e)?delete Mn[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},O_=function(e){return!!Mn[e]},ku=function(e,t,o){const n=Mn[e];if(typeof n!="function")throw Error('Error: Extension "'+e+'" not found.');let a;if(o?iI(e,t):a=wu(t),n.apply(t),o)A_('Error after applying mutator "'+e+'": ',t);else if(!lI(a,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},iI=function(e,t){if(wu(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},nI=function(e,t){return Ou(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},rI=function(e,t){return Ou(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},w_=function(e,t){return Ou(e.compose,e.decompose,t+" compose/decompose")},Ou=function(e,t,o){if(e&&t){if(typeof e!="function"||typeof t!="function")throw Error(o+" must be a function");return!0}if(!e&&!t)return!1;throw Error(o+"Must have both or neither functions")},A_=function(e,t){const o=nI(t,e),n=rI(t,e);if(!o&&!n)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");w_(t,e)},wu=function(e){const t=[];return e.domToMutation!==void 0&&t.push(e.domToMutation),e.mutationToDom!==void 0&&t.push(e.mutationToDom),e.saveExtraState!==void 0&&t.push(e.saveExtraState),e.loadExtraState!==void 0&&t.push(e.loadExtraState),e.compose!==void 0&&t.push(e.compose),e.decompose!==void 0&&t.push(e.decompose),t},lI=function(e,t){if(t=wu(t),t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(e[o]!==t[o])return!1;return!0},fc=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const t=setInterval(function(){document.readyState==="complete"&&(clearInterval(t),e())},10)}},cI=function(e,t){const o=[];return typeof document=="object"&&fc(function(){for(const n in t)dc(t[n])}),function(){this.type&&o.indexOf(this.type)===-1&&(aI(this,e,t),o.push(this.type)),this.setTooltip(function(){var n=String(this.getFieldValue(e));let a=t[n];return a===null?o.indexOf(this.type)===-1&&(n="No tooltip mapping for value "+n+" of field "+e,this.type!==null&&(n+=" of block type "+this.type),console.warn(n+".")):a=$t(a),a}.bind(this))}},aI=function(e,t,o){var n=e.getField(t);if(n instanceof lo&&!n.isOptionListDynamic()){n=n.getOptions();for(let a=0;a<n.length;a++){const p=n[a][1];o[p]===null&&console.warn("No tooltip mapping for value "+p+" of field "+t+" of block type "+e.type)}}},uI=function(e,t){return typeof document=="object"&&fc(function(){dc(e)}),function(){this.setTooltip(function(){const o=this.getField(t);return $t(e).replace("%1",o?o.getText():"")}.bind(this))}},hI=function(){const e=this.tooltip;this.setTooltip(function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}.bind(this))},ps=function(e,t){return t=e.indexOf(t),t===-1?!1:(e.splice(t,1),!0)},Te=function(e,t){return" "+e+","+t+" "},Ss=function(e,t){return" "+e+t.join("")},qt=function(e,t){return" M "+e+","+t+" "},ht=function(e,t){return" m "+e+","+t+" "},Do=function(e,t){return" l "+e+","+t+" "},Er=function(e){return" l"+e.join("")},ge=function(e,t){return" "+e+" "+t+" "},Rt=function(e,t,o,n){return e+" "+o+" "+o+" "+t+n},dI=function(e){return H("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),Zs(e)},pI=function(e){return H("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),rc(e)},_I=function(e){return H("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),Eu(e)},gI=function(e){return H("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),$t(e)},fI=function(e){return H("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),dc(e)},mI=function(){return H("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),o_()},$I=function(){return H("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),pu()},TI=function(e,t){return H("Blockly.utils.arrayRemove","December 2021","December 2022","Blockly.array.removeElem"),ps(e,t)},bI=function(){return H("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),_u()},EI=function(e,t){return H("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),Ae(e,t)},vI=function(e,t){return H("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),i_(e,t)},II=function(e){return H("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),mn(e)},yI=function(e){H("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),fc(e)},Au=function(e,t){We(se.SERIALIZER,e,t)},SI=function(e){Ql(se.SERIALIZER,e)},Mo=function(e,{addCoordinates:t=!1,addInputBlocks:o=!0,addNextBlocks:n=!0,doFullSerialization:a=!0}={}){if(e.isInsertionMarker())return null;const p={type:e.type,id:e.id};return t&&CI(e,p),RI(e,p),kI(e,p),OI(e,p),wI(e,p,a),o&&AI(e,p,a),n&&LI(e,p,a),p},RI=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.enabled=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},CI=function(e,t){const o=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(o.RTL?o.getWidth()-e.x:e.x),t.y=Math.round(e.y)},kI=function(e,t){e.saveExtraState?(e=e.saveExtraState(),e!==null&&(t.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(t.extraState=Qs(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},OI=function(e,t){e.getCommentText()&&(t.icons={comment:{text:e.getCommentText(),pinned:e.commentModel.pinned,height:Math.round(e.commentModel.size.height),width:Math.round(e.commentModel.size.width)}})},wI=function(e,t,o){const n=Object.create(null);for(let a=0;a<e.inputList.length;a++){const p=e.inputList[a];for(let T=0;T<p.fieldRow.length;T++){const S=p.fieldRow[T];S.isSerializable()&&(n[S.name]=S.saveState(o))}}Object.keys(n).length&&(t.fields=n)},AI=function(e,t,o){const n=Object.create(null);for(let a=0;a<e.inputList.length;a++){const p=e.inputList[a];if(p.type===xe.DUMMY)continue;const T=L_(p.connection,o);T&&(n[p.name]=T)}Object.keys(n).length&&(t.inputs=n)},LI=function(e,t,o){e.nextConnection&&(e=L_(e.nextConnection,o))&&(t.next=e)},L_=function(e,t){const o=e.getShadowState(!0);if(e=e.targetBlock(),!o&&!e)return null;const n=Object.create(null);return o&&(n.shadow=o),e&&!e.isShadow()&&(n.block=Mo(e,{doFullSerialization:t})),n},Li=function(e,t,{recordUndo:o=!1}={}){return Lu(e,t,{recordUndo:o})},Lu=function(e,t,{parentConnection:o,isShadow:n=!1,recordUndo:a=!1}={}){const p=Js();ys(a),(a=ut())||ve(!0),At();const T=N_(e,t,{parentConnection:o,isShadow:n});return Lt(),Re(new(Ce(Wt))(T)),ve(a),ys(p),t.rendered&&setTimeout(()=>{T.disposed||T.setConnectionTracking(!0)},1),T},N_=function(e,t,{parentConnection:o,isShadow:n=!1}={}){if(!e.type)throw new ff(e);const a=t.newBlock(e.type,e.id);return a.setShadow(n),NI(a,e),DI(a,e),MI(a,e),xI(o,a,e),BI(a,e),PI(a,e),FI(a,e),GI(a,e),UI(a,t.rendered),a},NI=function(e,t){let o=t.x===void 0?0:t.x;t=t.y===void 0?0:t.y;const n=e.workspace;o=n.RTL?n.getWidth()-o:o,e.moveBy(o,t)},DI=function(e,t){t.collapsed&&e.setCollapsed(!0),t.enabled===!1&&e.setEnabled(!1),t.inline!==void 0&&e.setInputsInline(t.inline),t.data!==void 0&&(e.data=t.data)},MI=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(eo(t.extraState)))},xI=function(e,t,o){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new $f(o);if(e.type===xe.VALUE){var n=t.outputConnection;if(!n)throw new Yr("output",t,o)}else if(n=t.previousConnection,!n)throw new Yr("previous",t,o);if(!e.connect(n)){const a=t.workspace.connectionChecker;throw new mf(a.getErrorMessage(a.canConnectWithReason(n,e,!1),n,e),e.type===xe.VALUE?"output connection":"previous connection",t,o)}}},BI=function(e,t){t.icons&&(t=t.icons.comment)&&(e.setCommentText(t.text),"pinned"in t&&(e.commentModel.pinned=t.pinned),"width"in t&&"height"in t&&(e.commentModel.size=new Gt(t.width,t.height)),t.pinned&&e.rendered&&!e.isInFlyout&&setTimeout(()=>e.getCommentIcon().setVisible(!0),1))},PI=function(e,t){if(t.fields){var o=Object.keys(t.fields);for(let n=0;n<o.length;n++){const a=o[n],p=t.fields[a],T=e.getField(a);T?T.loadState(p):console.warn(`Ignoring non-existant field ${a} in block ${e.type}`)}}},FI=function(e,t){if(t.inputs){var o=Object.keys(t.inputs);for(let n=0;n<o.length;n++){const a=o[n],p=e.getInput(a);if(!p||!p.connection)throw new Yr(a,e,t);D_(p.connection,t.inputs[a])}}},GI=function(e,t){if(t.next){if(!e.nextConnection)throw new Yr("next",e,t);D_(e.nextConnection,t.next)}},D_=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&N_(t.block,e.getSourceBlock().workspace,{parentConnection:e})},UI=function(e,t){if(t)for(e.setConnectionTracking(!1),e.initSvg(),e.render(!1),e=e.getIcons(),t=0;t<e.length;t++)e[t].computeIconLocation();else e.initModel()},HI=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},VI=function(e,t){let o=null;t=t.outputConnection;const n=t.getConnectionChecker();for(let a=0,p;p=e.inputList[a];a++){const T=p.connection;if(T&&n.canConnect(t,T,!1)){if(o)return null;o=T}}return o},WI=function(e,t){let o;for(;o=VI(e,t);)if(e=o.targetBlock(),!e||e.isShadow())return o;return null},mc=function(e){let t=e.outputConnection;return(!t||e.previousConnection&&e.previousConnection.isConnected())&&(t=e.previousConnection),t},M_=function(e){const t=e.workspace;var o=e.getSvgRoot();t.getAudioManager().play("delete");const n=t.getSvgXY(o);o=o.cloneNode(!0),o.setAttribute("transform","translate("+n.x+","+n.y+")"),t.getParentSvg().appendChild(o),x_(o,{x:n.x,y:n.y,width:e.width,height:e.height},t.RTL,new Date,t.scale)},x_=function(e,t,o,n,a){const p=(new Date().getTime()-n.getTime())/150;1<p?be(e):(e.setAttribute("transform","translate("+(t.x+(o?-1:1)*t.width*a/2*p)+","+(t.y+t.height*a*p)+") scale("+(1-p)*a+")"),setTimeout(x_,10,e,t,o,n,a))},B_=function(e){const t=e.workspace,o=t.scale;if(t.getAudioManager().play("click"),!(1>o)){var n=t.getSvgXY(e.getSvgRoot());e.outputConnection?(n.x+=(e.RTL?3:-3)*o,n.y+=13*o):e.previousConnection&&(n.x+=(e.RTL?-23:23)*o,n.y+=3*o),e=A(w.CIRCLE,{cx:n.x,cy:n.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg()),P_(e,new Date,o)}},P_=function(e,t,o){const n=(new Date().getTime()-t.getTime())/150;1<n?be(e):(e.setAttribute("r",(25*n*o).toString()),e.style.opacity=(1-n).toString(),Wc=setTimeout(P_,10,e,t,o))},F_=function(e){if(vr(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),qr=e.getSvgRoot(),G_(qr,t,new Date)}},G_=function(e,t,o){const n=(new Date().getTime()-o.getTime())/200;let a="";1>=n&&(a=`skewX(${Math.round(Math.sin(n*Math.PI*3)*(1-n)*t)})`,Wc=setTimeout(G_,10,e,t,o)),e.skew_=a,e.setAttribute("transform",e.translate_+e.skew_)},vr=function(){if(qr){Wc&&clearTimeout(Wc);const e=qr;e.skew_="",e.setAttribute("transform",e.translate_),qr=null}},Ir=function(e){yh.copyInternal(e)},jI=function(e){Vo=e.toCopyData()},Nu=function(){if(!Vo)return null;let e=Vo.source;return e.isFlyout&&(e=e.targetWorkspace),Vo.typeCounts&&e.isCapacityAvailable(Vo.typeCounts)?e.paste(Vo.saveInfo):null},$c=function(e){return yh.duplicateInternal(e)},XI=function(e){const t=Vo;Ir(e);let o,n,a;return e=(a=(o=e.toCopyData())==null||(n=o.source)==null?void 0:n.paste(Vo.saveInfo))!=null?a:null,Vo=t,e},U_=function(){return el},H_=function(e){el=e},Tc=function(e,t,o){if(vu(Sh,o,V_),t.length){var n=YI(t,o);tl=n,zI(n,e,o),setTimeout(function(){n.focus()},1),el=null}else bc()},YI=function(e,t){const o=new fh;o.setRole($s.MENU);for(let n=0;n<e.length;n++){const a=e[n],p=new mh(a.text);p.setRightToLeft(t),p.setRole($s.MENUITEM),o.addChild(p),p.setEnabled(a.enabled),a.enabled&&p.onAction(function(){bc(),a.callback(a.scope)},{})}return o},zI=function(e,t,o){const n=pu();t=new Tt(t.clientY+n.top,t.clientY+n.top,t.clientX+n.left,t.clientX+n.left),KI(e);const a=e.getSize();o&&(t.left+=a.width,t.right+=a.width,n.left+=a.width,n.right+=a.width),S_(n,t,a,o),e.focus()},KI=function(e){var t=$n();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),oe(t,"blocklyContextMenu"),E(t,"contextmenu",null,JI),e.focus()},JI=function(e){e.preventDefault(),e.stopPropagation()},bc=function(){Iu(Sh),el=null},V_=function(){tl&&(tl.dispose(),tl=null)},qI=function(e,t){return()=>{At();let o;try{o=gn(t,e.workspace);const n=e.getRelativeToSurfaceXY();n.x=e.RTL?n.x-i.config$$module$build$src$core$config.snapRadius:n.x+i.config$$module$build$src$core$config.snapRadius,n.y+=2*i.config$$module$build$src$core$config.snapRadius,o.moveBy(n.x,n.y)}finally{Lt()}xt()&&!o.isShadow()&&Re(new(Ce(Wt))(o)),o.select()}},W_=function(e){return{text:Ne.REMOVE_COMMENT,enabled:!0,callback:function(){ve(!0),e.dispose(),ve(!1)}}},j_=function(e){return{text:Ne.DUPLICATE_COMMENT,enabled:!0,callback:function(){$c(e)}}},ZI=function(e,t){const o={enabled:!0};return o.text=Ne.ADD_COMMENT,o.callback=function(){const n=new Zt(e,Ne.WORKSPACE_COMMENT_DEFAULT_TEXT,Zt.DEFAULT_SIZE,Zt.DEFAULT_SIZE);var a=e.getInjectionDiv().getBoundingClientRect();a=new ae(t.clientX-a.left,t.clientY-a.top);const p=e.getOriginOffsetInPixels();a=ae.difference(a,p),a.scale(1/e.scale),n.moveBy(a.x,a.y),e.rendered&&(n.initSvg(),n.render(),n.select())},o},Du=function(e,t,o,n,a,p){const T=p.scrollbar&&p.scrollbar.canScrollVertically();return e.horizontal===Fn.LEFT?(o=a.absoluteMetrics.left+o,T&&p.RTL&&(o+=mt.scrollbarThickness)):(o=a.absoluteMetrics.left+a.viewMetrics.width-t.width-o,T&&!p.RTL&&(o-=mt.scrollbarThickness)),e.vertical===Wo.TOP?e=a.absoluteMetrics.top+n:(e=a.absoluteMetrics.top+a.viewMetrics.height-t.height-n,p.scrollbar&&p.scrollbar.canScrollHorizontally()&&(e-=mt.scrollbarThickness)),new Tt(e,e+t.height,o,o+t.width)},Mu=function(e,t){return{horizontal:t.toolboxMetrics.position===De.LEFT||e.horizontalLayout&&!e.RTL?Fn.RIGHT:Fn.LEFT,vertical:t.toolboxMetrics.position===De.BOTTOM?Wo.TOP:Wo.BOTTOM}},xu=function(e,t,o,n){const a=e.left,p=e.right-e.left,T=e.bottom-e.top;for(let S=0;S<n.length;S++){const P=n[S];e.intersects(P)&&(e=o===hi.UP?P.top-T-t:P.bottom+t,e=new Tt(e,e+T,a,a+p),S=-1)}return e},X_=function(){st.registry.register({name:So.ESCAPE,preconditionFn(e){return!e.options.readOnly},callback(e){return e.hideChaff(),!0},keyCodes:[me.ESC]})},Y_=function(){st.registry.register({name:So.DELETE,preconditionFn(e){const t=J();return!e.options.readOnly&&t!=null&&t.isDeletable()},callback(e,t){return t.preventDefault(),jo.inProgress()?!1:(J().checkAndDelete(),!0)},keyCodes:[me.DELETE,me.BACKSPACE]})},z_=function(){const e=st.registry.createSerializedKey(me.C,[me.CTRL]),t=st.registry.createSerializedKey(me.C,[me.ALT]),o=st.registry.createSerializedKey(me.C,[me.META]);st.registry.register({name:So.COPY,preconditionFn(n){const a=J();return!n.options.readOnly&&!jo.inProgress()&&a!=null&&a.isDeletable()&&a.isMovable()},callback(n,a){return a.preventDefault(),n.hideChaff(),Ir(J()),!0},keyCodes:[e,t,o]})},K_=function(){const e=st.registry.createSerializedKey(me.X,[me.CTRL]),t=st.registry.createSerializedKey(me.X,[me.ALT]),o=st.registry.createSerializedKey(me.X,[me.META]);st.registry.register({name:So.CUT,preconditionFn(n){const a=J();return!n.options.readOnly&&!jo.inProgress()&&a!=null&&a instanceof Fs&&a.isDeletable()&&a.isMovable()&&!a.workspace.isFlyout},callback(){const n=J();return n?(Ir(n),n.checkAndDelete(),!0):!1},keyCodes:[e,t,o]})},J_=function(){const e=st.registry.createSerializedKey(me.V,[me.CTRL]),t=st.registry.createSerializedKey(me.V,[me.ALT]),o=st.registry.createSerializedKey(me.V,[me.META]);st.registry.register({name:So.PASTE,preconditionFn(n){return!n.options.readOnly&&!jo.inProgress()},callback(){return!!Nu()},keyCodes:[e,t,o]})},q_=function(){const e=st.registry.createSerializedKey(me.Z,[me.CTRL]),t=st.registry.createSerializedKey(me.Z,[me.ALT]),o=st.registry.createSerializedKey(me.Z,[me.META]);st.registry.register({name:So.UNDO,preconditionFn(n){return!n.options.readOnly&&!jo.inProgress()},callback(n){return n.hideChaff(),n.undo(!1),!0},keyCodes:[e,t,o]})},Z_=function(){const e=st.registry.createSerializedKey(me.Z,[me.SHIFT,me.CTRL]),t=st.registry.createSerializedKey(me.Z,[me.SHIFT,me.ALT]),o=st.registry.createSerializedKey(me.Z,[me.SHIFT,me.META]),n=st.registry.createSerializedKey(me.Y,[me.CTRL]);st.registry.register({name:So.REDO,preconditionFn(a){return!jo.inProgress()&&!a.options.readOnly},callback(a){return a.hideChaff(),a.undo(!0),!0},keyCodes:[e,t,o,n]})},Q_=function(){X_(),Y_(),z_(),K_(),J_(),q_(),Z_()},QI=function(e){return e.doProcedureUpdate!==void 0},ni=function(e){for(const t of e.getAllBlocks(!1))QI(t)&&t.doProcedureUpdate()},Bu=function(e){const t=e.getBlocksByType("procedures_defnoreturn",!1).map(function(o){return o.getProcedureDef()});return e=e.getBlocksByType("procedures_defreturn",!1).map(function(o){return o.getProcedureDef()}),t.sort(eg),e.sort(eg),[t,e]},eg=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},tg=function(e,t){if(t.isInFlyout)return e;for(e=e||Ne.UNNAMED_KEY||"unnamed";!ey(e,t.workspace,t);){const o=e.match(/^(.*?)(\d+)$/);e=o?o[1]+(parseInt(o[2])+1):e+"2"}return e},ey=function(e,t,o){return!sg(e,t,o)},sg=function(e,t,o){t=t.getAllBlocks(!1);for(let a=0;a<t.length;a++)if(t[a]!==o){var n=t[a];if(n.getProcedureDef&&(n=n.getProcedureDef(),Gs.equals(n[0],e)))return!0}return!1},ty=function(e){var t=this.getSourceBlock();if(!t)throw new Ot;e=e.trim();const o=tg(e,t),n=this.getValue();if(n!==e&&n!==o)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const a=e[t];a.renameProcedure&&a.renameProcedure(n,o)}return o},Pu=function(e){function t(p,T){for(let P=0;P<p.length;P++){var S=p[P][0];const te=p[P][1],Ge=tt("block");Ge.setAttribute("type",T),Ge.setAttribute("gap","16");const ze=tt("mutation");for(ze.setAttribute("name",S),Ge.appendChild(ze),S=0;S<te.length;S++){const es=tt("arg");es.setAttribute("name",te[S]),ze.appendChild(es)}o.push(Ge)}}const o=[];if(gs.procedures_defnoreturn){var n=tt("block");n.setAttribute("type","procedures_defnoreturn"),n.setAttribute("gap","16");var a=tt("field");a.setAttribute("name","NAME"),a.appendChild(oi(Ne.PROCEDURES_DEFNORETURN_PROCEDURE)),n.appendChild(a),o.push(n)}return gs.procedures_defreturn&&(n=tt("block"),n.setAttribute("type","procedures_defreturn"),n.setAttribute("gap","16"),a=tt("field"),a.setAttribute("name","NAME"),a.appendChild(oi(Ne.PROCEDURES_DEFRETURN_PROCEDURE)),n.appendChild(a),o.push(n)),gs.procedures_ifreturn&&(n=tt("block"),n.setAttribute("type","procedures_ifreturn"),n.setAttribute("gap","16"),o.push(n)),o.length&&o[o.length-1].setAttribute("gap","24"),e=Bu(e),t(e[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),o},og=function(e){var t=[],o=e.getBlocksByType("procedures_mutatorarg",!1);for(let p=0,T;T=o[p];p++)t.push(T.getFieldValue("NAME"));o=tt("xml");const n=tt("block");n.setAttribute("type","procedures_mutatorarg");const a=tt("field");a.setAttribute("name","NAME"),t=uu(xh,t),t=oi(t),a.appendChild(t),n.appendChild(a),o.appendChild(n),e.updateToolbox(o)},ig=function(e){if(e.type===Fo&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=z(e.workspaceId).getBlockById(e.blockId);var t=e.type;(t==="procedures_defnoreturn"||t==="procedures_defreturn")&&(e=e.mutator.getWorkspace(),og(e),e.addChangeListener(sy))}},sy=function(e){(e.type===Wt||e.type===Io||e.type===Pt)&&(e=z(e.workspaceId),og(e))},ng=function(e,t){const o=[];t=t.getAllBlocks(!1);for(let a=0;a<t.length;a++){var n=t[a];n.getProcedureCall&&(n=n.getProcedureCall())&&Gs.equals(n,e)&&o.push(t[a])}return o},oy=function(e){const t=Js();var o=e.getProcedureDef()[0];const n=e.mutationToDom(!0);e=ng(o,e.workspace);for(let p=0,T;T=e[p];p++){o=(o=T.mutationToDom())&&Qs(o),T.domToMutation&&T.domToMutation(n);var a=T.mutationToDom();a=a&&Qs(a),o!==a&&(ys(!1),Re(new(Ce(Pt))(T,"mutation",null,o,a)),ys(t))}},iy=function(e,t){t=t.getAllBlocks(!1);for(let n=0;n<t.length;n++){var o=t[n];if(o.getProcedureDef&&(o=o.getProcedureDef())&&Gs.equals(o[0],e))return t[n]}return null},rg=function(e){return e.isDynamic},Ec=function(){return qf},ny=function(){H("Blockly.blockRendering.debug.stopDebugger()","version 8","version 10","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),qf=!1},yr=function(e,t){We(se.RENDERER,e,t)},ry=function(e){Ql(se.RENDERER,e)},ly=function(){H("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),ny()},lg=function(e,t,o){return e=new(pn(se.RENDERER,e))(e),e.init(t,o),e},cg=function(e){$r(e.getTargetWorkspace(),void 0,"String")},ag=function(e){$r(e.getTargetWorkspace(),void 0,"Number")},ug=function(e){$r(e.getTargetWorkspace(),void 0,"Colour")},Fu=function(e){let t=[],o=document.createElement("button");return o.setAttribute("text",Ne.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(o),o=document.createElement("button"),o.setAttribute("text",Ne.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(o),o=document.createElement("button"),o.setAttribute("text",Ne.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(o),e.registerButtonCallback("CREATE_VARIABLE_STRING",cg),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",ag),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",ug),e=hg(e),t=t.concat(e)},hg=function(e){e=e.getAllVariables();const t=[];if(0<e.length){if(gs.variables_set_dynamic){var o=e[e.length-1];const n=tt("block");n.setAttribute("type","variables_set_dynamic"),n.setAttribute("gap","24"),n.appendChild(_n(o)),t.push(n)}if(gs.variables_get_dynamic){e.sort(xr.compareByName);for(let n=0,a;a=e[n];n++)o=tt("block"),o.setAttribute("type","variables_get_dynamic"),o.setAttribute("gap","8"),o.appendChild(_n(a)),t.push(o)}}return t},cy=function(e){e.resizeContents()},ay=function(e){const t=Object.create(null),o=ou(se.SERIALIZER,!0);for(const n in o){let a;const p=(a=o[n])==null?void 0:a.save(e);p&&(t[n]=p)}return t},uy=function(e,t,{recordUndo:o=!1}={}){var n=ou(se.SERIALIZER,!0);if(n){n=Object.entries(n).sort((p,T)=>T[1].priority-p[1].priority);var a=Js();ys(o),(o=ut())||ve(!0),vs(),t instanceof uo&&t.setResizesEnabled(!1);for(const[,p]of n.reverse()){let T;(T=p)==null||T.clear(t)}for(let[p,T]of n.reverse())if(e[p]){let S;(S=T)==null||S.load(e[p],t)}t instanceof uo&&t.setResizesEnabled(!0),Is(),Re(new(Ce(kn))(t)),ve(o),ys(a)}},hy=function(e){const t={id:e.getId(),name:e.getName(),returnTypes:e.getReturnTypes()};return e.getParameters().length&&(t.parameters=e.getParameters().map(o=>dy(o))),t},dy=function(e){const t={id:e.getId(),name:e.getName()};return e.getTypes().length&&(t.types=e.getTypes()),t},py=function(e,t,o,n){if(e=new e(n,o.name,o.id).setReturnTypes(o.returnTypes),!o.parameters)return e;for(const[a,p]of o.parameters.entries())e.insertParameter(_y(t,p,n),a);return e},_y=function(e,t,o){return new e(o,t.name,t.id).setTypes(t.types||[])},vc=function(e,t,o){const n=o.getBoundingRectangle(),a=n.right-n.left,p=re(t.top,n.top,t.top+t.height-(n.bottom-n.top))-n.top;let T=t.left;return t=t.left+t.width-a,e.RTL?T=Math.min(t,T):t=Math.max(T,t),(e=re(T,n.left,t)-n.left)||p?(o.moveBy(e,p),!0):!1},dg=function(e){return t=>{var o=e.getMetricsManager();if(o.hasFixedEdges()&&!e.isDragging()){var n;if(sh.indexOf((n=t.type)!=null?n:"")!==-1){n=o.getScrollMetrics(!0);const a=gy(e,t);a&&(o=ut(),ve(t.group),vc(e,n,a)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),o!==null&&ve(o))}else t.type===Pi&&t.scale&&t.oldScale&&t.scale>t.oldScale&&Gu(e)}}},gy=function(e,t){let o=null;switch(t.type){case Wt:case is:(o=e.getBlockById(t.blockId))&&(o=o.getRootBlock());break;case Fi:case Go:o=e.getCommentById(t.commentId)}return o},Gu=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var o=e.getTopBoundedElements();for(let n=0,a;a=o[n];n++)vc(e,t,a)}},fy=function(e,t){if(typeof e=="string"&&(e=document.getElementById(e)||document.querySelector(e)),!e||!hs(document,e))throw Error("Error: container is not in current document.");t=new co(t||{});const o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,ft(o,ct.LABEL,Ne.WORKSPACE_ARIA_LABEL),e.appendChild(o),e=my(o,t);const n=new xm(o),a=new Mm(o),p=$y(e,t,n,a);return Ty(p),de(p),$e(p),o.addEventListener("focusin",function(){de(p)}),p},my=function(e,t){e.setAttribute("dir","LTR"),s_(t.hasCss,t.pathToMedia),e=A(w.SVG,{xmlns:En,"xmlns:html":to,"xmlns:xlink":fs,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const o=A(w.DEFS,{},e),n=String(Math.random()).substring(2);return t.gridPattern=Mh.createDom(n,t.gridOptions,o),e},$y=function(e,t,o,n){t.parentWorkspace=null,t=new uo(t,o,n),o=t.options,t.scale=o.zoomOptions.startScale,e.appendChild(t.createDom("blocklyMainBackground")),n=t.getInjectionDiv();var a=t.getRenderer().getClassName();return a&&oe(n,a),(a=t.getTheme().getClassName())&&oe(n,a),!o.hasCategories&&o.languageTree&&(n=t.addFlyout(w.SVG),St(n,e)),o.hasTrashcan&&t.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&t.addZoomControls(),t.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),t.translate(0,0),t.addChangeListener(dg(t)),$e(t),v_(),Jt(),g_(),t},Ty=function(e){const t=e.options;var o=e.getParentSvg();if(E(o.parentNode,"contextmenu",null,function(n){F(n)||n.preventDefault()}),o=E(window,"resize",null,function(){e.hideChaff(!0),$e(e),Gu(e)}),e.setResizeHandlerWrapper(o),Ey(),t.languageTree){o=e.getToolbox();const n=e.getFlyout(!0);o?o.init():n&&(n.init(e),n.show(t.languageTree),typeof n.scrollToStart=="function"&&n.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new Kh(e,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.horizontal,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&vy(t.pathToMedia,e)},by=function(e){const t=V();t&&!(F(e)||t.rendered&&!t.isVisible())&&st.registry.onKeyDown(t,e)},Ey=function(){Bm||(E(document,"scroll",null,function(){const e=le();for(let t=0,o;o=e[t];t++)o instanceof uo&&o.updateInverseScreenCTM()}),E(document,"keydown",null,by),I(document,"touchend",null,l),I(document,"touchcancel",null,l),Tn&&E(window,"orientationchange",document,function(){$e(V())})),Bm=!0},vy=function(e,t){function o(){for(;a.length;)y(a.pop());n.preload()}const n=t.getAudioManager();n.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),n.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),n.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const a=[];a.push(E(document,"mousemove",null,o,!0)),a.push(E(document,"touchstart",null,o,!0))},pg=function(){Ze.registry.register({displayText(){return Ne.UNDO},preconditionFn(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:Ze.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},_g=function(){Ze.registry.register({displayText(){return Ne.REDO},preconditionFn(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:Ze.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},gg=function(){Ze.registry.register({displayText(){return Ne.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:Ze.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},fg=function(e,t){function o(p){a--,p.setCollapsed(e),a===0&&ve(!1)}let n=0,a=0;ve(!0);for(let p=0;p<t.length;p++){let T=t[p];for(;T;)a++,setTimeout(o.bind(null,T),n),T=T.getNextBlock(),n+=10}},mg=function(){Ze.registry.register({displayText(){return Ne.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let o=e[t];for(;o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}}return"disabled"}return"hidden"},callback(e){fg(!0,e.workspace.getTopBlocks(!0))},scopeType:Ze.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},$g=function(){Ze.registry.register({displayText(){return Ne.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let o=e[t];for(;o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}}return"disabled"}return"hidden"},callback(e){fg(!1,e.workspace.getTopBlocks(!0))},scopeType:Ze.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Tg=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let o=0;o<e.length;o++)Tg(e[o],t)}},Uu=function(e){const t=[];e=e.getTopBlocks(!0);for(let o=0;o<e.length;o++)Tg(e[o],t);return t},Ic=function(e,t){ve(t);const o=e.shift();o&&(o.isDeadOrDying()?Ic(e,t):(o.dispose(!1,!0),setTimeout(Ic,10,e,t))),ve(!1)},bg=function(){Ze.registry.register({displayText(e){return e.workspace?(e=Uu(e.workspace).length,e===1?Ne.DELETE_BLOCK:Ne.DELETE_X_BLOCKS.replace("%1",String(e))):""},preconditionFn(e){return e.workspace&&0<Uu(e.workspace).length?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=Uu(e.workspace),o=Ks();2>t.length?Ic(t,o):ru(Ne.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),function(n){n&&Ic(t,o)})}},scopeType:Ze.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Iy=function(){pg(),_g(),gg(),mg(),$g(),bg()},Eg=function(){Ze.registry.register({displayText(){return Ne.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){e.block&&$c(e.block)},scopeType:Ze.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},vg=function(){Ze.registry.register({displayText(e){return e.block.getCommentIcon()?Ne.REMOVE_COMMENT:Ne.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.getCommentIcon()?e.setCommentText(null):e.setCommentText("")},scopeType:Ze.ScopeType.BLOCK,id:"blockComment",weight:2})},Ig=function(){Ze.registry.register({displayText(e){return e.block.getInputsInline()?Ne.EXTERNAL_INPUTS:Ne.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let t=1;t<e.inputList.length;t++)if(e.inputList[t-1].type!==xe.STATEMENT&&e.inputList[t].type!==xe.STATEMENT)return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:Ze.ScopeType.BLOCK,id:"blockInline",weight:3})},yg=function(){Ze.registry.register({displayText(e){return e.block.isCollapsed()?Ne.EXPAND_BLOCK:Ne.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:Ze.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Sg=function(){Ze.registry.register({displayText(e){return e.block.isEnabled()?Ne.DISABLE_BLOCK:Ne.ENABLE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()?e.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(e){e=e.block;const t=ut();t||ve(!0),e.setEnabled(!e.isEnabled()),t||ve(!1)},scopeType:Ze.ScopeType.BLOCK,id:"blockDisable",weight:5})},Rg=function(){Ze.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),e===1?Ne.DELETE_BLOCK:Ne.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:Ze.ScopeType.BLOCK,id:"blockDelete",weight:6})},Cg=function(){Ze.registry.register({displayText(){return Ne.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:Ze.ScopeType.BLOCK,id:"blockHelp",weight:7})},yy=function(){Eg(),vg(),Ig(),yg(),Sg(),Rg(),Cg()},kg=function(){Iy(),yy()},Sy=function(e){const t=[];e=e.getDescendants(!1);for(let o=0,n;n=e[o];o++){const a=n.getIcons();for(let p=0;p<a.length;p++){const T={location:a[p].getIconLocation(),icon:a[p]};t.push(T)}}return t},Ry=function(e){V().hideChaff(e)},Cy=function(e){H("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),cy(e)},ky=function(e){H("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),Ir(e)},Oy=function(){return H("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),!!Nu()},wy=function(e){H("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),$c(e)},Ay=function(e){return H("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),p_(e)},Ly=function(e){return H("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),Tu(e)},Ny=function(e,t,o,n){return H("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),I(e,t,o,n)},Dy=function(e){return H("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),y(e)},My=function(e,t,o,n,a,p){return H("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),E(e,t,o,n,a,p)},Ie=Ie||{};Ie.scope={},Ie.ASSUME_ES5=!1,Ie.ASSUME_NO_NATIVE_MAP=!1,Ie.ASSUME_NO_NATIVE_SET=!1,Ie.SIMPLE_FROUND_POLYFILL=!1,Ie.ISOLATE_POLYFILLS=!1,Ie.FORCE_POLYFILL_PROMISE=!1,Ie.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Ie.defineProperty=Ie.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,o){return e==Array.prototype||e==Object.prototype||(e[t]=o.value),e},Ie.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof js=="object"&&js];for(var t=0;t<e.length;++t){var o=e[t];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")},Ie.global=Ie.getGlobal(this),Ie.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",Ie.TRUST_ES6_POLYFILLS=!Ie.ISOLATE_POLYFILLS||Ie.IS_SYMBOL_NATIVE,Ie.polyfills={},Ie.propertyToPolyfillSymbol={},Ie.POLYFILL_PREFIX="$jscp$",Ie.polyfill=function(e,t,o,n){t&&(Ie.ISOLATE_POLYFILLS?Ie.polyfillIsolated(e,t,o,n):Ie.polyfillUnisolated(e,t,o,n))},Ie.polyfillUnisolated=function(e,t,o,n){for(o=Ie.global,e=e.split("."),n=0;n<e.length-1;n++){var a=e[n];if(!(a in o))return;o=o[a]}e=e[e.length-1],n=o[e],t=t(n),t!=n&&t!=null&&Ie.defineProperty(o,e,{configurable:!0,writable:!0,value:t})},Ie.polyfillIsolated=function(e,t,o,n){var a=e.split(".");e=a.length===1,n=a[0],n=!e&&n in Ie.polyfills?Ie.polyfills:Ie.global;for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in n))return;n=n[T]}a=a[a.length-1],o=Ie.IS_SYMBOL_NATIVE&&o==="es6"?n[a]:null,t=t(o),t!=null&&(e?Ie.defineProperty(Ie.polyfills,a,{configurable:!0,writable:!0,value:t}):t!==o&&(Ie.propertyToPolyfillSymbol[a]===void 0&&(o=1e9*Math.random()>>>0,Ie.propertyToPolyfillSymbol[a]=Ie.IS_SYMBOL_NATIVE?Ie.global.Symbol(a):Ie.POLYFILL_PREFIX+o+"$"+a),Ie.defineProperty(n,Ie.propertyToPolyfillSymbol[a],{configurable:!0,writable:!0,value:t})))},Ie.polyfill("globalThis",function(e){return e||Ie.global},"es_2020","es3"),Ie.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},Ie.arrayIterator=function(e){return{next:Ie.arrayIteratorImpl(e)}},Ie.initSymbol=function(){},Ie.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},Ie.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var o=0,n=!1,a={next:function(){if(!n&&o<e.length){var p=o++;return{value:t(p,e[p]),done:!1}}return n=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a},Ie.polyfill("Array.prototype.values",function(e){return e||function(){return Ie.iteratorFromArray(this,function(t,o){return o})}},"es8","es3"),Ie.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Ie.polyfill("Object.values",function(e){return e||function(t){var o=[],n;for(n in t)Ie.owns(t,n)&&o.push(t[n]);return o}},"es8","es3"),Ie.polyfill("Array.prototype.flat",function(e){return e||function(t){t=t===void 0?1:t;for(var o=[],n=0;n<this.length;n++){var a=this[n];Array.isArray(a)&&0<t?(a=Array.prototype.flat.call(a,t-1),o.push.apply(o,a)):o.push(a)}return o}},"es9","es5"),Ie.polyfill("Object.entries",function(e){return e||function(t){var o=[],n;for(n in t)Ie.owns(t,n)&&o.push([n,t[n]]);return o}},"es8","es3");var _s=_s||{};_s.global=globalThis||root,_s.define=function(e,t){return t},_s.DEBUG=!1,_s.DISALLOW_TEST_ONLY_CODE=!_s.DEBUG,_s.provide=function(e){},_s.module=function(e){},_s.module.get=function(e){},_s.module.declareLegacyNamespace=function(){},_s.setTestOnly=function(e){if(_s.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},_s.require=function(e){},_s.requireType=function(e){};var xy=750,Og="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Sr=null,Rs=globalThis.PointerEvent?{mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:{mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]},yc=0,Cs={};Cs.TOUCH_ENABLED=Og,Cs.TOUCH_MAP=Rs,Cs.checkTouchIdentifier=$,Cs.clearTouchIdentifier=h,Cs.getTouchIdentifierFromEvent=_,Cs.isMouseOrTouchEvent=g,Cs.isTouchEvent=m,Cs.longStart=c,Cs.longStop=l,Cs.setClientFromTouch=u,Cs.shouldHandleEvent=d,Cs.splitEventByTouches=b;var Hu,wg,Ag,Lg,Sc,Rc,Vu,Ng,Dg,Mg;(function(e){function t(n){return o.indexOf(n.toUpperCase())!==-1}Hu=e;const o=Hu.toUpperCase();wg=t("JavaFX"),Ag=t("WebKit"),Lg=t("Gecko")&&!Ag,Sc=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Rc=t("iPad")||t("Macintosh")&&0<e,Vu=t("iPhone")&&!Rc,Ng=t("Macintosh"),Dg=Rc||Sc&&!t("Mobile")||t("Silk"),Mg=!Dg&&(Vu||Sc)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var By=Hu,xg=wg,Wu=Lg,Cc=Sc,Tn=Rc,Bg=Vu,ju=Ng,Xu=Mg,xo={};xo.ANDROID=Cc,xo.GECKO=Wu,xo.IPAD=Tn,xo.IPHONE=Bg,xo.JavaFx=xg,xo.MAC=ju,xo.MOBILE=Xu,xo.raw=By;var Pg=40,Fg=125,Bo={};Bo.bind=I,Bo.conditionalBind=E,Bo.getScrollDeltaPixels=R,Bo.isRightButton=B,Bo.isTargetInput=F,Bo.mouseToSvg=N,Bo.unbind=y;var gs=Object.create(null),bn,Gg,Yu,Ug,Ni,zu;bn=Object.create(null),Yu=null,Ni=[],zu={defineBlocksWithJsonArrayInternal:fe},i.module$build$src$core$common={},i.module$build$src$core$common.TEST_ONLY=zu,i.module$build$src$core$common.createBlockDefinitionsFromJsonArray=et,i.module$build$src$core$common.defineBlocks=Se,i.module$build$src$core$common.defineBlocksWithJsonArray=ke,i.module$build$src$core$common.draggingConnections=Ni,i.module$build$src$core$common.getAllWorkspaces=le,i.module$build$src$core$common.getBlockTypeCounts=Ae,i.module$build$src$core$common.getMainWorkspace=V,i.module$build$src$core$common.getParentContainer=Z,i.module$build$src$core$common.getSelected=J,i.module$build$src$core$common.getWorkspaceById=z,i.module$build$src$core$common.registerWorkspace=he,i.module$build$src$core$common.setMainWorkspace=de,i.module$build$src$core$common.setParentContainer=ne,i.module$build$src$core$common.setSelected=ue,i.module$build$src$core$common.svgResize=$e,i.module$build$src$core$common.unregisterWorkpace=Q;var En="http://www.w3.org/2000/svg",to="http://www.w3.org/1999/xhtml",fs="http://www.w3.org/1999/xlink",Eo;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_POSITION_CONTAINED_BY=16]="DOCUMENT_POSITION_CONTAINED_BY"})(Eo||(Eo={}));var so=null,Ku=0,kc=null,Nt={};Nt.HTML_NS=to,Nt.NodeType=Eo,Nt.SVG_NS=En,Nt.XLINK_NS=fs,Nt.addClass=oe,Nt.containsNode=hs,Nt.createSvgElement=A,Nt.getFastTextWidth=L,Nt.getFastTextWidthWithSizeString=U,Nt.getTextWidth=C,Nt.hasClass=Ys,Nt.insertAfter=St,Nt.measureFontMetrics=K,Nt.removeClass=Pe,Nt.removeClasses=Ft,Nt.removeNode=be,Nt.setCssTransform=Kt,Nt.startTextWidthCache=vs,Nt.stopTextWidthCache=Is;var Oc={};Oc.clamp=re,Oc.toDegrees=ee,Oc.toRadians=Y;var Tt=class{constructor(e,t,o,n){this.top=e,this.bottom=t,this.left=o,this.right=n}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)}},Bt={};Bt.warn=H;var ae=class{constructor(e,t){this.x=e,this.y=t}clone(){return new ae(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t?!0:e&&t?e.x===t.x&&e.y===t.y:!1}static distance(e,t){const o=e.x-t.x;return e=e.y-t.y,Math.sqrt(o*o+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new ae(e.x-t.x,e.y-t.y)}static sum(e,t){return new ae(e.x+t.x,e.y+t.y)}},Gt=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t?!0:e&&t?e.width===t.width&&e.height===t.height:!1}},Hg={getSizeInternal:q},vo={};vo.TEST_ONLY=Hg,vo.getBorderBox=Xe,vo.getCascadedStyle=ye,vo.getComputedStyle=_e,vo.getContainerOffsetToScrollInto=at,vo.getPageOffset=Oe,vo.getSize=ie,vo.getViewportPageOffset=Le,vo.scrollIntoContainerView=j;var Rr=16,Ju=1,Vg=12,qu=16,wc=.25,Zu=null,Di=null,vn="",In="",Je,yn,Mi,Qu=null,xi=null,Wg=null,eh={getBoundsInfo:function(){const e=Oe(Qu),t=ie(Qu);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,o,n){const a=eh.getBoundsInfo(),p=ie(Je);return t+p.height<a.bottom?ki(e,t,a,p):n-p.height>a.top?Vp(o,n,a,p):t+p.height<document.documentElement.clientHeight?ki(e,t,a,p):n-p.height>document.documentElement.clientTop?Vp(o,n,a,p):JE(e,a,p)}},Ct={};Ct.ANIMATION_TIME=wc,Ct.ARROW_HORIZONTAL_PADDING=Vg,Ct.ARROW_SIZE=Rr,Ct.BORDER_SIZE=Ju,Ct.PADDING_Y=qu,Ct.TEST_ONLY=eh,Ct.clearContent=zs,Ct.createDom=Jt,Ct.getContentDiv=No,Ct.getPositionX=Zl,Ct.hide=su,Ct.hideIfOwner=fr,Ct.hideWithoutAnimation=$o,Ct.isVisible=Wp,Ct.repositionForWindowResize=qE,Ct.setBoundsElement=ds,Ct.setColour=Mt,Ct.show=Ke,Ct.showPositionedByBlock=f,Ct.showPositionedByField=v;var ri=Object.create(null),Py={typeMap:ri},Ac=Object.create(null),Po="default",se=class{constructor(e){this.name=e}toString(){return this.name}};se.CONNECTION_CHECKER=new se("connectionChecker"),se.CURSOR=new se("cursor"),se.EVENT=new se("event"),se.FIELD=new se("field"),se.RENDERER=new se("renderer"),se.TOOLBOX=new se("toolbox"),se.THEME=new se("theme"),se.TOOLBOX_ITEM=new se("toolboxItem"),se.FLYOUTS_VERTICAL_TOOLBOX=new se("flyoutsVerticalToolbox"),se.FLYOUTS_HORIZONTAL_TOOLBOX=new se("flyoutsHorizontalToolbox"),se.METRICS_MANAGER=new se("metricsManager"),se.BLOCK_DRAGGER=new se("blockDragger"),se.SERIALIZER=new se("serializer");var oo={};oo.DEFAULT=Po,oo.TEST_ONLY=Py,oo.Type=se,oo.getAllItems=ou,oo.getClass=pn,oo.getClassFromOptions=xs,oo.getObject=ec,oo.hasItem=Yp,oo.register=We,oo.unregister=Ql;var jg="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Xg={genUid:()=>{const e=jg.length,t=[];for(let o=0;20>o;o++)t[o]=jg.charAt(Math.random()*e);return t.join("")}},Fy=0,Lc={};Lc.TEST_ONLY=Xg,Lc.genUid=Ks,Lc.getNextUniqueId=mr;var Yg="",Cr=!0,th=0,Wt="create",Io="delete",Pt="change",is="move",Bi="var_create",Sn="var_delete",kr="var_rename",Or="ui",Rn="drag",li="selected",ci="click",wr="marker_move",Fo="bubble_open",Ar="trashcan_open",Lr="toolbox_item_select",Nr="theme_change",Pi="viewport_change",Fi="comment_create",Cn="comment_delete",Dr="comment_change",Go="comment_move",kn="finished_loading",sh=[Wt,is,Fi,Go],On=[],oh={FIRE_QUEUE:On,fireNow:zp,fireInternal:QE,setGroupInternal:ev},Fe={};Fe.BLOCK_CHANGE=Pt,Fe.BLOCK_CREATE=Wt,Fe.BLOCK_DELETE=Io,Fe.BLOCK_DRAG=Rn,Fe.BLOCK_MOVE=is,Fe.BUBBLE_OPEN=Fo,Fe.BUMP_EVENTS=sh,Fe.CHANGE=Pt,Fe.CLICK=ci,Fe.COMMENT_CHANGE=Dr,Fe.COMMENT_CREATE=Fi,Fe.COMMENT_DELETE=Cn,Fe.COMMENT_MOVE=Go,Fe.CREATE=Wt,Fe.DELETE=Io,Fe.FINISHED_LOADING=kn,Fe.MARKER_MOVE=wr,Fe.MOVE=is,Fe.SELECTED=li,Fe.TEST_ONLY=oh,Fe.THEME_CHANGE=Nr,Fe.TOOLBOX_ITEM_SELECT=Lr,Fe.TRASHCAN_OPEN=Ar,Fe.UI=Or,Fe.VAR_CREATE=Bi,Fe.VAR_DELETE=Sn,Fe.VAR_RENAME=kr,Fe.VIEWPORT_CHANGE=Pi,Fe.clearPendingUndo=iu,Fe.disable=At,Fe.disableOrphans=nu,Fe.enable=Lt,Fe.filter=tc,Fe.fire=Re,Fe.fromJson=Kp,Fe.get=Ce,Fe.getDescendantIds=sc,Fe.getGroup=ut,Fe.getRecordUndo=Js,Fe.isEnabled=xt,Fe.setGroup=ve,Fe.setRecordUndo=ys;var xe;(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY"})(xe||(xe={})),i.module$build$src$core$input_types={},i.module$build$src$core$input_types.inputTypes=xe;var ih,Mr;ih="https://developers.google.com/blockly/xml",Mr=globalThis.document,i.module$build$src$core$utils$xml={},i.module$build$src$core$utils$xml.NAME_SPACE=ih,i.module$build$src$core$utils$xml.createElement=tt,i.module$build$src$core$utils$xml.createTextNode=oi,i.module$build$src$core$utils$xml.domToText=qp,i.module$build$src$core$utils$xml.getDocument=tv,i.module$build$src$core$utils$xml.setDocument=sv,i.module$build$src$core$utils$xml.textToDomDocument=Jp;var zg=function(e,t){window.alert(e),t&&t()},Kg=function(e,t){t(window.confirm(e))},Jg=function(e,t,o){o(window.prompt(e,t))},qg={confirmInternal:iv},ms={};ms.TEST_ONLY=qg,ms.alert=oc,ms.confirm=ru,ms.prompt=lu,ms.setAlert=ov,ms.setConfirm=nv,ms.setPrompt=rv;var Ne,nh;Ne=Object.create(null),nh=function(e){Object.keys(e).forEach(function(t){Ne[t]=e[t]})},i.module$build$src$core$msg={},i.module$build$src$core$msg.Msg=Ne,i.module$build$src$core$msg.setLocale=nh;var wn=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=ut(),this.recordUndo=Js()}toJson(){return{type:this.type,group:this.group}}fromJson(e){this.isBlank=!1,this.group=e.group||""}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=z(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},Nc=class extends wn{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}fromJson(e){super.fromJson(e),this.varId=e.varId}},Zg=class extends Nc{constructor(e){super(e),this.type=Bi,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}fromJson(e){super.fromJson(e),this.varType=e.varType,this.varName=e.varName}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)}};We(se.EVENT,Bi,Zg);var xr=class{constructor(e,t,o,n){this.workspace=e,this.name=t,this.type=o||"",this.id_=n||Ks(),Re(new(Ce(Bi))(this))}getId(){return this.id_}static compareByName(e,t){return e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}},Dc,Mc,rh;Dc="VARIABLE",Mc="ijkmnopqrstuvwxyzabcdefgh",rh={generateUniqueNameInternal:cv},i.module$build$src$core$variables={},i.module$build$src$core$variables.CATEGORY_NAME=Dc,i.module$build$src$core$variables.TEST_ONLY=rh,i.module$build$src$core$variables.VAR_LETTER_OPTIONS=Mc,i.module$build$src$core$variables.allDeveloperVariables=lv,i.module$build$src$core$variables.allUsedVarModels=cu,i.module$build$src$core$variables.createVariableButtonHandler=$r,i.module$build$src$core$variables.flyoutCategory=au,i.module$build$src$core$variables.flyoutCategoryBlocks=Zp,i.module$build$src$core$variables.generateUniqueName=Qp,i.module$build$src$core$variables.generateUniqueNameFromOptions=uu,i.module$build$src$core$variables.generateVariableFieldDom=_n,i.module$build$src$core$variables.getAddedVariables=du,i.module$build$src$core$variables.getOrCreateVariablePackage=ic,i.module$build$src$core$variables.getVariable=nc,i.module$build$src$core$variables.nameUsedWithAnyType=t_,i.module$build$src$core$variables.promptName=hu,i.module$build$src$core$variables.renameVariable=e_;var yo=class{constructor(e,t,o,n,a){this.workspace=e,this.editable_=this.movable_=this.deletable_=!0,this.disposed_=!1,this.isComment=!0,this.id=a&&!e.getCommentById(a)?a:Ks(),e.addTopComment(this),this.xy_=new ae(0,0),this.height_=o,this.width_=n,this.RTL=e.RTL,this.content_=t,yo.fireCreateEvent(this)}dispose(){this.disposed_||(xt()&&Re(new(Ce(Cn))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(e){this.height_=e}getWidth(){return this.width_}setWidth(e){this.width_=e}getXY(){return new ae(this.xy_.x,this.xy_.y)}moveBy(e,t){const o=new(Ce(Go))(this);this.xy_.translate(e,t),o.recordNew(),Re(o)}isDeletable(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(e){this.deletable_=e}isMovable(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(e){this.movable_=e}isEditable(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(e){this.editable_=e}getContent(){return this.content_}setContent(e){this.content_!==e&&(Re(new(Ce(Dr))(this,this.content_,e)),this.content_=e)}toXmlWithXY(e){return e=this.toXml(e),e.setAttribute("x",`${Math.round(this.xy_.x)}`),e.setAttribute("y",`${Math.round(this.xy_.y)}`),e.setAttribute("h",`${this.height_}`),e.setAttribute("w",`${this.width_}`),e}toXml(e){const t=tt("comment");return e||(t.id=this.id),t.textContent=this.getContent(),t}static fireCreateEvent(e){if(xt()){const t=ut();t||ve(!0);try{Re(new(Ce(Fi))(e))}finally{t||ve(!1)}}}static fromXml(e,t){var o=yo.parseAttributes(e);return t=new yo(t,o.content,o.h,o.w,o.id),o=e.getAttribute("x"),e=e.getAttribute("y"),o=o?parseInt(o,10):NaN,e=e?parseInt(e,10):NaN,isNaN(o)||isNaN(e)||t.moveBy(o,e),yo.fireCreateEvent(t),t}static parseAttributes(e){const t=e.getAttribute("h"),o=e.getAttribute("w"),n=e.getAttribute("x"),a=e.getAttribute("y"),p=e.getAttribute("id");if(!p)throw Error("No ID present in XML comment definition.");let T;return{id:p,h:t?parseInt(t):100,w:o?parseInt(o):100,x:n?parseInt(n):NaN,y:a?parseInt(a):NaN,content:(T=e.textContent)!=null?T:""}}},io=class extends wn{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},Qg=class extends io{constructor(e,t,o){super(o),this.type=li,this.oldElementId=e!=null?e:void 0,this.newElementId=t!=null?t:void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}fromJson(e){super.fromJson(e),this.oldElementId=e.oldElementId,this.newElementId=e.newElementId}};We(se.EVENT,li,Qg);var lh=!1,ch=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyWsDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
}

/* Added as a separate rule with multiple classes to make it more specific
   than a bootstrap rule that selects svg:root. See issue #1275 for context.
*/
.blocklyWsDragSurface.blocklyOverflowVisible {
  overflow: visible;
}

.blocklyBlockDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 50;  /* Display below toolbox, but above everything else. */
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grab */
  cursor: url("<<<PATH>>>/handopen.cur"), auto;
  cursor: grab;
  cursor: -webkit-grab;
}

  /* backup for browsers (e.g. IE11) that don't support grabbing */
.blocklyDragging {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Change the cursor on the whole drag surface in case the mouse gets
   ahead of block during a drag. This way the cursor is still a closed hand.
  */
.blocklyBlockDragSurface .blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text,
.blocklyBlockDragSurface text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Edge and IE introduce a close icon when the input value is longer than a
   certain length. This affects our sizing calculations of the text input.
   Hiding the close icon to avoid that. */
.blocklyHtmlInput::-ms-clear {
  display: none;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}
`,ah={};ah.inject=s_,ah.register=qs;var w=class{constructor(e){this.tagName=e}toString(){return this.tagName}};w.ANIMATE=new w("animate"),w.CIRCLE=new w("circle"),w.CLIPPATH=new w("clipPath"),w.DEFS=new w("defs"),w.FECOMPOSITE=new w("feComposite"),w.FECOMPONENTTRANSFER=new w("feComponentTransfer"),w.FEFLOOD=new w("feFlood"),w.FEFUNCA=new w("feFuncA"),w.FEGAUSSIANBLUR=new w("feGaussianBlur"),w.FEPOINTLIGHT=new w("fePointLight"),w.FESPECULARLIGHTING=new w("feSpecularLighting"),w.FILTER=new w("filter"),w.FOREIGNOBJECT=new w("foreignObject"),w.G=new w("g"),w.IMAGE=new w("image"),w.LINE=new w("line"),w.PATH=new w("path"),w.PATTERN=new w("pattern"),w.POLYGON=new w("polygon"),w.RECT=new w("rect"),w.SVG=new w("svg"),w.TEXT=new w("text"),w.TSPAN=new w("tspan");var ef=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,tf=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Gy={XY_REGEX:ef,XY_STYLE_REGEX:tf},ai={};ai.TEST_ONLY=Gy,ai.getDocumentScroll=_u,ai.getInjectionDivXY=rc,ai.getRelativeXY=Zs,ai.getViewportBBox=pu,ai.is3dSupported=o_,ai.screenToWsCoordinates=i_;var jt=8,xc=3,Uy=2,Zt=class extends yo{constructor(e,t,o,n,a){super(e,t,o,n,a),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.eventsInit_=!1,this.deleteIconBorder_=this.deleteGroup_=this.resizeGroup_=this.foreignObject_=this.svgHandleTarget_=this.svgRectTarget_=this.textarea_=null,this.rendered_=this.autoLayout_=this.focused_=!1,this.svgGroup_=A(w.G,{class:"blocklyComment"}),this.svgGroup_.translate_="",this.workspace=e,this.svgRect_=A(w.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:xc,ry:xc}),this.svgGroup_.appendChild(this.svgRect_),this.useDragSurface_=!!e.getBlockDragSurface(),this.render()}dispose(){this.disposed_||(J()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),xt()&&Re(new(Ce(Cn))(this)),be(this.svgGroup_),this.disposeInternal_(),At(),super.dispose(),Lt())}initSvg(e){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(E(this.svgRectTarget_,"mousedown",this,this.pathMouseDown_),E(this.svgHandleTarget_,"mousedown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!e&&this.textarea_&&this.textarea_.select()}pathMouseDown_(e){const t=this.workspace.getGesture(e);t&&t.handleBubbleStart(e,this)}showContextMenu(e){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(J()!==this){var e=null;if(J()){e=J().id,At();try{J().unselect()}finally{Lt()}}e=new(Ce(li))(e,this.id,this.workspace.id),Re(e),ue(this),this.addSelect()}}unselect(){if(J()===this){var e=new(Ce(li))(this.id,null,this.workspace.id);Re(e),ue(null),this.removeSelect(),this.blurFocus()}}addSelect(){oe(this.svgGroup_,"blocklySelected"),this.setFocus()}removeSelect(){oe(this.svgGroup_,"blocklySelected"),this.blurFocus()}addFocus(){oe(this.svgGroup_,"blocklyFocused")}removeFocus(){Pe(this.svgGroup_,"blocklyFocused")}getRelativeToSurfaceXY(){let e=0,t=0;const o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let n=this.getSvgRoot();if(n)do{var a=Zs(n);e+=a.x,t+=a.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===n&&(a=this.workspace.getBlockDragSurface().getSurfaceTranslation(),e+=a.x,t+=a.y),n=n.parentNode}while(n&&n!==this.workspace.getBubbleCanvas()&&n!==o);return this.xy_=new ae(e,t)}moveBy(e,t){const o=new(Ce(Go))(this),n=this.getRelativeToSurfaceXY();this.translate(n.x+e,n.y+t),this.xy_=new ae(n.x+e,n.y+t),o.recordNew(),Re(o),this.workspace.resizeContents()}translate(e,t){this.xy_=new ae(e,t),this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")}moveToDragSurface(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}}moveDuringDrag(e,t){e?e.translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}moveTo(e,t){this.translate(e,t)}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var e=this.getRelativeToSurfaceXY();const t=this.getHeightWidth(),o=e.y,n=e.y+t.height;let a;return this.RTL?(a=e.x-t.width,e=e.x):(a=e.x,e=e.x+t.width),new Tt(o,n,a,e)}updateMovable(){this.isMovable()?oe(this.svgGroup_,"blocklyDraggable"):Pe(this.svgGroup_,"blocklyDraggable")}setMovable(e){super.setMovable(e),this.updateMovable()}setEditable(e){super.setEditable(e),this.textarea_&&(this.textarea_.readOnly=!e)}setDragging(e){e?(e=this.getSvgRoot(),e.translate_="",e.skew_="",oe(this.svgGroup_,"blocklyDragging")):Pe(this.svgGroup_,"blocklyDragging")}getSvgRoot(){return this.svgGroup_}getContent(){return this.textarea_?this.textarea_.value:this.content_}setContent(e){super.setContent(e),this.textarea_&&(this.textarea_.value=e)}setDeleteStyle(e){e?oe(this.svgGroup_,"blocklyDraggingDelete"):Pe(this.svgGroup_,"blocklyDraggingDelete")}setAutoLayout(e){}toXmlWithXY(e){let t=0;this.workspace.RTL&&(t=this.workspace.getWidth()),e=this.toXml(e);const o=this.getRelativeToSurfaceXY();return e.setAttribute("x",Math.round(this.workspace.RTL?t-o.x:o.x)),e.setAttribute("y",Math.round(o.y)),e.setAttribute("h",this.getHeight()),e.setAttribute("w",this.getWidth()),e}toCopyData(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered_){var e=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=A(w.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=A(w.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:xc,ry:xc}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(e.width,e.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&E(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_),this.isDeletable()&&(E(this.deleteGroup_,"mousedown",this,this.deleteMouseDown_),E(this.deleteGroup_,"mouseout",this,this.deleteMouseOut_),E(this.deleteGroup_,"mouseup",this,this.deleteMouseUp_))}}createEditor_(){this.foreignObject_=A(w.FOREIGNOBJECT,{x:0,y:Zt.TOP_OFFSET,class:"blocklyCommentForeignObject"});const e=document.createElementNS(to,"body");e.setAttribute("xmlns",to),e.className="blocklyMinimalBody";const t=document.createElementNS(to,"textarea");return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.RTL?"RTL":"LTR"),t.readOnly=!this.isEditable(),e.appendChild(t),this.textarea_=t,this.foreignObject_.appendChild(e),E(t,"wheel",this,function(o){o.stopPropagation()}),E(t,"change",this,function(o){this.setContent(t.value)}),this.foreignObject_}addResizeDom_(){this.resizeGroup_=A(w.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),A(w.POLYGON,{points:"0,x x,x x,0".replace(/x/g,jt.toString())},this.resizeGroup_),A(w.LINE,{class:"blocklyResizeLine",x1:jt/3,y1:jt-1,x2:jt-1,y2:jt/3},this.resizeGroup_),A(w.LINE,{class:"blocklyResizeLine",x1:2*jt/3,y1:jt-1,x2:jt-1,y2:2*jt/3},this.resizeGroup_)}addDeleteDom_(){this.deleteGroup_=A(w.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=A(w.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),A(w.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),A(w.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)}resizeMouseDown_(e){this.unbindDragEvents_(),B(e)||(this.workspace.startDrag(e,new ae(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=E(document,"mouseup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=E(document,"mousemove",this,this.resizeMouseMove_),this.workspace.hideChaff()),e.stopPropagation()}deleteMouseDown_(e){this.deleteIconBorder_&&oe(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),e.stopPropagation()}deleteMouseOut_(e){this.deleteIconBorder_&&Pe(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")}deleteMouseUp_(e){this.dispose(),e.stopPropagation()}unbindDragEvents_(){this.onMouseUpWrapper_&&(y(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(y(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}resizeMouseUp_(e){h(),this.unbindDragEvents_()}resizeMouseMove_(e){this.autoLayout_=!1,e=this.workspace.moveDrag(e),this.setSize_(this.RTL?-e.x:e.x,e.y)}resizeComment_(){const e=this.getHeightWidth(),t=Zt.TOP_OFFSET,o=2*Uy;this.foreignObject_.setAttribute("width",e.width),this.foreignObject_.setAttribute("height",(e.height-t).toString()),this.RTL&&this.foreignObject_.setAttribute("x",(-e.width).toString()),this.textarea_.style.width=e.width-o+"px",this.textarea_.style.height=e.height-o-t+"px"}setSize_(e,t){e=Math.max(e,45),t=Math.max(t,20+Zt.TOP_OFFSET),this.width_=e,this.height_=t,this.svgRect_.setAttribute("width",e),this.svgRect_.setAttribute("height",t),this.svgRectTarget_.setAttribute("width",e),this.svgRectTarget_.setAttribute("height",t),this.svgHandleTarget_.setAttribute("width",e),this.svgHandleTarget_.setAttribute("height",Zt.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-e+jt)+","+(t-jt)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(-e+jt)+","+-jt+") scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(e-jt)+","+(t-jt)+")"),this.deleteGroup_.setAttribute("transform","translate("+(e-jt)+","+-jt+")"))),this.resizeComment_()}disposeInternal_(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0}setFocus(){this.focused_=!0,setTimeout(()=>{this.disposed_||(this.textarea_.focus(),this.addFocus(),this.svgRectTarget_&&oe(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&oe(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused_=!1,setTimeout(()=>{this.disposed_||(this.textarea_.blur(),this.removeFocus(),this.svgRectTarget_&&Pe(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&Pe(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(e,t,o){At();let n;try{const a=yo.parseAttributes(e);if(n=new Zt(t,a.content,a.h,a.w,a.id),t.rendered&&(n.initSvg(!0),n.render()),!isNaN(a.x)&&!isNaN(a.y))if(t.RTL){const p=o||t.getWidth();n.moveBy(p-a.x,a.y)}else n.moveBy(a.x,a.y)}finally{Lt()}return yo.fireCreateEvent(n),n}};Zt.DEFAULT_SIZE=100,Zt.TOP_OFFSET=10,qs(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`),i.module$build$src$core$xml={},i.module$build$src$core$xml.appendDomToWorkspace=fv,i.module$build$src$core$xml.blockToDom=Oi,i.module$build$src$core$xml.blockToDomWithXY=lc,i.module$build$src$core$xml.clearWorkspaceAndLoadFromXml=gv,i.module$build$src$core$xml.deleteNext=Sv,i.module$build$src$core$xml.domToBlock=gn,i.module$build$src$core$xml.domToPrettyText=_v,i.module$build$src$core$xml.domToText=Qs,i.module$build$src$core$xml.domToVariables=l_,i.module$build$src$core$xml.domToWorkspace=Tr,i.module$build$src$core$xml.textToDom=eo,i.module$build$src$core$xml.variablesToDom=n_,i.module$build$src$core$xml.workspaceToDom=hv;var Br=class extends wn{constructor(e){super(),this.isBlank=!!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}fromJson(e){super.fromJson(e),this.blockId=e.blockId}},An=class extends Br{constructor(e,t,o,n,a){super(e),this.type=Pt,e&&(this.element=t,this.name=o||void 0,this.oldValue=n,this.newValue=a)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}fromJson(e){super.fromJson(e),this.element=e.element,this.name=e.name,this.oldValue=e.oldValue,this.newValue=e.newValue}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");switch(t.mutator&&t.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":t.setEnabled(!e);break;case"inline":t.setInputsInline(!!e);break;case"mutation":const o=An.getExtraBlockState_(t);t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(eo(e||"<mutation/>")),Re(new An(t,"mutation",null,o,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState())?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?Qs(e):""}};We(se.EVENT,Pt,An);var Pr=class{constructor(e){this.workspace=e,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),t.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(t)t.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let t=0,o;o=e[t];t++)this.unregisterMarker(o);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};Pr.LOCAL_MARKER="local_marker_1",i.module$build$src$core$utils$string={},i.module$build$src$core$utils$string.commonWordPrefix=a_,i.module$build$src$core$utils$string.commonWordSuffix=u_,i.module$build$src$core$utils$string.isNumber=p_,i.module$build$src$core$utils$string.shortestStringLength=cc,i.module$build$src$core$utils$string.startsWith=Rv,i.module$build$src$core$utils$string.wrap=h_;var Bc=void 0,Fr=!1,Ln=!1,sf=50,of=0,Gr=0,uh=0,hh=0,Ps=null,Ur=null,dh=0,ph=10,nf=10,rf=750,Pc=5,kt=null,vt={};vt.HOVER_MS=rf,vt.LIMIT=sf,vt.MARGINS=Pc,vt.OFFSET_X=dh,vt.OFFSET_Y=ph,vt.RADIUS_OK=nf,vt.bindMouseEvents=ac,vt.block=$_,vt.createDom=g_,vt.dispose=m_,vt.getCustomTooltip=wv,vt.getDiv=Lv,vt.getTooltipOfObject=br,vt.hide=wi,vt.isVisible=Av,vt.setCustomTooltip=Ov,vt.unbindMouseEvents=uc,vt.unblock=T_;var _h=.45,gh=.65,lf={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},Qt={};Qt.blend=fn,Qt.getHsvSaturation=b_,Qt.getHsvValue=E_,Qt.hexToRgb=mu,Qt.hsvToHex=$u,Qt.hueToHex=Tu,Qt.names=lf,Qt.parse=Ai,Qt.rgbToHex=hc,Qt.setHsvSaturation=Fv,Qt.setHsvValue=Gv;var Hr={};Hr.checkMessageReferences=dc,Hr.parseBlockColour=mn,Hr.replaceMessageReferences=$t,Hr.tokenizeInterpolation=Eu;var Hy=class{},Fc=null,Gc=null,Nn="",Dn="",no,ro={};ro.createDom=v_,ro.getDiv=$n,ro.hide=To,ro.hideIfOwner=Iu,ro.isVisible=I_,ro.positionWithAnchor=S_,ro.show=vu,ro.testOnly_setDiv=Uv;var je=class{constructor(e,t,o){this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:null,this.size_=new Gt(0,0),e!==je.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip($t(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=A(w.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}createBorderRect_(){this.borderRect_=A(w.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=A(w.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");ac(e),this.mouseDownWrapper_=E(e,"mousedown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(je),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(je,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=tt("field"),e.setAttribute("name",this.name||""),Qs(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(eo(t)),!0):!1}dispose(){fr(this),Iu(this),uc(this.getClickTarget_()),this.mouseDownWrapper_&&y(this.mouseDownWrapper_),be(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(oe(e,"blocklyEditableText"),Pe(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(oe(e,"blocklyNonEditableText"),Pe(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==je.prototype.showEditor_}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}updateSize_(e){const t=this.getConstants();e=e!==void 0?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let o=2*e,n=t.FIELD_TEXT_HEIGHT,a=0;this.textElement_&&(a=L(this.textElement_,t.FIELD_TEXT_FONTSIZE,t.FIELD_TEXT_FONTWEIGHT,t.FIELD_TEXT_FONTFAMILY),o+=a),this.borderRect_&&(n=Math.max(n,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=n,this.size_.width=o,this.positionTextElement_(e,a),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var o=this.getConstants(),n=this.size_.height/2,a;this.textElement_.setAttribute("x",`${(a=this.getSourceBlock())!=null&&a.RTL?this.size_.width-t-e:e}`),this.textElement_.setAttribute("y",`${o.FIELD_TEXT_BASELINE_CENTER?n:n-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE}`)}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",`${this.size_.width}`),this.borderRect_.setAttribute("height",`${this.size_.height}`),this.borderRect_.setAttribute("rx",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`),this.borderRect_.setAttribute("ry",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Gt(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new Ot;if(this.borderRect_){var o=this.borderRect_.getBoundingClientRect();e=Oe(this.borderRect_),t=o.width,o=o.height}else{o=this.sourceBlock_.getHeightWidth();const n=t.workspace.scale;e=this.getAbsoluteXY_(),t=(o.width+1)*n,o=(o.height+1)*n,Wu?(e.x+=1.5*n,e.y+=1.5*n):(e.x-=.5*n,e.y-=.5*n)}return new Tt(e.y,e.y+o,e.x,e.x+t)}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"\u2026"),e=e.replace(/\s/g,je.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="\u200F"),e):je.NBSP}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())}setValue(e){if(e!==null){var t=this.doClassValidation_(e);if(e=this.processValidation_(e,t),!(e instanceof Error)){if((t=this.getValidator())&&(t=t.call(this,e),e=this.processValidation_(e,t),e instanceof Error))return;if(t=this.sourceBlock_,!t||!t.disposed){var o=this.getValue();o===e?this.doValueUpdate_(e):(this.doValueUpdate_(e),t&&xt()&&Re(new(Ce(Pt))(t,"field",this.name||null,o,e)),this.isDirty_&&this.forceRerender())}}}}processValidation_(e,t){return t===null?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):(t!==void 0&&(e=t),e)}getValue(){return this.value_}doClassValidation_(e){return e==null?null:e}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip_=e}getTooltip(){const e=this.getClickTarget_();return br(e||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Oe(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new Ot;const o=t.inputList;for(let n=0;n<t.inputList.length;n++){const a=o[n],p=a.fieldRow;for(let T=0;T<p.length;T++)if(p[T]===this){e=a;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg_=e}else this.cursorSvg_=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg_=e}else this.markerSvg_=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new Ot;e=e.workspace,e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(Pr.LOCAL_MARKER).draw()}};je.NBSP="\xA0",je.SKIP_SETUP=new Hy;var Ot=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},cf={fromJsonInternal:jv},Vr={};Vr.TEST_ONLY=cf,Vr.fromJson=yu,Vr.register=Bs,Vr.unregister=Wv;var Vy="aria-",Wy="role",$s;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})($s||($s={}));var ct;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"})(ct||(ct={}));var Wr={};Wr.Role=$s,Wr.State=ct,Wr.setRole=bo,Wr.setState=ft;var me;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(me||(me={}));var fh=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu goog-menu blocklyNonSelectable",t.tabIndex=0,this.roleName&&bo(t,this.roleName),this.element=t;for(let o=0,n;n=this.menuItems[o];o++)t.appendChild(n.createDom());return this.mouseOverHandler=E(t,"mouseover",this,this.handleMouseOver,!0),this.clickHandler=E(t,"click",this,this.handleClick,!0),this.mouseEnterHandler=E(t,"mouseenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=E(t,"mouseleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=E(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),oe(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),Pe(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.mouseOverHandler&&(y(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(y(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(y(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(y(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(y(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,t;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem")){for(let o=0,n;n=this.menuItems[o];o++)if(n.getElement()===e)return n}e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;t&&(t.setHighlighted(!1),this.highlightedItem=null),e&&(e.setHighlighted(!0),this.highlightedItem=e,t=this.getElement(),j(e.getElement(),t),ft(t,ct.ACTIVEDESCENDANT,e.getId()))}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){e+=t;let o;for(;o=this.menuItems[e];){if(o.isEnabled()){this.setHighlighted(o);break}e+=t}}handleMouseOver(e){(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const t=this.openingCoords;if(this.openingCoords=null,t&&typeof e.clientX=="number"){const o=new ae(e.clientX,e.clientY);if(1>ae.distance(t,o))return}(e=this.getMenuItem(e.target))&&e.performAction()}handleMouseEnter(e){this.focus()}handleMouseLeave(e){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.keyCode){case me.ENTER:case me.SPACE:t&&t.performAction();break;case me.UP:this.highlightPrevious();break;case me.DOWN:this.highlightNext();break;case me.PAGE_UP:case me.HOME:this.highlightFirst();break;case me.PAGE_DOWN:case me.END:this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=ie(e);return t.height=e.scrollHeight,t}},mh=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=mr(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",t.appendChild(o)}return o=this.content,typeof this.content=="string"&&(o=document.createTextNode(this.content)),t.appendChild(o),e.appendChild(t),this.roleName&&bo(e,this.roleName),ft(e,ct.SELECTED,this.checkable&&this.checked||!1),ft(e,ct.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?(oe(t,"blocklyMenuItemHighlight"),oe(t,"goog-menuitem-highlight")):(Pe(t,"blocklyMenuItemHighlight"),Pe(t,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,t){this.actionHandler=e.bind(t)}},lo=class extends je{constructor(e,t,o){super(je.SKIP_SETUP),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions_=null,Xv(e)&&(Array.isArray(e)?(R_(e),e=Yv(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption_=this.getOptions(!1)[0],o&&this.configure_(o),this.setValue(this.selectedOption_[1]),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(lo,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=A(w.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&oe(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow_=A(w.TSPAN,{},this.textElement_);let e;this.arrow_.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?lo.ARROW_CHAR+" ":" "+lo.ARROW_CHAR));let t;(t=this.getSourceBlock())!=null&&t.RTL?this.getTextElement().insertBefore(this.arrow_,this.textContent_):this.getTextElement().appendChild(this.arrow_)}createSVGArrow_(){this.svgArrow_=A(w.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(fs,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new Ot;this.dropdownCreate_(),this.menu_.openingCoords=e&&typeof e.clientX=="number"?new ae(e.clientX,e.clientY):null,zs(),e=this.menu_.render(No()),oe(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(e=t.isShadow()?t.getParent().getColour():t.getColour(),t=t.isShadow()?t.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,Mt(e,t)),v(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()}dropdownCreate_(){const e=this.getSourceBlock();if(!e)throw new Ot;const t=new fh;t.setRole($s.LISTBOX),this.menu_=t;const o=this.getOptions(!1);this.selectedMenuItem_=null;for(let a=0;a<o.length;a++){const[p,T]=o[a];if(typeof p=="object"){var n=new Image(p.width,p.height);n.src=p.src,n.alt=p.alt||""}else n=p;n=new mh(n,T),n.setRole($s.OPTION),n.setRightToLeft(e.RTL),n.setCheckable(!0),t.addChild(n),n.setChecked(T===this.value_),T===this.value_&&(this.selectedMenuItem_=n),n.onAction(this.handleMenuActionEvent_,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()}handleMenuActionEvent_(e){fr(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions_?this.generatedOptions_:(this.generatedOptions_=this.menuGenerator_(),R_(this.generatedOptions_),this.generatedOptions_)}doClassValidation_(e){return this.getOptions(!0).some(t=>t[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t=0,o;o=e[t];t++)o[1]===this.value_&&(this.selectedOption_=o)}applyColour(){const e=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",e.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=e.colourSecondary:this.arrow_.style.fill=e.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement_.style.display="none";const e=this.selectedOption_&&this.selectedOption_[0];e&&typeof e=="object"?this.renderSelectedImage_(e):this.renderSelectedText_(),this.positionBorderRect_()}renderSelectedImage_(e){const t=this.getSourceBlock();if(!t)throw new Ot;this.imageElement_.style.display="",this.imageElement_.setAttributeNS(fs,"xlink:href",e.src),this.imageElement_.setAttribute("height",`${e.height}`),this.imageElement_.setAttribute("width",`${e.width}`);const o=Number(e.height);e=Number(e.width);var n=!!this.borderRect_;const a=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,o+Xy);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let p;p=this.svgArrow_?this.positionSVGArrow_(e+n,a/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):L(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+p+2*n,this.size_.height=a;let T=0;t.RTL?this.imageElement_.setAttribute("x",(n+p).toString()):(T=e+p,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",n.toString())),this.imageElement_.setAttribute("y",(a/2-o/2).toString()),this.positionTextElement_(T+n,e+p)}renderSelectedText_(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();oe(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const o=L(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let n=0;this.svgArrow_&&(n=this.positionSVGArrow_(o+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+n+2*t,this.size_.height=e,this.positionTextElement_(t,o)}positionSVGArrow_(e,t){if(!this.svgArrow_)return 0;const o=this.getSourceBlock();if(!o)throw new Ot;const n=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,a=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,p=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(o.RTL?n:e+a)+","+t+")"),p+a}getText_(){if(!this.selectedOption_)return null;const e=this.selectedOption_[0];return typeof e=="object"?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}};lo.CHECKMARK_OVERHANG=25,lo.MAX_MENU_HEIGHT_VH=.45,lo.ARROW_CHAR="\u25BE";var jy=5,Xy=2*jy;Bs("field_dropdown",lo),i.module$build$src$core$field_dropdown={},i.module$build$src$core$field_dropdown.FieldDropdown=lo;var af=class extends io{constructor(e,t,o){super(e?e.workspace.id:void 0),this.type=Fo,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=o)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}fromJson(e){super.fromJson(e),this.isOpen=e.isOpen,this.bubbleType=e.bubbleType,this.blockId=e.blockId}},$h;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})($h||($h={})),We(se.EVENT,Fo,af);var mt=class{constructor(e,t,o,n,a){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new ae(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new ae(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=o||!1,this.margin=a!==void 0?a:mt.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),n&&(e+=" "+n),this.outerSvg=A(w.SVG,{class:e}),n=A(w.G,{},this.outerSvg),this.svgBackground=A(w.RECT,{class:"blocklyScrollbarBackground"},n),e=Math.floor((mt.scrollbarThickness-5)/2),this.svgHandle=A(w.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},n),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),St(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=E(this.svgBackground,"mousedown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=E(this.svgHandle,"mousedown",this,this.onMouseDownHandle)}setInitialThickness(){const e=mt.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),y(this.onMouseDownBarWrapper_),y(this.onMouseDownHandleWrapper_),be(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,Kt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&mt.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-2*this.margin;this.pair&&(t-=mt.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=mt.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-mt.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var o=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*o,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=o/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-2*this.margin;this.pair&&(t-=mt.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-mt.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var o=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*o,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=o/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){const t=e!==this.isVisible();if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),h(),this.cleanUp(),B(e))e.stopPropagation();else{var t=N(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var o=rc(this.svgHandle);o=this.horizontal?o.x:o.y;var n=this.handlePosition,a=.95*this.handleLength;t<=o?n-=a:t>=o+this.handleLength&&(n+=a),this.setHandlePosition(this.constrainHandlePosition(n)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),B(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.workspace.setupDragSurface(),this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=E(document,"mouseup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=E(document,"mousemove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){this.workspace.resetDragSurface(),h(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(y(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(y(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||t===void 0)&&this.updateMetrics()}setOrigin(e,t){this.origin=new ae(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};mt.scrollbarThickness=Og?25:15,mt.DEFAULT_SCROLLBAR_MARGIN=.5;var Me=class{constructor(e,t,o,n,a,p){this.resizeGroup=this.bubbleBack=this.bubbleArrow=this.bubbleGroup=null,this.height=this.width=this.relativeTop=this.relativeLeft=0,this.autoLayout=!0,this.onMouseDownResizeWrapper=this.onMouseDownBubbleWrapper=this.moveCallback=this.resizeCallback=null,this.rendered=this.disposed=!1,this.workspace_=e,this.content_=t,this.shape_=o,o=Me.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrowRadians=Y(o),e.getBubbleCanvas().appendChild(this.createDom(t,!(!a||!p))),this.setAnchorLocation(n),a&&p||(e=this.content_.getBBox(),a=e.width+2*Me.BORDER_WIDTH,p=e.height+2*Me.BORDER_WIDTH),this.setBubbleSize(a,p),this.positionBubble(),this.renderArrow(),this.rendered=!0}createDom(e,t){this.bubbleGroup=A(w.G,{});var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return xg&&(o={}),o=A(w.G,o,this.bubbleGroup),this.bubbleArrow=A(w.PATH,{},o),this.bubbleBack=A(w.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Me.BORDER_WIDTH,ry:Me.BORDER_WIDTH},o),t?(this.resizeGroup=A(w.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup),t=2*Me.BORDER_WIDTH,A(w.POLYGON,{points:"0,x x,x x,0".replace(/x/g,t.toString())},this.resizeGroup),A(w.LINE,{class:"blocklyResizeLine",x1:t/3,y1:t-1,x2:t-1,y2:t/3},this.resizeGroup),A(w.LINE,{class:"blocklyResizeLine",x1:2*t/3,y1:t-1,x2:t-1,y2:2*t/3},this.resizeGroup)):this.resizeGroup=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper=E(this.bubbleBack,"mousedown",this,this.bubbleMouseDown),this.resizeGroup&&(this.onMouseDownResizeWrapper=E(this.resizeGroup,"mousedown",this,this.resizeMouseDown))),this.bubbleGroup.appendChild(e),this.bubbleGroup}getSvgRoot(){return this.bubbleGroup}setSvgId(e){let t;(t=this.bubbleGroup)==null||t.setAttribute("data-block-id",e)}bubbleMouseDown(e){const t=this.workspace_.getGesture(e);t&&t.handleBubbleStart(e,this)}showContextMenu(e){}isDeletable(){return!1}setDeleteStyle(e){}resizeMouseDown(e){this.promote(),Me.unbindDragEvents(),B(e)||(this.workspace_.startDrag(e,new ae(this.workspace_.RTL?-this.width:this.width,this.height)),Me.onMouseUpWrapper=E(document,"mouseup",this,Me.bubbleMouseUp),Me.onMouseMoveWrapper=E(document,"mousemove",this,this.resizeMouseMove),this.workspace_.hideChaff()),e.stopPropagation()}resizeMouseMove(e){this.autoLayout=!1,e=this.workspace_.moveDrag(e),this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y),this.workspace_.RTL&&this.positionBubble()}registerResizeEvent(e){this.resizeCallback=e}registerMoveEvent(e){this.moveCallback=e}promote(){let e;const t=(e=this.bubbleGroup)==null?void 0:e.parentNode;return(t==null?void 0:t.lastChild)!==this.bubbleGroup&&this.bubbleGroup?(t==null||t.appendChild(this.bubbleGroup),!0):!1}setAnchorLocation(e){this.anchorXY=e,this.rendered&&this.positionBubble()}layoutBubble(){var e=this.workspace_.getMetricsManager().getViewMetrics(!0),t=this.getOptimalRelativeLeft(e),o=this.getOptimalRelativeTop(e),n=this.shape_.getBBox();const a={x:t,y:-this.height-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},p={x:-this.width-30,y:o};o={x:n.width,y:o};var T={x:t,y:n.height};t=n.width<n.height?o:T,n=n.width<n.height?T:o,o=this.getOverlap(a,e),T=this.getOverlap(p,e);const S=this.getOverlap(t,e);e=this.getOverlap(n,e),e=Math.max(o,T,S,e),o===e?(this.relativeLeft=a.x,this.relativeTop=a.y):T===e?(this.relativeLeft=p.x,this.relativeTop=p.y):S===e?(this.relativeLeft=t.x,this.relativeTop=t.y):(this.relativeLeft=n.x,this.relativeTop=n.y)}getOverlap(e,t){var o=this.workspace_.RTL?this.anchorXY.x-e.x-this.width:e.x+this.anchorXY.x;return e=e.y+this.anchorXY.y,Math.max(0,Math.min(1,(Math.min(o+this.width,t.left+t.width)-Math.max(o,t.left))*(Math.min(e+this.height,t.top+t.height)-Math.max(e,t.top))/(this.width*this.height)))}getOptimalRelativeLeft(e){let t=-this.width/4;if(this.width>e.width)return t;if(this.workspace_.RTL){var o=this.anchorXY.x-t,n=e.left+e.width;e=e.left+mt.scrollbarThickness/this.workspace_.scale,o-this.width<e?t=-(e-this.anchorXY.x+this.width):o>n&&(t=-(n-this.anchorXY.x))}else{o=t+this.anchorXY.x,n=o+this.width;const a=e.left;e=e.left+e.width-mt.scrollbarThickness/this.workspace_.scale,o<a?t=a-this.anchorXY.x:n>e&&(t=e-this.anchorXY.x-this.width)}return t}getOptimalRelativeTop(e){let t=-this.height/4;if(this.height>e.height)return t;const o=this.anchorXY.y+t,n=o+this.height,a=e.top;e=e.top+e.height-mt.scrollbarThickness/this.workspace_.scale;const p=this.anchorXY.y;return o<a?t=a-p:n>e&&(t=e-p-this.height),t}positionBubble(){let e=this.anchorXY.x;e=this.workspace_.RTL?e-(this.relativeLeft+this.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchorXY.y)}moveTo(e,t){let o;(o=this.bubbleGroup)==null||o.setAttribute("transform","translate("+e+","+t+")")}setDragging(e){!e&&this.moveCallback&&this.moveCallback()}getBubbleSize(){return new Gt(this.width,this.height)}setBubbleSize(e,t){const o=2*Me.BORDER_WIDTH;e=Math.max(e,o+45),t=Math.max(t,o+20),this.width=e,this.height=t;let n;(n=this.bubbleBack)==null||n.setAttribute("width",e.toString());let a;(a=this.bubbleBack)==null||a.setAttribute("height",t.toString()),this.resizeGroup&&(this.workspace_.RTL?this.resizeGroup.setAttribute("transform","translate("+2*Me.BORDER_WIDTH+","+(t-o)+") scale(-1 1)"):this.resizeGroup.setAttribute("transform","translate("+(e-o)+","+(t-o)+")")),this.autoLayout&&this.layoutBubble(),this.positionBubble(),this.renderArrow(),this.resizeCallback&&this.resizeCallback()}renderArrow(){const e=[];var t=this.width/2,o=this.height/2,n=-this.relativeLeft,a=-this.relativeTop;if(t===n&&o===a)e.push("M "+t+","+o);else{a-=o,n-=t,this.workspace_.RTL&&(n*=-1);var p=Math.sqrt(a*a+n*n),T=Math.acos(n/p);0>a&&(T=2*Math.PI-T);var S=T+Math.PI/2;S>2*Math.PI&&(S-=2*Math.PI);var P=Math.sin(S);const ze=Math.cos(S);var te=this.getBubbleSize();S=(te.width+te.height)/Me.ARROW_THICKNESS,S=Math.min(S,te.width,te.height)/4,te=1-Me.ANCHOR_RADIUS/p,n=t+te*n,a=o+te*a,te=t+S*ze;const es=o+S*P;t-=S*ze,o-=S*P,P=T+this.arrowRadians,P>2*Math.PI&&(P-=2*Math.PI),T=Math.sin(P)*p/Me.ARROW_BEND,p=Math.cos(P)*p/Me.ARROW_BEND,e.push("M"+te+","+es),e.push("C"+(te+p)+","+(es+T)+" "+n+","+a+" "+n+","+a),e.push("C"+n+","+a+" "+(t+p)+","+(o+T)+" "+t+","+o)}e.push("z");let Ge;(Ge=this.bubbleArrow)==null||Ge.setAttribute("d",e.join(" "))}setColour(e){let t;(t=this.bubbleBack)==null||t.setAttribute("fill",e);let o;(o=this.bubbleArrow)==null||o.setAttribute("fill",e)}dispose(){this.onMouseDownBubbleWrapper&&y(this.onMouseDownBubbleWrapper),this.onMouseDownResizeWrapper&&y(this.onMouseDownResizeWrapper),Me.unbindDragEvents(),be(this.bubbleGroup),this.disposed=!0}moveDuringDrag(e,t){e?e.translateSurface(t.x,t.y):this.moveTo(t.x,t.y),this.relativeLeft=this.workspace_.RTL?this.anchorXY.x-t.x-this.width:t.x-this.anchorXY.x,this.relativeTop=t.y-this.anchorXY.y,this.renderArrow()}getRelativeToSurfaceXY(){return new ae(this.workspace_.RTL?-this.relativeLeft+this.anchorXY.x-this.width:this.anchorXY.x+this.relativeLeft,this.anchorXY.y+this.relativeTop)}setAutoLayout(e){this.autoLayout=e}static unbindDragEvents(){Me.onMouseUpWrapper&&(y(Me.onMouseUpWrapper),Me.onMouseUpWrapper=null),Me.onMouseMoveWrapper&&(y(Me.onMouseMoveWrapper),Me.onMouseMoveWrapper=null)}static bubbleMouseUp(e){h(),Me.unbindDragEvents()}static textToDom(e){const t=A(w.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Me.BORDER_WIDTH});e=e.split(`
`);for(let o=0;o<e.length;o++){const n=A(w.TSPAN,{dy:"1em",x:Me.BORDER_WIDTH},t),a=document.createTextNode(e[o]);n.appendChild(a)}return t}static createNonEditableBubble(e,t,o){if(o=new Me(t.workspace,e,t.pathObject.svgPath,o,null,null),o.setSvgId(t.id),t.RTL){t=e.getBBox().width;for(let n=0,a;a=e.childNodes[n];n++)a.setAttribute("text-anchor","end"),a.setAttribute("x",(t+Me.BORDER_WIDTH).toString())}return o}};Me.BORDER_WIDTH=6,Me.ARROW_THICKNESS=5,Me.ARROW_ANGLE=20,Me.ARROW_BEND=4,Me.ANCHOR_RADIUS=8,Me.onMouseUpWrapper=null,Me.onMouseMoveWrapper=null;var Th,uf;Th=28,i.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Th,connectingSnapRadius:Th,currentConnectionPreference:8,bumpDelay:250},uf={},uf.config=i.config$$module$build$src$core$config;var Uc=class{constructor(e){this.iconGroup_=null,this.collapseHidden=!0,this.SIZE=17,this.iconXY_=this.bubble_=null,e||H("Calling the Icon constructor with a null block","version 9","version 10","a non-null block"),this.block_=e}createIcon(){this.iconGroup_||(this.iconGroup_=A(w.G,{class:"blocklyIconGroup"}),this.getBlock().isInFlyout&&oe(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.getBlock().getSvgRoot().appendChild(this.iconGroup_),E(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())}dispose(){be(this.iconGroup_),this.setVisible(!1)}updateEditable(){}isVisible(){return!!this.bubble_}iconClick_(e){this.getBlock().workspace.isDragging()||this.getBlock().isInFlyout||B(e)||this.setVisible(!this.isVisible())}applyColour(){this.bubble_&&this.isVisible()&&this.bubble_.setColour(this.getBlock().style.colourPrimary)}setIconLocation(e){this.iconXY_=e,this.bubble_&&this.isVisible()&&this.bubble_.setAnchorLocation(e)}computeIconLocation(){var e=this.getBlock().getRelativeToSurfaceXY();const t=Zs(this.iconGroup_);e=new ae(e.x+t.x+this.SIZE/2,e.y+t.y+this.SIZE/2),ae.equals(this.getIconLocation(),e)||this.setIconLocation(e)}getIconLocation(){return this.iconXY_}getCorrectedSize(){return new Gt(this.SIZE,this.SIZE-2)}drawIcon_(e){}setVisible(e){}getBlock(){if(!this.block_)throw Error("Block is not set for this icon.");return this.block_}},jr={};jr.deepMerge=ii,jr.inherits=Kv,jr.mixin=Jv,jr.values=qv;var Gi=class{constructor(e,t,o,n){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=n||Object.create(null),this.fontStyle=Object.create(null),We(se.THEME,e,this)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){return(e=this.componentStyles[e])&&typeof e=="string"&&this.getComponentStyle(e)?this.getComponentStyle(e):e?String(e):null}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const o=new Gi(e);let n=t.base;if(n){if(typeof n=="string"){let a;n=(a=ec(se.THEME,n))!=null?a:void 0}n instanceof Gi&&(ii(o,n),o.name=e)}return ii(o.blockStyles,t.blockStyles),ii(o.categoryStyles,t.categoryStyles),ii(o.componentStyles,t.componentStyles),ii(o.fontStyle,t.fontStyle),t.startHats!==null&&(o.startHats=t.startHats),o}},Yy={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},zy={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Hc=new Gi("classic",Yy,zy),bh="categoryToolbox",hf="flyoutToolbox",De;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(De||(De={}));var df={hasCategoriesInternal:Qv},ui={};ui.Position=De,ui.TEST_ONLY=df,ui.convertFlyoutDefToJsonArray=_c,ui.convertToolboxDefToJson=pc,ui.hasCategories=Su,ui.isCategoryCollapsible=Ru,ui.parseToolboxTree=k_;var co=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,o=!1;var n=!1,a=!1,p=!1,T=!1,S=!1;const P=!!e.readOnly;if(!P){var te;t=pc((te=e.toolbox)!=null?te:null),o=Su(t),n=e.trashcan,n=n===void 0?o:n,a=e.collapse,a=a===void 0?o:a,p=e.comments,p=p===void 0?o:p,T=e.disable,T=T===void 0?o:T,S=e.sounds,S=S===void 0?!0:S}te=e.maxTrashcanContents,n?te===void 0&&(te=32):te=0;const Ge=!!e.rtl;let ze=e.horizontalLayout;ze===void 0&&(ze=!1);var es=e.toolboxPosition!=="end";es=ze?es?De.TOP:De.BOTTOM:es===Ge?De.RIGHT:De.LEFT;let Xi=e.css;Xi===void 0&&(Xi=!0);let pi="https://blockly-demo.appspot.com/static/media/";e.media?pi=e.media.endsWith("/")?e.media:e.media+"/":"path"in e&&(H("path","Nov 2014","Jul 2023","media"),pi=e.path+"media/");const Jm=e.oneBasedIndex,kS=e.renderer||"geras",OS=e.plugins||{};this.RTL=Ge,this.oneBasedIndex=Jm===void 0?!0:Jm,this.collapse=a,this.comments=p,this.disable=T,this.readOnly=P,this.maxBlocks=e.maxBlocks||1/0;let qm;this.maxInstances=(qm=e.maxInstances)!=null?qm:null,this.pathToMedia=pi,this.hasCategories=o,this.moveOptions=co.parseMoveOptions_(e,o),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=n,this.maxTrashcanContents=te,this.hasSounds=S,this.hasCss=Xi,this.horizontalLayout=ze,this.languageTree=t,this.gridOptions=co.parseGridOptions_(e),this.zoomOptions=co.parseZoomOptions_(e),this.toolboxPosition=es,this.theme=co.parseThemeOptions_(e),this.renderer=kS;let Zm;this.rendererOverrides=(Zm=e.rendererOverrides)!=null?Zm:null;let Qm;this.parentWorkspace=(Qm=e.parentWorkspace)!=null?Qm:null,this.plugins=OS}static parseMoveOptions_(e,t){const o=e.move||{},n={};return o.scrollbars===void 0&&e.scrollbars===void 0?n.scrollbars=t:typeof o.scrollbars=="object"?(n.scrollbars={horizontal:!!o.scrollbars.horizontal,vertical:!!o.scrollbars.vertical},n.scrollbars.horizontal&&n.scrollbars.vertical?n.scrollbars=!0:n.scrollbars.horizontal||n.scrollbars.vertical||(n.scrollbars=!1)):n.scrollbars=!!o.scrollbars||!!e.scrollbars,n.wheel=n.scrollbars&&o.wheel!==void 0?!!o.wheel:typeof n.scrollbars=="object",n.drag=n.scrollbars?o.drag===void 0?!0:!!o.drag:!1,n}static parseZoomOptions_(e){e=e.zoom||{};const t={};return t.controls=e.controls===void 0?!1:!!e.controls,t.wheel=e.wheel===void 0?!1:!!e.wheel,t.startScale=e.startScale===void 0?1:Number(e.startScale),t.maxScale=e.maxScale===void 0?3:Number(e.maxScale),t.minScale=e.minScale===void 0?.3:Number(e.minScale),t.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),t.pinch=e.pinch===void 0?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions_(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=e.length===void 0?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t}static parseThemeOptions_(e){return e=e.theme||Hc,typeof e=="string"?ec(se.THEME,e):e instanceof Gi?e:Gi.defineTheme(e.name||"builtin"+mr(),e)}},pf;i.Mutator$$module$build$src$core$mutator=class extends Uc{constructor(e,t){t||H("Calling the Mutator constructor without passing the block it is attached to","version 9","version 10","the constructor by passing the list of subblocks and the block instance to attach the mutator to"),super(t!=null?t:null),this.workspace=null,this.workspaceHeight=this.workspaceWidth=0,this.updateWorkspacePid=this.sourceListener=this.rootBlock=this.svgDialog=null,this.quarkNames=e}setBlock(e){this.block_=e}getWorkspace(){return this.workspace}drawIcon_(e){A(w.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e),A(w.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),A(w.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)}iconClick_(e){this.getBlock().isEditable()&&super.iconClick_(e)}createEditor(){if(this.svgDialog=A(w.SVG,{x:Me.BORDER_WIDTH,y:Me.BORDER_WIDTH}),this.quarkNames.length){var e=tt("xml");for(let n=0,a;a=this.quarkNames[n];n++){var t=tt("block");t.setAttribute("type",a),e.appendChild(t)}}else e=null;var o=this.getBlock();return t=new co({disable:!1,parentWorkspace:o.workspace,media:o.workspace.options.pathToMedia,rtl:o.RTL,horizontalLayout:!1,renderer:o.workspace.options.renderer,rendererOverrides:o.workspace.options.rendererOverrides}),t.toolboxPosition=o.RTL?De.RIGHT:De.LEFT,(o=!!e)&&(t.languageTree=pc(e)),this.workspace=this.newWorkspaceSvg(t),this.workspace.internalIsMutator=!0,this.workspace.addChangeListener(nu),e=o?this.workspace.addFlyout(w.G):null,t=this.workspace.createDom("blocklyMutatorBackground"),e&&t.insertBefore(e,this.workspace.svgBlockCanvas_),this.svgDialog.appendChild(t),this.svgDialog}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}updateEditable(){super.updateEditable(),this.getBlock().isInFlyout||(this.getBlock().isEditable()?this.iconGroup_&&Pe(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&oe(this.iconGroup_,"blocklyIconGroupReadonly")))}resizeBubble(){if(this.workspace){var e=2*Me.BORDER_WIDTH,t=this.workspace.getCanvas(),o=t.getBBox(),n=o.width+o.x,a=o.height+3*e,p=this.workspace.getFlyout();if(p){const T=p.getWorkspace().getMetricsManager().getScrollMetrics();a=Math.max(a,T.height+20),n+=p.getWidth()}(p=this.getBlock().RTL)&&(n=-o.x),n+=3*e,(Math.abs(this.workspaceWidth-n)>e||Math.abs(this.workspaceHeight-a)>e)&&(this.workspaceWidth=n,this.workspaceHeight=a,this.bubble_.setBubbleSize(n+e,a+e),this.svgDialog.setAttribute("width",`${n}`),this.svgDialog.setAttribute("height",`${a}`),this.workspace.setCachedParentSvgSize(n,a)),p&&t.setAttribute("transform",`translate(${this.workspaceWidth}, 0)`),this.workspace.resize()}}onBubbleMove(){this.workspace&&this.workspace.recordDragTargets()}setVisible(e){if(e!==this.isVisible()){var t=this.getBlock();if(Re(new(Ce(Fo))(t,e,"mutator")),e){this.bubble_=new Me(t.workspace,this.createEditor(),t.pathObject.svgPath,this.iconXY_,null,null),e=this.workspace,this.bubble_.setSvgId(t.id),this.bubble_.registerMoveEvent(this.onBubbleMove.bind(this));var o=e.options.languageTree,n=e.getFlyout();o&&(n.init(e),n.show(o)),this.rootBlock=t.decompose(e),o=this.rootBlock.getDescendants(!1);for(let a=0,p;p=o[a];a++)p.render();if(this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1),n?(o=2*n.CORNER_RADIUS,n=this.rootBlock.RTL?n.getWidth()+o:o):n=o=16,t.RTL&&(n=-n),this.rootBlock.moveBy(n,o),t.saveConnections){const a=this.rootBlock;t.saveConnections(a),this.sourceListener=()=>{const p=this.getBlock();p.saveConnections&&p.saveConnections(a)},t.workspace.addChangeListener(this.sourceListener)}this.resizeBubble(),e.addChangeListener(this.workspaceChanged.bind(this)),this.updateWorkspace(),this.applyColour()}else this.svgDialog=null,this.workspace.dispose(),this.rootBlock=this.workspace=null,(n=this.bubble_)==null||n.dispose(),this.bubble_=null,this.workspaceHeight=this.workspaceWidth=0,this.sourceListener&&(t.workspace.removeChangeListener(this.sourceListener),this.sourceListener=null)}}workspaceChanged(e){this.shouldIgnoreMutatorEvent_(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.updateWorkspace()},0))}shouldIgnoreMutatorEvent_(e){return e.isUiEvent||e.type===Wt||e.type===Pt&&e.element==="disabled"}updateWorkspace(){if(!this.workspace.isDragging()){var e=this.workspace.getTopBlocks(!1);for(let n=0,a;a=e[n];n++){var t=a.getRelativeToSurfaceXY();if(20>t.y&&a.moveBy(0,20-t.y),a.RTL){var o=-20;const p=this.workspace.getFlyout();p&&(o-=p.getWidth()),t.x>o&&a.moveBy(o-t.x,0)}else 20>t.x&&a.moveBy(20-t.x,0)}}if(this.rootBlock&&this.rootBlock.workspace===this.workspace){(e=ut())||ve(!0);const n=this.getBlock();if(t=An.getExtraBlockState_(n),o=n.rendered,n.rendered=!1,n.compose(this.rootBlock),n.rendered=o,n.initSvg(),n.rendered&&n.render(),o=An.getExtraBlockState_(n),t!==o){Re(new(Ce(Pt))(n,"mutation",null,t,o));const a=ut();setTimeout(function(){const p=ut();ve(a),n.bumpNeighbours(),ve(p)},i.config$$module$build$src$core$config.bumpDelay)}this.workspace.isDragging()||setTimeout(()=>this.resizeBubble(),0),ve(e)}}dispose(){this.getBlock().mutator=null,super.dispose()}updateBlockStyle(){var e=this.workspace;if(e&&e.getAllBlocks(!1)){const t=e.getAllBlocks(!1);for(let o=0,n;n=t[o];o++)n.setStyle(n.getStyleName());if(e=e.getFlyout()){e=e.getWorkspace().getAllBlocks(!1);for(let o=0,n;n=e[o];o++)n.setStyle(n.getStyleName())}}}static reconnect(e,t,o){if(!e||!e.getSourceBlock().workspace)return!1;o=t.getInput(o).connection;const n=e.targetBlock();return n&&n!==t||!o||o.targetConnection===e?!1:(o.isConnected()&&o.disconnect(),o.connect(e),!0)}static findParentWs(e){let t=null;if(e&&e.options){const o=e.options.parentWorkspace;e.isFlyout?o&&o.options&&(t=o.options.parentWorkspace):o&&(t=o)}return t}},pf={},pf.Mutator=i.Mutator$$module$build$src$core$mutator;var Mn=Object.create(null),Ky={allExtensions:Mn};gc("parent_tooltip_when_inline",hI),i.module$build$src$core$extensions={},i.module$build$src$core$extensions.TEST_ONLY=Ky,i.module$build$src$core$extensions.apply=ku,i.module$build$src$core$extensions.buildTooltipForDropdown=cI,i.module$build$src$core$extensions.buildTooltipWithFieldText=uI,i.module$build$src$core$extensions.isRegistered=O_,i.module$build$src$core$extensions.register=gc,i.module$build$src$core$extensions.registerMixin=tI,i.module$build$src$core$extensions.registerMutator=sI,i.module$build$src$core$extensions.runAfterPageLoad=fc,i.module$build$src$core$extensions.unregister=oI;var _f={};_f.removeElem=ps;var Uo={};Uo.arc=Rt,Uo.curve=Ss,Uo.line=Er,Uo.lineOnAxis=ge,Uo.lineTo=Do,Uo.moveBy=ht,Uo.moveTo=qt,Uo.point=Te;var Ye={};Ye.Coordinate=ae,Ye.KeyCodes=me,Ye.Rect=Tt,Ye.Size=Gt,Ye.Svg=w,Ye.aria=Wr,Ye.array=_f,Ye.arrayRemove=TI,Ye.browserEvents=Bo,Ye.checkMessageReferences=fI,Ye.colour=Qt,Ye.deprecation=Bt,Ye.dom=Nt,Ye.extensions=i.module$build$src$core$extensions,Ye.getBlockTypeCounts=EI,Ye.getDocumentScroll=bI,Ye.getInjectionDivXY_=pI,Ye.getRelativeXY=dI,Ye.getViewportBBox=$I,Ye.idGenerator=Lc,Ye.is3dSupported=mI,Ye.math=Oc,Ye.object=jr,Ye.parseBlockColour=II,Ye.parsing=Hr,Ye.replaceMessageReferences=gI,Ye.runAfterPageLoad=yI,Ye.screenToWsCoordinates=vI,Ye.string=i.module$build$src$core$utils$string,Ye.style=vo,Ye.svgMath=ai,Ye.svgPaths=Uo,Ye.tokenizeInterpolation=_I,Ye.toolbox=ui,Ye.userAgent=xo,Ye.xml=i.module$build$src$core$utils$xml;var gf=class extends io{constructor(e,t){super(t),this.type=Ar,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}fromJson(e){super.fromJson(e),this.isOpen=e.isOpen}};We(se.EVENT,Ar,gf);var Ho=class{constructor(e){this.name_=e}toString(){return this.name_}};Ho.POSITIONABLE=new Ho("positionable"),Ho.DRAG_TARGET=new Ho("drag_target"),Ho.DELETE_AREA=new Ho("delete_area"),Ho.AUTOHIDEABLE=new Ho("autohideable");var Ut=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const o=e.component.id;if(!t&&this.componentData.has(o)){var n;throw Error('Plugin "'+o+'" with capabilities "'+((n=this.componentData.get(o))==null?void 0:n.capabilities)+'" already added.')}for(this.componentData.set(o,e),t=[],n=0;n<e.capabilities.length;n++){const a=String(e.capabilities[n]).toLowerCase();if(t.push(a),this.capabilityToComponentIds.has(a)){let p;(p=this.capabilityToComponentIds.get(a))==null||p.push(o)}else this.capabilityToComponentIds.set(a,[o])}this.componentData.get(o).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let o=0;o<t.capabilities.length;o++){const n=String(t.capabilities[o]).toLowerCase();ps(this.capabilityToComponentIds.get(n),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,t))console.warn('Plugin "'+e+'already has capability "'+t+'"');else{t=String(t).toLowerCase();var o;(o=this.componentData.get(e))==null||o.capabilities.push(t);var n;(n=this.capabilityToComponentIds.get(t))==null||n.push(e)}}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=String(t).toLowerCase(),ps(this.componentData.get(e).capabilities,t),ps(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+`doesn't have capability "`+t+'" to remove')}hasCapability(e,t){return t=String(t).toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.indexOf(t)!==-1}getComponent(e){let t;return(t=this.componentData.get(e))==null?void 0:t.component}getComponents(e,t){if(e=String(e).toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const o=[];if(t){const n=[];e.forEach(a=>{n.push(this.componentData.get(a))}),n.sort(function(a,p){return a.weight-p.weight}),n.forEach(function(a){o.push(a.component)})}else e.forEach(n=>{o.push(this.componentData.get(n).component)});return o}};Ut.Capability=Ho;var Xr=class extends Error{},ff=class extends Xr{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},Yr=class extends Xr{constructor(e,t,o){super(`The block ${t.toDevString()} is missing a(n) ${e}
connection`),this.block=t,this.state=o}},mf=class extends Xr{constructor(e,t,o,n){super(`The block ${o.toDevString()} could not connect its
${t} to its parent, because: ${e}`),this.childBlock=o,this.childState=n}},$f=class extends Xr{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},xn={};xn.BadConnectionCheck=mf,xn.DeserializationError=Xr,xn.MissingBlockType=ff,xn.MissingConnection=Yr,xn.RealChildOfShadow=$f;var Tf=100,bf=75,Ef=50,Vc={};Vc.BLOCKS=Ef,Vc.PROCEDURES=bf,Vc.VARIABLES=Tf;var Eh={};Eh.register=Au,Eh.unregister=SI;var vf=class{constructor(){this.priority=Ef}save(e){const t=[];for(const o of e.getTopBlocks(!1))(e=Mo(o,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const o of e)Li(o,t,{recordUndo:Js()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};Au("blocks",new vf);var zr={};zr.BlockSerializer=vf,zr.append=Li,zr.appendInternal=Lu,zr.save=Mo;var If=class extends Br{constructor(e){super(e),this.type=Wt,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=lc(e),this.ids=sc(e),this.json=Mo(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Qs(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}fromJson(e){super.fromJson(e),this.xml=eo(e.xml),this.ids=e.ids,this.json=e.json,e.recordUndo!==void 0&&(this.recordUndo=e.recordUndo)}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(e)Li(this.json,t);else for(e=0;e<this.ids.length;e++){const o=this.ids[e],n=t.getBlockById(o);n?n.dispose(!1):o===this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}};We(se.EVENT,Wt,If);var yf=class extends Br{constructor(e){if(super(e),this.type=Io,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=lc(e),this.ids=sc(e),this.wasShadow=e.isShadow(),this.oldJson=Mo(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=Qs(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}fromJson(e){super.fromJson(e),this.oldXml=eo(e.oldXml),this.ids=e.ids,this.wasShadow=e.wasShadow||this.oldXml.tagName.toLowerCase()==="shadow",this.oldJson=e.oldJson,e.recordUndo!==void 0&&(this.recordUndo=e.recordUndo)}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const o=this.ids[e],n=t.getBlockById(o);n?n.dispose(!1):o===this.blockId&&console.warn("Can't delete non-existent block: "+o)}else Li(this.oldJson,t)}};We(se.EVENT,Io,yf);var pe;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(pe||(pe={})),i.module$build$src$core$connection_type={},i.module$build$src$core$connection_type.ConnectionType=pe;var qe=class{constructor(e,t){this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom_=this.check_=null,this.y=this.x=0,this.shadowState_=null,this.sourceBlock_=e}connect_(e){const t=pe.INPUT_VALUE,o=this.getSourceBlock();var n=e.getSourceBlock();e.isConnected()&&e.disconnect();let a;if(this.isConnected()){const T=this.stashShadowState_(),S=this.targetBlock();S.isShadow()?S.dispose(!1):(this.disconnect(),a=S),this.applyShadowState_(T)}let p;xt()&&(p=new(Ce(is))(n)),HI(this,e),n.setParent(o),p&&(p.recordNew(),Re(p)),a&&(e=this.type===t?a.outputConnection:a.previousConnection,(n=qe.getConnectionForOrphanedConnection(n,e))?e.connect(n):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal_();const e=this.targetBlock();e&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===pe.INPUT_VALUE||this.type===pe.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=ut();t||ve(!0),this.isSuperior()?this.connect_(e):e.connect_(this),t||ve(!1)}return this.isConnected()}disconnect(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!==this)throw Error("Target connection not connected to source connection.");let t,o;this.isSuperior()?(t=this.sourceBlock_,o=e.getSourceBlock(),e=this):(t=e.getSourceBlock(),o=this.sourceBlock_);const n=ut();n||ve(!0),this.disconnectInternal_(t,o),o.isShadow()||e.respawnShadow_(),n||ve(!1)}disconnectInternal_(e,t){let o;xt()&&(o=new(Ce(is))(t)),(e=this.targetConnection)&&(e.targetConnection=null),this.targetConnection=null,t.setParent(null),o&&(o.recordNew(),Re(o))}respawnShadow_(){this.createShadowBlock_(!0)}targetBlock(){if(this.isConnected()){let e,t;return(t=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null,this}getCheck(){return this.check_}setShadowDom(e){this.setShadowStateInternal_({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?Oi(this.targetBlock()):this.shadowDom_}setShadowState(e){this.setShadowStateInternal_({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?Mo(this.targetBlock()):this.shadowState_}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let o=0;o<t.length;o++)if(t[o].connection===this){e=t[o];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let o=0,n;n=e.inputList[o];o++)if(n.connection===this){t=n;break}if(t)t='Input "'+t.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return t+e.toDevString()}stashShadowState_(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:e,shadowState:t}}applyShadowState_({shadowDom:e,shadowState:t}){this.shadowDom_=e,this.shadowState_=t}setShadowStateInternal_({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom_=e,this.shadowState_=t,(e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(e=this.createShadowBlock_(!1),this.serializeShadow_(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))}createShadowBlock_(e){var t=this.getSourceBlock();const o=this.getShadowState(),n=this.getShadowDom();if(t.isDeadOrDying()||!o&&!n)return null;if(o)return t=Lu(o,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(n){if(t=gn(n,t.workspace),e)if(this.type===pe.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===pe.NEXT_STATEMENT){if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return t}return null}serializeShadow_(e){e&&(this.shadowDom_=Oi(e),this.shadowState_=Mo(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===pe.OUTPUT_VALUE)return WI(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const o=t.getConnectionChecker();return e&&o.canConnect(t,e,!1)?e:null}};qe.CAN_CONNECT=0,qe.REASON_SELF_CONNECTION=1,qe.REASON_WRONG_TYPE=2,qe.REASON_TARGET_NULL=3,qe.REASON_CHECKS_FAILED=4,qe.REASON_DIFFERENT_WORKSPACES=5,qe.REASON_SHADOW_PARENT=6,qe.REASON_DRAG_CHECKS_FAILED=7,qe.REASON_PREVIOUS_AND_OUTPUT=8;var Kr="_TEMP_COLLAPSED_INPUT",Jr="_TEMP_COLLAPSED_FIELD",vh={};vh.COLLAPSED_FIELD_NAME=Jr,vh.COLLAPSED_INPUT_NAME=Kr,i.FieldLabel$$module$build$src$core$field_label=class extends je{constructor(e,t,o){super(je.SKIP_SETUP),this.class_=null,this.EDITABLE=!1,e!==je.SKIP_SETUP&&(o?this.configure_(o):this.class_=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class_=e.class)}initView(){this.createTextElement_(),this.class_&&oe(this.getTextElement(),this.class_)}doClassValidation_(e){return e==null?null:String(e)}setClass(e){this.textElement_&&(this.class_&&Pe(this.textElement_,this.class_),e&&oe(this.textElement_,e)),this.class_=e}static fromJson(e){return new this($t(e.text),void 0,e)}},Bs("field_label",i.FieldLabel$$module$build$src$core$field_label),i.FieldLabel$$module$build$src$core$field_label.prototype.DEFAULT_VALUE="",i.FieldLabel$$module$build$src$core$field_label;var Bn=class{constructor(e,t,o,n){if(this.type=e,this.name=t,this.connection=n,this.fieldRow=[],this.visible_=!0,e!==xe.DUMMY&&!t)throw Error("Value inputs and statement inputs must have non-empty name.");this.sourceBlock_=o,this.align=i.Align$$module$build$src$core$input.LEFT}getSourceBlock(){return this.sourceBlock_}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,o){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||t===""&&o)&&(typeof t=="string"&&(t=yu({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(t.init(),t.applyColour()),t.name=o,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),e}removeField(e,t){for(let o=0,n;n=this.fieldRow[o];o++)if(n.name===e)return n.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible_}setVisible(e){let t=[];if(this.visible_===e)return t;this.visible_=e;for(let n=0,a;a=this.fieldRow[n];n++)a.setVisible(e);if(this.connection){var o=this.connection;e?t=o.startTrackingAll():o.stopTrackingAll(),(o=o.targetBlock())&&(o.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e=0,t;t=this.fieldRow[e];e++)t.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock_.rendered&&this.sourceBlock_.render(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock_.workspace.rendered)for(let e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init()}dispose(){for(let e=0,t;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}},Ih;(function(e){e=e.Align||(e.Align={}),e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(Bn||(Bn={})),i.Align$$module$build$src$core$input=Bn.Align,Ih={},Ih.Align=i.Align$$module$build$src$core$input,Ih.Input=Bn;var W=class{constructor(e,t,o){if(this.wsCoordinate_=null,!t)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=W.isConnectionType_(e),this.location_=t,this.processParams_(o||null)}processParams_(e){e&&e.wsCoordinate&&(this.wsCoordinate_=e.wsCoordinate)}getLocation(){return this.location_}getType(){return this.type_}getWsCoordinate(){return this.wsCoordinate_}isConnection(){return this.isConnection_}findNextForInput_(){var e=this.location_.getParentInput();const t=e.getSourceBlock();for(e=t.inputList.indexOf(e),e+=1;e<t.inputList.length;e++){const o=t.inputList[e],n=o.fieldRow;for(let a=0;a<n.length;a++){const p=n[a];if(p.isClickable()||W.NAVIGATE_ALL_FIELDS)return W.createFieldNode(p)}if(o.connection)return W.createInputNode(o)}return null}findNextForField_(){var e=this.location_,t=e.getParentInput();const o=e.getSourceBlock();if(!o)throw Error("The current AST location is not associated with a block");var n=o.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)+1;n<o.inputList.length;n++){t=o.inputList[n];const a=t.fieldRow;for(;e<a.length;){if(a[e].isClickable()||W.NAVIGATE_ALL_FIELDS)return W.createFieldNode(a[e]);e++}if(e=0,t.connection)return W.createInputNode(t)}return null}findPrevForInput_(){const e=this.location_.getParentInput(),t=e.getSourceBlock();for(var o=t.inputList.indexOf(e);0<=o;o--){var n=t.inputList[o];if(n.connection&&n!==e)return W.createInputNode(n);n=n.fieldRow;for(let a=n.length-1;0<=a;a--){const p=n[a];if(p.isClickable()||W.NAVIGATE_ALL_FIELDS)return W.createFieldNode(p)}}return null}findPrevForField_(){var e=this.location_;const t=e.getParentInput(),o=e.getSourceBlock();if(!o)throw Error("The current AST location is not associated with a block");var n=o.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)-1;0<=n;n--){var a=o.inputList[n];if(a.connection&&a!==t)return W.createInputNode(a);for(a=a.fieldRow;-1<e;){if(a[e].isClickable()||W.NAVIGATE_ALL_FIELDS)return W.createFieldNode(a[e]);e--}0<=n-1&&(e=o.inputList[n-1].fieldRow.length-1)}return null}navigateBetweenStacks_(e){var t=this.getLocation();if(t.getSourceBlock){var o=t.getSourceBlock();o&&(t=o)}if(!t||t.isDeadOrDying())return null;o=t.getRootBlock(),t=o.workspace.getTopBlocks(!0);for(let n=0;n<t.length;n++)if(o.id===t[n].id)return e=n+(e?1:-1),e===-1||e===t.length?null:W.createStackNode(t[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}findTopASTNodeForBlock_(e){const t=mc(e);return t?W.createConnectionNode(t):W.createBlockNode(e)}getOutAstNodeForBlock_(e){if(!e)return null;e=e.getTopStackBlock();const t=mc(e);return t&&t.targetConnection&&t.targetConnection.getParentInput()?W.createInputNode(t.targetConnection.getParentInput()):W.createStackNode(e)}findFirstFieldOrInput_(e){e=e.inputList;for(let t=0;t<e.length;t++){const o=e[t],n=o.fieldRow;for(let a=0;a<n.length;a++){const p=n[a];if(p.isClickable()||W.NAVIGATE_ALL_FIELDS)return W.createFieldNode(p)}if(o.connection)return W.createInputNode(o)}return null}getSourceBlock(){return this.getType()===W.types.BLOCK?this.getLocation():this.getType()===W.types.STACK?this.getLocation():this.getType()===W.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type_){case W.types.STACK:return this.navigateBetweenStacks_(!0);case W.types.OUTPUT:return W.createBlockNode(this.location_.getSourceBlock());case W.types.FIELD:return this.findNextForField_();case W.types.INPUT:return this.findNextForInput_();case W.types.BLOCK:return W.createConnectionNode(this.location_.nextConnection);case W.types.PREVIOUS:return W.createBlockNode(this.location_.getSourceBlock());case W.types.NEXT:return W.createConnectionNode(this.location_.targetConnection)}return null}in(){switch(this.type_){case W.types.WORKSPACE:const e=this.location_.getTopBlocks(!0);if(0<e.length)return W.createStackNode(e[0]);break;case W.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case W.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case W.types.INPUT:return W.createConnectionNode(this.location_.targetConnection)}return null}prev(){switch(this.type_){case W.types.STACK:return this.navigateBetweenStacks_(!1);case W.types.FIELD:return this.findPrevForField_();case W.types.INPUT:return this.findPrevForInput_();case W.types.BLOCK:var e=mc(this.location_);return W.createConnectionNode(e);case W.types.PREVIOUS:if((e=this.location_.targetConnection)&&!e.getParentInput())return W.createConnectionNode(e);break;case W.types.NEXT:return W.createBlockNode(this.location_.getSourceBlock())}return null}out(){switch(this.type_){case W.types.STACK:var e=this.location_,t=e.getRelativeToSurfaceXY();return t=new ae(t.x,t.y+W.DEFAULT_OFFSET_Y),W.createWorkspaceNode(e.workspace,t);case W.types.OUTPUT:return e=this.location_,(t=e.targetConnection)?W.createConnectionNode(t):W.createStackNode(e.getSourceBlock());case W.types.FIELD:if(e=this.location_.getSourceBlock(),!e)throw Error("The current AST location is not associated with a block");return W.createBlockNode(e);case W.types.INPUT:return W.createBlockNode(this.location_.getSourceBlock());case W.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case W.types.PREVIOUS:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock());case W.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null}static isConnectionType_(e){switch(e){case W.types.PREVIOUS:case W.types.NEXT:case W.types.INPUT:case W.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new W(W.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const t=e.type;return t===pe.INPUT_VALUE||t===pe.NEXT_STATEMENT&&e.getParentInput()?W.createInputNode(e.getParentInput()):t===pe.NEXT_STATEMENT?new W(W.types.NEXT,e):t===pe.OUTPUT_VALUE?new W(W.types.OUTPUT,e):t===pe.PREVIOUS_STATEMENT?new W(W.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new W(W.types.INPUT,e.connection):null}static createBlockNode(e){return e?new W(W.types.BLOCK,e):null}static createStackNode(e){return e?new W(W.types.STACK,e):null}static createWorkspaceNode(e,t){return t&&e?new W(W.types.WORKSPACE,e,{wsCoordinate:t}):null}static createTopNode(e){const t=mc(e);return t?W.createConnectionNode(t):W.createBlockNode(e)}};W.NAVIGATE_ALL_FIELDS=!1,W.DEFAULT_OFFSET_Y=-20,function(e){e=e.types||(e.types={}),e.FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace"}(W||(W={}));var Pn=class{constructor(e,t,o){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.loadExtraState=this.saveExtraState=this.domToMutation=this.mutationToDom=this.init=void 0,this.suppressPrefixSuffix=!1,this.decompose=this.compose=this.getDeveloperVariables=void 0,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.disposing=!1,this.comment=null,this.isInsertionMarker_=!1,this.hat=void 0,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=e,this.id=o&&!e.getBlockById(o)?o:Ks(),e.setBlockById(this.id,this),this.commentModel={text:null,pinned:!1,size:new Gt(160,80)},this.xy_=new ae(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,o=gs[t],!o||typeof o!="object")throw TypeError("Invalid block definition for type: "+t);Object.assign(this,o)}e.addTopBlock(this),e.addTypedBlock(this),new.target===Pn&&this.doInit_()}doInit_(){const e=ut();e||ve(!0);const t=Js();try{typeof this.init=="function"&&(ys(!1),this.init(),ys(t)),xt()&&Re(new(Ce(Wt))(this))}finally{e||ve(!1),ys(t)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e){if(!this.isDeadOrDying()){this.unplug(e),xt()&&Re(new(Ce(Io))(this)),this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),At();try{this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0;for(let o=this.childBlocks_.length-1;0<=o;o--)this.childBlocks_[o].dispose(!1);for(let o=0,n;n=this.inputList[o];o++)n.dispose();this.inputList.length=0;const t=this.getConnections_(!0);for(let o=0,n;n=t[o];o++)n.dispose()}finally{Lt(),this.disposed=!0}}}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(let e=0,t;t=this.inputList[e];e++)for(let o=0,n;n=t.fieldRow[o];o++)n.initModel&&n.initModel()}unplug(e){this.outputConnection&&this.unplugFromRow_(e),this.previousConnection&&this.unplugFromStack_(e)}unplugFromRow_(e){let t=null;this.outputConnection.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e==null||e.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e==null||e.onFailedConnect(t))}getOnlyValueConnection_(){let e=null;for(let t=0;t<this.inputList.length;t++){const o=this.inputList[t].connection;if(o&&o.type===pe.INPUT_VALUE&&o.targetConnection){if(e)return null;e=o}}return e}unplugFromStack_(e){let t=null;this.previousConnection.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect());const o=this.getNextBlock();e&&o&&!o.isShadow()&&(e=this.nextConnection.targetConnection,e==null||e.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e))}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t=0,o;o=this.inputList[t];t++)o.connection&&e.push(o.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const o=t.targetBlock();if(!o||e&&o.isShadow())return t;t=o.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t=0,o;o=this.inputList[t];t++)if(o.connection&&o.connection.targetBlock()===e)return o;return null}getSurroundParent(){let e=this,t;do if(t=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getFirstStatementConnection(){for(let e=0,t;t=this.inputList[e];e++)if(t.connection&&t.connection.type===pe.NEXT_STATEMENT)return t.connection;return null}getRootBlock(){let e,t=this;do e=t,t=e.parentBlock_;while(t);return e}getTopStackBlock(){let e=this,t;do t=e.getPreviousBlock();while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let o=0,n;n=this.inputList[o];o++)if(n.connection){var t=n.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),o=!!t;if(o&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!o&&e)throw Error("Block not connected to new parent.");if(o&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?ps(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],o=this.getChildren(e);for(let n,a=0;n=o[a];a++)t.push(...n.getDescendants(e));return t}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setDeletable(e){this.deletable_=e}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setMovable(e){this.movable_=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(Ae(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(e){this.isShadow_=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setEditable(e){this.editable_=e;for(let t=0,o;o=this.inputList[t];t++)for(let n=0,a;a=o.fieldRow[n];n++)a.updateEditable()}isDisposed(){return this.disposed}getMatchingConnection(e,t){const o=this.getConnections_(!0);if(e=e.getConnections_(!0),o.length!==e.length)throw Error("Connection lists did not match in length.");for(let n=0;n<e.length;n++)if(e[n]===t)return o[n];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return br(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(e){e=mn(e),this.hue_=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=e,this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(let t=0,o;o=this.inputList[t];t++)for(let n=0,a;a=o.fieldRow[n];n++)if(a.name===e)return a;return null}getVars(){const e=[];for(let t=0,o;o=this.inputList[t];t++)for(let n=0,a;a=o.fieldRow[n];n++)a.referencesVariables()&&e.push(a.getValue());return e}getVarModels(){const e=[];for(let t=0,o;o=this.inputList[t];t++)for(let n=0,a;a=o.fieldRow[n];n++)if(a.referencesVariables()){const p=this.workspace.getVariableById(a.getValue());p&&e.push(p)}return e}updateVarName(e){for(let t=0,o;o=this.inputList[t];t++)for(let n=0,a;a=o.fieldRow[n];n++)a.referencesVariables()&&e.getId()===a.getValue()&&a.refreshVariableName()}renameVarById(e,t){for(let o=0,n;n=this.inputList[o];o++)for(let a=0,p;p=n.fieldRow[a];a++)p.referencesVariables()&&e===p.getValue()&&p.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const o=this.getField(t);if(!o)throw Error('Field "'+t+'" not found.');o.setValue(e)}setPreviousStatement(e,t){if(e)t===void 0&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(pe.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)t===void 0&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(pe.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)t===void 0&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(pe.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(Re(new(Ce(Pt))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type===xe.DUMMY&&this.inputList[e].type===xe.DUMMY)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type===xe.VALUE&&this.inputList[e].type===xe.DUMMY)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(e){if(this.isEnabled()!==e){const t=this.disabled;this.disabled=!e,Re(new(Ce(Pt))(this,"disabled",null,t,!e))}}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(Re(new(Ce(Pt))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){function o(te){let Ge=te.getCheck();return!Ge&&te.targetConnection&&(Ge=te.targetConnection.getCheck()),!!Ge&&(Ge.indexOf("Boolean")!==-1||Ge.indexOf("Number")!==-1)}function n(){let te,Ge;T&&T.getType()===((te=S)==null?void 0:te.getType())&&T.getLocation()===((Ge=S)==null?void 0:Ge.getLocation())&&(T=null)}var a=[];t=t||"?";const p=W.NAVIGATE_ALL_FIELDS;W.NAVIGATE_ALL_FIELDS=!0;let T=W.createBlockNode(this);const S=T;for(;T;){switch(T.getType()){case W.types.INPUT:var P=T.getLocation();T.in()?o(P)&&a.push("("):a.push(t);break;case W.types.FIELD:P=T.getLocation(),P.name!==Jr&&a.push(P.getText())}if(P=T,T=P.in()||P.next(),!T){for(T=P.out(),n();T&&!T.next();)T=T.out(),n(),T&&T.getType()===W.types.INPUT&&o(T.getLocation())&&a.push(")");T&&(T=T.next())}}for(W.NAVIGATE_ALL_FIELDS=p,t=2;t<a.length;t++)a[t-2]==="("&&a[t]===")"&&(a[t-2]=a[t-1],a.splice(t-1,2));return a=a.reduce(function(te,Ge){return te+(te.substr(-1)==="("||Ge===")"?"":" ")+Ge},""),a=a.trim()||"???",e&&a.length>e&&(a=a.substring(0,e-3)+"..."),a}appendValueInput(e){return this.appendInput_(xe.VALUE,e)}appendStatementInput(e){return this.appendInput_(xe.STATEMENT,e)}appendDummyInput(e){return this.appendInput_(xe.DUMMY,e||"")}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,t):this.jsonInitColour_(e,t);for(var o=0;e["message"+o]!==void 0;)this.interpolate_(e["message"+o],e["args"+o]||[],e["lastDummyAlign"+o],t),o++;if(e.inputsInline!==void 0&&this.setInputsInline(e.inputsInline),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(o=$t(e.tooltip),this.setTooltip(o)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(o=$t(e.helpUrl),this.setHelpUrl(o)),typeof e.extensions=="string"&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&ku(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)ku(e[t],this,!1)}jsonInitColour_(e,t){if("colour"in e)if(e.colour===void 0)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle_(e,t){e=e.style;try{this.setStyle(e)}catch{console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(t!==void 0&&typeof t!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const o in e)this[o]!==void 0&&t.push(o);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate_(e,t,o,n){e=Eu(e),this.validateTokens_(e,t.length),t=this.interpolateArguments_(e,t,o),o=[];for(let a=0,p;p=t[a];a++)if(this.isInputKeyword_(p.type)){if(e=this.inputFromJson_(p,n)){for(let T=0,S;S=o[T];T++)e.appendField(S[0],S[1]);o.length=0}}else(e=this.fieldFromJson_(p))&&o.push([e,p.name])}validateTokens_(e,t){const o=[];let n=0;for(let a=0;a<e.length;a++){const p=e[a];if(typeof p=="number"){if(1>p||p>t)throw Error('Block "'+this.type+'": Message index %'+p+" out of range.");if(o[p])throw Error('Block "'+this.type+'": Message index %'+p+" duplicated.");o[p]=!0,n++}}if(n!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments_(e,t,o){const n=[];for(let a=0;a<e.length;a++){let p=e[a];typeof p=="number"&&(p=t[p-1]),!(typeof p=="string"&&(p=this.stringToFieldJson_(p),!p))&&n.push(p)}return(e=n.length)&&!this.isInputKeyword_(n[e-1].type)&&(e={type:"input_dummy"},o&&(e.align=o),n.push(e)),n}fieldFromJson_(e){const t=yu(e);return!t&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):t}inputFromJson_(e,t){var o={LEFT:i.Align$$module$build$src$core$input.LEFT,RIGHT:i.Align$$module$build$src$core$input.RIGHT,CENTRE:i.Align$$module$build$src$core$input.CENTRE,CENTER:i.Align$$module$build$src$core$input.CENTRE};let n=null;switch(e.type){case"input_value":n=this.appendValueInput(e.name);break;case"input_statement":n=this.appendStatementInput(e.name);break;case"input_dummy":n=this.appendDummyInput(e.name)}return n?(e.check&&n.setCheck(e.check),e.align&&(o=o[e.align.toUpperCase()],o===void 0?console.warn(t+"Illegal align value: ",e.align):n.setAlign(o)),n):null}isInputKeyword_(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"}stringToFieldJson_(e){return(e=e.trim())?{type:"field_label",text:e}:null}appendInput_(e,t){let o=null;return(e===xe.VALUE||e===xe.STATEMENT)&&(o=this.makeConnection_(e)),e===xe.STATEMENT&&this.statementInputCount++,e=new Bn(e,t,this,o),this.inputList.push(e),e}moveInputBefore(e,t){if(e!==t){var o=-1,n=t?-1:this.inputList.length;for(let a=0,p;p=this.inputList[a];a++)if(p.name===e){if(o=a,n!==-1)break}else if(t&&p.name===t&&(n=a,o!==-1))break;if(o===-1)throw Error('Named input "'+e+'" not found.');if(n===-1)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(o,n)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const o=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,o)}removeInput(e,t){for(let o=0,n;n=this.inputList[o];o++)if(n.name===e)return n.type===xe.STATEMENT&&this.statementInputCount--,n.dispose(),this.inputList.splice(o,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t=0,o;o=this.inputList[t];t++)if(o.name===e)return o;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){return this.commentModel.text}setCommentText(e){this.commentModel.text!==e&&(Re(new(Ce(Pt))(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)}setWarningText(e,t){}setMutator(e){}getRelativeToSurfaceXY(){return this.xy_}moveBy(e,t){if(this.parentBlock_)throw Error("Block has parent.");const o=new(Ce(is))(this);this.xy_.translate(e,t),o.recordNew(),Re(o)}makeConnection_(e){return new qe(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let o=0,n;n=this.inputList[o];o++)if(n.connection){var t=n.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return(t=this.getNextBlock())?t.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};Pn.COLLAPSED_INPUT_NAME=Kr,Pn.COLLAPSED_FIELD_NAME=Jr;var Wc=null,qr=null,Zr={};Zr.connectionUiEffect=B_,Zr.disconnectUiEffect=F_,Zr.disconnectUiStop=vr,Zr.disposeUiEffect=M_;var Sf=class extends Uc{constructor(e){super(e),this.cachedText="",this.paragraphElement_=this.textarea_=this.foreignObject=this.onInputWrapper=this.onChangeWrapper=this.onWheelWrapper=this.onMouseUpWrapper=null,this.model=e.commentModel;let t;this.model.text=(t=this.model.text)!=null?t:"",this.createIcon()}drawIcon_(e){A(w.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e),A(w.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e),A(w.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)}createEditor(){this.foreignObject=A(w.FOREIGNOBJECT,{x:Me.BORDER_WIDTH,y:Me.BORDER_WIDTH});const e=document.createElementNS(to,"body");e.setAttribute("xmlns",to),e.className="blocklyMinimalBody";const t=this.textarea_=document.createElementNS(to,"textarea");t.className="blocklyCommentTextarea",t.setAttribute("dir",this.getBlock().RTL?"RTL":"LTR");let o;return t.value=(o=this.model.text)!=null?o:"",this.resizeTextarea(),e.appendChild(t),this.foreignObject.appendChild(e),this.onMouseUpWrapper=E(t,"mouseup",this,this.startEdit,!0,!0),this.onWheelWrapper=E(t,"wheel",this,function(n){n.stopPropagation()}),this.onChangeWrapper=E(t,"change",this,function(n){this.cachedText!==this.model.text&&Re(new(Ce(Pt))(this.getBlock(),"comment",null,this.cachedText,this.model.text))}),this.onInputWrapper=E(t,"input",this,function(n){this.model.text=t.value}),setTimeout(t.focus.bind(t),0),this.foreignObject}updateEditable(){super.updateEditable(),this.isVisible()&&(this.disposeBubble(),this.createBubble())}onBubbleResize(){this.isVisible()&&this.bubble_&&(this.model.size=this.bubble_.getBubbleSize(),this.resizeTextarea())}resizeTextarea(){if(this.textarea_&&this.foreignObject){var e=this.model.size,t=2*Me.BORDER_WIDTH,o=e.width-t;e=e.height-t,this.foreignObject.setAttribute("width",`${o}`),this.foreignObject.setAttribute("height",`${e}`),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=e-4+"px"}}setVisible(e){e!==this.isVisible()&&(Re(new(Ce(Fo))(this.getBlock(),e,"comment")),(this.model.pinned=e)?this.createBubble():this.disposeBubble())}createBubble(){this.getBlock().isEditable()?this.createEditableBubble():this.createNonEditableBubble()}createEditableBubble(){const e=this.getBlock();this.bubble_=new Me(e.workspace,this.createEditor(),e.pathObject.svgPath,this.iconXY_,this.model.size.width,this.model.size.height),this.bubble_.setSvgId(e.id),this.bubble_.registerResizeEvent(this.onBubbleResize.bind(this)),this.applyColour()}createNonEditableBubble(){let e;this.paragraphElement_=Me.textToDom((e=this.model.text)!=null?e:""),this.bubble_=Me.createNonEditableBubble(this.paragraphElement_,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.onMouseUpWrapper&&(y(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onWheelWrapper&&(y(this.onWheelWrapper),this.onWheelWrapper=null),this.onChangeWrapper&&(y(this.onChangeWrapper),this.onChangeWrapper=null),this.onInputWrapper&&(y(this.onInputWrapper),this.onInputWrapper=null),this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement_=this.foreignObject=this.textarea_=null}startEdit(e){let t;(t=this.bubble_)!=null&&t.promote()&&this.textarea_.focus(),this.cachedText=this.model.text}getBubbleSize(){return this.model.size}setBubbleSize(e,t){this.bubble_?this.bubble_.setBubbleSize(e,t):(this.model.size.width=e,this.model.size.height=t)}updateText(){if(this.textarea_){let e;this.textarea_.value=(e=this.model.text)!=null?e:""}else this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model.text)}dispose(){this.getBlock().comment=null,super.dispose()}};qs(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Vo=null,yh={duplicateInternal:XI,copyInternal:jI},Qr={};Qr.TEST_ONLY=yh,Qr.copy=Ir,Qr.duplicate=$c,Qr.paste=Nu;var el,Sh,tl;el=null,Sh={},tl=null,i.module$build$src$core$contextmenu={},i.module$build$src$core$contextmenu.callbackFactory=qI,i.module$build$src$core$contextmenu.commentDeleteOption=W_,i.module$build$src$core$contextmenu.commentDuplicateOption=j_,i.module$build$src$core$contextmenu.dispose=V_,i.module$build$src$core$contextmenu.getCurrentBlock=U_,i.module$build$src$core$contextmenu.hide=bc,i.module$build$src$core$contextmenu.setCurrentBlock=H_,i.module$build$src$core$contextmenu.show=Tc,i.module$build$src$core$contextmenu.workspaceCommentOption=ZI;var Ze=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(e){if(this.registry_.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_.set(e.id,e)}unregister(e){if(!this.registry_.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registry_.delete(e)}getItem(e){let t;return(t=this.registry_.get(e))!=null?t:null}getContextMenuOptions(e,t){const o=[];for(const a of this.registry_.values())if(e===a.scopeType){var n=a.preconditionFn(t);n!=="hidden"&&(n={text:typeof a.displayText=="function"?a.displayText(t):a.displayText,enabled:n==="enabled",callback:a.callback,scope:t,weight:a.weight},o.push(n))}return o.sort(function(a,p){return a.weight-p.weight}),o}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",e.registry=new e})(Ze||(Ze={})),Ze.ScopeType;var Rf=30,Cf=!0,Ui=[];Ui[pe.INPUT_VALUE]=pe.OUTPUT_VALUE,Ui[pe.OUTPUT_VALUE]=pe.INPUT_VALUE,Ui[pe.NEXT_STATEMENT]=pe.PREVIOUS_STATEMENT,Ui[pe.PREVIOUS_STATEMENT]=pe.NEXT_STATEMENT;var Rh="RENAME_VARIABLE_ID",Ch="DELETE_VARIABLE_ID",kf=class{constructor(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}setDrawer(e){this.drawer_=e}getDrawer(){return this.drawer_}getCurNode(){return this.curNode_}setCurNode(e){const t=this.curNode_;this.curNode_=e,this.drawer_&&this.drawer_.draw(t,this.curNode_)}draw(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)}hide(){this.drawer_&&this.drawer_.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},kh=class extends kf{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===W.types.NEXT||e.getType()===W.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;(e.getType()===W.types.PREVIOUS||e.getType()===W.types.OUTPUT)&&(e=e.next());let t,o;return(e=(o=(t=e)==null?void 0:t.in())!=null?o:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===W.types.NEXT||e.getType()===W.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===W.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};We(se.CURSOR,Po,kh);var sl=class extends kh{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,t){if(!e)return null;const o=e.in()||e.next();return t(o)?o:o?this.getNextNode_(o,t):(e=this.findSiblingOrParent_(e.out()),t(e)?e:e?this.getNextNode_(e,t):null)}getPreviousNode_(e,t){if(!e)return null;let o=e.prev();return o=o?this.getRightMostChild_(o):e.out(),t(o)?o:o?this.getPreviousNode_(o,t):null}validNode_(e){let t=!1;return e=e&&e.getType(),(e===W.types.OUTPUT||e===W.types.INPUT||e===W.types.FIELD||e===W.types.NEXT||e===W.types.PREVIOUS||e===W.types.WORKSPACE)&&(t=!0),t}findSiblingOrParent_(e){if(!e)return null;const t=e.next();return t||this.findSiblingOrParent_(e.out())}getRightMostChild_(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild_(e)}};sl.registrationName="basicCursor",We(se.CURSOR,sl.registrationName,sl);var Of=class extends sl{validNode_(e){let t=!1;const o=e&&e.getType();return e&&(e=e.getLocation(),o===W.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(t=!0)),t}},Oh=10,ns=class extends qe{constructor(e,t){super(e,t),this.targetConnection=this.highlightPath=null,this.db_=e.workspace.connectionDBList[t],this.dbOpposite_=e.workspace.connectionDBList[Ui[t]],this.offsetInBlock_=new ae(0,0),this.trackedState_=ns.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState_===ns.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e){if(!this.sourceBlock_.workspace.isDragging()){var t=this.sourceBlock_.getRootBlock();if(!t.isInFlyout){var o=!1;if(!t.isMovable()){if(t=e.getSourceBlock().getRootBlock(),!t.isMovable())return;e=this,o=!0}var n=J()==t;n||t.addSelect();var a=e.x+i.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Oh)-this.x,p=e.y+i.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Oh)-this.y;o&&(p=-p),t.RTL&&(a=e.x-i.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*Oh)-this.x),t.moveBy(a,p),n||t.removeSelect()}}}moveTo(e,t){this.trackedState_===ns.TrackedState.WILL_TRACK?(this.db_.addConnection(this,t),this.trackedState_=ns.TrackedState.TRACKED):this.trackedState_===ns.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,t)),this.x=e,this.y=t}moveBy(e,t){this.moveTo(this.x+e,this.y+t)}moveToOffset(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)}setOffsetInBlock(e,t){this.offsetInBlock_.x=e,this.offsetInBlock_.y=t}getOffsetInBlock(){return this.offsetInBlock_}tighten(){const e=this.targetConnection.x-this.x,t=this.targetConnection.y-this.y;if(e!==0||t!==0){const n=this.targetBlock();var o=n.getSvgRoot();if(!o)throw Error("block is not rendered.");o=Zs(o),n.getSvgRoot().setAttribute("transform","translate("+(o.x-e)+","+(o.y-t)+")"),n.moveConnections(-e,-t)}}closest(e,t){return this.dbOpposite_.searchForClosest(this,e,t)}highlight(){if(!this.highlightPath){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),t=e.shapeFor(this);this.type===pe.INPUT_VALUE||this.type===pe.OUTPUT_VALUE?(e=e.TAB_OFFSET_FROM_TOP,t=ht(0,-e)+ge("v",e)+t.pathDown+ge("v",e)):(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS,t=ht(-e,0)+ge("h",e)+t.pathLeft+ge("h",e)),e=this.sourceBlock_.getRelativeToSurfaceXY(),this.highlightPath=A(w.PATH,{class:"blocklyHighlightedConnectionPath",d:t,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())}}unhighlight(){this.highlightPath&&(be(this.highlightPath),this.highlightPath=null)}setTracking(e){e&&this.trackedState_===ns.TrackedState.TRACKED||!e&&this.trackedState_===ns.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=ns.TrackedState.TRACKED):(this.trackedState_===ns.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=ns.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const o=this.targetBlock().getDescendants(!1);for(let n=0;n<o.length;n++){var e=o[n],t=e.getConnections_(!0);for(let a=0;a<t.length;a++)t[a].setTracking(!1);for(e=e.getIcons(),t=0;t<e.length;t++)e[t].setVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==pe.INPUT_VALUE&&this.type!==pe.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let o;t.isCollapsed()?(o=[],t.outputConnection&&o.push(t.outputConnection),t.nextConnection&&o.push(t.nextConnection),t.previousConnection&&o.push(t.previousConnection)):o=t.getConnections_(!0);for(let n=0;n<o.length;n++)e.push(...o[n].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if(Js()){const o=ut();setTimeout(function(){t.isDisposed()||t.getParent()||(ve(o),this.bumpAwayFrom(e),ve(!1))}.bind(this),i.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal_(e,t){super.disconnectInternal_(e,t),e.rendered&&e.render(),t.rendered&&(t.updateDisabled(),t.render(),t.getSvgRoot().style.display="block")}respawnShadow_(){super.respawnShadow_();var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),e=this.getSourceBlock(),e.rendered&&e.render())}neighbours(e){return this.dbOpposite_.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock();const o=t.rendered,n=e.rendered;o&&t.updateDisabled(),n&&e.updateDisabled(),o&&n&&(this.type===pe.NEXT_STATEMENT||this.type===pe.PREVIOUS_STATEMENT?e.render():t.render()),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(ns||(ns={})),ns.TrackedState;var wf=class extends Uc{constructor(e){super(e),this.paragraphElement=null,this.collapseHidden=!1,this.createIcon(),this.text=Object.create(null)}drawIcon_(e){A(w.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),A(w.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),A(w.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)}setVisible(e){e!==this.isVisible()&&(Re(new(Ce(Fo))(this.getBlock(),e,"warning")),e?this.createBubble():this.disposeBubble())}createBubble(){this.paragraphElement=Me.textToDom(this.getText()),this.bubble_=Me.createNonEditableBubble(this.paragraphElement,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement=null}setText(e,t){this.text[t]!==e&&(e?this.text[t]=e:delete this.text[t],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))}getText(){const e=[];for(const t in this.text)e.push(this.text[t]);return e.join(`
`)}dispose(){this.getBlock().warning=null,super.dispose()}},Fs=class extends Pn{constructor(e,t,o){super(e,t,o),this.renderingDebugger=null,this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.commentIcon_=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.decompose=this.decompose,this.compose=this.compose,this.saveConnections=this.saveConnections,this.customContextMenu=this.customContextMenu,this.svgGroup_=A(w.G,{}),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.useDragSurface_=!!e.getBlockDragSurface(),e=this.pathObject.svgPath,e.tooltip=this,ac(e),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let t=0,o;o=this.inputList[t];t++)o.init();var e=this.getIcons();for(let t=0;t<e.length;t++)e[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),e=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!e||E(e,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,e.parentNode||this.workspace.getCanvas().appendChild(e)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(J()!==this){var e=null;if(J()){e=J().id,At();try{J().unselect()}finally{Lt()}}e=new(Ce(li))(e,this.id,this.workspace.id),Re(e),ue(this),this.addSelect()}}unselect(){if(J()===this){var e=new(Ce(li))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,Re(e),ue(null),this.removeSelect()}}getIcons(){const e=[];return this.mutator&&e.push(this.mutator),this.commentIcon_&&e.push(this.commentIcon_),this.warning&&e.push(this.warning),e}setParent(e){const t=this.parentBlock_;if(e!==t){vs(),super.setParent(e),Is();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var n=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(o),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-n.x,e.y-n.y)):t&&(this.workspace.getCanvas().appendChild(o),this.translate(n.x,n.y)),this.applyColour()}}}getRelativeToSurfaceXY(){let e=0,t=0;const o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let n=this.getSvgRoot();if(n)do{var a=Zs(n);e+=a.x,t+=a.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===n&&(a=this.workspace.getBlockDragSurface().getSurfaceTranslation(),e+=a.x,t+=a.y),n=n.parentNode}while(n&&n!==this.workspace.getCanvas()&&n!==o);return new ae(e,t)}moveBy(e,t){if(this.parentBlock_)throw Error("Block has parent.");const o=xt();let n=null;o&&(n=new(Ce(is))(this));const a=this.getRelativeToSurfaceXY();this.translate(a.x+e,a.y+t),this.moveConnections(e,t),o&&n&&(n.recordNew(),Re(n)),this.workspace.resizeContents()}translate(e,t){this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")}moveToDragSurface(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),(e=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(e)}}moveTo(e){const t=this.getRelativeToSurfaceXY();this.moveBy(e.x-t.x,e.y-t.y)}moveOffDragSurface(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))}moveDuringDrag(e){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var t=e.getSpacing(),o=t/2,n=this.getRelativeToSurfaceXY();e=Math.round(Math.round((n.x-o)/t)*t+o-n.x),t=Math.round(Math.round((n.y-o)/t)*t+o-n.y),(e||t)&&this.moveBy(e,t)}}}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY(),t=this.getHeightWidth();let o,n;return this.RTL?(o=e.x-t.width,n=e.x):(o=e.x,n=e.x+t.width),new Tt(e.y,e.y+t.height,o,n)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,t;t=this.inputList[e];e++)t.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),e?this.rendered&&this.render():this.updateCollapsed_())}updateCollapsed_(){var e=this.isCollapsed();const t=Kr,o=Jr;for(let a=0,p;p=this.inputList[a];a++)p.name!==t&&p.setVisible(!e);if(e){e=this.getIcons();for(let a=0,p;p=e[a];a++)p.setVisible(!1);e=this.toString(Rf);var n=this.getField(o);n?n.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new i.FieldLabel$$module$build$src$core$field_label(e),o)}else this.updateDisabled(),this.removeInput(t)}tab(e,t){const o=new Of;o.setCurNode(W.createFieldNode(e)),e=o.getCurNode(),t?o.next():o.prev(),(t=o.getCurNode())&&t!==e&&(t.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(t))}onMouseDown_(e){const t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=Ze.registry.getContextMenuOptions(Ze.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const t=this.generateContextMenu();t&&t.length&&(Tc(e,t,this.RTL),H_(this))}moveConnections(e,t){if(this.rendered){for(var o=this.getConnections_(!1),n=0;n<o.length;n++)o[n].moveBy(e,t);for(o=this.getIcons(),n=0;n<o.length;n++)o[n].computeIconLocation();for(o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].moveConnections(e,t)}}setDragging(e){if(e){var t=this.getSvgRoot();t.translate_="",t.skew_="",Ni.push(...this.getConnections_(!0)),oe(this.svgGroup_,"blocklyDragging")}else Ni.length=0,Pe(this.svgGroup_,"blocklyDragging");for(t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(e,t){if(!this.isDeadOrDying()){m_(),uc(this.pathObject.svgPath),vs();var o=this.workspace;J()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),U_()===this&&bc(),t&&this.rendered&&(this.unplug(e),M_(this)),this.rendered=!1;for(var n of this.warningTextDb.values())clearTimeout(n);for(this.warningTextDb.clear(),t=this.getIcons(),n=0;n<t.length;n++)t[n].dispose();J()===this&&ue(null),super.dispose(!!e),be(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,Is()}}checkAndDelete(){this.workspace.isFlyout||(ve(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),ve(!1))}toCopyData(){return this.isInsertionMarker_?null:{saveInfo:Mo(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:Ae(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let t=0;t<e.length;t++)e[t].applyColour();for(let t=0,o;o=this.inputList[t];t++)for(let n=0,a;a=o.fieldRow[n];n++)a.applyColour()}updateDisabled(){const e=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(let t=0,o;o=e[t];t++)o.rendered&&o.updateDisabled()}getCommentIcon(){return this.commentIcon_}setCommentText(e){this.commentModel.text!==e&&(super.setCommentText(e),e=e!==null,!!this.commentIcon_===e?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new Sf(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))}setWarningText(e,t){const o=t||"";if(o)this.warningTextDb.has(o)&&(clearTimeout(this.warningTextDb.get(o)),this.warningTextDb.delete(o));else{for(var n of this.warningTextDb.values())clearTimeout(n);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(o,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(o),this.setWarningText(e,o))},100));else{if(this.isInFlyout&&(e=null),t=!1,typeof e=="string"){n=this.getSurroundParent();let a=null;for(;n;)n.isCollapsed()&&(a=n),n=n.getSurroundParent();a&&a.setWarningText(Ne.COLLAPSED_WARNINGS_WARNING,Fs.COLLAPSED_WARNING_ID),this.warning||(this.warning=new wf(this),t=!0),this.warning.setText(e,o)}else this.warning&&!o?(this.warning.dispose(),t=!0):this.warning&&(t=this.warning.getText(),this.warning.setText("",o),(n=this.warning.getText())||this.warning.dispose(),t=t!==n);t&&this.rendered&&(this.render(),this.bumpNeighbours())}}setMutator(e){this.mutator&&this.mutator!==e&&this.mutator.dispose(),e&&(e.setBlock(this),this.mutator=e,e.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())}setEnabled(e){this.isEnabled()!==e&&(super.setEnabled(e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(e){this.rendered&&this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,t)this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour();else throw Error("Invalid style name: "+e)}bringToFront(){let e=this;do{const t=e.getSvgRoot(),o=t.parentNode,n=o.childNodes;n[n.length-1]!==t&&o.appendChild(t),e=e.getParent()}while(e)}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.rendered&&(this.render(),this.bumpNeighbours())}setNextStatement(e,t){super.setNextStatement(e,t),this.rendered&&(this.render(),this.bumpNeighbours())}setOutput(e,t){super.setOutput(e,t),this.rendered&&(this.render(),this.bumpNeighbours())}setInputsInline(e){super.setInputsInline(e),this.rendered&&(this.render(),this.bumpNeighbours())}removeInput(e,t){return e=super.removeInput(e,t),this.rendered&&(this.render(),this.bumpNeighbours()),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.rendered&&(this.render(),this.bumpNeighbours())}appendInput_(e,t){return e=super.appendInput_(e,t),this.rendered&&(this.render(),this.bumpNeighbours()),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var o=this.inputList[t].connection;o&&(o.setTracking(e),(o=o.targetBlock())&&o.setConnectionTracking(e))}}getConnections_(e){const t=[];if((e||this.rendered)&&(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_))for(let o=0,n;n=this.inputList[o];o++)n.connection&&t.push(n.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new ns(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){this.getRootBlock().bumpNeighboursInternal()}bumpNeighboursInternal(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let o;(o=t.targetBlock())==null||o.bumpNeighboursInternal()}for(const o of t.neighbours(i.config$$module$build$src$core$config.snapRadius))o.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&o.isConnected()||(t.isSuperior()?o.bumpAwayFrom(t):t.bumpAwayFrom(o)))}}scheduleSnapAndBump(){const e=ut();setTimeout(()=>{ve(e),this.snapToGrid(),ve(!1)},i.config$$module$build$src$core$config.bumpDelay/2),setTimeout(()=>{ve(e),this.bumpNeighbours(),ve(!1)},i.config$$module$build$src$core$config.bumpDelay)}positionNearConnection(e,t){e.type!==pe.NEXT_STATEMENT&&e.type!==pe.INPUT_VALUE||this.moveBy(t.x-e.x,t.y-e.y)}getFirstStatementConnection(){return super.getFirstStatementConnection()}getChildren(e){return super.getChildren(e)}render(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,vs(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),e!==!1){const t=this.getParent();t?t.render(!0):this.workspace.resizeContents()}Is(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Pr.LOCAL_MARKER).draw()}updateConnectionLocations_(){const e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(let t=0;t<this.inputList.length;t++){const o=this.inputList[t].connection;o&&(o.moveToOffset(e),o.isConnected()&&o.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten())}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,t=this.width;var o=this.getNextBlock();if(o){o=o.getHeightWidth();const n=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=o.height-n,t=Math.max(t,o.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}};Fs.INLINE=-1,Fs.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Af=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},jc=class extends Af{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e,t){return e instanceof Fs?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e&&!t)):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},Wo;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(Wo||(Wo={}));var Fn;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(Fn||(Fn={}));var hi;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(hi||(hi={}));var Hi={};Hi.bumpDirection=hi,Hi.bumpPositionRect=xu,Hi.getCornerOppositeToolbox=Mu,Hi.getStartPositionRect=Du,Hi.horizontalPosition=Fn,Hi.verticalPosition=Wo;var rs={width:96,height:124,url:"sprites.png"},Lf=class extends jc{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents_=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness_=0,this.lidTask_=this.svgLid_=this.svgGroup_=null,this.top_=this.left_=this.lidOpen_=0,this.initialized_=!1,0>=this.workspace.options.maxTrashcanContents||(e=new co({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===De.TOP?De.BOTTOM:De.TOP,this.flyout=new(xs(se.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===De.RIGHT?De.LEFT:De.RIGHT,this.flyout=new(xs(se.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete_.bind(this)))}createDom(){this.svgGroup_=A(w.G,{class:"blocklyTrash"});let e;const t=String(Math.random()).substring(2);e=A(w.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_),A(w.RECT,{width:Gn,height:Xc,y:Un},e);const o=A(w.IMAGE,{width:rs.width,x:-wh,height:rs.height,y:-Ah,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return o.setAttributeNS(fs,"xlink:href",this.workspace.options.pathToMedia+rs.url),e=A(w.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),A(w.RECT,{width:Gn,height:Un},e),this.svgLid_=A(w.IMAGE,{width:rs.width,x:-wh,height:rs.height,y:-Ah,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(fs,"xlink:href",this.workspace.options.pathToMedia+rs.url),I(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),I(this.svgGroup_,"mouseup",this,this.click),I(o,"mouseover",this,this.mouseOver_),I(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_}init(){0<this.workspace.options.maxTrashcanContents&&(St(this.flyout.createDom(w.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ut.Capability.AUTOHIDEABLE,Ut.Capability.DELETE_AREA,Ut.Capability.DRAG_TARGET,Ut.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(be(this.svgGroup_),this.svgGroup_=null),this.svgLid_=null,this.lidTask_&&clearTimeout(this.lidTask_)}hasContents_(){return!!this.contents_.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents_.map(function(o){return JSON.parse(o)}),t;(t=this.flyout)==null||t.show(e),this.fireUiEvent_(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide(),this.fireUiEvent_(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())}position(e,t){if(this.initialized_){var o=Mu(this.workspace,e);e=Du(o,new Gt(Gn,Xc+Un),Jy,Nf,e,this.workspace),t=xu(e,Nf,o.vertical===Wo.TOP?hi.DOWN:hi.UP,t),this.top_=t.top,this.left_=t.left;var n;(n=this.svgGroup_)==null||n.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}getBoundingRectangle(){return new Tt(this.top_,this.top_+Xc+Un,this.left_,this.left_+Gn)}getClientRect(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect();const t=e.top+Ah-Yc;return e=e.left+wh-Yc,new Tt(t,t+Un+Xc+2*Yc,e,e+Gn+2*Yc)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask_&&clearTimeout(this.lidTask_),this.isLidOpen=e,this.animateLid_())}animateLid_(){const e=Qy;var t=1/(e+1);this.lidOpen_+=this.isLidOpen?t:-t,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*Mf),t=Df+this.lidOpen_*(eS-Df),this.svgGroup_&&(this.svgGroup_.style.opacity=t.toString()),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),Zy/e))}setLidAngle_(e){const t=this.workspace.toolboxPosition===De.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let o;(o=this.svgLid_)==null||o.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:Gn-4)+","+(Un-2)+")")}setMinOpenness_(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*Mf)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents_()&&this.openFlyout()}fireUiEvent_(e){e=new(Ce(Ar))(e,this.workspace.id),Re(e)}blockMouseDownWhenOpenable_(e){!this.contentsIsOpen()&&this.hasContents_()&&e.stopPropagation()}mouseOver_(){this.hasContents_()&&this.setLidOpen(!0)}mouseOut_(){this.setLidOpen(!1)}onDelete_(e){if(!(0>=this.workspace.options.maxTrashcanContents||e.type!==Io||e.type!==Io||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson_(e.oldJson)),this.contents_.indexOf(e)===-1){for(this.contents_.unshift(e);this.contents_.length>this.workspace.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(qy)}}}cleanBlockJson_(e){function t(o){if(o){if(delete o.id,delete o.x,delete o.y,delete o.enabled,o.icons&&o.icons.comment){var n=o.icons.comment;delete n.height,delete n.width,delete n.pinned}n=o.inputs;for(var a in n){var p=n[a];const T=p.block;p=p.shadow,T&&t(T),p&&t(p)}o.next&&(a=o.next,o=a.block,a=a.shadow,o&&t(o),a&&t(a))}}return e=JSON.parse(JSON.stringify(e)),t(e),Object.assign({},{kind:"BLOCK"},e)}},Gn=47,Xc=44,Un=16,Nf=20,Jy=20,Yc=10,wh=0,Ah=32,qy=.1,Zy=80,Qy=4,Df=.4,eS=.8,Mf=45,xf=class extends io{constructor(e,t,o){super(o),this.type=Lr,this.oldItem=e!=null?e:void 0,this.newItem=t!=null?t:void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}fromJson(e){super.fromJson(e),this.oldItem=e.oldItem,this.newItem=e.newItem}};We(se.EVENT,Lr,xf);var Lh=class{constructor(e,t,o){this.id_=e.toolboxitemid||mr(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},ao=class extends Lh{constructor(e,t,o){super(e,t,o),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const o=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(o)}}parseCategoryDef_(e){this.name_="name"in e?$t(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),bo(this.htmlDiv_,$s.TREEITEM),ft(this.htmlDiv_,ct.SELECTED,!1),ft(this.htmlDiv_,ct.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),bo(this.iconDom_,$s.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&ft(this.htmlDiv_,ct.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&oe(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&oe(e,t),t=`${ao.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&oe(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&oe(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&oe(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=ao.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle_(t);if(e)return this.parseColour_(e)}return""}getColourfromStyle_(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour_(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(e){if(e=$t(e),e==null||e==="")return"";var t=Number(e);return isNaN(t)?(t=Ai(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):Tu(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&Ft(e,t),(t=this.cssConfig_.openicon)&&oe(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&Ft(e,t),(t=this.cssConfig_.closedicon)&&oe(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const o=this.parseColour_(ao.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||o,t&&oe(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&Pe(this.rowDiv_,t);ft(this.htmlDiv_,ct.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:_c(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){be(this.htmlDiv_)}};ao.registrationName="category",ao.nestedPadding=19,ao.borderWidth=8,ao.defaultBackgroundColour="#57e",qs(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),We(se.TOOLBOX_ITEM,ao.registrationName,ao);var ol=class extends Lh{constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&oe(e,t),this.htmlDiv_=e}getDiv(){return this.htmlDiv_}dispose(){be(this.htmlDiv_)}};ol.registrationName="sep",qs(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),We(se.TOOLBOX_ITEM,ol.registrationName,ol);var Hn=class extends ao{constructor(e,t,o){super(e,t,o),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){const t=e.contents;let o=!0;if(e.custom)this.flyoutItems_=e.custom;else if(t)for(e=0;e<t.length;e++){const n=t[e];!Yp(se.TOOLBOX_ITEM,n.kind)||n.kind.toLowerCase()===ol.registrationName&&o?(this.flyoutItems_.push(n),o=!0):(this.createToolboxItem_(n),o=!1)}}createToolboxItem_(e){let t=e.kind;t.toUpperCase()==="CATEGORY"&&Ru(e)&&(t=Hn.registrationName),e=new(pn(se.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),bo(this.subcategoriesDiv_,$s.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&oe(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");var o=this.cssConfig_.contents;for(o&&oe(t,o),o=0;o<e.length;o++){const n=e[o];n.init();const a=n.getDiv();if(t.appendChild(a),n.getClickTarget){let p;(p=n.getClickTarget())==null||p.setAttribute("id",n.getId())}}return t}setExpanded(e){this.expanded_!==e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),ft(this.htmlDiv_,ct.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let o=0;o<t.length;o++)t[o].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Hn.registrationName="collapsibleCategory",We(se.TOOLBOX_ITEM,Hn.registrationName,Hn);var Bf=class extends jc{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout_=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),St(this.flyout_.createDom("svg"),t),this.setVisible(!0),this.flyout_.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ut.Capability.AUTOHIDEABLE,Ut.Capability.DELETE_AREA,Ut.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,bo(this.contentsDiv_,$s.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),oe(e,"blocklyToolboxDiv"),oe(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return oe(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=E(e,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(e),t=E(t,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(t)}onClick_(e){if(B(e)||e.target===this.HtmlDiv)V().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t),t.isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),V().hideChaff(!0)}h()}onKeyDown_(e){let t=!1;switch(e.keyCode){case me.DOWN:t=this.selectNext_();break;case me.UP:t=this.selectPrevious_();break;case me.LEFT:t=this.selectParent_();break;case me.RIGHT:t=this.selectChild_();break;case me.ENTER:case me.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}if(!t&&this.selectedItem_){const o=this.selectedItem_;o.onKeyDown&&(t=o.onKeyDown(e))}t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=new co({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?xs(se.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):xs(se.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e;for(let t=0;t<this.contents_.length;t++){const o=this.contents_[t];o&&o.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let o=0;o<e.length;o++)this.createToolboxItem_(e[o],t);this.contentsDiv_.appendChild(t)}createToolboxItem_(e,t){var o=e.kind;o.toUpperCase()==="CATEGORY"&&Ru(e)&&(o=Hn.registrationName),(o=pn(se.TOOLBOX_ITEM,o.toLowerCase()))&&(e=new o(e,this),e.init(),this.addToolboxItem_(e),(o=e.getDiv())&&t.appendChild(o),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&oe(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&Pe(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,o=t+e.height,n=e.left;return e=n+e.width,this.toolboxPosition===De.TOP?new Tt(-1e7,o,-1e7,1e7):this.toolboxPosition===De.BOTTOM?new Tt(t,1e7,-1e7,1e7):this.toolboxPosition===De.LEFT?new Tt(-1e7,1e7,-1e7,e):new Tt(-1e7,1e7,n,1e7)}wouldDelete(e,t){return e instanceof Fs?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout_?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===De.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===De.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const e=this.workspace_,t=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===De.LEFT?e.scrollX+t.width:e.scrollX,this.toolboxPosition===De.TOP?e.scrollY+t.height:e.scrollY),$e(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const t=this.contents_[e];t.refreshTheme&&t.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!e.isSelectable()||(this.shouldDeselectItem_(t,e)&&t!==null&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&e!==null&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent_(t,e))}shouldDeselectItem_(e,t){return e!==null&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return t!==null&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),ft(this.contentsDiv_,ct.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),ft(this.contentsDiv_,ct.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e],e.isSelectable()&&this.setSelectedItem(e))}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout_.show(t.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(e,t){const o=e&&e.getName();let n=t&&t.getName();e===t&&(n=null),e=new(Ce(Lr))(o,n,this.workspace_.id),Re(e)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext_():e.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[++e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[--e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)y(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),be(this.HtmlDiv)}};qs(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),We(se.TOOLBOX,Po,Bf);var tS={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},sS={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},oS=new Gi("zelos",tS,sS),Nh={};Nh.Classic=Hc,Nh.Zelos=oS;var Pf=class extends io{constructor(e,t,o){t=e?e.workspace.id:t,t===null&&(t=void 0),super(t),this.type=ci,this.blockId=e?e.id:void 0,this.targetType=o}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}fromJson(e){super.fromJson(e),this.targetType=e.targetType,this.blockId=e.blockId}},Dh;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(Dh||(Dh={})),We(se.EVENT,ci,Pf);var Ff=class{constructor(e,t){this.bubble=e,this.workspace=t,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY(),this.dragSurface_=t.getBlockDragSurface()}startBubbleDrag(){ut()||ve(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout(!1),this.dragSurface_&&(this.bubble.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.bubble.getSvgRoot())),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(e,t){t=this.pixelsToWorkspaceUnits_(t),t=ae.sum(this.startXY_,t),this.bubble.moveDuringDrag(this.dragSurface_,t),t=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(e),e=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),e!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==t&&(t&&t.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(e){return e&&this.workspace.getComponentManager().hasCapability(e.id,Ut.Capability.DELETE_AREA)?e.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(e,t){this.dragBubble(e,t),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?e=this.startXY_:(e=this.pixelsToWorkspaceUnits_(t),e=ae.sum(this.startXY_,e)),this.bubble.moveTo(e.x,e.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.bubble.dispose()):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace.getBubbleCanvas()),this.bubble.setDragging&&this.bubble.setDragging(!1),this.fireMoveEvent_()),this.workspace.setResizesEnabled(!0),ve(!1)}fireMoveEvent_(){if(this.bubble instanceof Zt){const e=new(Ce(Go))(this.bubble);e.setOldCoordinate(this.startXY_),e.recordNew(),Re(e)}}pixelsToWorkspaceUnits_(e){return e=new ae(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}},Gf=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new ae(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){J()&&J().unselect(),this.workspace.setupDragSurface()}endDrag(e){this.drag(e),this.workspace.resetDragSurface()}drag(e){if(e=ae.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},jo=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY_=new ae(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.hasExceededDragRadius_=!1,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.mostRecentEvent_=e,this.currentDragDeltaXY_=new ae(0,0),this.healStack_=!Cf}dispose(){h(),T_(),this.creatorWorkspace.clearGesture(),this.onMoveWrapper_&&y(this.onMoveWrapper_),this.onUpWrapper_&&y(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose()}updateFromEvent_(e){const t=new ae(e.clientX,e.clientY);this.updateDragDelta_(t)&&(this.updateIsDragging_(),l()),this.mostRecentEvent_=e}updateDragDelta_(e){return this.currentDragDeltaXY_=ae.difference(e,this.mouseDownXY_),this.hasExceededDragRadius_?!1:this.hasExceededDragRadius_=ae.magnitude(this.currentDragDeltaXY_)>(this.flyout_?i.config$$module$build$src$core$config.flyoutDragRadius:i.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout_(){let e;if(!this.targetBlock_||(e=this.flyout_)==null||!e.isBlockCreatable(this.targetBlock_))return!1;if(!this.flyout_.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout_.isScrollable()||this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)?(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),ut()||ve(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0):!1}updateIsDraggingBubble_(){return this.startBubble_?(this.startDraggingBubble_(),!0):!1}updateIsDraggingBlock_(){if(!this.targetBlock_)return!1;if(this.flyout_){if(this.updateIsDraggingFromFlyout_())return this.startDraggingBlock_(),!0}else if(this.targetBlock_.isMovable())return this.startDraggingBlock_(),!0;return!1}updateIsDraggingWorkspace_(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new Gf(this.startWorkspace_),this.workspaceDragger_.startDrag())}updateIsDragging_(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()}startDraggingBlock_(){this.blockDragger_=new(xs(se.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)}startDraggingBubble_(){if(!this.startBubble_)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger_=new Ff(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)}doStart(e){if(F(e))this.cancel();else{if(!this.startWorkspace_)throw Error("Cannot start the gesture because the start workspace is undefined");this.hasStarted_=!0,vr(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,$_(),this.targetBlock_&&this.targetBlock_.select(),B(e)?this.handleRightClick(e):(e.type.toLowerCase()!=="touchstart"&&e.type.toLowerCase()!=="pointerdown"||e.pointerType==="mouse"||c(e,this),this.mouseDownXY_=new ae(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e))}}bindMouseEvents(e){this.onMoveWrapper_=E(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=E(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()}handleMove(e){this.updateFromEvent_(e),this.workspaceDragger_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.bubbleDragger_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),e.preventDefault(),e.stopPropagation()}handleUp(e){this.updateFromEvent_(e),l(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(e,this.currentDragDeltaXY_):this.workspaceDragger_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())}cancel(){this.isEnding_||(l(),this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.workspaceDragger_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())}handleRightClick(e){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(t),this.mostRecentEvent_=e,this.doStart(e)}fireWorkspaceClick_(e){Re(new(Ce(ci))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent_=e}handleBubbleStart(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent_=e}doBubbleClick_(){this.startBubble_ instanceof Zt&&(this.startBubble_.setFocus(),this.startBubble_.select())}doFieldClick_(){if(!this.startField_)throw Error("Cannot do a field click because the start field is undefined");this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()}doBlockClick_(){if(this.flyout_&&this.flyout_.autoClose){if(!this.targetBlock_)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock_.isEnabled()&&(ut()||ve(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const e=new(Ce(ci))(this.startBlock_,this.startWorkspace_.id,"block");Re(e)}this.bringBlockToFront_(),ve(!1)}doWorkspaceClick_(e){e=this.creatorWorkspace,J()&&J().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||e)}bringBlockToFront_(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()}setStartField(e){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=e)}setStartBubble(e){this.startBubble_||(this.startBubble_=e)}setStartBlock(e){this.startBlock_||this.startBubble_||(this.startBlock_=e,e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))}setTargetBlock_(e){e.isShadow()?this.setTargetBlock_(e.getParent()):this.targetBlock_=e}setStartWorkspace_(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout_(e){this.flyout_||(this.flyout_=e)}isBubbleClick_(){return!!this.startBubble_&&!this.hasExceededDragRadius_}isBlockClick_(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()}isFieldClick_(){return(this.startField_?this.startField_.isClickable():!1)&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)}isWorkspaceClick_(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_}isDragging(){return!!this.workspaceDragger_||!!this.blockDragger_||!!this.bubbleDragger_}hasStarted(){return this.hasStarted_}getInsertionMarkers(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]}getCurrentDragger(){let e,t;return(t=(e=this.blockDragger_)!=null?e:this.workspaceDragger_)!=null?t:this.bubbleDragger_}static inProgress(){const e=le();for(let t=0,o;o=e[t];t++)if(o.currentGesture_)return!0;return!1}},st=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),(t=e.keyCodes)&&0<t.length)for(let o=0;o<t.length;o++)this.addKeyMapping(t[o],e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,o){e=String(e);const n=this.keyMap.get(e);if(n&&!o)throw Error(`Shortcut named "${t}" collides with shortcuts "${n}"`);n&&o?n.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,o){const n=this.keyMap.get(e);if(!n)return o||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const a=n.indexOf(t);return-1<a?(n.splice(a,1),n.length===0&&this.keyMap.delete(e),!0):(o||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,o]of this.keyMap)e[t]=o;return e}getRegistry(){const e=Object.create(null);for(const[t,o]of this.shortcuts)e[t]=o;return ii(Object.create(null),e)}onKeyDown(e,t){var o=this.serializeKeyEvent_(t);if(o=this.getShortcutNamesByKeyCode(o),!o)return!1;for(let n=0,a;a=o[n];n++){const p=this.shortcuts.get(a);let T,S;if((T=p)==null||!T.preconditionFn||((S=p)==null?0:S.preconditionFn(e))){let P,te;if(((P=p)==null?0:P.callback)&&((te=p)==null?0:te.callback(e,t,p)))return!0}}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const t=[];for(const[o,n]of this.keyMap)-1<n.indexOf(e)&&t.push(o);return t}serializeKeyEvent_(e){let t="";for(const o in st.modifierKeys)e.getModifierState(o)&&(t!==""&&(t+="+"),t+=o);return t!==""&&e.keyCode?t=t+"+"+e.keyCode:e.keyCode&&(t=e.keyCode.toString()),t}checkModifiers_(e){for(let t=0,o;o=e[t];t++)if(!(o in st.modifierKeys))throw Error(o+" is not a valid modifier key.")}createSerializedKey(e,t){let o="";if(t){this.checkModifiers_(t);for(const n in st.modifierKeys)-1<t.indexOf(st.modifierKeys[n])&&(o!==""&&(o+="+"),o+=n)}return o!==""&&e?o=o+"+"+e:e&&(o=e.toString()),o}};st.registry=new st,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(st||(st={}));var So;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(So||(So={})),Q_();var Ro={};Ro.names=So,Ro.registerCopy=z_,Ro.registerCut=K_,Ro.registerDefaultShortcuts=Q_,Ro.registerDelete=Y_,Ro.registerEscape=X_,Ro.registerPaste=J_,Ro.registerRedo=Z_,Ro.registerUndo=q_;var Uf=class extends io{constructor(e,t){super(t),this.type=Nr,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}fromJson(e){super.fromJson(e),this.themeName=e.themeName}};We(se.EVENT,Nr,Uf);var Hf=class extends io{constructor(e,t,o,n,a){super(n),this.type=Pi,this.viewTop=e,this.viewLeft=t,this.scale=o,this.oldScale=a}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}fromJson(e){super.fromJson(e),this.viewTop=e.viewTop,this.viewLeft=e.viewLeft,this.scale=e.scale,this.oldScale=e.oldScale}};We(se.EVENT,Pi,Hf);var Vn=class{constructor(e){this.connectionChecker=e,this.connections_=[]}addConnection(e,t){t=this.calculateIndexForYPos_(t),this.connections_.splice(t,0,e)}findIndexOfConnection_(e,t){if(!this.connections_.length)return-1;const o=this.calculateIndexForYPos_(t);if(o>=this.connections_.length)return-1;t=e.y;let n=o;for(;0<=n&&this.connections_[n].y===t;){if(this.connections_[n]===e)return n;n--}for(n=o;n<this.connections_.length&&this.connections_[n].y===t;){if(this.connections_[n]===e)return n;n++}return-1}calculateIndexForYPos_(e){if(!this.connections_.length)return 0;let t=0,o=this.connections_.length;for(;t<o;){const n=Math.floor((t+o)/2);if(this.connections_[n].y<e)t=n+1;else if(this.connections_[n].y>e)o=n;else{t=n;break}}return t}removeConnection(e,t){if(e=this.findIndexOfConnection_(e,t),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections_.splice(e,1)}getNeighbours(e,t){function o(te){const Ge=a-n[te].x,ze=p-n[te].y;return Math.sqrt(Ge*Ge+ze*ze)<=t&&P.push(n[te]),ze<t}const n=this.connections_,a=e.x,p=e.y;e=0;let T=n.length-2,S=T;for(;e<S;)n[S].y<p?e=S:T=S,S=Math.floor((e+T)/2);const P=[];if(T=e=S,n.length){for(;0<=e&&o(e);)e--;do T++;while(T<n.length&&o(T))}return P}isInYRange_(e,t,o){return Math.abs(this.connections_[e].y-t)<=o}searchForClosest(e,t,o){if(!this.connections_.length)return{connection:null,radius:t};const n=e.y,a=e.x;e.x=a+o.x,e.y=n+o.y;var p=this.calculateIndexForYPos_(e.y);o=null;let T=t,S,P=p-1;for(;0<=P&&this.isInYRange_(P,e.y,t);)S=this.connections_[P],this.connectionChecker.canConnect(e,S,!0,T)&&(o=S,T=S.distanceFrom(e)),P--;for(;p<this.connections_.length&&this.isInYRange_(p,e.y,t);)S=this.connections_[p],this.connectionChecker.canConnect(e,S,!0,T)&&(o=S,T=S.distanceFrom(e)),p++;return e.x=a,e.y=n,{connection:o,radius:T}}static init(e){const t=[];return t[pe.INPUT_VALUE]=new Vn(e),t[pe.OUTPUT_VALUE]=new Vn(e),t[pe.NEXT_STATEMENT]=new Vn(e),t[pe.PREVIOUS_STATEMENT]=new Vn(e),t}},Mh=class{constructor(e,t){this.pattern=e;let o;this.spacing=(o=t.spacing)!=null?o:0;let n;this.length=(n=t.length)!=null?n:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let a;this.snapToGrid=(a=t.snap)!=null?a:!1}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(e){var t=this.spacing*e||100;this.pattern.setAttribute("width",t.toString()),this.pattern.setAttribute("height",t.toString()),t=Math.floor(this.spacing/2)+.5;let o=t-this.length/2,n=t+this.length/2;t*=e,o*=e,n*=e,this.setLineAttributes(this.line1,e,o,n,t,t),this.setLineAttributes(this.line2,e,t,t,o,n)}setLineAttributes(e,t,o,n,a,p){e&&(e.setAttribute("stroke-width",t.toString()),e.setAttribute("x1",o.toString()),e.setAttribute("y1",a.toString()),e.setAttribute("x2",n.toString()),e.setAttribute("y2",p.toString()))}moveTo(e,t){this.pattern.setAttribute("x",e.toString()),this.pattern.setAttribute("y",t.toString())}static createDom(e,t,o){e=A(w.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},o);let n,a;if(0<((n=t.length)!=null?n:1)&&0<((a=t.spacing)!=null?a:0)){A(w.LINE,{stroke:t.colour},e);let p;(p=t.length)!=null&&p&&A(w.LINE,{stroke:t.colour},e)}else A(w.LINE,{},e);return e}},Gs=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap_=null,this.variablePrefix_=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap_=null}setVariableMap(e){this.variableMap_=e}getNameForUserVariable_(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=cu(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),i.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let o=e;t===i.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable_(e))&&(o=e),e=o.toLowerCase();const n=t===i.NameType$$module$build$src$core$names.VARIABLE||t===i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"";this.db.has(t)||this.db.set(t,new Map);const a=this.db.get(t);return a.has(e)?n+a.get(e):(t=this.getDistinctName(o,t),a.set(e,t.substr(n.length)),t)}getUserNames(e){let t;return(e=(t=this.db.get(e))==null?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName_(e);let o="";for(;this.dbReverse.has(e+o)||this.reservedWords.has(e+o);)o=o?o+1:2;return e+=o,this.dbReverse.add(e),(t===i.NameType$$module$build$src$core$names.VARIABLE||t===i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"")+e}safeName_(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(e[0])!==-1&&(e="my_"+e)):e=Ne.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}};(function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"})(Gs||(Gs={})),i.NameType$$module$build$src$core$names=Gs.NameType,Gs.DEVELOPER_VARIABLE_TYPE=i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,i.module$build$src$core$names={},i.module$build$src$core$names.NameType=i.NameType$$module$build$src$core$names,i.module$build$src$core$names.Names=Gs;var Vf=class extends Map{constructor(e){super(),this.workspace=e}set(e,t){return super.set(e,t),this}delete(e){return e=super.delete(e),ni(this.workspace),e}clear(){super.clear(),ni(this.workspace)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},Wf=class{constructor(e,t,o){this.workspace=e,this.parameters=[],this.returnTypes=null,this.enabled=!0,this.id=o!=null?o:Ks(),this.name=t}setName(e){return this.name=e,ni(this.workspace),this}insertParameter(e,t){return this.parameters.splice(t,0,e),ni(this.workspace),this}deleteParameter(e){return this.parameters.splice(e,1),ni(this.workspace),this}setReturnTypes(e){if(e&&e.length)throw Error("The built-in ProcedureModel does not support typing. You need to implement your own custom ProcedureModel.");return this.returnTypes=e,ni(this.workspace),this}setEnabled(e){return this.enabled=e,ni(this.workspace),this}getId(){return this.id}getName(){return this.name}getParameter(e){return this.parameters[e]}getParameters(){return[...this.parameters]}getReturnTypes(){return this.returnTypes}getEnabled(){return this.enabled}},jf=class{constructor(e,t,o){this.workspace=e,this.id=o!=null?o:Ks();let n;this.variable=(n=this.workspace.getVariable(t))!=null?n:e.createVariable(t)}setName(e){if(e==this.variable.name)return this;let t;return this.variable=(t=this.workspace.getVariable(e))!=null?t:this.workspace.createVariable(e),ni(this.workspace),this}setTypes(e){throw Error("The built-in ParameterModel does not support typing. You need to implement your own custom ParameterModel.")}getName(){return this.variable.name}getTypes(){return[]}getId(){return this.id}getVariableModel(){return this.variable}},zc,xh;zc="PROCEDURE",xh="x",i.module$build$src$core$procedures={},i.module$build$src$core$procedures.CATEGORY_NAME=zc,i.module$build$src$core$procedures.DEFAULT_ARG=xh,i.module$build$src$core$procedures.ObservableParameterModel=jf,i.module$build$src$core$procedures.ObservableProcedureMap=Vf,i.module$build$src$core$procedures.ObservableProcedureModel=Wf,i.module$build$src$core$procedures.allProcedures=Bu,i.module$build$src$core$procedures.findLegalName=tg,i.module$build$src$core$procedures.flyoutCategory=Pu,i.module$build$src$core$procedures.getCallers=ng,i.module$build$src$core$procedures.getDefinition=iy,i.module$build$src$core$procedures.isNameUsed=sg,i.module$build$src$core$procedures.mutateCallers=oy,i.module$build$src$core$procedures.mutatorOpenListener=ig,i.module$build$src$core$procedures.rename=ty;var iS=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},k=new iS,Co=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=k.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},il=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=k.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(k.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(k.isSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(k.isSpacer(t))return t}return null}},Bh=class extends il{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=k.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,o=0;for(let n=0;n<this.elements.length;n++){const a=this.elements[n];t+=a.width,k.isSpacer(a)||(k.isNextConnection(a)?o=Math.max(o,a.height):e=Math.max(e,a.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Vi=class extends Co{constructor(e,t){super(e),this.connectionModel=t,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.type|=k.CONNECTION}},Xo=class extends Vi{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=k.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Kc=class extends Xo{constructor(e,t){super(e,t),this.height=0,this.type|=k.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Wi=class extends Co{constructor(e,t,o){super(e),this.field=t,this.parentInput=o,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=k.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},Ph=class extends Co{constructor(e){super(e),this.type|=k.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Xf=class extends Co{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.isVisible=t.isVisible(),this.type|=k.ICON,e=t.getCorrectedSize(),this.height=e.height,this.width=e.width}},ks=class extends Co{constructor(e,t){super(e),this.type=this.type|k.SPACER|k.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},Fh=class extends Xo{constructor(e,t){super(e,t),this.type|=k.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},nl=class extends Xo{constructor(e,t){super(e,t),this.type|=k.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},Gh=class extends il{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=k.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const o=this.elements[t];this.width+=o.width,k.isInput(o)&&o instanceof Xo&&(k.isStatementInput(o)&&o instanceof nl?e+=o.connectedBlockWidth:k.isExternalInput(o)&&o instanceof Kc&&o.connectedBlockWidth!==0&&(e+=o.connectedBlockWidth-o.connectionWidth)),k.isSpacer(o)||(this.height=Math.max(this.height,o.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Yf=class extends Co{constructor(e){super(e),this.type|=k.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},zf=class extends Vi{constructor(e,t){super(e,t),this.type|=k.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Kf=class extends Vi{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=k.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Jf=class extends Vi{constructor(e,t){super(e,t),this.type|=k.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},rl=class extends Co{constructor(e,t){super(e),this.type=(t&&t!=="left"?k.RIGHT_ROUND_CORNER:k.LEFT_ROUND_CORNER)|k.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},Uh=class extends il{constructor(e,t,o){super(e),this.height=t,this.width=o,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|k.SPACER|k.BETWEEN_ROW_SPACER,this.elements=[new ks(this.constants_,o)]}measure(){}},ll=class extends Co{constructor(e,t){super(e),this.type=(t&&t!=="left"?k.RIGHT_SQUARE_CORNER:k.LEFT_SQUARE_CORNER)|k.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Hh=class extends il{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=k.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,o=e.getPreviousBlock();return!!e.outputConnection||t||(o?o.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,o=0;for(let n=0;n<this.elements.length;n++){const a=this.elements[n];t+=a.width,k.isSpacer(a)||(k.isHat(a)&&a instanceof Ph?o=Math.max(o,a.ascenderHeight):e=Math.max(e,a.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},cl=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=ht(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const o in t)this.blockStyles[o]=this.validatedBlockStyle_(t[o]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=K("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.indexOf("auto_")===0?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=mn(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?mn(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?mn(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return fn("#fff",e,.6)||e}generateTertiaryColour_(e){return fn("#fff",e,.3)||e}dispose(){this.embossFilter_&&be(this.embossFilter_),this.disabledPattern_&&be(this.disabledPattern_),this.debugFilter_&&be(this.debugFilter_),this.cssNode_=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH,o=Er([Te(t,e/4),Te(2*-t,e/2),Te(t,e/4)]);return{height:e,width:t,path:o}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,o=Ss("c",[Te(30,-e),Te(70,-e),Te(t,0)]);return{height:e,width:t,path:o}}makePuzzleTab(){function e(p){p=p?-1:1;const T=-p;var S=o/2;const P=S+2.5,te=S+.5,Ge=Te(-t,p*S);return S=Te(t,p*S),Ss("c",[Te(0,p*P),Te(-t,T*te),Ge])+Ss("s",[Te(t,2.5*T),S])}const t=this.TAB_WIDTH,o=this.TAB_HEIGHT,n=e(!0),a=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:o,pathDown:a,pathUp:n}}makeNotch(){function e(T){return Er([Te(T*n,o),Te(3*T,0),Te(T*n,-o)])}const t=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,n=(t-3)/2,a=e(1),p=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:o,pathLeft:a,pathRight:p}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Rt("a","0 0,0",e,Te(-e,e)),o=Rt("a","0 0,0",e,Te(e,e));return{width:e,height:e,pathTop:t,pathBottom:o}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=ht(0,e)+Rt("a","0 0,1",e,Te(e,-e)),o=Rt("a","0 0,1",e,Te(e,e)),n=Rt("a","0 0,1",e,Te(-e,-e)),a=Rt("a","0 0,1",e,Te(-e,e));return{topLeft:t,topRight:o,bottomRight:a,bottomLeft:n,rightHeight:e}}shapeFor(e){switch(e.type){case pe.INPUT_VALUE:case pe.OUTPUT_VALUE:return this.PUZZLE_TAB;case pe.PREVIOUS_STATEMENT:case pe.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,o){this.injectCSS_(t,o),this.defs_=A(w.DEFS,{},e),e=A(w.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),A(w.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=A(w.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),A(w.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),A(w.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),A(w.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter_=e,e=A(w.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),A(w.RECT,{width:10,height:10,fill:"#aaa"},e),A(w.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern_=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter_){const e=A(w.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),t=A(w.FECOMPONENTTRANSFER,{result:"outBlur"},e);A(w.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),A(w.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),A(w.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode_=document.getElementById(e);const o=t.join(`
`);this.cssNode_?this.cssNode_.firstChild.textContent=o:(t=document.createElement("style"),t.id=e,e=document.createTextNode(o),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode_=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},qf=!1,Os=class{constructor(e){this.constants=e,this.debugElements_=[],this.svgRoot_=null,this.randomColour_=""}clearElems(){for(let e=0;e<this.debugElements_.length;e++)be(this.debugElements_[e]);this.debugElements_=[]}drawSpacerRow(e,t,o){if(Os.config.rowSpacers){var n=Math.abs(e.height),a=0>e.height;a&&(t-=n),this.debugElements_.push(A(w.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(e.xPos+e.width):e.xPos,y:t,width:e.width,height:n,stroke:a?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawSpacerElem(e,t,o){if(Os.config.elemSpacers){t=Math.abs(e.width);var n=0>e.width,a=n?e.xPos-t:e.xPos;o&&(a=-(a+t)),this.debugElements_.push(A(w.RECT,{class:"elemSpacerRect blockRenderDebug",x:a,y:e.centerline-e.height/2,width:t,height:e.height,stroke:"pink",fill:n?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawRenderedElem(e,t){if(Os.config.elems){let o=e.xPos;t&&(o=-(o+e.width)),t=e.centerline-e.height/2,this.debugElements_.push(A(w.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:t,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),k.isField(e)&&e instanceof Wi&&e.field instanceof i.FieldLabel$$module$build$src$core$field_label&&this.debugElements_.push(A(w.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:t+this.constants.FIELD_TEXT_BASELINE,width:e.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}k.isInput(e)&&e instanceof Xo&&Os.config.connections&&this.drawConnection(e.connectionModel)}drawConnection(e){if(Os.config.connections){var t="",o=0,n="";e.type===pe.INPUT_VALUE?(o=4,t="magenta",n="none"):e.type===pe.OUTPUT_VALUE?(o=2,n=t="magenta"):e.type===pe.NEXT_STATEMENT?(o=4,t="goldenrod",n="none"):e.type===pe.PREVIOUS_STATEMENT&&(o=2,n=t="goldenrod"),this.debugElements_.push(A(w.CIRCLE,{class:"blockRenderDebug",cx:e.getOffsetInBlock().x,cy:e.getOffsetInBlock().y,r:o,fill:n,stroke:t},this.svgRoot_))}}drawRenderedRow(e,t,o){Os.config.rows&&(this.debugElements_.push(A(w.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(e.xPos+e.width):e.xPos,y:e.yPos,width:e.width,height:e.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),k.isTopOrBottomRow(e)||Os.config.connectedBlockBounds&&this.debugElements_.push(A(w.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(e.xPos+e.widthWithConnectedBlocks):e.xPos,y:e.yPos,width:e.widthWithConnectedBlocks,height:e.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}drawRowWithElements(e,t,o){for(let n=0;n<e.elements.length;n++){const a=e.elements[n];a?k.isSpacer(a)?this.drawSpacerElem(a,e.height,o):this.drawRenderedElem(a,o):console.warn("A row has an undefined or null element.",e,a)}this.drawRenderedRow(e,t,o)}drawBoundingBox(e){if(Os.config.blockBounds){var t=e.RTL?-e.width:0;this.debugElements_.push(A(w.RECT,{class:"blockBoundingBox blockRenderDebug",x:t,y:0,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),Os.config.connectedBlockBounds&&(t=e.RTL?-e.widthWithChildren:0,this.debugElements_.push(A(w.RECT,{class:"blockRenderDebug",x:t,y:0,width:e.widthWithChildren,height:e.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}}drawDebug(e,t){this.clearElems(),this.svgRoot_=e.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);let o=0;for(let n=0;n<t.rows.length;n++){const a=t.rows[n];k.isBetweenRowSpacer(a)?this.drawSpacerRow(a,o,t.RTL):this.drawRowWithElements(a,o,t.RTL),o+=a.height}e.previousConnection&&this.drawConnection(e.previousConnection),e.nextConnection&&this.drawConnection(e.nextConnection),e.outputConnection&&this.drawConnection(e.outputConnection),t.rightSide&&this.drawRenderedElem(t.rightSide,t.RTL),this.drawBoundingBox(t),this.drawRender(e.pathObject.svgPath)}drawRender(e){Os.config.render&&(e.setAttribute("filter","url(#"+this.constants.debugFilterId+")"),setTimeout(function(){e.setAttribute("filter","")},100))}};Os.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};var al=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){if(this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),Ec()){let e;(e=this.block_.renderingDebugger)==null||e.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}hideHiddenIcons_(){for(let e=0,t;t=this.info_.hiddenIcons[e];e++){let o;(o=t.icon.iconGroup_)==null||o.setAttribute("display","none")}}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=ht(e.xPos,this.info_.startY);for(let o=0,n;n=t[o];o++)k.isLeftRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:k.isRightRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:k.isPreviousConnection(n)&&n instanceof Vi?this.outlinePath_+=n.shape.pathLeft:k.isHat(n)?this.outlinePath_+=this.constants_.START_HAT.path:k.isSpacer(n)&&(this.outlinePath_+=ge("h",n.width));this.outlinePath_+=ge("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+ge("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const o=rg(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=ge("H",t.xPos+t.width)+o+ge("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var o=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+ge("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var n=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=ge("H",o)+t+ge("v",n)+this.constants_.INSIDE_CORNERS.pathBottom+ge("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=ge("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let o=0,n="";for(let a=t.length-1,p;p=t[a];a--)k.isNextConnection(p)&&p instanceof Vi?n+=p.shape.pathRight:k.isLeftSquareCorner(p)?n+=ge("H",e.xPos):k.isLeftRoundedCorner(p)?n+=this.constants_.OUTSIDE_CORNERS.bottomLeft:k.isRightRoundedCorner(p)?(n+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):k.isSpacer(p)&&(n+=ge("h",-1*p.width));this.outlinePath_+=ge("V",e.baseline-o),this.outlinePath_+=n}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=rg(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=ge("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,t;t=this.info_.rows[e];e++)for(let o=0,n;n=t.elements[o];o++)k.isInlineInput(n)?this.drawInlineInput_(n):(k.isIcon(n)||k.isField(n))&&this.layoutField_(n)}layoutField_(e){const t=k.isField(e)?e.field.getSvgRoot():e.icon.iconGroup_,o=e.centerline-e.height/2;let n=e.xPos,a="";this.info_.RTL&&(n=-(n+e.width),e.flipRtl&&(n+=e.width,a="scale(-1 1)")),k.isIcon(e)?(t.setAttribute("display","block"),t.setAttribute("transform","translate("+n+","+o+")"),e.icon.computeIconLocation()):t.setAttribute("transform","translate("+n+","+o+")"+a),this.info_.isInsertionMarker&&t.setAttribute("display","none")}drawInlineInput_(e){const t=e.width,o=e.height,n=e.connectionOffsetY,a=e.connectionHeight+n;this.inlinePath_+=qt(e.xPos+e.connectionWidth,e.centerline-o/2)+ge("v",n)+e.shape.pathDown+ge("v",o-a)+ge("h",t-e.connectionWidth)+ge("v",-o)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let o=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let o=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let o=e.xPos+e.width;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,o=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}},Wn=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new Kf(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new Hh(this.constants_),this.bottomRow=new Bh(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new Gh(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let o=0,n;n=t[o];o++){const a=new Xf(this.constants_,n);this.isCollapsed&&n.collapseHidden?this.hiddenIcons.push(a):e.elements.push(a)}t=void 0;for(let o=0,n;n=this.block_.inputList[o];o++)if(n.isVisible()){this.shouldStartNewRow_(n,t)&&(this.rows.push(e),e=new Gh(this.constants_),this.inputRows.push(e));for(let a=0,p;p=n.fieldRow[a];a++)e.elements.push(new Wi(this.constants_,p,n));this.addInput_(n,e),t=n}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new Yf(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let o=this.topRow.hasLeftSquareCorner(this.block_)?ll:rl;this.topRow.elements.push(new o(this.constants_)),t?(e=new Ph(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Jf(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type===xe.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?ll:rl,this.topRow.elements.push(new o(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===xe.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new ll(this.constants_)):this.bottomRow.elements.push(new rl(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new zf(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new ll(this.constants_,"right")):this.bottomRow.elements.push(new rl(this.constants_,"right"))}addInput_(e,t){this.isInline&&e.type===xe.VALUE?(t.elements.push(new Fh(this.constants_,e)),t.hasInlineInput=!0):e.type===xe.STATEMENT?(t.elements.push(new nl(this.constants_,e)),t.hasStatement=!0):e.type===xe.VALUE?(t.elements.push(new Kc(this.constants_,e)),t.hasExternalInput=!0):e.type===xe.DUMMY&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),t.align===null&&(t.align=e.align)}shouldStartNewRow_(e,t){return t?e.type===xe.STATEMENT||t.type===xe.STATEMENT?!0:e.type===xe.VALUE||e.type===xe.DUMMY?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,t;t=this.rows[e];e++){const o=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new ks(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(let n=0;n<o.length-1;n++){t.elements.push(o[n]);const a=this.getInRowSpacing_(o[n],o[n+1]);t.elements.push(new ks(this.constants_,a))}t.elements.push(o[o.length-1]),t.endsWithElemSpacer()&&t.elements.push(new ks(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&k.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&k.isInput(e)&&!t){if(k.isExternalInput(e))return this.constants_.NO_PADDING;if(k.isInlineInput(e))return this.constants_.LARGE_PADDING;if(k.isStatementInput(e))return this.constants_.NO_PADDING}return e&&k.isLeftSquareCorner(e)&&t&&(k.isPreviousConnection(t)||k.isNextConnection(t))?t.notchOffset:e&&k.isLeftRoundedCorner(e)&&t&&(k.isPreviousConnection(t)||k.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,o=0;for(let a=0,p;p=this.rows[a];a++){if(p.measure(),t=Math.max(t,p.width),p.hasStatement){var n=p.getLastInput();let T,S;n=p.width-((S=(T=n)==null?void 0:T.width)!=null?S:0),e=Math.max(e,n)}o=Math.max(o,p.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let a=0,p;p=this.rows[a];a++)p.hasStatement&&(p.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t=0,o;o=this.rows[t];t++)if(o.hasStatement)this.alignStatementRow_(o);else{var e=o.width;e=this.getDesiredRowWidth_(o)-e,0<e&&this.addAlignmentPadding_(o,e),k.isTopOrBottomRow(o)&&(o.widthWithConnectedBlocks=o.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const o=e.getFirstSpacer(),n=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===i.Align$$module$build$src$core$input.LEFT&&n)n.width+=t;else if(e.align===i.Align$$module$build$src$core$input.CENTRE&&o&&n)o.width+=t/2,n.width+=t/2;else if(e.align===i.Align$$module$build$src$core$input.RIGHT&&o)o.width+=t;else if(n)n.width+=t;else return;e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var o=e.width-t.width,n=this.statementEdge;o=n-o,0<o&&this.addAlignmentPadding_(e,o),o=e.width,n=this.getDesiredRowWidth_(e),t.width+=n-o,t.height=Math.max(t.height,e.height),e.width+=n-o,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var o=this.getSpacerRowHeight_(e,t);const n=this.getSpacerRowWidth_(e,t);return o=new Uh(this.constants_,o,n),e.hasStatement&&(o.followsStatement=!0),t.hasStatement&&(o.precedesStatement=!0),o}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return k.isSpacer(t)?e.yPos+t.height/2:k.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,k.isNextConnection(t)?e+t.height/2:e-t.height/2):k.isTopRow(e)?k.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let o=0,n;n=e.elements[o];o++)k.isSpacer(n)&&(n.height=e.height),n.xPos=t,n.centerline=this.getElemCenterline_(e,n),t+=n.width}finalize_(){let e=0,t=0;for(let o=0,n;n=this.rows[o];o++)n.yPos=t,n.xPos=this.startX,t+=n.height,e=Math.max(e,n.widthWithConnectedBlocks),this.recordElemPositions_(n);if(this.outputConnection&&this.block_.nextConnection){const o=this.block_.nextConnection.targetBlock();o&&(e=Math.max(e,o.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}},Zf=class extends io{constructor(e,t,o,n){let a=e?e.workspace.id:void 0;n&&n.getType()===W.types.WORKSPACE&&(a=n.getLocation().id),super(a),this.type=wr,this.blockId=e==null?void 0:e.id,this.oldNode=o||void 0,this.newNode=n,this.isCursor=t}toJson(){const e=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}fromJson(e){super.fromJson(e),this.isCursor=e.isCursor,this.blockId=e.blockId,this.oldNode=e.oldNode,this.newNode=e.newNode}};We(se.EVENT,wr,Zf);var nS="blocklyCursor",rS="blocklyMarker",lS=.75,Vh=class{constructor(e,t,o){this.workspace=e,this.marker=o,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent_=null,this.constants_=t,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=o.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const e=this.isCursor()?nS:rS;return this.svgGroup_=A(w.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent_=e}draw(e,t){if(t){this.constants_=this.workspace.getRenderer().getConstants();var o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||o,this.applyColour_(t),this.showAtLocation_(t),this.fireMarkerEvent_(e,t),e=this.currentMarkerSvg.childNodes[0],e!==void 0&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const t=e.getLocation().type;e.getType()===W.types.BLOCK?this.showWithBlock_(e):e.getType()===W.types.OUTPUT?this.showWithOutput_(e):t===pe.INPUT_VALUE?this.showWithInput_(e):t===pe.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===W.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===W.types.FIELD?this.showWithField_(e):e.getType()===W.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===W.types.STACK&&this.showWithStack_(e)}showWithBlockPrevOutput_(e){e=e.getSourceBlock();const t=e.width;var o=e.height,n=o*lS;const a=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(o=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(t,a,n,o)):e.outputConnection?(n=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,o,n)):this.positionBlock_(t,a,n),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput_(e)}showWithPrevious_(e){this.showWithBlockPrevOutput_(e)}showWithOutput_(e){this.showWithBlockPrevOutput_(e)}showWithCoordinates_(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){e=e.getLocation();const t=e.getSize().width,o=e.getSize().height;this.positionRect_(0,0,t,o),this.setParent_(e),this.showCurrent_()}showWithInput_(e){e=e.getLocation();const t=e.getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()}showWithNext_(e){var t=e.getLocation();e=t.getSourceBlock();let o=0;t=t.getOffsetInBlock().y;const n=e.getHeightWidth().width;this.workspace.RTL&&(o=-n),this.positionLine_(o,t,n),this.setParent_(e),this.showCurrent_()}showWithStack_(e){e=e.getLocation();var t=e.getHeightWidth();const o=t.width+this.constants_.CURSOR_STACK_PADDING;t=t.height+this.constants_.CURSOR_STACK_PADDING;const n=-this.constants_.CURSOR_STACK_PADDING/2,a=-this.constants_.CURSOR_STACK_PADDING/2;let p=n;this.workspace.RTL&&(p=-(o+n)),this.positionRect_(p,a,o,t),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,t,o){if(e=ht(-t,o)+ge("V",-t)+ge("H",e+2*t)+ge("V",o),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const t=e.getOffsetInBlock().x,o=e.getOffsetInBlock().y;e=qt(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+o+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,t,o){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${t}`),this.markerSvgLine_.setAttribute("width",`${o}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,t,o){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=ht(e,0)+ge("h",-(e-o.width))+ge("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+ge("V",t)+ge("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,t,o,n){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=ht(-t,o)+ge("V",-t)+ge("H",this.constants_.NOTCH_OFFSET_LEFT)+n.pathLeft+ge("H",e+2*t)+ge("V",o),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,t,o,n){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${t}`),this.markerSvgRect_.setAttribute("width",`${o}`),this.markerSvgRect_.setAttribute("height",`${n}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl_(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent_(e,t){const o=t.getSourceBlock();e=new(Ce(wr))(o,this.isCursor(),e,t),Re(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=A(w.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=A(w.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=A(w.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=A(w.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=A(w.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const e=this.getBlinkProperties_();A(w.ANIMATE,e,this.markerSvgLine_),A(w.ANIMATE,e,this.markerInput_),A(w.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&be(this.svgGroup_)}},Jc=class{constructor(e,t,o){this.markerSvg=this.cursorSvg=null,this.constants=o,this.style=t,this.svgRoot=e,this.svgPath=A(w.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?oe(this.svgRoot,e):Pe(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}},Qf="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",ws=class{constructor(e){this.localConnection_=this.closestConnection_=this.lastMarker_=this.lastOnStack_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,ue(e),this.topBlock_=e,this.workspace_=e.workspace,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.availableConnections_=this.initAvailableConnections_()}dispose(){this.availableConnections_.length=0,At();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{Lt()}}updateAvailableConnections(){this.availableConnections_=this.initAvailableConnections_()}wouldDeleteBlock(){return this.wouldDeleteBlock_}wouldConnectBlock(){return!!this.closestConnection_}applyConnections(){if(this.closestConnection_){if(!this.localConnection_)throw Error("Cannot apply connections because there is no local connection");if(At(),this.hidePreview_(),Lt(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered){const e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;B_(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}}}update(e,t){const o=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(o,t))||this.shouldUpdatePreviews_(o,e))&&(At(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),Lt())}createMarkerBlock_(e){var t=e.type;At();let o;try{if(o=this.workspace_.newBlock(t),o.setInsertionMarker(!0),e.saveExtraState){var n=e.saveExtraState();n&&o.loadExtraState&&o.loadExtraState(n)}else if(e.mutationToDom){const a=e.mutationToDom();a&&o.domToMutation&&o.domToMutation(a)}for(t=0;t<e.inputList.length;t++){const a=e.inputList[t];if(a.name===Kr)continue;const p=o.inputList[t];if(!p)throw Error(Qf.replace("%1","an input"));for(n=0;n<a.fieldRow.length;n++){const T=a.fieldRow[n],S=p.fieldRow[n];if(!S)throw Error(Qf.replace("%1","a field"));S.setValue(T.getValue())}}o.setCollapsed(e.isCollapsed()),o.setInputsInline(e.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{Lt()}return o}initAvailableConnections_(){const e=this.topBlock_.getConnections_(!1),t=this.topBlock_.lastConnectionInStack(!0);if(t&&t!==this.topBlock_.nextConnection){if(e.push(t),this.lastOnStack_=t,this.lastMarker_){At();try{this.lastMarker_.dispose()}finally{Lt()}}this.lastMarker_=this.createMarkerBlock_(t.getSourceBlock())}return e}shouldUpdatePreviews_(e,t){var o=e.local;const n=e.closest;if(e=e.radius,o&&n){if(this.localConnection_&&this.closestConnection_)return this.closestConnection_===n&&this.localConnection_===o?!1:(o=this.localConnection_.x+t.x-this.closestConnection_.x,t=this.localConnection_.y+t.y-this.closestConnection_.y,t=Math.sqrt(o*o+t*t),!(n&&e>t-i.config$$module$build$src$core$config.currentConnectionPreference));if(this.localConnection_||this.closestConnection_)console.error("Only one of localConnection_ and closestConnection_ was set.");else return!0}else return!(!this.localConnection_||!this.closestConnection_);return console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0}getCandidate_(e){let t=this.getStartRadius_(),o=null,n=null;this.markerConnection_&&this.markerConnection_.isConnected()||this.updateAvailableConnections();for(let a=0;a<this.availableConnections_.length;a++){const p=this.availableConnections_[a],T=p.closest(t,e);T.connection&&(o=T.connection,n=p,t=T.radius)}return{closest:o,local:n,radius:t}}getStartRadius_(){return this.closestConnection_&&this.localConnection_?i.config$$module$build$src$core$config.connectingSnapRadius:i.config$$module$build$src$core$config.snapRadius}shouldDelete_(e,t){return t&&this.workspace_.getComponentManager().hasCapability(t.id,Ut.Capability.DELETE_AREA)?t.wouldDelete(this.topBlock_,e&&!!e.closest):!1}maybeShowPreview_(e){if(!this.wouldDeleteBlock_){var t=e.closest;e=e.local,t&&(t===this.closestConnection_||t.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=t,this.localConnection_=e,this.showPreview_()))}}showPreview_(){if(!this.closestConnection_)throw Error("Cannot show the preview because there is no closest connection");if(!this.localConnection_)throw Error("Cannot show the preview because there is no local connection");const e=this.closestConnection_,t=this.workspace_.getRenderer();switch(t.getConnectionPreviewMethod(e,this.localConnection_,this.topBlock_)){case ws.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case ws.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case ws.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}e&&t.shouldHighlightConnection(e)&&e.highlight()}maybeHidePreview_(e){if(e.closest){const t=this.closestConnection_!==e.closest;e=this.localConnection_!==e.local,this.closestConnection_&&this.localConnection_&&(t||e||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null}hidePreview_(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()}showInsertionMarker_(){if(!this.localConnection_)throw Error("Cannot show the insertion marker because there is no local connection");if(!this.closestConnection_)throw Error("Cannot show the insertion marker because there is no closest connection");const e=this.localConnection_,t=this.closestConnection_,o=this.lastOnStack_&&e===this.lastOnStack_;let n=o?this.lastMarker_:this.firstMarker_;if(!n)throw Error("Cannot show the insertion marker because there is no insertion marker block");let a;try{a=n.getMatchingConnection(e.getSourceBlock(),e)}catch{if(this.firstMarker_=this.createMarkerBlock_(this.topBlock_),n=o?this.lastMarker_:this.firstMarker_,!n)throw Error("Cannot show the insertion marker because there is no insertion marker block");a=n.getMatchingConnection(e.getSourceBlock(),e)}if(!a)throw Error("Cannot show the insertion marker because there is no associated connection");if(a===this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");n.render(),n.rendered=!0,n.getSvgRoot().setAttribute("visibility","visible"),a&&t&&n.positionNearConnection(a,t),t&&a.connect(t),this.markerConnection_=a}hideInsertionMarker_(){if(this.markerConnection_){var e=this.markerConnection_,t=e.getSourceBlock(),o=t.nextConnection,n=t.previousConnection,a=t.outputConnection;if(a=e.type===pe.INPUT_VALUE&&!(a&&a.targetConnection),!(e!==o||n&&n.targetConnection)||a?e.targetBlock().unplug(!1):e.type===pe.NEXT_STATEMENT&&e!==o?((o=e.targetConnection)&&o.getSourceBlock().unplug(!1),n=n?n.targetConnection:null,t.unplug(!0),n&&o&&n.connect(o)):t.unplug(!0),e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(e=t.getSvgRoot())&&e.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")}showInsertionInputOutline_(){if(!this.closestConnection_)throw Error("Cannot show the insertion marker outline because there is no closest connection");const e=this.closestConnection_;this.highlightedBlock_=e.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(e,!0)}hideInsertionInputOutline_(){if(!this.highlightedBlock_)throw Error("Cannot hide the insertion marker outline because there is no highlighted block");if(!this.closestConnection_)throw Error("Cannot hide the insertion marker outline because there is no closest connection");this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null}showReplacementFade_(){if(!this.closestConnection_)throw Error("Cannot show the replacement fade because there is no closest connection");if(this.fadedBlock_=this.closestConnection_.targetBlock(),!this.fadedBlock_)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock_.fadeForReplacement(!0)}hideReplacementFade_(){if(!this.fadedBlock_)throw Error("Cannot hide the replacement because there is no faded block");this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null}getInsertionMarkers(){const e=[];return this.firstMarker_&&e.push(this.firstMarker_),this.lastMarker_&&e.push(this.lastMarker_),e}};(function(e){e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}),e[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(ws||(ws={})),ws.PREVIEW_TYPE;var ul=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName())}refreshDom(e,t){const o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new cl}makeRenderInfo_(e){return new Wn(this,e)}makeDrawer_(e,t){return new al(e,t)}makeDebugger_(){return new Os(this.getConstants())}makeMarkerDrawer(e,t){return new Vh(e,this.getConstants(),t)}makePathObject(e,t){return new Jc(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,o){return!!qe.getConnectionForOrphanedConnection(e,o===pe.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}getConnectionPreviewMethod(e,t,o){return t.type===pe.OUTPUT_VALUE||t.type===pe.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(o,e.targetBlock(),t.type)?ws.PREVIEW_TYPE.INSERTION_MARKER:ws.PREVIEW_TYPE.REPLACEMENT_FADE:ws.PREVIEW_TYPE.INSERTION_MARKER}render(e){Ec()&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},Qe={};Qe.BottomRow=Bh,Qe.Connection=Vi,Qe.ConstantProvider=cl,Qe.Debug=Os,Qe.Drawer=al,Qe.ExternalValueInput=Kc,Qe.Field=Wi,Qe.Hat=Ph,Qe.Icon=Xf,Qe.InRowSpacer=ks,Qe.InlineInput=Fh,Qe.InputConnection=Xo,Qe.InputRow=Gh,Qe.JaggedEdge=Yf,Qe.MarkerSvg=Vh,Qe.Measurable=Co,Qe.NextConnection=zf,Qe.OutputConnection=Kf,Qe.PathObject=Jc,Qe.PreviousConnection=Jf,Qe.RenderInfo=Wn,Qe.Renderer=ul,Qe.RoundCorner=rl,Qe.Row=il,Qe.SpacerRow=Uh,Qe.SquareCorner=ll,Qe.StatementInput=nl,Qe.TopRow=Hh,Qe.Types=k,Qe.init=lg,Qe.register=yr,Qe.stopDebugger=ly,Qe.unregister=ry;var em=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&Pe(e,t),(t=this.theme.getClassName())&&oe(e,t));for(let o=0,n;n=this.subscribedWorkspaces_[o];o++)n.refreshTheme();for(const[o,n]of this.componentDB)for(const a of n){e=a.element,t=a.propertyName;const p=this.theme&&this.theme.getComponentStyle(o);e.style[t]=p||""}for(const o of this.subscribedWorkspaces_)o.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces_.push(e)}unsubscribeWorkspace(e){if(!ps(this.subscribedWorkspaces_,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,o){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:o}),t=this.theme&&this.theme.getComponentStyle(t),e.style[o]=t||""}unsubscribe(e){if(e)for(const[t,o]of this.componentDB){for(let n=o.length-1;0<=n;n--)o[n].element===e&&o.splice(n,1);o.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces_=this.theme=this.owner_=null,this.componentDB.clear()}},cS=5,aS=6,tm=class extends jo{constructor(){super(...arguments),this.isMultiTouch_=!1,this.cachedPoints=new Map,this.startDistance_=this.previousScale_=0,this.onUpWrapper_=this.onMoveWrapper_=this.isPinchZoomEnabled_=this.onStartWrapper_=null}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch event becauase the start workspace is undefined");this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,super.doStart(e),!this.isEnding_&&m(e)&&this.handleTouchStart(e)}bindMouseEvents(e){this.onStartWrapper_=E(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=E(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=E(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()}handleStart(e){!this.isDragging()&&m(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&l())}handleMove(e){this.isDragging()?d(e)&&super.handleMove(e):this.isMultiTouch()?(m(e)&&this.handleTouchMove(e),l()):super.handleMove(e)}handleUp(e){m(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?d(e)&&super.handleUp(e):(e.preventDefault(),e.stopPropagation(),this.dispose())}isMultiTouch(){return this.isMultiTouch_}dispose(){super.dispose(),this.onStartWrapper_&&y(this.onStartWrapper_)}handleTouchStart(e){var t=_(e);this.cachedPoints.set(t,this.getTouchPoint(e));var o=Array.from(this.cachedPoints.keys());o.length===2&&(t=this.cachedPoints.get(o[0]),o=this.cachedPoints.get(o[1]),this.startDistance_=ae.distance(t,o),this.isMultiTouch_=!0,e.preventDefault())}handleTouchMove(e){const t=_(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled_&&this.cachedPoints.size===2?this.handlePinch_(e):super.handleMove(e)}handlePinch_(e){var t=Array.from(this.cachedPoints.keys()),o=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),o=ae.distance(o,t)/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){if(t=o-this.previousScale_,t=0<t?t*cS:t*aS,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const n=this.startWorkspace_,a=N(e,n.getParentSvg(),n.getInverseScreenCTM());n.zoom(a.x,a.y,t)}this.previousScale_=o,e.preventDefault()}handleTouchEnd(e){e=_(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale_=0)}getTouchPoint(e){return this.startWorkspace_?new ae(e.changedTouches?e.changedTouches[0].pageX:e.pageX,e.changedTouches?e.changedTouches[0].pageY:e.pageY):null}},Wh="VARIABLE_DYNAMIC",di={};di.CATEGORY_NAME=Wh,di.flyoutCategory=Fu,di.flyoutCategoryBlocks=hg,di.onCreateVariableButtonClick_Colour=ug,di.onCreateVariableButtonClick_Number=ag,di.onCreateVariableButtonClick_String=cg;var sm=class{canConnect(e,t,o,n){return this.canConnectWithReason(e,t,o,n)===qe.CAN_CONNECT}canConnectWithReason(e,t,o,n){const a=this.doSafetyChecks(e,t);return a!==qe.CAN_CONNECT?a:this.doTypeChecks(e,t)?o&&!this.doDragChecks(e,t,n||0)?qe.REASON_DRAG_CHECKS_FAILED:qe.CAN_CONNECT:qe.REASON_CHECKS_FAILED}getErrorMessage(e,t,o){switch(e){case qe.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case qe.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case qe.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case qe.REASON_TARGET_NULL:return"Target connection is null.";case qe.REASON_CHECKS_FAILED:return"Connection checks failed. "+(t+" expected "+t.getCheck()+", found "+o.getCheck());case qe.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case qe.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case qe.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return qe.REASON_TARGET_NULL;let o,n,a;return e.isSuperior()?(o=e.getSourceBlock(),n=t.getSourceBlock(),a=t):(n=e.getSourceBlock(),o=t.getSourceBlock(),a=e,e=t),o===n?qe.REASON_SELF_CONNECTION:a.type!==Ui[e.type]?qe.REASON_WRONG_TYPE:o.workspace!==n.workspace?qe.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!n.isShadow()?qe.REASON_SHADOW_PARENT:a.type===pe.OUTPUT_VALUE&&n.previousConnection&&n.previousConnection.isConnected()||a.type===pe.PREVIOUS_STATEMENT&&n.outputConnection&&n.outputConnection.isConnected()?qe.REASON_PREVIOUS_AND_OUTPUT:qe.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let o=0;o<e.length;o++)if(t.indexOf(e[o])!==-1)return!0;return!1}doDragChecks(e,t,o){if(e.distanceFrom(t)>o||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case pe.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case pe.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case pe.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case pe.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection)return!1;break;default:return!1}return Ni.indexOf(t)===-1}canConnectToPrevious_(e,t){return e.targetConnection||Ni.indexOf(t)!==-1?!1:t.targetConnection?(e=t.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};We(se.CONNECTION_CHECKER,Po,sm);var om=class extends Nc{constructor(e){super(e),this.type=Sn,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}fromJson(e){super.fromJson(e),this.varType=e.varType,this.varName=e.varName}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)}};We(se.EVENT,Sn,om);var im=class extends Nc{constructor(e,t){super(e),this.type=kr,e&&(this.oldName=e.name,this.newName=typeof t>"u"?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}fromJson(e){super.fromJson(e),this.oldName=e.oldName,this.newName=e.newName}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)}};We(se.EVENT,kr,im);var jh=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){this.variableMap.clear()}renameVariable(e,t){const o=this.getVariable(t,e.type),n=this.workspace.getAllBlocks(!1);ve(!0);try{o&&o.getId()!==e.getId()?this.renameVariableWithConflict_(e,t,o,n):this.renameVariableAndUses_(e,t,n)}finally{ve(!1)}}renameVariableById(e,t){const o=this.getVariableById(e);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(o,t)}renameVariableAndUses_(e,t,o){for(Re(new(Ce(kr))(e,t)),e.name=t,t=0;t<o.length;t++)o[t].updateVarName(e)}renameVariableWithConflict_(e,t,o,n){const a=e.type;for(t!==o.name&&this.renameVariableAndUses_(o,t,n),t=0;t<n.length;t++)n[t].renameVarById(e.getId(),o.getId());Re(new(Ce(Sn))(e)),ps(this.variableMap.get(a),e)}createVariable(e,t,o){var n=this.getVariable(e,t);if(n){if(o&&n.getId()!==o)throw Error('Variable "'+e+'" is already in use and its id is "'+n.getId()+'" which conflicts with the passed in id, "'+o+'".');return n}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return n=o||Ks(),t=t||"",n=new xr(this.workspace,e,t,n),e=this.variableMap.get(t)||[],e.push(n),this.variableMap.delete(t),this.variableMap.set(t,e),n}deleteVariable(e){const t=e.getId(),o=this.variableMap.get(e.type);if(o){for(let n=0;n<o.length;n++)if(o[n].getId()===t){o.splice(n,1),Re(new(Ce(Sn))(e));break}}}deleteVariableById(e){const t=this.getVariableById(e);if(t){var o=t.name;const n=this.getVariableUsesById(e);for(let a=0,p;p=n[a];a++)if(p.type==="procedures_defnoreturn"||p.type==="procedures_defreturn"){e=String(p.getFieldValue("NAME")),o=Ne.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",e),oc(o);return}1<n.length?(o=Ne.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(n.length)).replace("%2",o),ru(o,a=>{a&&t&&this.deleteVariableInternal(t,n)})):this.deleteVariableInternal(t,n)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,t){const o=ut();o||ve(!0);try{for(let n=0;n<t.length;n++)t[n].dispose(!0);this.deleteVariable(e)}finally{o||ve(!1)}}getVariable(e,t){if(t=this.variableMap.get(t||"")){for(let o=0,n;n=t[o];o++)if(Gs.equals(n.name,e))return n}return null}getVariableById(e){for(const[,t]of this.variableMap)for(const o of t)if(o.getId()===e)return o;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const t=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const o of e.getPotentialVariableMap().variableMap.keys())t.add(o);return t.has("")||t.add(""),Array.from(t.values())}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(t);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const t=[],o=this.workspace.getAllBlocks(!1);for(let n=0;n<o.length;n++){const a=o[n].getVarModels();if(a)for(let p=0;p<a.length;p++)a[p].getId()===e&&t.push(o[n])}return t}},Yo=class{constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Vf(this),this.potentialVariableMap=null,this.id=Ks(),he(this),this.options=e||new co({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(xs(se.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new jh(this)}get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}dispose(){this.listeners.length=0,this.clear(),Q(this)}sortObjects_(e,t){return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+Yo.prototype.sortObjects_.offset*e.x-(t.y+Yo.prototype.sortObjects_.offset*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!ps(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e){const t=[].concat(this.topBlocks);return e&&1<t.length&&(this.sortObjects_.offset=Math.sin(Y(Yo.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){ps(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&1<e.length&&(this.sortObjects_.offset=Math.sin(Y(Yo.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e.filter(function(o){return!o.isInsertionMarker()})):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!ps(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e){const t=[].concat(this.topComments);return e&&1<t.length&&(this.sortObjects_.offset=Math.sin(Y(Yo.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t}getAllBlocks(e){if(e){var t=this.getTopBlocks(!0);e=[];for(let o=0;o<t.length;o++)e.push(...t[o].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter(function(o){return!o.isInsertionMarker()})}clear(){this.isClearing=!0;try{const e=ut();for(e||ve(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();e||ve(!1),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){this.variableMap.renameVariableById(e,t)}createVariable(e,t,o){return this.variableMap.createVariable(e,t,o)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,t){return this.variableMap.getVariable(e,t)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const o in e){if(e[o]>this.remainingCapacityOfType(o))return!1;t+=e[o]}return!(t>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,o=e?this.undoStack_:this.redoStack_;const n=t.pop();if(n){for(var a=[n];t.length&&n.group&&n.group===t[t.length-1].group;)a.push(t.pop());for(t=0;t<a.length;t++)o.push(a[t]);a=tc(a,e),ys(!1);try{for(o=0;o<a.length;o++)a[o].run(e)}finally{ys(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,iu()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){ps(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return(t=this.commentDB.get(e))!=null?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let o=0;o<t.length;o++)if(!t[o].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new jh(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}static getById(e){return z(e)}static getAll(){return le()}};Yo.SCAN_ANGLE=3;var uS=100,nm=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound_=null}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var o=new globalThis.Audio}catch{return}for(let a=0;a<e.length;a++){const p=e[a],T=p.match(/\.(\w+)$/);if(T&&o.canPlayType("audio/"+T[1])){var n=new globalThis.Audio(p);break}}n&&this.sounds.set(t,n)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(t!==void 0?t.then(e.pause).catch(function(){}):e.pause(),Tn||Bg)break}}play(e,t){var o=this.sounds.get(e);o?(e=new Date,this.lastSound_!==null&&e.getTime()-this.lastSound_.getTime()<uS||(this.lastSound_=e,o=Tn||Cc?o:o.cloneNode(),o.volume=t===void 0?1:t,o.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}},rm=class{constructor(e){this.workspace=e,this.id="zoomControls",this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=this.onZoomOutWrapper=this.onZoomInWrapper=this.onZoomResetWrapper=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=A(w.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Ut.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&be(this.svgGroup),this.onZoomResetWrapper&&y(this.onZoomResetWrapper),this.onZoomInWrapper&&y(this.onZoomInWrapper),this.onZoomOutWrapper&&y(this.onZoomOutWrapper)}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new Tt(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var o=Mu(this.workspace,e),n=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(n+=this.LARGE_SPACING+this.HEIGHT),e=Du(o,new Gt(this.WIDTH,n),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),o=o.vertical,t=xu(e,this.MARGIN_VERTICAL,o===Wo.TOP?hi.DOWN:hi.UP,t),o===Wo.TOP){var a=this.SMALL_SPACING+this.HEIGHT,p;(p=this.zoomInGroup)==null||p.setAttribute("transform","translate(0, "+a+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(a+this.LARGE_SPACING+this.HEIGHT)+")")}else{p=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let S;(S=this.zoomInGroup)==null||S.setAttribute("transform","translate(0, "+p+")"),p=p+this.SMALL_SPACING+this.HEIGHT,(a=this.zoomOutGroup)==null||a.setAttribute("transform","translate(0, "+p+")")}this.top=t.top,this.left=t.left;var T;(T=this.svgGroup)==null||T.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=A(w.G,{class:"blocklyZoom"},this.svgGroup);const t=A(w.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);A(w.RECT,{width:32,height:32},t),A(w.IMAGE,{width:rs.width,height:rs.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(fs,"xlink:href",this.workspace.options.pathToMedia+rs.url),this.onZoomOutWrapper=E(this.zoomOutGroup,"mousedown",null,this.zoom.bind(this,-1))}createZoomInSvg(e){this.zoomInGroup=A(w.G,{class:"blocklyZoom"},this.svgGroup);const t=A(w.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);A(w.RECT,{width:32,height:32},t),A(w.IMAGE,{width:rs.width,height:rs.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(fs,"xlink:href",this.workspace.options.pathToMedia+rs.url),this.onZoomInWrapper=E(this.zoomInGroup,"mousedown",null,this.zoom.bind(this,1))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),h(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=A(w.G,{class:"blocklyZoom"},this.svgGroup);const t=A(w.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);A(w.RECT,{width:32,height:32},t),A(w.IMAGE,{width:rs.width,height:rs.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(fs,"xlink:href",this.workspace.options.pathToMedia+rs.url),this.onZoomResetWrapper=E(this.zoomResetGroup,"mousedown",null,this.resetZoom.bind(this))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),h(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(Ce(ci))(null,this.workspace.id,"zoom_controls");Re(e)}};qs(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var hS=20,uo=class extends Yo{constructor(e,t,o){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.workspaceDragSurface=this.blockDragSurface=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.isDragSurfaceActive=!1,this.inverseScreenCTM=this.targetWorkspace=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=null,this.metricsManager=new(xs(se.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||uo.setTopLevelWorkspaceMetrics_,this.componentManager=new Ut,this.connectionDBList=Vn.init(this.connectionChecker),t&&(this.blockDragSurface=t),o&&(this.workspaceDragSurface=o),this.useWorkspaceDragSurface=!!this.workspaceDragSurface,this.audioManager=new nm(e.parentWorkspace),this.grid=this.options.gridPattern?new Mh(this.options.gridPattern,e.gridOptions):null,this.markerManager=new Pr(this),i.module$build$src$core$variables&&au&&this.registerToolboxCategoryCallback(Dc,au),di&&Fu&&this.registerToolboxCategoryCallback(Wh,Fu),i.module$build$src$core$procedures&&Pu&&(this.registerToolboxCategoryCallback(zc,Pu),this.addChangeListener(ig)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new em(this,this.options.theme||Hc),this.themeManager_.subscribeWorkspace(this);let n;this.renderer=lg(this.options.renderer||"geras",this.getTheme(),(n=this.options.rendererOverrides)!=null?n:void 0),this.cachedParentSvgSize=new Gt(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=Hc),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(t){return!!t.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(Ce(Nr))(this.getTheme().name,this.id);Re(e)}updateBlockStyles_(e){for(let t=0,o;o=e[t];t++){const n=o.getStyleName();if(n){const a=o;a.setStyle(n),a.mutator&&a.mutator.updateBlockStyle()}}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(e){let t=0,o=0,n=1;(hs(this.getCanvas(),e)||hs(this.getBubbleCanvas(),e))&&(n=this.scale);do{const a=Zs(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(n=1),t+=a.x*n,o+=a.y*n,e=e.parentNode}while(e&&e!==this.getParentSvg());return new ae(t,o)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new Gt(e.width,e.height)}getOriginOffsetInPixels(){return rc(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getBlockCanvas(){return this.svgBlockCanvas_}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e){return this.svgGroup_=A(w.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=A(w.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=A(w.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=A(w.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(E(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),document.body.addEventListener("wheel",function(){}),E(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(xs(se.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=xs(se.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&be(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&be(e.parentNode)}this.resizeHandlerWrapper&&(y(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null)}addTrashcan(){this.trashcan=uo.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new rm(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const t=new co({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(xs(se.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(xs(se.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(Ut.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),o=[];for(let n=0,a;a=e[n];n++){a.position(t,o);const p=a.getBoundingRectangle();p&&o.push(p)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const e=_u();ae.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations_())}getCanvas(){return this.svgBlockCanvas_}setCachedParentSvgSize(e,t){const o=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,o.setAttribute("data-cached-width",e.toString())),t!=null&&(this.cachedParentSvgSize.height=t,o.setAttribute("data-cached-height",t.toString()))}getBubbleCanvas(){return this.svgBubbleCanvas_}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(xt()){var e=this.scale,t=-this.scrollY,o=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(t-this.oldTop)&&1>Math.abs(o-this.oldLeft))){var n=new(Ce(Pi))(t,o,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=o,Re(n)}}}translate(e,t){if(this.useWorkspaceDragSurface&&this.isDragSurfaceActive){var o;(o=this.workspaceDragSurface)==null||o.translateSurface(e,t)}else o="translate("+e+","+t+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o);this.blockDragSurface&&this.blockDragSurface.translateAndScaleGroup(e,t,this.scale),this.grid&&this.grid.moveTo(e,t),this.maybeFireViewportChangeEvent()}resetDragSurface(){if(this.useWorkspaceDragSurface){this.isDragSurfaceActive=!1;var e=this.workspaceDragSurface.getSurfaceTranslation();this.workspaceDragSurface.clearAndHide(this.svgGroup_),e="translate("+e.x+","+e.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",e),this.svgBubbleCanvas_.setAttribute("transform",e)}}setupDragSurface(){if(this.useWorkspaceDragSurface&&!this.isDragSurfaceActive){this.isDragSurfaceActive=!0;var e=this.svgBlockCanvas_.previousSibling,t,o=parseInt((t=this.getParentSvg().getAttribute("width"))!=null?t:"0"),n;t=parseInt((n=this.getParentSvg().getAttribute("height"))!=null?n:"0"),n=Zs(this.getCanvas()),this.workspaceDragSurface.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,o,t,this.scale),this.workspaceDragSurface.translateSurface(n.x,n.y)}}getBlockDragSurface(){return this.blockDragSurface}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){e=this.getAllBlocks(!1);for(let t=e.length-1;0<=t;t--)e[t].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)}render(){for(var e=this.getAllBlocks(!1),t=e.length-1;0<=t;t--)e[t].render(!1);if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),t=0;t<e.length;t++)e[t].render(!1);this.markerManager.updateMarkers()}highlightBlock(e,t){if(t===void 0){for(let o=0,n;n=this.highlightedBlocks[o];o++)n.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=t===void 0||t)?this.highlightedBlocks.indexOf(e)===-1&&this.highlightedBlocks.push(e):ps(this.highlightedBlocks,e),e.setHighlighted(t))}paste(e){if(!this.rendered||!e.type&&!e.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const t=ut();return t||ve(!0),e=e.type?this.pasteBlock_(null,e):e.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(e):this.pasteBlock_(e,null),ve(t),e}pasteBlock_(e,t){At();let o;try{let n=0,a=0;if(e){o=gn(e,this);let p;n=parseInt((p=e.getAttribute("x"))!=null?p:"0"),this.RTL&&(n=-n);let T;a=parseInt((T=e.getAttribute("y"))!=null?T:"0")}else t&&(o=Li(t,this),n=t.x||10,this.RTL&&(n=this.getWidth()-n),a=t.y||10);if(!isNaN(n)&&!isNaN(a)){let p;do{p=!1;const T=this.getAllBlocks(!1);for(let S=0,P;P=T[S];S++){const te=P.getRelativeToSurfaceXY();if(1>=Math.abs(n-te.x)&&1>=Math.abs(a-te.y)){p=!0;break}}if(!p){const S=o.getConnections_(!1);for(let P=0,te;te=S[P];P++)if(te.closest(i.config$$module$build$src$core$config.snapRadius,new ae(n,a)).connection){p=!0;break}}p&&(n=this.RTL?n-i.config$$module$build$src$core$config.snapRadius:n+i.config$$module$build$src$core$config.snapRadius,a+=2*i.config$$module$build$src$core$config.snapRadius)}while(p);o.moveTo(new ae(n,a))}}finally{Lt()}return xt()&&!o.isShadow()&&Re(new(Ce(Wt))(o)),o.select(),o}pasteWorkspaceComment_(e){At();let t;try{t=Zt.fromXmlRendered(e,this);let o,n=parseInt((o=e.getAttribute("x"))!=null?o:"0"),a,p=parseInt((a=e.getAttribute("y"))!=null?a:"0");isNaN(n)||isNaN(p)||(this.RTL&&(n=-n),t.moveBy(n+50,p+50))}finally{Lt()}return xt()&&yo.fireCreateEvent(t),t.select(),t}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()}renameVariableById(e,t){super.renameVariableById(e,t),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,t,o){return e=super.createVariable(e,t,o),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(Ut.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t=0,o;o=e[t];t++){const n=o.getClientRect();n&&this.dragTargetAreas.push({component:o,clientRect:n})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t=0,o;o=this.dragTargetAreas[t];t++)if(o.clientRect.contains(e.clientX,e.clientY))return o.component;return null}onMouseDown_(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){e=N(e,this.getParentSvg(),this.getInverseScreenCTM()),e.x/=this.scale,e.y/=this.scale,this.dragDeltaXY=ae.difference(t,e)}moveDrag(e){return e=N(e,this.getParentSvg(),this.getInverseScreenCTM()),e.x/=this.scale,e.y/=this.scale,ae.sum(this.dragDeltaXY,e)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel_(e){if(jo.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||o){var n=R(e);if(ju)var a=e.metaKey;t&&(e.ctrlKey||a||!o)?(n=-n.y/50,t=N(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,n)):(t=this.scrollX-n.x,o=this.scrollY-n.y,e.shiftKey&&!n.x&&(t=this.scrollX-n.y,o=this.scrollY),this.scroll(t,o)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new Tt(0,0,0,0);const t=e[0].getBoundingRectangle();for(let n=1;n<e.length;n++){var o=e[n];o.isInsertionMarker&&o.isInsertionMarker()||(o=o.getBoundingRectangle(),o.top<t.top&&(t.top=o.top),o.bottom>t.bottom&&(t.bottom=o.bottom),o.left<t.left&&(t.left=o.left),o.right>t.right&&(t.right=o.right))}return t}cleanUp(){this.setResizesEnabled(!1),ve(!0);const e=this.getTopBlocks(!0);let t=0;for(let o=0,n;n=e[o];o++){if(!n.isMovable())continue;const a=n.getRelativeToSurfaceXY();n.moveBy(-a.x,t-a.y),n.snapToGrid(),t=n.getRelativeToSurfaceXY().y+n.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}ve(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var t=Ze.registry.getContextMenuOptions(Ze.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(t,e),Tc(e,t,this.RTL)}}updateToolbox(e){if(e=pc(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Su(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(de(this),this.setBrowserFocus())}setBrowserFocus(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentElement.setActive()}catch{this.getParentSvg().parentElement.focus({preventScroll:!0})}}}zoom(e,t,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);const n=this.scale*o;if(this.scale!==n){n>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:n<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var a=this.getCanvas().getCTM(),p=this.getParentSvg().createSVGPoint();p.x=e,p.y=t,p=p.matrixTransform(a.inverse()),e=p.x,t=p.y,a=a.translate(e*(1-o),t*(1-o)).scale(o),this.scrollX=a.e,this.scrollY=a.f,this.setScale(n)}}zoomCenter(e){var t=this.getMetrics();let o;this.flyout?(o=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(o=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(o,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var o=this.getBlocksBoundingBox(),n=2*hS,a=o.right-o.left+n;if(o=o.bottom-o.top+n,a){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),o+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),a+=this.flyout.getWidth()/this.scale)),t/=a,e/=o,At();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{Lt()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){oe(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),oe(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}endCanvasTransition(){Pe(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),Pe(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,o=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,o=-o-e.scrollTop,this.scroll(t,o)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e){if(this.isMovable()){if(e=e?this.getBlockById(e):null){var t=e.getRelativeToSurfaceXY(),o=e.getHeightWidth(),n=this.scale;e=(t.x+(this.RTL?-1:1)*o.width/2)*n,t=(t.y+o.height/2)*n,o=this.getMetrics(),this.scroll(-(e-o.viewWidth/2),-(t-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,t){this.hideChaff(!0);const o=this.getMetrics();e=Math.min(e,-o.scrollLeft),t=Math.min(t,-o.scrollTop);const n=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);e=Math.max(e,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),t=Math.max(t,-n),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+o.scrollLeft),-(t+o.scrollTop),!1),e+=o.absoluteLeft,t+=o.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e){return super.getAllBlocks(e)}getTopBlocks(e){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){ps(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if(typeof t!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return(t=this.flyoutButtonCallbacks.get(e))!=null?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if(typeof t!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const t=e.type==="mousedown"||e.type==="touchstart"||e.type==="pointerdown",o=this.currentGesture_;return o?t&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:t?this.currentGesture_=new tm(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e){wi(),To(),$o();const t=!!e;this.getComponentManager().getComponents(Ut.Capability.AUTOHIDEABLE,!0).forEach(o=>o.autoHide(t))}static setTopLevelWorkspaceMetrics_(e){const t=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}},Xh={};Xh.load=uy,Xh.save=ay;var lm=class{constructor(){this.priority=Tf}save(e){const t=[];for(const o of e.getAllVariables())e={name:o.name,id:o.getId()},o.type&&(e.type=o.type),t.push(e);return t.length?t:null}load(e,t){for(const o of e)t.createVariable(o.name,o.type,o.id)}clear(e){e.getVariableMap().clear()}};Au("variables",new lm);var cm={};cm.VariableSerializer=lm;var am=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=bf}save(e){return e.getProcedureMap().getProcedures().map(t=>hy(t))}load(e,t){const o=t.getProcedureMap();for(const n of e)o.add(py(this.procedureModelClass,this.parameterModelClass,n,t))}clear(e){e.getProcedureMap().clear()}},dS=new am(Wf,jf),Yh={};Yh.ProcedureSerializer=am,Yh.observableProcedureSerializer=dS;var pS={blocks:zr,exceptions:xn,priorities:Vc,procedures:Yh,registry:Eh,variables:cm,workspaces:Xh},um=class extends cl{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter_=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter_&&be(this.selectedGlowFilter_),this.replacementGlowFilter_&&be(this.replacementGlowFilter_)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,o=Ss("c",[Te(25,-e),Te(71,-e),Te(t,0)]);return{height:e,width:t,path:o}}makeHexagonal(){function e(o,n,a){var p=o/2;return p=p>t?t:p,a=a?-1:1,o=(n?-1:1)*o/2,Do(-a*p,o)+Do(a*p,o)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(o){return o/=2,o>t?t:o},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}makeRounded(){function e(n,a,p){const T=n>o?n-o:0;return n=(n>o?o:n)/2,Rt("a","0 0,1",n,Te((a?-1:1)*n,(a?-1:1)*n))+ge("v",(p?1:-1)*T)+Rt("a","0 0,1",n,Te((a?1:-1)*n,(a?-1:1)*n))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*t;return{type:this.SHAPES.ROUND,isDynamic:!0,width(n){return n/=2,n>t?t:n},height(n){return n},connectionOffsetY(n){return n/2},connectionOffsetX(n){return-n},pathDown(n){return e(n,!1,!1)},pathUp(n){return e(n,!0,!1)},pathRightDown(n){return e(n,!1,!0)},pathRightUp(n){return e(n,!1,!0)}}}makeSquared(){function e(o,n,a){return o-=2*t,Rt("a","0 0,1",t,Te((n?-1:1)*t,(n?-1:1)*t))+ge("v",(a?1:-1)*o)+Rt("a","0 0,1",t,Te((n?1:-1)*t,(n?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(o){return t},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case pe.INPUT_VALUE:case pe.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&t.indexOf("Boolean")!==-1?this.HEXAGONAL:t&&t.indexOf("Number")!==-1?this.ROUNDED:(t&&t.indexOf("String"),this.ROUNDED);case pe.PREVIOUS_STATEMENT:case pe.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(te){return Ss("c",[Te(te*a/2,0),Te(te*a*3/4,T/2),Te(te*a,T)])+Er([Te(te*a,p)])+Ss("c",[Te(te*a/4,T/2),Te(te*a/2,T),Te(te*a,T)])+ge("h",te*n)+Ss("c",[Te(te*a/2,0),Te(te*a*3/4,-(T/2)),Te(te*a,-T)])+Er([Te(te*a,-p)])+Ss("c",[Te(te*a/4,-(T/2)),Te(te*a/2,-T),Te(te*a,-T)])}const t=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,n=t/3,a=n/3,p=o/2,T=p/2,S=e(1),P=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:o,pathLeft:S,pathRight:P}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Rt("a","0 0,0",e,Te(-e,e)),o=Rt("a","0 0,1",e,Te(-e,e)),n=Rt("a","0 0,0",e,Te(e,e)),a=Rt("a","0 0,1",e,Te(e,e));return{width:e,height:e,pathTop:t,pathBottom:n,rightWidth:e,rightHeight:e,pathTopRight:o,pathBottomRight:a}}generateSecondaryColour_(e){return fn("#000",e,.15)||e}generateTertiaryColour_(e){return fn("#000",e,.25)||e}createDom(e,t,o){super.createDom(e,t,o),e=A(w.DEFS,{},e),t=A(w.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),A(w.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),o=A(w.FECOMPONENTTRANSFER,{result:"outBlur"},t),A(w.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),A(w.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),A(w.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter_=t,e=A(w.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),A(w.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=A(w.FECOMPONENTTRANSFER,{result:"outBlur"},e),A(w.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),A(w.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),A(w.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),A(w.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .goog-menuitem,`,`${e}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},hm=class extends al{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;if(e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),Ec()){let t,o;(t=this.block_)==null||(o=t.renderingDebugger)==null||o.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height))if(k.isSpacer(e)&&(e.precedesStatement||e.followsStatement)){var t=this.constants_.INSIDE_CORNERS.rightHeight;t=e.height-(e.precedesStatement?t:0),this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<t?ge("V",e.yPos+t):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=ge("V",e.yPos+e.height)}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=ht(e.xPos,this.info_.startY),this.outlinePath_+=ge("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=ge("V",e.baseline),this.outlinePath_+=ge("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var o=e.width-2*e.connectionWidth;e=qt(e.xPos+e.connectionWidth,e.centerline-e.height/2)+ge("h",o)+e.shape.pathRightDown(e.height)+ge("h",-o)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(t,e)}}drawStatementInput_(e){var t=e.getLastInput();const o=t.xPos+t.notchOffset+t.shape.width,n=t.shape.pathRight+ge("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,a=e.height-2*this.constants_.INSIDE_CORNERS.height;t=this.constants_.INSIDE_CORNERS.pathBottom+ge("h",t.notchOffset-this.constants_.INSIDE_CORNERS.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=ge("H",o)+n+ge("v",a)+t+ge("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}};i.FieldImage$$module$build$src$core$field_image=class extends je{constructor(e,t,o,n,a,p,T){if(super(je.SKIP_SETUP),this.imageElement_=this.clickHandler_=null,this.flipRtl_=this.isDirty_=this.EDITABLE=!1,this.altText_="",o=Number($t(o)),t=Number($t(t)),isNaN(o)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=t)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Gt(t,o+i.FieldImage$$module$build$src$core$field_image.Y_PADDING),this.imageHeight_=o,typeof a=="function"&&(this.clickHandler_=a),e!==je.SKIP_SETUP&&(T?this.configure_(T):(this.flipRtl_=!!p,this.altText_=$t(n)||""),this.setValue($t(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl_=e.flipRtl),e.alt&&(this.altText_=$t(e.alt))}initView(){this.imageElement_=A(w.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(fs,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(fs,"xlink:href",String(this.value_))}getFlipRtl(){return this.flipRtl_}setAlt(e){e!==this.altText_&&(this.altText_=e||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))}showEditor_(){this.clickHandler_&&this.clickHandler_(this)}setOnClickHandler(e){this.clickHandler_=e}getText_(){return this.altText_}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}},i.FieldImage$$module$build$src$core$field_image.Y_PADDING=1,Bs("field_image",i.FieldImage$$module$build$src$core$field_image),i.FieldImage$$module$build$src$core$field_image.prototype.DEFAULT_VALUE="",i.FieldImage$$module$build$src$core$field_image,i.FieldTextInput$$module$build$src$core$field_textinput=class extends je{constructor(e,t,o){super(je.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==je.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){const e=this.getSourceBlock();if(!e)throw new Ot;if(this.getConstants().FULL_BLOCK_FIELDS){let t=0,o=0;for(let n=0,a;a=e.inputList[n];n++){for(let p=0;a.fieldRow[p];p++)t++;a.connection&&o++}this.fullBlockClickTarget_=1>=t&&e.outputConnection&&!o}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()}doClassValidation_(e){return e==null?null:String(e)}doValueInvalid_(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&xt()&&Re(new(Ce(Pt))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=!0,this.value_=e,this.isBeingEdited_||(this.isDirty_=!0)}applyColour(){if(this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS){var e=this.sourceBlock_;this.borderRect_?this.borderRect_.setAttribute("stroke",e.style.colourTertiary):e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)}}render_(){if(super.render_(),this.isBeingEdited_){this.resizeEditor_();const e=this.htmlInput_;this.isTextValid_?(Pe(e,"blocklyInvalidInput"),ft(e,ct.INVALID,!1)):(oe(e,"blocklyInvalidInput"),ft(e,ct.INVALID,!0))}}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t){this.workspace_=this.sourceBlock_.workspace,e=t||!1,!e&&(Xu||Cc||Tn)?this.showPromptEditor_():this.showInlineEditor_(e)}showPromptEditor_(){lu(Ne.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e))})}showInlineEditor_(e){const t=this.getSourceBlock();if(!t)throw new Ot;vu(this,t.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new Ot;ve(!0);const t=$n();var o=this.getClickTarget_();if(!o)throw Error("A click target has not been set.");oe(o,"editing"),o=document.createElement("input"),o.className="blocklyHtmlInput",o.setAttribute("spellcheck",this.spellcheck_);const n=this.workspace_.getScale();var a=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";return t.style.fontSize=a,o.style.fontSize=a,a=i.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*n+"px",this.fullBlockClickTarget_&&(a=this.getScaledBBox(),a=(a.bottom-a.top)/2+"px",e=e.getParent()?e.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,o.style.border=1*n+"px solid "+e,t.style.borderRadius=a,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*n+"px")),o.style.borderRadius=a,t.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.setAttribute("data-untyped-default-value",this.value_),o.setAttribute("data-old-value",""),this.resizeEditor_(),this.bindInputEvents_(o),o}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),ve(!1),this.unbindInputEvents_();var e=$n().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");Pe(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper_=E(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=E(e,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(y(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(y(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(e){e.keyCode===me.ENTER?(To(),$o()):e.keyCode===me.ESC?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value")),To(),$o()):e.keyCode===me.TAB&&(To(),$o(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange_(e){e=this.htmlInput_.value,e!==this.htmlInput_.getAttribute("data-old-value")&&(this.htmlInput_.setAttribute("data-old-value",e),e=this.getValueFromEditorText_(e),this.setValue(e),this.forceRerender(),this.resizeEditor_())}setEditorValue_(e){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e)}resizeEditor_(){var e=this.getSourceBlock();if(!e)throw new Ot;const t=$n(),o=this.getScaledBBox();t.style.width=o.right-o.left+"px",t.style.height=o.bottom-o.top+"px",e=new ae(e.RTL?o.right-t.offsetWidth:o.left,o.top),t.style.left=e.x+"px",t.style.top=e.y+"px"}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return String(e)}getValueFromEditorText_(e){return e}static fromJson(e){return new this($t(e.text),void 0,e)}},i.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS=4,Bs("field_input",i.FieldTextInput$$module$build$src$core$field_textinput),i.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",i.FieldTextInput$$module$build$src$core$field_textinput;var dm=class extends Bh{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},pm=class extends nl{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},_m=class extends Co{constructor(e){super(e),this.width=this.height=0,this.type|=k.getType("RIGHT_CONNECTION")}},gm=class extends Hh{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},fm=class extends Wn{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new gm(this.constants_),this.bottomRow=new dm(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=0<t.statementInputCount,this.rightSide=this.outputConnection?new _m(this.constants_):null,this.rightAlignedDummyInputs_=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return t?e.type===xe.STATEMENT||t.type===xe.STATEMENT?!0:e.type===xe.VALUE||e.type===xe.DUMMY?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&k.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&k.isLeftRoundedCorner(e)&&t&&(k.isPreviousConnection(t)||k.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&k.isLeftSquareCorner(e)&&t&&k.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(k.isTopRow(e)&&k.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const o=k.isInputRow(e)&&e.hasStatement,n=k.isInputRow(t)&&t.hasStatement;return n||o?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),n&&o?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):k.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):k.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const o=this.width-this.startX;return k.isInputRow(e)&&e.hasStatement||k.isInputRow(t)&&t.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o}getElemCenterline_(e,t){if(e.hasStatement&&!k.isSpacer(t)&&!k.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(k.isInlineInput(t)&&t instanceof Xo){const o=t.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return e.yPos+o.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if(e.type===xe.DUMMY&&t.hasDummyInput&&t.align===i.Align$$module$build$src$core$input.LEFT&&e.align===i.Align$$module$build$src$core$input.RIGHT)this.rightAlignedDummyInputs_.set(t,e);else if(e.type===xe.STATEMENT){t.elements.push(new pm(this.constants_,e)),t.hasStatement=!0,t.align===null&&(t.align=e.align);return}super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs_.get(e)){let o;for(let n=0;n<e.elements.length;n++){const a=e.elements[n];if(k.isSpacer(a)&&(o=a),k.isField(a)&&a instanceof Wi&&a.parentInput===this.rightAlignedDummyInputs_.get(e))break}if(o){o.width+=t,e.width+=t;return}}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let a=2;a<this.rows.length-1;a+=2){var o=this.rows[a-1];const p=this.rows[a];var n=this.rows[a+1];if(o=a===2?!!this.topRow.hasPreviousConnection:!!o.followsStatement,n=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!n.precedesStatement,k.isInputRow(p)&&p.hasStatement){p.measure();let T,S;t=p.width-((S=(T=p.getLastInput())==null?void 0:T.width)!=null?S:0)+e}else if(o&&(a===2||n)&&k.isInputRow(p)&&!p.hasStatement){n=p.xPos,o=null;for(let T=0;T<p.elements.length;T++){const S=p.elements[T];k.isSpacer(S)&&(o=S),o&&(k.isField(S)||k.isInput(S))&&n<t&&!(k.isField(S)&&S instanceof Wi&&(S.field instanceof i.FieldLabel$$module$build$src$core$field_label||S.field instanceof i.FieldImage$$module$build$src$core$field_image))&&(o.width+=t-n),n+=S.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,o=0;o<this.rows.length;o++){const n=this.rows[o];n.yPos=t,t+=n.height}this.height=t,o=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(o),o=e.width(o),this.outputConnection.height=t,this.outputConnection.width=o,this.outputConnection.startX=o,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(o),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=o,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=o,this.width+=o+e,this.widthWithChildren+=o+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var o=this.rows[t];if(!k.isInputRow(o))continue;e=o.elements[o.elements.length-2];let n=this.getNegativeSpacing_(o.elements[1]),a=this.getNegativeSpacing_(e);e=n+a;const p=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<p&&(e=this.width-p,n=e/2,a=e/2),o.elements.unshift(new ks(this.constants_,-n)),o.elements.push(new ks(this.constants_,-a))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)o=this.rows[t],k.isTopOrBottomRow(o)&&(o.elements[1].width-=e),o.width-=e,o.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var o=this.outputConnection.shape.type;const n=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(o){case n.SHAPES.ROUND:return o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=this.height/2>o?o:this.height/2,t-o*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o)));default:return 0}if(k.isInlineInput(e)&&e instanceof Xo){const a=e.connectedBlock;return e=a?a.pathObject.outputShapeType:e.shape.type,e==null||a&&a.outputConnection&&(a.statementInputCount||a.nextConnection)||o===n.SHAPES.HEXAGONAL&&o!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[o][e]}return k.isField(e)&&e instanceof Wi?o===n.SHAPES.ROUND&&e.field instanceof i.FieldTextInput$$module$build$src$core$field_textinput?t-2.75*n.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:k.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let n=2;n<this.rows.length-1;n+=2){const a=this.rows[n-1],p=this.rows[n],T=this.rows[n+1];var e=n===2,t=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!T.precedesStatement;if(e?this.topRow.hasPreviousConnection:a.followsStatement){var o=p.elements[1];if(o=p.elements.length===3&&o instanceof Wi&&(o.field instanceof i.FieldLabel$$module$build$src$core$field_label||o.field instanceof i.FieldImage$$module$build$src$core$field_image),!e&&o)a.height-=this.constants_.SMALL_PADDING,T.height-=this.constants_.SMALL_PADDING,p.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!t)a.height+=this.constants_.SMALL_PADDING;else if(t){for(e=!1,t=0;t<p.elements.length;t++)if(o=p.elements[t],o instanceof Xo&&k.isInlineInput(o)&&o.connectedBlock&&!o.connectedBlock.isShadow()&&40<=o.connectedBlock.getHeightWidth().height){e=!0;break}e&&(a.height-=this.constants_.SMALL_PADDING,T.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},mm=class extends Vh{constructor(e,t,o){super(e,t,o),this.markerCircle_=null}showWithInputOutput_(e){const t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle_(e.x,e.y),this.setParent_(t),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput_(e)}showWithInput_(e){this.showWithInputOutput_(e)}showWithBlock_(e){e=e.getLocation();const t=e.getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()}positionCircle_(e,t){let o;(o=this.markerCircle_)==null||o.setAttribute("cx",e.toString());let n;(n=this.markerCircle_)==null||n.setAttribute("cy",t.toString()),this.currentMarkerSvg=this.markerCircle_}hide(){super.hide(),this.markerCircle_&&(this.markerCircle_.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle_=A(w.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const e=this.getBlinkProperties_();A(w.ANIMATE,e,this.markerCircle_)}return this.markerSvg_}applyColour_(e){super.applyColour_(e);let t;(t=this.markerCircle_)==null||t.setAttribute("fill",this.colour_);let o;if((o=this.markerCircle_)==null||o.setAttribute("stroke",this.colour_),this.isCursor()){e=this.colour_+";transparent;transparent;";let n;(n=this.markerCircle_)==null||n.firstElementChild.setAttribute("values",e)}}},$m=class extends Jc{constructor(e,t,o){super(e,t,o),this.svgPathSelected_=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=o}setPath(e){super.setPath(e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.style.colourTertiary);for(const o of this.outlines.values())o.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath_(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath_(e);this.remainingOutlines.clear()}setOutlinePath(e,t){e=this.getOutlinePath_(e),e.setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath_(e){return this.outlines.has(e)||this.outlines.set(e,A(w.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath_(e){let t,o;(t=this.outlines.get(e))==null||(o=t.parentNode)==null||o.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},Tm=class extends ul{constructor(e){super(e)}makeConstants_(){return new um}makeRenderInfo_(e){return new fm(this,e)}makeDrawer_(e,t){return new hm(e,t)}makeMarkerDrawer(e,t){return new mm(e,this.getConstants(),t)}makePathObject(e,t){return new $m(e,t,this.getConstants())}getConstants(){return this.constants_}shouldHighlightConnection(e){return e.type!==pe.INPUT_VALUE&&e.type!==pe.OUTPUT_VALUE}getConnectionPreviewMethod(e,t,o){return t.type===pe.OUTPUT_VALUE?e.isConnected()?ws.PREVIEW_TYPE.REPLACEMENT_FADE:ws.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,t,o)}};yr("zelos",Tm);var ho={};ho.BottomRow=dm,ho.ConstantProvider=um,ho.Drawer=hm,ho.MarkerSvg=mm,ho.PathObject=$m,ho.RenderInfo=fm,ho.Renderer=Tm,ho.RightConnectionShape=_m,ho.StatementInput=pm,ho.TopRow=gm;var bm=class extends Wn{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const n=this.rows[t];var o=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new ks(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(let a=0;a<o.length-1;a++){n.elements.push(o[a]);const p=this.getInRowSpacing_(o[a],o[a+1]);n.elements.push(new ks(this.constants_,p))}n.elements.push(o[o.length-1]),n.endsWithElemSpacer()&&(o=this.getInRowSpacing_(o[o.length-1],null),e&&n.hasDummyInput&&(o+=this.constants_.TAB_WIDTH),n.elements.push(new ks(this.constants_,o)))}}}getInRowSpacing_(e,t){if(!e)return t&&k.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&k.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&k.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!k.isInput(e)&&!t)return k.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:k.isIcon(e)?2*this.constants_.LARGE_PADDING+1:k.isHat(e)?this.constants_.NO_PADDING:k.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:k.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:k.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(k.isInput(e)&&!t){if(k.isExternalInput(e))return this.constants_.NO_PADDING;if(k.isInlineInput(e))return this.constants_.LARGE_PADDING;if(k.isStatementInput(e))return this.constants_.NO_PADDING}if(!k.isInput(e)&&t&&k.isInput(t)){if(k.isField(e)&&e.isEditable){if(k.isInlineInput(t)||k.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(k.isInlineInput(t)||k.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(k.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(k.isIcon(e)&&t&&!k.isInput(t))return this.constants_.LARGE_PADDING;if(k.isInlineInput(e)&&t&&k.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(k.isLeftSquareCorner(e)&&t){if(k.isHat(t))return this.constants_.NO_PADDING;if(k.isPreviousConnection(t)||k.isNextConnection(t))return t.notchOffset}return k.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:k.isField(e)&&t&&k.isField(t)&&e.isEditable===t.isEditable||t&&k.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return k.isTopRow(e)&&k.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:k.isTopRow(e)||k.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(k.isSpacer(t))return e.yPos+t.height/2;if(k.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,k.isNextConnection(t)?e+t.height/2:e-t.height/2;if(k.isTopRow(e))return k.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let o=e.yPos;return o=k.isField(t)&&e.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):o+e.height/2}finalize_(){let e=0,t=0;for(var o=0;o<this.rows.length;o++){const a=this.rows[o];a.yPos=t,a.xPos=this.startX,t+=a.height,e=Math.max(e,a.widthWithConnectedBlocks);var n=t-this.topRow.ascenderHeight;a===this.bottomRow&&n<this.constants_.MIN_BLOCK_HEIGHT&&(n=this.constants_.MIN_BLOCK_HEIGHT-n,this.bottomRow.height+=n,t+=n),this.recordElemPositions_(a)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,o.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},Em=class extends ul{constructor(e){super(e)}makeRenderInfo_(e){return new bm(this,e)}};yr("thrasos",Em);var zh={};zh.RenderInfo=bm,zh.Renderer=Em;var vm=class extends cl{constructor(){super()}},Im=class extends al{constructor(e,t){super(e,t)}},ym=class extends Wn{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}},Sm=class extends ul{constructor(e){super(e)}makeConstants_(){return new vm}makeRenderInfo_(e){return new ym(this,e)}makeDrawer_(e,t){return new Im(e,t)}};yr("minimalist",Sm);var hl={};hl.ConstantProvider=vm,hl.Drawer=Im,hl.RenderInfo=ym,hl.Renderer=Sm;var Rm=class extends cl{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},Cm=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=ht(e.xPos,this.info_.startY);for(let t=0,o;o=e.elements[t];t++)k.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:k.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):k.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:k.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):k.isSpacer(o)&&o.width!==0&&(this.steps_+=ge("H",o.xPos+o.width-this.highlightOffset_));this.steps_+=ge("H",e.xPos+e.width-this.highlightOffset_)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+ge("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const o=e.height-t.connectionHeight;this.steps_+=qt(t.xPos+t.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+ge("v",o)}else this.steps_+=qt(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const o=e.height-2*this.insideCornerPaths_.height;this.steps_+=qt(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+ge("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+Do(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=qt(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Do(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset_;e instanceof Uh&&e.followsStatement&&(this.steps_+=ge("H",t)),this.RTL_&&(this.steps_+=ge("H",t),e.height>this.highlightOffset_&&(this.steps_+=ge("V",e.yPos+e.height-this.highlightOffset_)))}drawBottomRow(e){if(this.RTL_)this.steps_+=ge("V",e.baseline-this.highlightOffset_);else{const t=this.info_.bottomRow.elements[0];k.isLeftSquareCorner(t)?this.steps_+=qt(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):k.isLeftRoundedCorner(t)&&(this.steps_+=qt(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=qt(this.info_.startX,e):(this.steps_+=qt(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=ge("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,k.isLeftRoundedCorner(e.elements[0])?this.steps_+=ge("V",this.outsideCornerPaths_.height):this.steps_+=ge("V",e.capline+this.highlightOffset_))}drawInlineInput(e){const t=this.highlightOffset_,o=e.xPos+e.connectionWidth;var n=e.centerline-e.height/2;const a=e.width-e.connectionWidth,p=n+t;this.RTL_?(n=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=qt(o-t,p)+ge("v",n)+this.puzzleTabPaths_.pathDown(this.RTL_)+ge("v",e)+ge("h",a)):this.inlineSteps_+=qt(e.xPos+e.width+t,p)+ge("v",e.height)+ge("h",-a)+qt(o,n+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},km=class extends al{constructor(e,t){super(e,t),this.highlighter_=new Cm(t)}draw(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();const e=this.block_.pathObject;if(e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),Ec()){let t,o;(t=this.block_)==null||(o=t.renderingDebugger)==null||o.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=ge("H",e.xPos+e.width)+ge("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let o=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let o=e.xPos+e.statementEdge+t.notchOffset;o=this.info_.RTL?-1*o:o+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(o,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let o=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,o=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},Om=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=ht(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,o=(1-Math.SQRT1_2)*(e+t)-t,n=ht(o,o)+Rt("a","0 0,0",e,Te(-o-t,e-o)),a=Rt("a","0 0,0",e+t,Te(e+t,e+t)),p=ht(o,-o)+Rt("a","0 0,0",e+t,Te(e-o,o+t));return{width:e+t,height:e,pathTop(T){return T?n:""},pathBottom(T){return T?a:p}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,o=(1-Math.SQRT1_2)*(e-t)+t,n=ht(o,o)+Rt("a","0 0,1",e-t,Te(e-o,-o+t)),a=ht(t,e)+Rt("a","0 0,1",e-t,Te(e,-e+t)),p=-o,T=ht(o,p)+Rt("a","0 0,1",e-t,Te(-o+t,-p-e));return{height:e,topLeft(S){return S?n:a},bottomLeft(){return T}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,o=ht(-2,-t+3.4)+Do(-.45*e,-2.1),n=ge("v",2.5)+ht(.97*-e,2.5)+Ss("q",[Te(.05*-e,10),Te(.3*e,9.5)])+ht(.67*e,-1.9)+ge("v",2.5),a=ge("v",-1.5)+ht(-.92*e,-.5)+Ss("q",[Te(-.19*e,-5.5),Te(0,-11)])+ht(.92*e,1),p=ht(-5,t-.7)+Do(.46*e,-2.1);return{width:e,height:t,pathUp(T){return T?o:a},pathDown(T){return T?n:p}}}makeNotch(){return{pathLeft:ge("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Do(5.1,2.6)+ht(-10.2,6.8)+Do(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=ht(25,-8.7)+Ss("c",[Te(29.7,-6.2),Te(57.2,-.5),Te(75,8.7)]),o=Ss("c",[Te(17.8,-9.2),Te(45.3,-14.9),Te(75,-8.7)])+qt(100.5,e+.5);return{path(n){return n?t:o}}}},wm=class extends Fh{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},Am=class extends nl{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},Lm=class extends Wn{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===xe.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e.type===xe.VALUE?(t.elements.push(new wm(this.constants_,e)),t.hasInlineInput=!0):e.type===xe.STATEMENT?(t.elements.push(new Am(this.constants_,e)),t.hasStatement=!0):e.type===xe.VALUE?(t.elements.push(new Kc(this.constants_,e)),t.hasExternalInput=!0):e.type===xe.DUMMY&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||t.align!==null||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let o=0,n;n=this.rows[o];o++)n.hasExternalInput&&(e=!0);for(let o=0,n;n=this.rows[o];o++){var t=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new ks(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let a=0;a<t.length-1;a++){n.elements.push(t[a]);const p=this.getInRowSpacing_(t[a],t[a+1]);n.elements.push(new ks(this.constants_,p))}n.elements.push(t[t.length-1]),n.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&n.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),n.elements.push(new ks(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&k.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&k.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&k.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!k.isInput(e)&&(!t||k.isStatementInput(t)))return k.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:k.isIcon(e)?2*this.constants_.LARGE_PADDING+1:k.isHat(e)?this.constants_.NO_PADDING:k.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:k.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:k.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(k.isInput(e)&&!t){if(k.isExternalInput(e))return this.constants_.NO_PADDING;if(k.isInlineInput(e))return this.constants_.LARGE_PADDING;if(k.isStatementInput(e))return this.constants_.NO_PADDING}if(!k.isInput(e)&&t&&k.isInput(t)){if(k.isField(e)&&e.isEditable){if(k.isInlineInput(t)||k.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(k.isInlineInput(t)||k.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(k.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(k.isIcon(e)&&t&&!k.isInput(t))return this.constants_.LARGE_PADDING;if(k.isInlineInput(e)&&t&&k.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(k.isLeftSquareCorner(e)&&t){if(k.isHat(t))return this.constants_.NO_PADDING;if(k.isPreviousConnection(t))return t.notchOffset;if(k.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(k.isLeftRoundedCorner(e)&&t){if(k.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(k.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return k.isField(e)&&t&&k.isField(t)&&e.isEditable===t.isEditable||t&&k.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return k.isTopRow(e)&&k.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:k.isTopRow(e)||k.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(k.isSpacer(t))return e.yPos+t.height/2;if(k.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,k.isNextConnection(t)?e+t.height/2:e-t.height/2;if(k.isTopRow(e))return k.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let o=e.yPos;return k.isField(t)||k.isIcon(t)?(o+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=k.isInlineInput(t)?o+t.height/2:o+e.height/2,o}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,o=null;for(let n=this.rows.length-1,a;a=this.rows[n];n--)t.set(a,e),k.isInputRow(a)&&(a.hasStatement&&this.alignStatementRow_(a),o&&o.hasStatement&&a.width<o.width?t.set(a,o.width):e=a.width,o=a);e=0;for(let n=0,a;a=this.rows[n];n++)a.hasStatement?e=this.getDesiredRowWidth_(a):k.isSpacer(a)?a.width=Math.max(e,t.get(a)):(o=a.width,e=Math.max(e,t.get(a))-o,0<e&&this.addAlignmentPadding_(a,e),e=a.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let n=0,a;a=this.rows[n];n++){a.yPos=t,a.xPos=this.startX,t+=a.height,e=Math.max(e,a.widthWithConnectedBlocks);var o=t-this.topRow.ascenderHeight;a===this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,t+=o),this.recordElemPositions_(a)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,o.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},Nm=class extends Jc{constructor(e,t,o){super(e,t,o),this.constants=o,this.colourDark="#000000",this.svgPathDark=A(w.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=A(w.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=fn("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},Dm=class extends ul{constructor(e){super(e),this.highlightConstants_=null}init(e,t){super.init(e,t),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()}refreshDom(e,t){super.refreshDom(e,t),this.getHighlightConstants().init()}makeConstants_(){return new Rm}makeRenderInfo_(e){return new Lm(this,e)}makeDrawer_(e,t){return new km(e,t)}makePathObject(e,t){return new Nm(e,t,this.getConstants())}makeHighlightConstants_(){return new Om(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants_)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants_}};yr("geras",Dm);var ko={};ko.ConstantProvider=Rm,ko.Drawer=km,ko.HighlightConstantProvider=Om,ko.Highlighter=Cm,ko.InlineInput=wm,ko.PathObject=Nm,ko.RenderInfo=Lm,ko.Renderer=Dm,ko.StatementInput=Am;var Mm=class{constructor(e){this.container=e,this.previousSibling=null,this.createDom()}createDom(){this.SVG||(this.SVG=A(w.SVG,{xmlns:En,"xmlns:html":to,"xmlns:xlink":fs,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"}),this.container.appendChild(this.SVG))}translateSurface(e,t){e=Math.round(e),t=Math.round(t),this.SVG.style.display="block",Kt(this.SVG,"translate3d("+e+"px, "+t+"px, 0)")}getSurfaceTranslation(){return Zs(this.SVG)}clearAndHide(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");const t=this.SVG.childNodes[0],o=this.SVG.childNodes[1];if(!t||!o||!t.classList.contains("blocklyBlockCanvas")&&o.classList.contains("blocklyBubbleCanvas"))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(this.previousSibling!==null?St(t,this.previousSibling):e.insertBefore(t,e.firstChild),St(o,t),this.SVG.style.display="none",this.SVG.childNodes.length)throw Error("Drag surface was not cleared.");Kt(this.SVG,""),this.previousSibling=null}setContentsAndShow(e,t,o,n,a,p){if(this.SVG.childNodes.length)throw Error("Already dragging a block.");this.previousSibling=o,e.setAttribute("transform","translate(0, 0) scale("+p+")"),t.setAttribute("transform","translate(0, 0) scale("+p+")"),this.SVG.setAttribute("width",String(n)),this.SVG.setAttribute("height",String(a)),this.SVG.appendChild(e),this.SVG.appendChild(t),this.SVG.style.display="block"}},xm=class{constructor(e){this.container=e,this.scale=1,this.surfaceXY=new ae(0,0),this.childSurfaceXY=new ae(0,0),this.svg=A(w.SVG,{xmlns:En,"xmlns:html":to,"xmlns:xlink":fs,version:"1.1",class:"blocklyBlockDragSurface"},this.container),this.dragGroup=A(w.G,{},this.svg)}createDom(){H("BlockDragSurfaceSvg createDom","June 2022","June 2023")}setBlocksAndShow(e){if(this.dragGroup.childNodes.length)throw Error("Already dragging a block.");this.dragGroup.appendChild(e),this.svg.style.display="block",this.surfaceXY=new ae(0,0)}translateAndScaleGroup(e,t,o){this.scale=o,e=Math.round(e),t=Math.round(t),this.childSurfaceXY.x=e,this.childSurfaceXY.y=t,this.dragGroup.setAttribute("transform","translate("+e+","+t+") scale("+o+")")}translateSurfaceInternal_(){const e=Math.round(this.surfaceXY.x),t=Math.round(this.surfaceXY.y);this.svg.style.display="block",Kt(this.svg,"translate3d("+e+"px, "+t+"px, 0)")}translateBy(e,t){this.surfaceXY=new ae(this.surfaceXY.x+e,this.surfaceXY.y+t),this.translateSurfaceInternal_()}translateSurface(e,t){this.surfaceXY=new ae(e*this.scale,t*this.scale),this.translateSurfaceInternal_()}getSurfaceTranslation(){const e=Zs(this.svg);return new ae(e.x/this.scale,e.y/this.scale)}getGroup(){return this.dragGroup}getSvgRoot(){return this.svg}getCurrentBlock(){return this.dragGroup.firstChild}getWsTranslation(){return this.childSurfaceXY.clone()}clearAndHide(e){const t=this.getCurrentBlock();if(t&&(e?e.appendChild(t):this.dragGroup.removeChild(t)),this.svg.style.display="none",this.dragGroup.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY=new ae(0,0)}},qc={};qc.bumpIntoBounds=vc,qc.bumpIntoBoundsHandler=dg,qc.bumpTopObjectsIntoBounds=Gu;var Kh=class{constructor(e,t,o,n,a){this.workspace=e,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,t=t===void 0?!0:t,o=o===void 0?!0:o;const p=t&&o;t&&(this.hScroll=new mt(e,!0,p,n,a)),o&&(this.vScroll=new mt(e,!1,p,n,a)),p&&(this.corner_=A(w.RECT,{height:mt.scrollbarThickness,width:mt.scrollbarThickness,class:"blocklyScrollbarBackground"}),St(this.corner_,e.getBubbleCanvas()))}dispose(){be(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===e.viewWidth&&this.oldHostMetrics_.viewHeight===e.viewHeight&&this.oldHostMetrics_.absoluteTop===e.absoluteTop&&this.oldHostMetrics_.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===e.scrollWidth&&this.oldHostMetrics_.viewLeft===e.viewLeft&&this.oldHostMetrics_.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===e.scrollHeight&&this.oldHostMetrics_.viewTop===e.viewTop&&this.oldHostMetrics_.scrollTop===e.scrollTop||(o=!0)):o=t=!0,t||o){try{At(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&o&&this.vScroll.resize(e)}finally{Lt()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==e.viewWidth||this.oldHostMetrics_.absoluteLeft!==e.absoluteLeft){let n;(n=this.corner_)==null||n.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==e.viewHeight||this.oldHostMetrics_.absoluteTop!==e.absoluteTop){let n;(n=this.corner_)==null||n.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,o){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(o||o===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},Bm=!1;i.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=V());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let o=0,n;n=e[o];o++){let a=this.blockToCode(n);Array.isArray(a)&&(a=a[0]),a&&(n.outputConnection&&(a=this.scrubNakedValue(a),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(a=this.injectId(this.STATEMENT_PREFIX,n)+a),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(a+=this.injectId(this.STATEMENT_SUFFIX,n))),t.push(a))}return t=t.join(`
`),t=this.finish(t),t=t.replace(/^\s+\n/,""),t=t.replace(/\n\s+$/,`
`),t=t.replace(/[ \t]+\n/g,`
`)}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,`
`+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let o=0;o<e.length;o++){const n=e[o].getCommentText();n&&t.push(n)}return t.length&&t.push(""),t.join(`
`)}blockToCode(e,t){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var o=this[e.type];if(typeof o!="function")throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+e.type+'".');if(o=o.call(e,e),Array.isArray(o)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,o[0],t),o[1]]}if(typeof o=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,e)+o),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,o,t);if(o===null)return"";throw SyntaxError("Invalid code generated: "+o)}valueToCode(e,t,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+e.type);var n=e.getInputTargetBlock(t);if(!n||(t=this.blockToCode(n),t===""))return"";if(!Array.isArray(t))throw TypeError("Expecting tuple from value block: "+n.type);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+n.type);if(!e)return"";n=!1;var a=Math.floor(o);const p=Math.floor(t);if(a<=p&&(a!==p||a!==0&&a!==99)){for(n=!0,a=0;a<this.ORDER_OVERRIDES.length;a++)if(this.ORDER_OVERRIDES[a][0]===o&&this.ORDER_OVERRIDES[a][1]===t){n=!1;break}}return n&&(e="("+e+")"),e}statementToCode(e,t){if(e=e.getInputTargetBlock(t),t=this.blockToCode(e),typeof t!="string")throw TypeError("Expecting code from statement block: "+(e&&e.type));return t&&(t=this.prefixLines(t,this.INDENT)),t}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const o=this.nameDB_.getDistinctName(e,i.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=o,Array.isArray(t)&&(t=t.join(`
`)),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);let n;for(;n!==t;)n=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,o){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},Object.defineProperties(i.CodeGenerator$$module$build$src$core$generator.prototype,{variableDB_:{get(){return H("variableDB_","version 9","version 10","nameDB_"),this.nameDB_},set(e){H("variableDB_","version 9","version 10","nameDB_"),this.nameDB_=e}}}),i.CodeGenerator$$module$build$src$core$generator;var jn=class{constructor(e,t,o,n){this.workspace=e,this.targetWorkspace=t,this.isLabel_=n,this.onMouseUpWrapper_=null,this.height=this.width=0,this.svgText_=this.svgGroup_=null,this.text_=o.text,this.position_=new ae(0,0),this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.info=o}createDom(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=A(w.G,{class:e},this.workspace.getCanvas());let t;this.isLabel_||(t=A(w.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),e=A(w.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);const o=A(w.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);var n=$t(this.text_);this.workspace.RTL&&(n+="\u200F"),o.textContent=n,this.isLabel_&&(this.svgText_=o,this.workspace.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));const a=_e(o,"fontSize"),p=_e(o,"fontWeight"),T=_e(o,"fontFamily");if(this.width=U(o,a,p,T),n=K(n,a,p,T),this.height=n.height,!this.isLabel_){this.width+=2*jn.TEXT_MARGIN_X,this.height+=2*jn.TEXT_MARGIN_Y;let S;(S=t)==null||S.setAttribute("width",this.width.toString());let P;(P=t)==null||P.setAttribute("height",this.height.toString())}return e.setAttribute("width",this.width.toString()),e.setAttribute("height",this.height.toString()),o.setAttribute("x",(this.width/2).toString()),o.setAttribute("y",(this.height/2-n.height/2+n.baseline).toString()),this.updateTransform_(),this.onMouseUpWrapper_=E(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_}show(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")}updateTransform_(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")}moveTo(e,t){this.position_.x=e,this.position_.y=t,this.updateTransform_()}isLabel(){return this.isLabel_}getPosition(){return this.position_}getButtonText(){return this.text_}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper_&&y(this.onMouseUpWrapper_),this.svgGroup_&&be(this.svgGroup_),this.svgText_&&this.workspace.getThemeManager().unsubscribe(this.svgText_)}onMouseUp_(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace.getButtonCallback(this.callbackKey_)?this.isLabel_||(e=this.targetWorkspace.getButtonCallback(this.callbackKey_))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)}};jn.TEXT_MARGIN_X=5,jn.TEXT_MARGIN_Y=2,qs(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var Jh=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,o=0;return e&&(t=e.getWidth(),o=e.getHeight()),new Gt(t,o)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0;const t=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),n=!!this.workspace_.getToolbox(),a=!!this.workspace_.getFlyout(!0);var p=n?t.position:o.position,T=p===De.LEFT;return p=p===De.TOP,n&&T?e=t.width:a&&T&&(e=o.width),T=0,n&&p?T=t.height:a&&p&&(T=o.height),{top:T,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),o=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),a=this.workspace_.getToolbox()?o.position:n.position;return this.workspace_.getToolbox()?a===De.TOP||a===De.BOTTOM?t.height-=o.height:(a===De.LEFT||a===De.RIGHT)&&(t.width-=o.width):this.workspace_.getFlyout(!0)&&(a===De.TOP||a===De.BOTTOM?t.height-=n.height:(a===De.LEFT||a===De.RIGHT)&&(t.width-=n.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const n={};return o||(n.top=e.top,n.bottom=e.top+e.height),t||(n.left=e.left,n.right=e.left+e.width),n}getPaddedContent_(e,t){const o=t.top+t.height,n=t.left+t.width,a=e.width;e=e.height;const p=a/2,T=e/2;return{top:Math.min(t.top-T,o-e),bottom:Math.max(o+T,t.top+e),left:Math.min(t.left-p,n-a),right:Math.max(n+p,t.left+a)}}getScrollMetrics(e,t,o){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var n=o||this.getContentMetrics();o=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,n),n=o.top!==void 0?o.top:t.top;const a=o.left!==void 0?o.left:t.left;return{top:n/e,left:a/e,width:((o.right!==void 0?o.right:t.right)-a)/e,height:((o.bottom!==void 0?o.bottom:t.bottom)-n)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),n=this.getAbsoluteMetrics(),a=this.getViewMetrics(),p=this.getContentMetrics(),T=this.getScrollMetrics(!1,a,p);return{contentHeight:p.height,contentWidth:p.width,contentTop:p.top,contentLeft:p.left,scrollHeight:T.height,scrollWidth:T.width,scrollTop:T.top,scrollLeft:T.left,viewHeight:a.height,viewWidth:a.width,viewTop:a.top,viewLeft:a.left,absoluteTop:n.top,absoluteLeft:n.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};We(se.METRICS_MANAGER,Po,Jh);var Pm=class extends Jh{constructor(e,t){super(e),this.flyout_=t}getBoundingBox_(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox_();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,o){return t=o||this.getContentMetrics(),o=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*o)/e,width:(t.width+t.left+o)/e,top:0,left:0}}},Xn;(function(e){e.BLOCK="block",e.BUTTON="button"})(Xn||(Xn={}));var Zc=class extends jc{constructor(e){super(),this.horizontalLayout=!1,this.eventWrappers_=[],this.filterWrapper_=this.reflowWrapper_=null,this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.recycledBlocks_=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible_=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new uo(e),this.workspace_.setMetricsManager(new Pm(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=Ks(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=A(e,{class:"blocklyFlyout",style:"display: none"}),this.svgBackground_=A(w.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Kh(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,E(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,E(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ut.Capability.DELETE_AREA,Ut.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),y(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&(be(this.svgGroup_),this.svgGroup_=null),this.svgBackground_=null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}isVisible(){return this.isVisible_}setVisible(e){const t=e!==this.isVisible();this.isVisible_=e,t&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())}setContainerVisible(e){const t=e!==this.containerVisible_;this.containerVisible_=e,t&&this.updateDisplay_()}updateDisplay_(){let e;e=this.containerVisible_?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let t;(t=this.workspace_.scrollbar)==null||t.setContainerVisible(e)}positionAt_(e,t,o,n){let a;(a=this.svgGroup_)==null||a.setAttribute("width",e.toString());let p;(p=this.svgGroup_)==null||p.setAttribute("height",t.toString()),this.workspace_.setCachedParentSvgSize(e,t);let T;if(((T=this.svgGroup_)==null?void 0:T.tagName)==="svg")Kt(this.svgGroup_,"translate("+o+"px,"+n+"px)");else{let S;(S=this.svgGroup_)==null||S.setAttribute("transform","translate("+o+","+n+")")}(e=this.workspace_.scrollbar)&&(e.setOrigin(o,n),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(let e=0,t;t=this.listeners_[e];e++)y(t);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),typeof e=="string"&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=_c(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(E(this.svgBackground_,"mouseover",this,function(){const t=this.workspace_.getTopBlocks(!1);for(let o=0,n;n=t[o];o++)n.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()}createFlyoutInfo_(e){const t=[],o=[];this.permanentlyDisabled_.length=0;const n=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(let p=0,T;T=e[p];p++){if("custom"in T){var a=this.getDynamicCategoryContents_(T.custom);a=_c(a),e.splice.apply(e,[p,1,...a]),T=e[p]}switch(T.kind.toUpperCase()){case"BLOCK":a=T;const S=this.createFlyoutBlock_(a);t.push({type:Xn.BLOCK,block:S}),this.addBlockGap_(a,o,n);break;case"SEP":this.addSeparatorGap_(T,o,n);break;case"LABEL":a=this.createButton_(T,!0),t.push({type:Xn.BUTTON,button:a}),o.push(n);break;case"BUTTON":a=this.createButton_(T,!1),t.push({type:Xn.BUTTON,button:a}),o.push(n)}}return{contents:t,gaps:o}}getDynamicCategoryContents_(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton_(e,t){return new jn(this.workspace_,this.targetWorkspace,e,t)}createFlyoutBlock_(e){let t;return e.blockxml?(e=typeof e.blockxml=="string"?eo(e.blockxml):e.blockxml,(t=this.getRecycledBlock_(e.getAttribute("type")))||(t=gn(e,this.workspace_))):(t=this.getRecycledBlock_(e.type),t||(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),t=Li(e,this.workspace_))),t.isEnabled()||this.permanentlyDisabled_.push(t),t}getRecycledBlock_(e){let t=-1;for(let o=0;o<this.recycledBlocks_.length;o++)if(this.recycledBlocks_[o].type===e){t=o;break}return t===-1?void 0:this.recycledBlocks_.splice(t,1)[0]}addBlockGap_(e,t,o){let n;e.gap?n=parseInt(e.gap.toString()):e.blockxml&&(e=typeof e.blockxml=="string"?eo(e.blockxml):e.blockxml,n=parseInt(e.getAttribute("gap"))),t.push(!n||isNaN(n)?o:n)}addSeparatorGap_(e,t,o){e=parseInt(e.gap.toString()),!isNaN(e)&&0<t.length?t[t.length-1]=e:t.push(o)}clearOldBlocks_(){var e=this.workspace_.getTopBlocks(!1);for(let o=0,n;n=e[o];o++)this.blockIsRecyclable_(n)?this.recycleBlock_(n):n.dispose(!1,!1);for(e=0;e<this.mats_.length;e++){const o=this.mats_[e];o&&(uc(o),be(o))}this.mats_.length=0;for(let o=0,n;n=this.buttons_[o];o++)n.dispose();this.buttons_.length=0;let t;(t=this.workspace_.getPotentialVariableMap())==null||t.clear()}emptyRecycledBlocks_(){for(let e=0;e<this.recycledBlocks_.length;e++)this.recycledBlocks_[e].dispose();this.recycledBlocks_=[]}blockIsRecyclable_(e){return!1}recycleBlock_(e){const t=e.getRelativeToSurfaceXY();e.moveBy(-t.x,-t.y),this.recycledBlocks_.push(e)}addBlockListeners_(e,t,o){this.listeners_.push(E(e,"mousedown",null,this.blockMouseDown_(t))),this.listeners_.push(E(o,"mousedown",null,this.blockMouseDown_(t))),this.listeners_.push(I(e,"mouseenter",t,t.addSelect)),this.listeners_.push(I(e,"mouseleave",t,t.removeSelect)),this.listeners_.push(I(o,"mouseenter",t,t.addSelect)),this.listeners_.push(I(o,"mouseleave",t,t.removeSelect))}blockMouseDown_(e){return t=>{const o=this.targetWorkspace.getGesture(t);o&&(o.setStartBlock(e),o.handleFlyoutStart(t,this))}}onMouseDown_(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let t=null;At();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock_(e)}finally{Lt()}if(this.targetWorkspace.hideChaff(),e=du(this.targetWorkspace,o),xt()){for(ve(!0),o=0;o<e.length;o++){const n=e[o];Re(new(Ce(Bi))(n))}Re(new(Ce(Wt))(t))}return this.autoClose?this.hide():this.filterForCapacity_(),t}initFlyoutButton_(e,t,o){const n=e.createDom();e.moveTo(t,o),e.show(),this.listeners_.push(E(n,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)}createRect_(e,t,o,n,a){return t=A(w.RECT,{"fill-opacity":0,x:t,y:o,height:n.height,width:n.width}),t.tooltip=e,ac(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),this.rectMap_.set(e,t),this.mats_[a]=t}moveRectToBlock_(e,t){const o=t.getHeightWidth();e.setAttribute("width",o.width.toString()),e.setAttribute("height",o.height.toString()),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",t.y.toString()),e.setAttribute("x",(this.RTL?t.x-o.width:t.x).toString())}filterForCapacity_(){const e=this.workspace_.getTopBlocks(!1);for(let t=0,o;o=e[t];t++)if(this.permanentlyDisabled_.indexOf(o)===-1){const n=this.targetWorkspace.isCapacityAvailable(Ae(o));for(;o;)o.setEnabled(n),o=o.getNextBlock()}}reflow(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock_(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");const o=Mo(e);return t.setResizesEnabled(!1),t=Li(o,t),this.positionNewBlock_(e,t),t}positionNewBlock_(e,t){const o=this.targetWorkspace;var n=o.getOriginOffsetInPixels(),a=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),a=ae.sum(a,e),n=ae.difference(a,n),n.scale(1/o.scale),t.moveTo(new ae(n.x,n.y))}};Zc.FlyoutItemType=Xn;var qh=class extends Zc{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),o=t.getScrollMetrics(),n=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(o.top+(o.height-n.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),o=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===De.LEFT?e.width:o.width-this.width_:this.toolboxPosition_===De.LEFT?0:o.width:this.toolboxPosition_===De.LEFT?0:o.width+t.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath_(e,t){const o=this.toolboxPosition_===De.RIGHT;var n=e+this.CORNER_RADIUS;n=["M "+(o?n:0)+",0"],n.push("h",o?-e:e),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("v",Math.max(0,t)),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("h",o?e:-e),n.push("z"),this.svgBackground_.setAttribute("d",n.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var t=R(e);if(t.y){const o=this.workspace_.getMetricsManager(),n=o.getScrollMetrics();t=o.getViewMetrics().top-n.top+t.y;let a;(a=this.workspace_.scrollbar)==null||a.setY(t),To(),$o()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN;const n=this.RTL?o:o+this.tabWidth_;for(let S=0,P;P=e[S];S++)if(P.type==="block"){var a=P.block,p=a.getDescendants(!1);for(let Ge=0,ze;ze=p[Ge];Ge++)ze.isInFlyout=!0;a.render(),p=a.getSvgRoot();const te=a.getHeightWidth();var T=a.outputConnection?n-this.tabWidth_:n;a.moveBy(T,o),T=this.createRect_(a,this.RTL?T-te.width:T,o,te,S),this.addBlockListeners_(p,a,T),o+=te.height+t[S]}else P.type==="button"&&(a=P.button,this.initFlyoutButton_(a,n,o),o+=a.height+t[S])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===De.LEFT?new Tt(-1e9,1e9,-1e9,t+e.width):new Tt(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var t=this.workspace_.getTopBlocks(!1);for(let n=0,a;a=t[n];n++){var o=a.getHeightWidth().width;a.outputConnection&&(o-=this.tabWidth_),e=Math.max(e,o)}for(let n=0,a;a=this.buttons_[n];n++)e=Math.max(e,a.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=mt.scrollbarThickness,this.width_!==e){for(let n=0,a;a=t[n];n++){if(this.RTL){o=a.getRelativeToSurfaceXY().x;let p=e/this.workspace_.scale-this.MARGIN;a.outputConnection||(p-=this.tabWidth_),a.moveBy(p-o,0)}this.rectMap_.has(a)&&this.moveRectToBlock_(this.rectMap_.get(a),a)}if(this.RTL)for(let n=0,a;a=this.buttons_[n];n++)t=a.getPosition().y,a.moveTo(e/this.workspace_.scale-a.width-this.MARGIN-this.tabWidth_,t);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==De.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.recordDragTargets()}}};qh.registryName="verticalFlyout",We(se.FLYOUTS_VERTICAL_TOOLBOX,Po,qh);var Fm=class extends Zc{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),o=t.getScrollMetrics(),n=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(o.left+(o.width-n.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),o=e.getViewMetrics();e=e.getToolboxMetrics();const n=this.toolboxPosition_===De.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?n?e.height:o.height-this.height_:n?0:o.height:n?0:o.height+t.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath_(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath_(e,t){const o=this.toolboxPosition_===De.TOP,n=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(n.push("h",e+2*this.CORNER_RADIUS),n.push("v",t),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("h",-e),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),n.push("h",e),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("v",t),n.push("h",-e-2*this.CORNER_RADIUS)),n.push("z"),this.svgBackground_.setAttribute("d",n.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var t=R(e);if(t=t.x||t.y){const o=this.workspace_.getMetricsManager(),n=o.getScrollMetrics();t=o.getViewMetrics().left-n.left+t;let a;(a=this.workspace_.scrollbar)==null||a.setX(t),To(),$o()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;const o=this.MARGIN;let n=o+this.tabWidth_;this.RTL&&(e=e.reverse());for(let S=0,P;P=e[S];S++)if(P.type==="block"){var a=P.block,p=a.getDescendants(!1);for(let Ge=0,ze;ze=p[Ge];Ge++)ze.isInFlyout=!0;a.render(),p=a.getSvgRoot();const te=a.getHeightWidth();var T=a.outputConnection?this.tabWidth_:0;T=this.RTL?n+te.width:n-T,a.moveBy(T,o),T=this.createRect_(a,T,o,te,S),n+=te.width+t[S],this.addBlockListeners_(p,a,T)}else P.type==="button"&&(a=P.button,this.initFlyoutButton_(a,n,o),n+=a.width+t[S])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===De.TOP?new Tt(-1e9,t+e.height,-1e9,1e9):new Tt(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const t=this.workspace_.getTopBlocks(!1);for(let n=0,a;a=t[n];n++)e=Math.max(e,a.getHeightWidth().height);const o=this.buttons_;for(let n=0,a;a=o[n];n++)e=Math.max(e,a.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=mt.scrollbarThickness,this.height_!==e){for(let n=0,a;a=t[n];n++)this.rectMap_.has(a)&&this.moveRectToBlock_(this.rectMap_.get(a),a);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==De.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.recordDragTargets()}}};We(se.FLYOUTS_HORIZONTAL_TOOLBOX,Po,Fm);var dl=class extends lo{constructor(e,t,o,n,a){super(je.SKIP_SETUP),this.defaultType_="",this.variableTypes=[],this.variable_=null,this.SERIALIZABLE=!0,this.menuGenerator_=dl.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new Gt(0,0),e!==je.SKIP_SETUP&&(a?this.configure_(a):this.setTypes_(o,n),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes_(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new Ot;this.variable_||(e=ic(e.workspace,null,this.defaultVariableName,this.defaultType_),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new Ot;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var t=this.getSourceBlock();if(!t)throw new Ot;const o=e.getAttribute("id"),n=e.textContent,a=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=ic(t.workspace,o,n,a),a!==null&&a!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+Qs(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e}saveState(e){var t=this.saveLegacyState(dl);return t!==null||(this.initModel(),t={id:this.variable_.getId()},e&&(t.name=this.variable_.name,t.type=this.variable_.type)),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new Ot;this.loadLegacyState(dl,e)||(e=ic(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable_?this.variable_.getId():null}getText(){return this.variable_?this.variable_.name:""}getVariable(){return this.variable_}getValidator(){return this.variable_?this.validator_:null}doClassValidation_(e){if(e===null)return null;var t=this.getSourceBlock();if(!t)throw new Ot;return t=nc(t.workspace,e),t?(t=t.type,this.typeIsAllowed_(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new Ot;this.variable_=nc(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed_(e){const t=this.getVariableTypes_();if(!t)return!0;for(let o=0;o<t.length;o++)if(e===t[o])return!0;return!1}getVariableTypes_(){var e=this.variableTypes;if(e===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(e=e||[""],e.length===0)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes_(e,t){if(t=t||"",e==null)e=null;else if(Array.isArray(e)){let o=!1;for(let n=0;n<e.length;n++)e[n]===t&&(o=!0);if(!o)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType_=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===Rh){e_(this.sourceBlock_.workspace,this.variable_);return}if(e===Ch){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this($t(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var o=this.getVariableTypes_(),n=0;n<o.length;n++){const a=this.sourceBlock_.workspace.getVariablesOfType(o[n]);t=t.concat(a)}for(t.sort(xr.compareByName),o=[],n=0;n<t.length;n++)o[n]=[t[n].name,t[n].getId()];return o.push([Ne.RENAME_VARIABLE,Rh]),Ne.DELETE_VARIABLE&&o.push([Ne.DELETE_VARIABLE.replace("%1",e),Ch]),o}};Bs("field_variable",dl);var Zh=class extends i.FieldTextInput$$module$build$src$core$field_textinput{constructor(e,t,o,n,a,p){super(je.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,this.SERIALIZABLE=!0,e!==je.SKIP_SETUP&&(p?this.configure_(p):this.setConstraints(t,o,n),this.setValue(e),a&&this.setValidator(a))}configure_(e){super.configure_(e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)}setConstraints(e,t,o){this.setMinInternal_(e),this.setMaxInternal_(t),this.setPrecisionInternal_(o),this.setValue(this.getValue())}setMin(e){this.setMinInternal_(e),this.setValue(this.getValue())}setMinInternal_(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal_(e),this.setValue(this.getValue())}setMaxInternal_(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal_(e),this.setValue(this.getValue())}setPrecisionInternal_(e){this.precision_=Number(e)||0;let t=String(this.precision_);t.indexOf("e")!==-1&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const o=t.indexOf(".");this.decimalPlaces_=o===-1?e?0:null:t.length-o-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=String(e),e=e.replace(/O/ig,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces_!==null&&(e=Number(e.toFixed(this.decimalPlaces_))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&ft(e,ct.VALUEMIN,this.min_),1/0>this.max_&&ft(e,ct.VALUEMAX,this.max_),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};Bs("field_number",Zh),Zh.prototype.DEFAULT_VALUE=0;var Qh=class extends i.FieldTextInput$$module$build$src$core$field_textinput{constructor(e,t,o){super(je.SKIP_SETUP),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1,e!==je.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.maxLines&&this.setMaxLines(e.maxLines)}toXml(e){return e.textContent=this.getValue().replace(/\n/g,"&#10;"),e}fromXml(e){this.setValue(e.textContent.replace(/&#10;/g,`
`))}saveState(){const e=this.saveLegacyState(Qh);return e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(je,e)||this.setValue(e)}initView(){this.createBorderRect_(),this.textGroup_=A(w.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const e=this.getSourceBlock();if(!e)throw new Ot;let t=this.getText();if(!t)return je.NBSP;const o=t.split(`
`);t="";const n=this.isOverflowedY_?this.maxLines_:o.length;for(let a=0;a<n;a++){let p=o[a];p.length>this.maxDisplayLength?p=p.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&a===n-1&&(p=p.substring(0,p.length-3)+"..."),p=p.replace(/\s/g,je.NBSP),t+=p,a!==n-1&&(t+=`
`)}return e.RTL&&(t+="\u200F"),t}doValueUpdate_(e){super.doValueUpdate_(e),this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_}render_(){var e=this.getSourceBlock();if(!e)throw new Ot;for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split(`
`);let o=0;for(let n=0;n<t.length;n++){const a=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;A(w.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:o+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[n])),o+=a}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?oe(t,"blocklyHtmlTextAreaInputOverflowedY"):Pe(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(e.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(Pe(e,"blocklyInvalidInput"),ft(e,ct.INVALID,!1)):(oe(e,"blocklyInvalidInput"),ft(e,ct.INVALID,!0)))}updateSize_(){var e=this.textGroup_.childNodes;const t=this.getConstants().FIELD_TEXT_FONTSIZE,o=this.getConstants().FIELD_TEXT_FONTWEIGHT,n=this.getConstants().FIELD_TEXT_FONTFAMILY;let a=0,p=0;for(var T=0;T<e.length;T++){var S=L(e[T],t,o,n);S>a&&(a=S),p+=this.getConstants().FIELD_TEXT_HEIGHT+(0<T?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(e=this.value_.split(`
`),T=A(w.TEXT,{class:"blocklyText blocklyMultilineText"}),S=0;S<e.length;S++){e[S].length>this.maxDisplayLength&&(e[S]=e[S].substring(0,this.maxDisplayLength)),T.textContent=e[S];const P=L(T,t,o,n);P>a&&(a=P)}a+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(p+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,a+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",a),this.borderRect_.setAttribute("height",p)),this.size_.width=a,this.size_.height=p,this.positionBorderRect_()}showEditor_(e,t){super.showEditor_(e,t),this.forceRerender()}widgetCreate_(){const e=$n(),t=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var n=this.getConstants().FIELD_TEXT_FONTSIZE*t+"pt";e.style.fontSize=n,o.style.fontSize=n,o.style.borderRadius=i.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*t+"px",n=this.getConstants().FIELD_BORDER_RECT_X_PADDING*t;const a=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*t/2;return o.style.padding=a+"px "+n+"px "+a+"px "+n+"px",n=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=n*t+"px",e.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.setAttribute("data-untyped-default-value",this.value_),o.setAttribute("data-old-value",""),Wu?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o}setMaxLines(e){typeof e=="number"&&0<e&&e!==this.maxLines_&&(this.maxLines_=e,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(e){e.keyCode!==me.ENTER&&super.onHtmlInputKeyDown_(e)}static fromJson(e){return new this($t(e.text),void 0,e)}};qs(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`),Bs("field_multilinetext",Qh);var Gm=class extends i.FieldLabel$$module$build$src$core$field_label{constructor(e,t,o){super(String(e!=null?e:""),t,o),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this($t(e.text),void 0,e)}};Bs("field_label_serializable",Gm);var As=class extends je{constructor(e,t,o){super(je.SKIP_SETUP),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles_=this.colours_=null,this.columns_=0,e!==je.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.colourOptions&&(this.colours_=e.colourOptions),e.colourTitles&&(this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)}initView(){this.size_=new Gt(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof Fs&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()):(this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1")}applyColour(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof Fs&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())}doClassValidation_(e){return typeof e!="string"?null:Ai(e)}doValueUpdate_(e){this.value_=e,this.borderRect_?this.borderRect_.style.fill=e:this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_ instanceof Fs&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))}getText(){let e=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]),e}setColours(e,t){return this.colours_=e,t&&(this.titles_=t),this}setColumns(e){return this.columns_=e,this}showEditor_(){this.dropdownCreate_(),No().appendChild(this.picker_),v(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})}onClick_(e){e=(e=e.target)&&e.getAttribute("data-colour"),e!==null&&(this.setValue(e),fr(this))}onKeyDown_(e){var t=!1;e.keyCode===me.UP?(this.moveHighlightBy_(0,-1),t=!0):e.keyCode===me.DOWN?(this.moveHighlightBy_(0,1),t=!0):e.keyCode===me.LEFT?(this.moveHighlightBy_(-1,0),t=!0):e.keyCode===me.RIGHT?(this.moveHighlightBy_(1,0),t=!0):e.keyCode===me.ENTER&&((t=this.getHighlighted_())&&(t=t&&t.getAttribute("data-colour"),t!==null&&this.setValue(t)),$o(),t=!0),t&&e.stopPropagation()}moveHighlightBy_(e,t){if(this.highlightedIndex_){var o=this.colours_||As.COLOURS,n=this.columns_||As.COLUMNS,a=this.highlightedIndex_%n,p=Math.floor(this.highlightedIndex_/n);a+=e,p+=t,0>e?0>a&&0<p?(a=n-1,p--):0>a&&(a=0):0<e?a>n-1&&p<Math.floor(o.length/n)-1?(a=0,p++):a>n-1&&a--:0>t?0>p&&(p=0):0<t&&p>Math.floor(o.length/n)-1&&(p=Math.floor(o.length/n)-1),this.setHighlightedCell_(this.picker_.childNodes[p].childNodes[a],p*n+a)}}onMouseMove_(e){const t=(e=e.target)&&Number(e.getAttribute("data-index"));t!==null&&t!==this.highlightedIndex_&&this.setHighlightedCell_(e,t)}onMouseEnter_(){this.picker_.focus({preventScroll:!0})}onMouseLeave_(){this.picker_.blur();const e=this.getHighlighted_();e&&Pe(e,"blocklyColourHighlighted")}getHighlighted_(){if(!this.highlightedIndex_)return null;const e=this.columns_||As.COLUMNS,t=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return t?t.childNodes[this.highlightedIndex_%e]:null}setHighlightedCell_(e,t){const o=this.getHighlighted_();o&&Pe(o,"blocklyColourHighlighted"),oe(e,"blocklyColourHighlighted"),this.highlightedIndex_=t,ft(this.picker_,ct.ACTIVEDESCENDANT,e.getAttribute("id"))}dropdownCreate_(){const e=this.columns_||As.COLUMNS,t=this.colours_||As.COLOURS,o=this.titles_||As.TITLES,n=this.getValue(),a=document.createElement("table");a.className="blocklyColourTable",a.tabIndex=0,a.dir="ltr",bo(a,$s.GRID),ft(a,ct.EXPANDED,!0),ft(a,ct.ROWCOUNT,Math.floor(t.length/e)),ft(a,ct.COLCOUNT,e);let p;for(let T=0;T<t.length;T++){T%e===0&&(p=document.createElement("tr"),bo(p,$s.ROW),a.appendChild(p));const S=document.createElement("td");p.appendChild(S),S.setAttribute("data-colour",t[T]),S.title=o[T]||t[T],S.id=mr(),S.setAttribute("data-index",T),bo(S,$s.GRIDCELL),ft(S,ct.LABEL,t[T]),ft(S,ct.SELECTED,t[T]===n),S.style.backgroundColor=t[T],t[T]===n&&(S.className="blocklyColourSelected",this.highlightedIndex_=T)}this.onClickWrapper_=E(a,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=E(a,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=E(a,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=E(a,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=E(a,"keydown",this,this.onKeyDown_),this.picker_=a}dropdownDispose_(){this.onClickWrapper_&&(y(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(y(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(y(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(y(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(y(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null}static fromJson(e){return new this(e.colour,void 0,e)}};As.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),As.TITLES=[],As.COLUMNS=7,As.prototype.DEFAULT_VALUE=As.COLOURS[0],qs(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: .5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`),Bs("field_colour",As),i.FieldCheckbox$$module$build$src$core$field_checkbox=class extends je{constructor(e,t,o){super(je.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.checkChar_=i.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,e!==je.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)}saveState(){const e=this.saveLegacyState(i.FieldCheckbox$$module$build$src$core$field_checkbox);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();oe(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar_}setCheckCharacter(e){this.checkChar_=e||i.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}},i.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR="\u2713",Bs("field_checkbox",i.FieldCheckbox$$module$build$src$core$field_checkbox),i.FieldCheckbox$$module$build$src$core$field_checkbox.prototype.DEFAULT_VALUE=!1,i.FieldCheckbox$$module$build$src$core$field_checkbox;var Ue=class extends i.FieldTextInput$$module$build$src$core$field_textinput{constructor(e,t,o){super(je.SKIP_SETUP),this.clockwise_=Ue.CLOCKWISE,this.offset_=Ue.OFFSET,this.wrap_=Ue.WRAP,this.round_=Ue.ROUND,this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.symbol_=this.line_=this.gauge_=this.editor_=null,this.SERIALIZABLE=!0,e!==je.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){switch(super.configure_(e),e.mode){case Qc.COMPASS:this.clockwise_=!0,this.offset_=90;break;case Qc.PROTRACTOR:this.clockwise_=!1,this.offset_=0}e.clockwise&&(this.clockwise_=e.clockwise),e.offset&&(this.offset_=e.offset),e.wrap&&(this.wrap_=e.wrap),e.round&&(this.round_=e.round)}initView(){super.initView(),this.symbol_=A(w.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("\xB0")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph_()}showEditor_(e){super.showEditor_(e,Xu||Cc||Tn),this.dropdownCreate_(),No().appendChild(this.editor_),this.sourceBlock_ instanceof Fs&&Mt(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),v(this,this.dropdownDispose_.bind(this)),this.updateGraph_()}dropdownCreate_(){const e=A(w.SVG,{xmlns:En,"xmlns:html":to,"xmlns:xlink":fs,version:"1.1",height:2*Ue.HALF+"px",width:2*Ue.HALF+"px",style:"touch-action: none"}),t=A(w.CIRCLE,{cx:Ue.HALF,cy:Ue.HALF,r:Ue.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=A(w.PATH,{class:"blocklyAngleGauge"},e),this.line_=A(w.LINE,{x1:Ue.HALF,y1:Ue.HALF,class:"blocklyAngleLine"},e);for(let o=0;360>o;o+=15)A(w.LINE,{x1:Ue.HALF+Ue.RADIUS,y1:Ue.HALF,x2:Ue.HALF+Ue.RADIUS-(o%45===0?10:5),y2:Ue.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+Ue.HALF+","+Ue.HALF+")"},e);this.clickWrapper_=E(e,"click",this,this.hide_),this.clickSurfaceWrapper_=E(t,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=E(t,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=e}dropdownDispose_(){this.clickWrapper_&&(y(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(y(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(y(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null}hide_(){fr(this),To()}onMouseMove_(e){var t=this.gauge_.ownerSVGElement.getBoundingClientRect();const o=e.clientX-t.left-Ue.HALF;e=e.clientY-t.top-Ue.HALF,t=Math.atan(-e/o),isNaN(t)||(t=ee(t),0>o?t+=180:0<e&&(t+=360),t=this.clockwise_?this.offset_+360-t:360-(this.offset_-t),this.displayMouseOrKeyboardValue_(t))}displayMouseOrKeyboardValue_(e){this.round_&&(e=Math.round(e/this.round_)*this.round_),e=this.wrapValue_(e),e!==this.value_&&this.setEditorValue_(e)}updateGraph_(){if(this.gauge_){var e=Number(this.getText())+this.offset_,t=Y(e%360);e=["M ",Ue.HALF,",",Ue.HALF];var o=Ue.HALF,n=Ue.HALF;if(!isNaN(t)){const a=Number(this.clockwise_),p=Y(this.offset_),T=Math.cos(p)*Ue.RADIUS,S=Math.sin(p)*-Ue.RADIUS;a&&(t=2*p-t),o+=Math.cos(t)*Ue.RADIUS,n-=Math.sin(t)*Ue.RADIUS,t=Math.abs(Math.floor((t-p)/Math.PI)%2),a&&(t=1-t),e.push(" l ",T,",",S," A ",Ue.RADIUS,",",Ue.RADIUS," 0 ",t," ",a," ",o,",",n," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",n)}}onHtmlInputKeyDown_(e){super.onHtmlInputKeyDown_(e);var t=this.getSourceBlock();if(!t)throw new Ot;let o;e.keyCode===me.LEFT?o=t.RTL?1:-1:e.keyCode===me.RIGHT?o=t.RTL?-1:1:e.keyCode===me.DOWN?o=-1:e.keyCode===me.UP&&(o=1),o&&(t=this.getValue(),this.displayMouseOrKeyboardValue_(t+o*this.round_),e.preventDefault(),e.stopPropagation())}doClassValidation_(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue_(e)}wrapValue_(e){return e%=360,0>e&&(e+=360),e>this.wrap_&&(e-=360),e}static fromJson(e){return new this(e.angle,void 0,e)}};Ue.ROUND=15,Ue.HALF=50,Ue.CLOCKWISE=!1,Ue.OFFSET=0,Ue.WRAP=360,Ue.RADIUS=Ue.HALF-1,qs(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: .8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`),Bs("field_angle",Ue),Ue.prototype.DEFAULT_VALUE=0;var Qc;(function(e){e.COMPASS="compass",e.PROTRACTOR="protractor"})(Qc||(Qc={}));var Um=class extends Br{constructor(e){super(e),this.type=is,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.recordUndo||(e.recordUndo=this.recordUndo),e}fromJson(e){if(super.fromJson(e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate){const t=e.newCoordinate.split(",");this.newCoordinate=new ae(Number(t[0]),Number(t[1]))}e.recordUndo!==void 0&&(this.recordUndo=e.recordUndo)}recordNew(){const e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}currentLocation_(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const o=t.getParent();return o?(e.parentId=o.id,(t=o.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&ae.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var o=t.getBlockById(this.blockId);if(o){var n=e?this.newParentId:this.oldParentId,a=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,n){var p=t.getBlockById(n);if(!p){console.warn("Can't connect to non-existent block: "+n);return}}if(o.getParent()&&o.unplug(),e)a=o.getRelativeToSurfaceXY(),o.moveBy(e.x-a.x,e.y-a.y);else{t=o.outputConnection,(!t||o.previousConnection&&o.previousConnection.isConnected())&&(t=o.previousConnection);let T;o=t.type,a?(o=p.getInput(a))&&(T=o.connection):o===pe.PREVIOUS_STATEMENT&&(T=p.nextConnection),T?t.connect(T):console.warn("Can't connect to non-existent input: "+a)}}else console.warn("Can't move non-existent block: "+this.blockId)}};We(se.EVENT,is,Um);var ji=class extends wn{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=ut(),this.recordUndo=Js())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}fromJson(e){super.fromJson(e),this.commentId=e.commentId}static CommentCreateDeleteHelper(e,t){var o=e.getEventWorkspace_();if(t){if(t=tt("xml"),!e.xml)throw Error("Ecountered a comment event without proper xml");t.appendChild(e.xml),Tr(t,o)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(o=o.getCommentById(e.commentId))?o.dispose():console.warn("Can't uncreate non-existent comment: "+e.commentId)}}},Hm=class extends ji{constructor(e,t,o){super(e),this.type=Dr,e&&(this.oldContents_=typeof t>"u"?"":t,this.newContents_=typeof o>"u"?"":o)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}fromJson(e){super.fromJson(e),this.oldContents_=e.oldContents,this.newContents_=e.newContents}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var o=e?this.newContents_:this.oldContents_;if(!o)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");t.setContent(o)}else console.warn("Can't change non-existent comment: "+this.commentId)}};We(se.EVENT,Dr,Hm);var Vm=class extends ji{constructor(e){super(e),this.type=Fi,e&&(this.xml=e.toXmlWithXY())}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return e.xml=Qs(this.xml),e}fromJson(e){super.fromJson(e),this.xml=eo(e.xml)}run(e){ji.CommentCreateDeleteHelper(this,e)}};We(se.EVENT,Fi,Vm);var Wm=class extends ji{constructor(e){super(e),this.type=Cn,e&&(this.xml=e.toXmlWithXY())}run(e){ji.CommentCreateDeleteHelper(this,!e)}};We(se.EVENT,Cn,Wm);var jm=class extends ji{constructor(e){super(e),this.type=Go,e&&(this.comment_=e,this.oldCoordinate_=e.getXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getXY()}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}fromJson(e){super.fromJson(e);let t=e.oldCoordinate.split(",");this.oldCoordinate_=new ae(Number(t[0]),Number(t[1])),t=e.newCoordinate.split(","),this.newCoordinate_=new ae(Number(t[0]),Number(t[1]))}isNull(){return ae.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var o=t.getXY();t.moveBy(e.x-o.x,e.y-o.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};We(se.EVENT,Go,jm);var Xm=class extends io{constructor(e,t,o){super(e?e.workspace.id:void 0),this.type=Rn,e&&(this.blockId=e.id,this.isStart=t,this.blocks=o)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}fromJson(e){super.fromJson(e),this.isStart=e.isStart,this.blockId=e.blockId,this.blocks=e.blocks}};We(se.EVENT,Rn,Xm);var Ym=class extends io{constructor(e,t,o,n){super(e?e.workspace.id:void 0),this.type=Or,this.blockId=e?e.id:null,this.element=typeof t>"u"?"":t,this.oldValue=typeof o>"u"?"":o,this.newValue=typeof n>"u"?"":n}toJson(){const e=super.toJson();return e.element=this.element,this.newValue!==void 0&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e}fromJson(e){super.fromJson(e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId}};We(se.EVENT,Or,Ym);var zm=class extends wn{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=kn,this.isBlank=!!e,e&&(this.workspaceId=e.id)}toJson(){const e=super.toJson();if(!this.workspaceId)throw Error("The workspace ID is undefined. Either pass a workspace to the constructor, or call fromJson");return e.workspaceId=this.workspaceId,e}fromJson(e){super.fromJson(e),this.workspaceId=e.workspaceId}};We(se.EVENT,kn,zm),i.module$build$src$core$events$events={},i.module$build$src$core$events$events.Abstract=wn,i.module$build$src$core$events$events.BLOCK_CHANGE=Pt,i.module$build$src$core$events$events.BLOCK_CREATE=Wt,i.module$build$src$core$events$events.BLOCK_DELETE=Io,i.module$build$src$core$events$events.BLOCK_DRAG=Rn,i.module$build$src$core$events$events.BLOCK_MOVE=is,i.module$build$src$core$events$events.BUBBLE_OPEN=Fo,i.module$build$src$core$events$events.BUMP_EVENTS=sh,i.module$build$src$core$events$events.BlockBase=Br,i.module$build$src$core$events$events.BlockChange=An,i.module$build$src$core$events$events.BlockCreate=If,i.module$build$src$core$events$events.BlockDelete=yf,i.module$build$src$core$events$events.BlockDrag=Xm,i.module$build$src$core$events$events.BlockMove=Um,i.module$build$src$core$events$events.BubbleOpen=af,i.module$build$src$core$events$events.BubbleType=$h,i.module$build$src$core$events$events.CHANGE=Pt,i.module$build$src$core$events$events.CLICK=ci,i.module$build$src$core$events$events.COMMENT_CHANGE=Dr,i.module$build$src$core$events$events.COMMENT_CREATE=Fi,i.module$build$src$core$events$events.COMMENT_DELETE=Cn,i.module$build$src$core$events$events.COMMENT_MOVE=Go,i.module$build$src$core$events$events.CREATE=Wt,i.module$build$src$core$events$events.Click=Pf,i.module$build$src$core$events$events.ClickTarget=Dh,i.module$build$src$core$events$events.CommentBase=ji,i.module$build$src$core$events$events.CommentChange=Hm,i.module$build$src$core$events$events.CommentCreate=Vm,i.module$build$src$core$events$events.CommentDelete=Wm,i.module$build$src$core$events$events.CommentMove=jm,i.module$build$src$core$events$events.DELETE=Io,i.module$build$src$core$events$events.FINISHED_LOADING=kn,i.module$build$src$core$events$events.FinishedLoading=zm,i.module$build$src$core$events$events.MARKER_MOVE=wr,i.module$build$src$core$events$events.MOVE=is,i.module$build$src$core$events$events.MarkerMove=Zf,i.module$build$src$core$events$events.SELECTED=li,i.module$build$src$core$events$events.Selected=Qg,i.module$build$src$core$events$events.THEME_CHANGE=Nr,i.module$build$src$core$events$events.TOOLBOX_ITEM_SELECT=Lr,i.module$build$src$core$events$events.TRASHCAN_OPEN=Ar,i.module$build$src$core$events$events.ThemeChange=Uf,i.module$build$src$core$events$events.ToolboxItemSelect=xf,i.module$build$src$core$events$events.TrashcanOpen=gf,i.module$build$src$core$events$events.UI=Or,i.module$build$src$core$events$events.Ui=Ym,i.module$build$src$core$events$events.UiBase=io,i.module$build$src$core$events$events.VAR_CREATE=Bi,i.module$build$src$core$events$events.VAR_DELETE=Sn,i.module$build$src$core$events$events.VAR_RENAME=kr,i.module$build$src$core$events$events.VIEWPORT_CHANGE=Pi,i.module$build$src$core$events$events.VarBase=Nc,i.module$build$src$core$events$events.VarCreate=Zg,i.module$build$src$core$events$events.VarDelete=om,i.module$build$src$core$events$events.VarRename=im,i.module$build$src$core$events$events.ViewportChange=Hf,i.module$build$src$core$events$events.clearPendingUndo=iu,i.module$build$src$core$events$events.disable=At,i.module$build$src$core$events$events.disableOrphans=nu,i.module$build$src$core$events$events.enable=Lt,i.module$build$src$core$events$events.filter=tc,i.module$build$src$core$events$events.fire=Re,i.module$build$src$core$events$events.fromJson=Kp,i.module$build$src$core$events$events.get=Ce,i.module$build$src$core$events$events.getDescendantIds=sc,i.module$build$src$core$events$events.getGroup=ut,i.module$build$src$core$events$events.getRecordUndo=Js,i.module$build$src$core$events$events.isEnabled=xt,i.module$build$src$core$events$events.setGroup=ve,i.module$build$src$core$events$events.setRecordUndo=ys,kg();var ls={};ls.registerCleanup=gg,ls.registerCollapse=mg,ls.registerCollapseExpandBlock=yg,ls.registerComment=vg,ls.registerDefaultOptions=kg,ls.registerDelete=Rg,ls.registerDeleteAll=bg,ls.registerDisable=Sg,ls.registerDuplicate=Eg,ls.registerExpand=$g,ls.registerHelp=Cg,ls.registerInline=Ig,ls.registerRedo=_g,ls.registerUndo=pg;var Km=class{constructor(e,t){this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.draggingBlock_=e,this.draggedConnectionManager_=new ws(this.draggingBlock_),this.workspace_=t,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Sy(e)}dispose(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()}startDrag(e,t){ut()||ve(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),vs(),this.workspace_.setResizesEnabled(!1),vr(),this.shouldDisconnect_(t)&&this.disconnectBlock_(t,e),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()}shouldDisconnect_(e){return!!(this.draggingBlock_.getParent()||e&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(e,t){this.draggingBlock_.unplug(e),e=this.pixelsToWorkspaceUnits_(t),e=ae.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),F_(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()}fireDragStartEvent_(){const e=new(Ce(Rn))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));Re(e)}drag(e,t){t=this.pixelsToWorkspaceUnits_(t);var o=ae.sum(this.startXY_,t);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(t),o=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),this.draggedConnectionManager_.update(t,this.dragTarget_),e=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),e!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==o&&(o&&o.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)}endDrag(e,t){this.drag(e,t),this.dragIconData_=[],this.fireDragEndEvent_(),Is(),vr(),e=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)?t=this.startXY_:(t=this.getNewLocationAfterDrag_(t),e=t.delta,t=t.newLocation),this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),e?this.updateBlockAfterMove_(e):vc(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),ve(!1)}getNewLocationAfterDrag_(e){e=this.pixelsToWorkspaceUnits_(e);const t=ae.sum(this.startXY_,e);return{delta:e,newLocation:t}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),Ni.length=0,!0):!1}updateBlockAfterMove_(e){this.draggingBlock_.moveConnections(e.x,e.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()}fireDragEndEvent_(){const e=new(Ce(Rn))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));Re(e)}updateToolboxStyle_(e){const t=this.workspace_.getToolbox();if(t){const o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e&&typeof t.removeStyle=="function"?t.removeStyle(o):e||typeof t.addStyle!="function"||t.addStyle(o)}}fireMoveEvent_(){const e=new(Ce(is))(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),Re(e)}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(e){return e=new ae(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e}dragIcons_(e){for(let t=0;t<this.dragIconData_.length;t++){const o=this.dragIconData_[t];o.icon.setIconLocation(ae.sum(o.location,e))}}getInsertionMarkers(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]}};We(se.BLOCK_DRAGGER,Po,Km);var _S="9.1.0",gS=i.Align$$module$build$src$core$input.LEFT,fS=i.Align$$module$build$src$core$input.CENTRE,mS=i.Align$$module$build$src$core$input.RIGHT,$S=pe.INPUT_VALUE,TS=pe.OUTPUT_VALUE,bS=pe.NEXT_STATEMENT,ES=pe.PREVIOUS_STATEMENT,vS=xe.DUMMY,IS=De.TOP,yS=De.BOTTOM,SS=De.LEFT,RS=De.RIGHT;Yo.prototype.newBlock=function(e,t){return new Pn(this,e,t)},uo.prototype.newBlock=function(e,t){return new Fs(this,e,t)},uo.newTrashcan=function(e){return new Lf(e)},Zt.prototype.showContextMenu=function(e){if(!this.workspace.options.readOnly){var t=[];this.isDeletable()&&this.isMovable()&&(t.push(j_(this)),t.push(W_(this))),Tc(e,t,this.RTL)}},i.Mutator$$module$build$src$core$mutator.prototype.newWorkspaceSvg=function(e){return new uo(e)},Gs.prototype.populateProcedures=function(e){e=Bu(e),e=e[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],Gs.NameType.PROCEDURE)};var CS=pe,D={};return D.ALIGN_CENTRE=fS,D.ALIGN_LEFT=gS,D.ALIGN_RIGHT=mS,D.ASTNode=W,D.BasicCursor=sl,D.Block=Pn,D.BlockDragSurfaceSvg=xm,D.BlockDragger=Km,D.BlockSvg=Fs,D.Blocks=gs,D.Bubble=Me,D.BubbleDragger=Ff,D.COLLAPSED_FIELD_NAME=Jr,D.COLLAPSED_INPUT_NAME=Kr,D.COLLAPSE_CHARS=Rf,D.CodeGenerator=i.CodeGenerator$$module$build$src$core$generator,D.CollapsibleToolboxCategory=Hn,D.Comment=Sf,D.ComponentManager=Ut,D.Connection=qe,D.ConnectionChecker=sm,D.ConnectionDB=Vn,D.ConnectionType=pe,D.ContextMenu=i.module$build$src$core$contextmenu,D.ContextMenuItems=ls,D.ContextMenuRegistry=Ze,D.Css=ah,D.Cursor=kh,D.DELETE_VARIABLE_ID=Ch,D.DRAG_STACK=Cf,D.DUMMY_INPUT=vS,D.DeleteArea=jc,D.DragTarget=Af,D.DropDownDiv=Ct,D.Events=i.module$build$src$core$events$events,D.Extensions=i.module$build$src$core$extensions,D.Field=je,D.FieldAngle=Ue,D.FieldCheckbox=i.FieldCheckbox$$module$build$src$core$field_checkbox,D.FieldColour=As,D.FieldDropdown=lo,D.FieldImage=i.FieldImage$$module$build$src$core$field_image,D.FieldLabel=i.FieldLabel$$module$build$src$core$field_label,D.FieldLabelSerializable=Gm,D.FieldMultilineInput=Qh,D.FieldNumber=Zh,D.FieldTextInput=i.FieldTextInput$$module$build$src$core$field_textinput,D.FieldVariable=dl,D.Flyout=Zc,D.FlyoutButton=jn,D.FlyoutMetricsManager=Pm,D.Generator=i.CodeGenerator$$module$build$src$core$generator,D.Gesture=jo,D.Grid=Mh,D.HorizontalFlyout=Fm,D.INPUT_VALUE=$S,D.Icon=Uc,D.Input=Bn,D.InsertionMarkerManager=ws,D.Marker=kf,D.MarkerManager=Pr,D.Menu=fh,D.MenuItem=mh,D.MetricsManager=Jh,D.Msg=Ne,D.Mutator=i.Mutator$$module$build$src$core$mutator,D.NEXT_STATEMENT=bS,D.Names=Gs,D.OPPOSITE_TYPE=Ui,D.OUTPUT_VALUE=TS,D.Options=co,D.PREVIOUS_STATEMENT=ES,D.PROCEDURE_CATEGORY_NAME=zc,D.Procedures=i.module$build$src$core$procedures,D.RENAME_VARIABLE_ID=Rh,D.RenderedConnection=ns,D.Scrollbar=mt,D.ScrollbarPair=Kh,D.ShortcutItems=Ro,D.ShortcutRegistry=st,D.TOOLBOX_AT_BOTTOM=yS,D.TOOLBOX_AT_LEFT=SS,D.TOOLBOX_AT_RIGHT=RS,D.TOOLBOX_AT_TOP=IS,D.TabNavigateCursor=Of,D.Theme=Gi,D.ThemeManager=em,D.Themes=Nh,D.Toolbox=Bf,D.ToolboxCategory=ao,D.ToolboxItem=Lh,D.ToolboxSeparator=ol,D.Tooltip=vt,D.Touch=Cs,D.TouchGesture=tm,D.Trashcan=Lf,D.VARIABLE_CATEGORY_NAME=Dc,D.VARIABLE_DYNAMIC_CATEGORY_NAME=Wh,D.VERSION=_S,D.VariableMap=jh,D.VariableModel=xr,D.Variables=i.module$build$src$core$variables,D.VariablesDynamic=di,D.VerticalFlyout=qh,D.Warning=wf,D.WidgetDiv=ro,D.Workspace=Yo,D.WorkspaceAudio=nm,D.WorkspaceComment=yo,D.WorkspaceCommentSvg=Zt,D.WorkspaceDragSurfaceSvg=Mm,D.WorkspaceDragger=Gf,D.WorkspaceSvg=uo,D.Xml=i.module$build$src$core$xml,D.ZoomControls=rm,D.bindEventWithChecks_=My,D.bindEvent_=Ny,D.blockAnimations=Zr,D.blockRendering=Qe,D.browserEvents=Bo,D.bumpObjects=qc,D.clipboard=Qr,D.common=i.module$build$src$core$common,D.config=i.config$$module$build$src$core$config,D.connectionTypes=CS,D.constants=vh,D.copy=ky,D.defineBlocksWithJsonArray=ke,D.dialog=ms,D.duplicate=wy,D.fieldRegistry=Vr,D.geras=ko,D.getMainWorkspace=V,D.getSelected=J,D.hideChaff=Ry,D.hueToHex=Ly,D.inject=fy,D.inputTypes=xe,D.isNumber=Ay,D.minimalist=hl,D.paste=Oy,D.procedures=i.module$build$src$core$procedures,D.registry=oo,D.resizeSvgContents=Cy,D.serialization=pS,D.setLocale=nh,D.setParentContainer=ne,D.svgResize=$e,D.thrasos=zh,D.uiPosition=Hi,D.unbindEvent_=Dy,D.utils=Ye,D.zelos=ho,i.module$build$src$core$contextmenu,i.module$build$src$core$events$events,i.module$build$src$core$msg,i.module$build$src$core$common,Object.defineProperties(D,{alert:{set:function(e){Bt.warn("Blockly.alert","December 2021","December 2022"),ms.setAlert(e)},get:function(){return Bt.warn("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),ms.alert}},confirm:{set:function(e){Bt.warn("Blockly.confirm","December 2021","December 2022"),ms.setConfirm(e)},get:function(){return Bt.warn("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),ms.confirm}},mainWorkspace:{set:function(e){Bt.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),i.module$build$src$core$common.setMainWorkspace(e)},get:function(){return Bt.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),i.module$build$src$core$common.getMainWorkspace()}},prompt:{set:function(e){Bt.warn("Blockly.prompt","December 2021","December 2022"),ms.setPrompt(e)},get:function(){return Bt.warn("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),ms.prompt}},selected:{get:function(){return Bt.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),i.module$build$src$core$common.getSelected()},set:function(e){Bt.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),i.module$build$src$core$common.setSelected(e)}},HSV_SATURATION:{get:function(){return Qt.getHsvSaturation()},set:function(e){Qt.setHsvSaturation(e)}},HSV_VALUE:{get:function(){return Qt.getHsvValue()},set:function(e){Qt.setHsvValue(e)}}}),Object.defineProperties(i.module$build$src$core$contextmenu,{currentBlock:{get:function(){return Bt.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),i.module$build$src$core$contextmenu.getCurrentBlock()},set:function(e){Bt.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),i.module$build$src$core$contextmenu.setCurrentBlock(e)}}}),Object.defineProperties(i.module$build$src$core$events$events,{recordUndo:{get:function(){return Bt.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),Fe.getRecordUndo()},set:function(e){Bt.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),Fe.setRecordUndo(e)}}}),Object.defineProperties(vt,{visible:{get:function(){return Bt.warn("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),vt.isVisible()}},DIV:{get:function(){return Bt.warn("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),vt.getDiv()}}}),Object.defineProperties(ro,{DIV:{get:function(){return Bt.warn("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),ro.getDiv()}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:i.module$build$src$core$msg}),D.__namespace__=i,D})}(fd)),fd.exports}var nT;function aO(){return nT||(nT=1,function(s,r){(function(i,c){s.exports=c(Ap())})(js,function(i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})}(gd)),gd.exports}var rT;function Lp(){return rT||(rT=1,function(s,r){(function(i,c){s.exports=c(aO())})(js,function(i){return i})}(_d)),_d.exports}var md={exports:{}},lT;function uO(){return lT||(lT=1,function(s,r){(function(i,c){s.exports=c()})(js,function(){var i=i||{Msg:Object.create(null)};return i.Msg.ADD_COMMENT="Add Comment",i.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",i.Msg.CHANGE_VALUE_TITLE="Change value:",i.Msg.CLEAN_UP="Clean up Blocks",i.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",i.Msg.COLLAPSE_ALL="Collapse Blocks",i.Msg.COLLAPSE_BLOCK="Collapse Block",i.Msg.COLOUR_BLEND_COLOUR1="colour 1",i.Msg.COLOUR_BLEND_COLOUR2="colour 2",i.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",i.Msg.COLOUR_BLEND_RATIO="ratio",i.Msg.COLOUR_BLEND_TITLE="blend",i.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",i.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",i.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",i.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",i.Msg.COLOUR_RANDOM_TITLE="random colour",i.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",i.Msg.COLOUR_RGB_BLUE="blue",i.Msg.COLOUR_RGB_GREEN="green",i.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",i.Msg.COLOUR_RGB_RED="red",i.Msg.COLOUR_RGB_TITLE="colour with",i.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",i.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",i.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",i.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",i.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",i.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",i.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",i.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",i.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",i.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",i.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",i.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",i.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",i.Msg.CONTROLS_IF_MSG_ELSE="else",i.Msg.CONTROLS_IF_MSG_ELSEIF="else if",i.Msg.CONTROLS_IF_MSG_IF="if",i.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",i.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",i.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",i.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",i.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",i.Msg.CONTROLS_REPEAT_INPUT_DO="do",i.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",i.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",i.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",i.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",i.Msg.DELETE_BLOCK="Delete Block",i.Msg.DELETE_VARIABLE="Delete the '%1' variable",i.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",i.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",i.Msg.DIALOG_CANCEL="Cancel",i.Msg.DIALOG_OK="OK",i.Msg.DISABLE_BLOCK="Disable Block",i.Msg.DUPLICATE_BLOCK="Duplicate",i.Msg.DUPLICATE_COMMENT="Duplicate Comment",i.Msg.ENABLE_BLOCK="Enable Block",i.Msg.EXPAND_ALL="Expand Blocks",i.Msg.EXPAND_BLOCK="Expand Block",i.Msg.EXTERNAL_INPUTS="External Inputs",i.Msg.HELP="Help",i.Msg.INLINE_INPUTS="Inline Inputs",i.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",i.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",i.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",i.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",i.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",i.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",i.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",i.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",i.Msg.LISTS_GET_INDEX_FIRST="first",i.Msg.LISTS_GET_INDEX_FROM_END="# from end",i.Msg.LISTS_GET_INDEX_FROM_START="#",i.Msg.LISTS_GET_INDEX_GET="get",i.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",i.Msg.LISTS_GET_INDEX_LAST="last",i.Msg.LISTS_GET_INDEX_RANDOM="random",i.Msg.LISTS_GET_INDEX_REMOVE="remove",i.Msg.LISTS_GET_INDEX_TAIL="",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",i.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",i.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",i.Msg.LISTS_GET_SUBLIST_END_LAST="to last",i.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",i.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",i.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",i.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",i.Msg.LISTS_GET_SUBLIST_TAIL="",i.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",i.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",i.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",i.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",i.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",i.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",i.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",i.Msg.LISTS_INLIST="in list",i.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",i.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",i.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",i.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",i.Msg.LISTS_LENGTH_TITLE="length of %1",i.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",i.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",i.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",i.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",i.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",i.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",i.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",i.Msg.LISTS_SET_INDEX_INPUT_TO="as",i.Msg.LISTS_SET_INDEX_INSERT="insert at",i.Msg.LISTS_SET_INDEX_SET="set",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",i.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",i.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",i.Msg.LISTS_SORT_ORDER_DESCENDING="descending",i.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",i.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",i.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",i.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",i.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",i.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",i.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",i.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",i.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",i.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",i.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",i.Msg.LOGIC_BOOLEAN_FALSE="false",i.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",i.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",i.Msg.LOGIC_BOOLEAN_TRUE="true",i.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",i.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",i.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",i.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",i.Msg.LOGIC_NEGATE_TITLE="not %1",i.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",i.Msg.LOGIC_NULL="null",i.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",i.Msg.LOGIC_NULL_TOOLTIP="Returns null.",i.Msg.LOGIC_OPERATION_AND="and",i.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",i.Msg.LOGIC_OPERATION_OR="or",i.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",i.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",i.Msg.LOGIC_TERNARY_CONDITION="test",i.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",i.Msg.LOGIC_TERNARY_IF_FALSE="if false",i.Msg.LOGIC_TERNARY_IF_TRUE="if true",i.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",i.Msg.MATH_ADDITION_SYMBOL="+",i.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",i.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",i.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",i.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",i.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",i.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",i.Msg.MATH_CHANGE_TITLE="change %1 by %2",i.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",i.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",i.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03C0 (3.141\u2026), e (2.718\u2026), \u03C6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xBD) (0.707\u2026), or \u221E (infinity).",i.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",i.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",i.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",i.Msg.MATH_DIVISION_SYMBOL="\xF7",i.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",i.Msg.MATH_IS_EVEN="is even",i.Msg.MATH_IS_NEGATIVE="is negative",i.Msg.MATH_IS_ODD="is odd",i.Msg.MATH_IS_POSITIVE="is positive",i.Msg.MATH_IS_PRIME="is prime",i.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",i.Msg.MATH_IS_WHOLE="is whole",i.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",i.Msg.MATH_MODULO_TITLE="remainder of %1 \xF7 %2",i.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",i.Msg.MATH_MULTIPLICATION_SYMBOL="\xD7",i.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",i.Msg.MATH_NUMBER_TOOLTIP="A number.",i.Msg.MATH_ONLIST_HELPURL="",i.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",i.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",i.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",i.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",i.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",i.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",i.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",i.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",i.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",i.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",i.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",i.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",i.Msg.MATH_POWER_SYMBOL="^",i.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",i.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",i.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",i.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",i.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",i.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",i.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",i.Msg.MATH_ROUND_OPERATOR_ROUND="round",i.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",i.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",i.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",i.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",i.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",i.Msg.MATH_SINGLE_OP_ROOT="square root",i.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",i.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",i.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",i.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",i.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",i.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",i.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",i.Msg.MATH_SUBTRACTION_SYMBOL="-",i.Msg.MATH_TRIG_ACOS="acos",i.Msg.MATH_TRIG_ASIN="asin",i.Msg.MATH_TRIG_ATAN="atan",i.Msg.MATH_TRIG_COS="cos",i.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",i.Msg.MATH_TRIG_SIN="sin",i.Msg.MATH_TRIG_TAN="tan",i.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",i.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",i.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",i.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",i.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",i.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",i.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",i.Msg.NEW_NUMBER_VARIABLE="Create number variable...",i.Msg.NEW_STRING_VARIABLE="Create string variable...",i.Msg.NEW_VARIABLE="Create variable...",i.Msg.NEW_VARIABLE_TITLE="New variable name:",i.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",i.Msg.ORDINAL_NUMBER_SUFFIX="",i.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",i.Msg.PROCEDURES_BEFORE_PARAMS="with:",i.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",i.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",i.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",i.Msg.PROCEDURES_CREATE_DO="Create '%1'",i.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",i.Msg.PROCEDURES_DEFNORETURN_DO="",i.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",i.Msg.PROCEDURES_DEFNORETURN_TITLE="to",i.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",i.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_DEFRETURN_RETURN="return",i.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",i.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",i.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",i.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",i.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",i.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",i.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",i.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",i.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",i.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",i.Msg.REDO="Redo",i.Msg.REMOVE_COMMENT="Remove Comment",i.Msg.RENAME_VARIABLE="Rename variable...",i.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",i.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_APPEND_TITLE="to %1 append text %2",i.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",i.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",i.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",i.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",i.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",i.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",i.Msg.TEXT_CHARAT_FIRST="get first letter",i.Msg.TEXT_CHARAT_FROM_END="get letter # from end",i.Msg.TEXT_CHARAT_FROM_START="get letter #",i.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",i.Msg.TEXT_CHARAT_LAST="get last letter",i.Msg.TEXT_CHARAT_RANDOM="get random letter",i.Msg.TEXT_CHARAT_TAIL="",i.Msg.TEXT_CHARAT_TITLE="in text %1 %2",i.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",i.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",i.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",i.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",i.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",i.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",i.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",i.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",i.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",i.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",i.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",i.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",i.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",i.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",i.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",i.Msg.TEXT_GET_SUBSTRING_TAIL="",i.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",i.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",i.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",i.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",i.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",i.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",i.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",i.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",i.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",i.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",i.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",i.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",i.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_LENGTH_TITLE="length of %1",i.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",i.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",i.Msg.TEXT_PRINT_TITLE="print %1",i.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",i.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",i.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",i.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",i.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",i.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",i.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",i.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",i.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",i.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",i.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",i.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",i.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",i.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",i.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",i.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",i.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",i.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",i.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",i.Msg.TODAY="Today",i.Msg.UNDO="Undo",i.Msg.UNNAMED_KEY="unnamed",i.Msg.VARIABLES_DEFAULT_NAME="item",i.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",i.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",i.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",i.Msg.VARIABLES_SET="set %1 to %2",i.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",i.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",i.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",i.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",i.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",i.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",i.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",i.Msg.CONTROLS_FOREACH_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_FOR_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=i.Msg.CONTROLS_IF_MSG_ELSEIF,i.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=i.Msg.CONTROLS_IF_MSG_ELSE,i.Msg.CONTROLS_IF_IF_TITLE_IF=i.Msg.CONTROLS_IF_MSG_IF,i.Msg.CONTROLS_IF_MSG_THEN=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.LISTS_CREATE_WITH_ITEM_TITLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.LISTS_GET_INDEX_HELPURL=i.Msg.LISTS_INDEX_OF_HELPURL,i.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.MATH_CHANGE_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.PROCEDURES_DEFRETURN_COMMENT=i.Msg.PROCEDURES_DEFNORETURN_COMMENT,i.Msg.PROCEDURES_DEFRETURN_DO=i.Msg.PROCEDURES_DEFNORETURN_DO,i.Msg.PROCEDURES_DEFRETURN_PROCEDURE=i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,i.Msg.PROCEDURES_DEFRETURN_TITLE=i.Msg.PROCEDURES_DEFNORETURN_TITLE,i.Msg.TEXT_APPEND_VARIABLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.MATH_HUE="230",i.Msg.LOOPS_HUE="120",i.Msg.LISTS_HUE="260",i.Msg.LOGIC_HUE="210",i.Msg.VARIABLES_HUE="330",i.Msg.TEXTS_HUE="160",i.Msg.PROCEDURES_HUE="290",i.Msg.COLOUR_HUE="20",i.Msg.VARIABLES_DYNAMIC_HUE="310",i.Msg})}(md)),md.exports}var $d={exports:{}},Td={exports:{}},cT;function hO(){return cT||(cT=1,function(s,r){(function(i,c){s.exports=c(Ap())})(js,function(i){var c=i.__namespace__,l={};c.module$build$src$core$contextmenu,c.module$build$src$core$extensions,c.module$build$src$core$variables,c.module$build$src$core$utils$xml;var h=c.module$build$src$core$msg.Msg,d=c.module$build$src$core$common.createBlockDefinitionsFromJsonArray,_=c.module$build$src$core$common.defineBlocks;l.blocks=d([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var $={customContextMenu:function(f){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(v={text:h.RENAME_VARIABLE,enabled:!0,callback:u(this)},G=this.getField("VAR").getText(),G={text:h.DELETE_VARIABLE.replace("%1",G),enabled:!0,callback:g(this)},f.unshift(v),f.unshift(G));else{var v=this.getFieldValue("VAR"),O=this.workspace.getVariableById(v).type;if(this.type==="variables_get_dynamic"){v="variables_set_dynamic";var x=h.VARIABLES_GET_CREATE_SET}else v="variables_get_dynamic",x=h.VARIABLES_SET_CREATE_GET;var G={enabled:0<this.workspace.remainingCapacity()};const Ke=this.getField("VAR").getText();G.text=x.replace("%1",Ke),x=c.module$build$src$core$utils$xml.createElement("field"),x.setAttribute("name","VAR"),x.setAttribute("variabletype",O),x.appendChild(c.module$build$src$core$utils$xml.createTextNode(Ke)),O=c.module$build$src$core$utils$xml.createElement("block"),O.setAttribute("type",v),O.appendChild(x),G.callback=c.module$build$src$core$contextmenu.callbackFactory(this,O),f.push(G)}},onchange:function(f){f=this.getFieldValue("VAR"),f=c.module$build$src$core$variables.getVariable(this.workspace,f),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(f.type):this.getInput("VALUE").connection.setCheck(f.type)}},u=function(f){return function(){const v=f.workspace,O=f.getField("VAR").getVariable();c.module$build$src$core$variables.renameVariable(v,O)}},g=function(f){return function(){const v=f.workspace,O=f.getField("VAR").getVariable();v.deleteVariableById(O.getId()),v.refreshToolboxSelection()}};c.module$build$src$core$extensions.registerMixin("contextMenu_variableDynamicSetterGetter",$),_(l.blocks);var m={};c.module$build$src$core$contextmenu,c.module$build$src$core$extensions,c.module$build$src$core$variables,c.module$build$src$core$utils$xml;var b=c.module$build$src$core$msg.Msg,E=c.module$build$src$core$common.createBlockDefinitionsFromJsonArray,I=c.module$build$src$core$common.defineBlocks;m.blocks=E([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var y={customContextMenu:function(f){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(v={text:b.RENAME_VARIABLE,enabled:!0,callback:F(this)},x=this.getField("VAR").getText(),x={text:b.DELETE_VARIABLE.replace("%1",x),enabled:!0,callback:B(this)},f.unshift(v),f.unshift(x));else{if(this.type==="variables_get")var v="variables_set",O=b.VARIABLES_GET_CREATE_SET;else v="variables_get",O=b.VARIABLES_SET_CREATE_GET;var x={enabled:0<this.workspace.remainingCapacity()},G=this.getField("VAR").getText();x.text=O.replace("%1",G),O=c.module$build$src$core$utils$xml.createElement("field"),O.setAttribute("name","VAR"),O.appendChild(c.module$build$src$core$utils$xml.createTextNode(G)),G=c.module$build$src$core$utils$xml.createElement("block"),G.setAttribute("type",v),G.appendChild(O),x.callback=c.module$build$src$core$contextmenu.callbackFactory(this,G),f.push(x)}}},F=function(f){return function(){const v=f.workspace,O=f.getField("VAR").getVariable();c.module$build$src$core$variables.renameVariable(v,O)}},B=function(f){return function(){const v=f.workspace,O=f.getField("VAR").getVariable();v.deleteVariableById(O.getId()),v.refreshToolboxSelection()}};c.module$build$src$core$extensions.registerMixin("contextMenu_variableSetterGetter",y),I(m.blocks);var N={};c.module$build$src$core$extensions;var R=c.module$build$src$core$msg.Msg;c.module$build$src$core$utils$xml,c.Align$$module$build$src$core$input,c.module$build$src$core$connection_type.ConnectionType;var z=c.module$build$src$core$field_dropdown.FieldDropdown;c.FieldImage$$module$build$src$core$field_image,c.FieldTextInput$$module$build$src$core$field_textinput,c.Mutator$$module$build$src$core$mutator;var le=c.module$build$src$core$common.createBlockDefinitionsFromJsonArray,he=c.module$build$src$core$common.defineBlocks;N.blocks=le([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xB6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),N.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[R.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[R.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[R.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[R.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[R.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[R.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(R.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(R.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),R.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(R.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(R.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");var v=this.getInput("AT1").type===c.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return f.setAttribute("at1",v),v=this.getInput("AT2").type===c.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,f.setAttribute("at2",v),f},domToMutation:function(f){const v=f.getAttribute("at1")==="true";f=f.getAttribute("at2")==="true",this.updateAt_(1,v),this.updateAt_(2,f)},updateAt_:function(f,v){this.removeInput("AT"+f),this.removeInput("ORDINAL"+f,!0),v?(this.appendValueInput("AT"+f).setCheck("Number"),R.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+f).appendField(R.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+f),f===2&&R.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(R.TEXT_GET_SUBSTRING_TAIL));const O=new z(this["WHERE_OPTIONS_"+f],function(x){const G=x==="FROM_START"||x==="FROM_END";if(G!==v){const Ke=this.getSourceBlock();return Ke.updateAt_(f,G),Ke.setFieldValue(x,"WHERE"+f),null}});this.getInput("AT"+f).appendField(O,"WHERE"+f),f===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},N.blocks.text_changeCase={init:function(){const f=[[R.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[R.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[R.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(R.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new z(f),"CASE"),this.setOutput(!0,"String"),this.setTooltip(R.TEXT_CHANGECASE_TOOLTIP)}},N.blocks.text_trim={init:function(){const f=[[R.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[R.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[R.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(R.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new z(f),"MODE"),this.setOutput(!0,"String"),this.setTooltip(R.TEXT_TRIM_TOOLTIP)}},N.blocks.text_print={init:function(){this.jsonInit({message0:R.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:R.TEXT_PRINT_TOOLTIP,helpUrl:R.TEXT_PRINT_HELPURL})}};var Q={updateType_:function(f){this.outputConnection.setCheck(f==="NUMBER"?"Number":"String")},mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");return f.setAttribute("type",this.getFieldValue("TYPE")),f},domToMutation:function(f){this.updateType_(f.getAttribute("type"))}};N.blocks.text_prompt_ext=Object.assign({},Q,{init:function(){var f=[[R.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[R.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(R.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");const v=this;f=new z(f,function(O){v.updateType_(O)}),this.appendValueInput("TEXT").appendField(f,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return v.getFieldValue("TYPE")==="TEXT"?R.TEXT_PROMPT_TOOLTIP_TEXT:R.TEXT_PROMPT_TOOLTIP_NUMBER})}}),N.blocks.text_prompt=Object.assign({},Q,{init:function(){this.mixin(V);var f=[[R.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[R.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];const v=this;this.setHelpUrl(R.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),f=new z(f,function(O){v.updateType_(O)}),this.appendDummyInput().appendField(f,"TYPE").appendField(this.newQuote_(!0)).appendField(new c.FieldTextInput$$module$build$src$core$field_textinput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return v.getFieldValue("TYPE")==="TEXT"?R.TEXT_PROMPT_TOOLTIP_TEXT:R.TEXT_PROMPT_TOOLTIP_NUMBER})}}),N.blocks.text_count={init:function(){this.jsonInit({message0:R.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:R.TEXT_COUNT_TOOLTIP,helpUrl:R.TEXT_COUNT_HELPURL})}},N.blocks.text_replace={init:function(){this.jsonInit({message0:R.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:R.TEXT_REPLACE_TOOLTIP,helpUrl:R.TEXT_REPLACE_HELPURL})}},N.blocks.text_reverse={init:function(){this.jsonInit({message0:R.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:R.TEXT_REVERSE_TOOLTIP,helpUrl:R.TEXT_REVERSE_HELPURL})}};var V={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(f){for(let v=0,O;O=this.inputList[v];v++)for(let x=0,G;G=O.fieldRow[x];x++)if(f===G.name){O.insertFieldAt(x,this.newQuote_(!0)),O.insertFieldAt(x+2,this.newQuote_(!1));return}console.warn('field named "'+f+'" not found in '+this.toDevString())},newQuote_:function(f){return f=this.RTL?!f:f,new c.FieldImage$$module$build$src$core$field_image(f?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,f?"\u201C":"\u201D")}},de=function(){this.mixin(V),this.quoteField_("TEXT")},J={mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");return f.setAttribute("items",this.itemCount_),f},domToMutation:function(f){this.itemCount_=parseInt(f.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(f){this.itemCount_=f.itemCount,this.updateShape_()},decompose:function(f){const v=f.newBlock("text_create_join_container");v.initSvg();let O=v.getInput("STACK").connection;for(let x=0;x<this.itemCount_;x++){const G=f.newBlock("text_create_join_item");G.initSvg(),O.connect(G.previousConnection),O=G.nextConnection}return v},compose:function(f){var v=f.getInputTargetBlock("STACK");for(f=[];v;)v.isInsertionMarker()||f.push(v.valueConnection_),v=v.getNextBlock();for(v=0;v<this.itemCount_;v++){const O=this.getInput("ADD"+v).connection.targetConnection;O&&f.indexOf(O)===-1&&O.disconnect()}for(this.itemCount_=f.length,this.updateShape_(),v=0;v<this.itemCount_;v++)c.Mutator$$module$build$src$core$mutator.reconnect(f[v],this,"ADD"+v)},saveConnections:function(f){f=f.getInputTargetBlock("STACK");let v=0;for(;f;){if(f.isInsertionMarker()){f=f.getNextBlock();continue}const O=this.getInput("ADD"+v);f.valueConnection_=O&&O.connection.targetConnection,f=f.getNextBlock(),v++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var f=0;f<this.itemCount_;f++)if(!this.getInput("ADD"+f)){const v=this.appendValueInput("ADD"+f).setAlign(c.Align$$module$build$src$core$input.RIGHT);f===0&&v.appendField(R.TEXT_JOIN_TITLE_CREATEWITH)}for(f=this.itemCount_;this.getInput("ADD"+f);f++)this.removeInput("ADD"+f)}},ue=function(){this.mixin(V),this.itemCount_=2,this.updateShape_(),this.setMutator(new c.Mutator$$module$build$src$core$mutator(["text_create_join_item"],this))};c.module$build$src$core$extensions.register("text_append_tooltip",c.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var Z=function(){const f=this;this.setTooltip(function(){return R.TEXT_INDEXOF_TOOLTIP.replace("%1",f.workspace.options.oneBasedIndex?"0":"-1")})},ne={mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");return f.setAttribute("at",!!this.isAt_),f},domToMutation:function(f){f=f.getAttribute("at")!=="false",this.updateAt_(f)},updateAt_:function(f){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),f&&(this.appendValueInput("AT").setCheck("Number"),R.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(R.ORDINAL_NUMBER_SUFFIX)),R.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(R.TEXT_CHARAT_TAIL)),this.isAt_=f}},$e=function(){this.getField("WHERE").setValidator(function(v){v=v==="FROM_START"||v==="FROM_END",v!==this.isAt_&&this.getSourceBlock().updateAt_(v)}),this.updateAt_(!0);const f=this;this.setTooltip(function(){var v=f.getFieldValue("WHERE");let O=R.TEXT_CHARAT_TOOLTIP;return(v==="FROM_START"||v==="FROM_END")&&(v=v==="FROM_START"?R.LISTS_INDEX_FROM_START_TOOLTIP:R.LISTS_INDEX_FROM_END_TOOLTIP)&&(O+="  "+v.replace("%1",f.workspace.options.oneBasedIndex?"#1":"#0")),O})};c.module$build$src$core$extensions.register("text_indexOf_tooltip",Z),c.module$build$src$core$extensions.register("text_quotes",de),c.module$build$src$core$extensions.registerMutator("text_join_mutator",J,ue),c.module$build$src$core$extensions.registerMutator("text_charAt_mutator",ne,$e),he(N.blocks);var Ae={};c.module$build$src$core$contextmenu,c.module$build$src$core$events$events,c.module$build$src$core$procedures,c.module$build$src$core$variables,c.module$build$src$core$xml,c.module$build$src$core$utils$xml,c.Align$$module$build$src$core$input,c.config$$module$build$src$core$config,c.FieldCheckbox$$module$build$src$core$field_checkbox,c.FieldLabel$$module$build$src$core$field_label,c.FieldTextInput$$module$build$src$core$field_textinput;var ce=c.module$build$src$core$msg.Msg;c.Mutator$$module$build$src$core$mutator,c.module$build$src$core$names.Names;var ke=c.module$build$src$core$common.defineBlocks;Ae.blocks={};var fe={setStatements_:function(f){this.hasStatements_!==f&&(f?(this.appendStatementInput("STACK").appendField(ce.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=f)},updateParams_:function(){let f="";this.arguments_.length&&(f=ce.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),c.module$build$src$core$events$events.disable();try{this.setFieldValue(f,"PARAMS")}finally{c.module$build$src$core$events$events.enable()}},mutationToDom:function(f){const v=c.module$build$src$core$utils$xml.createElement("mutation");f&&v.setAttribute("name",this.getFieldValue("NAME"));for(let O=0;O<this.argumentVarModels_.length;O++){const x=c.module$build$src$core$utils$xml.createElement("arg"),G=this.argumentVarModels_[O];x.setAttribute("name",G.name),x.setAttribute("varid",G.getId()),f&&this.paramIds_&&x.setAttribute("paramId",this.paramIds_[O]),v.appendChild(x)}return this.hasStatements_||v.setAttribute("statements","false"),v},domToMutation:function(f){this.arguments_=[],this.argumentVarModels_=[];for(let O=0,x;x=f.childNodes[O];O++)if(x.nodeName.toLowerCase()==="arg"){const G=x.getAttribute("name");var v=x.getAttribute("varid")||x.getAttribute("varId");this.arguments_.push(G),v=c.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,v,G,""),v!==null?this.argumentVarModels_.push(v):console.log(`Failed to create a variable named "${G}", ignoring.`)}this.updateParams_(),c.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(f.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const f=Object.create(null);if(this.argumentVarModels_.length){f.params=[];for(let v=0;v<this.argumentVarModels_.length;v++)f.params.push({name:this.argumentVarModels_[v].name,id:this.argumentVarModels_[v].getId()})}return this.hasStatements_||(f.hasStatements=!1),f},loadExtraState:function(f){if(this.arguments_=[],this.argumentVarModels_=[],f.params)for(let O=0;O<f.params.length;O++){var v=f.params[O];v=c.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,v.id,v.name,""),this.arguments_.push(v.name),this.argumentVarModels_.push(v)}this.updateParams_(),c.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(f.hasStatements!==!1)},decompose:function(f){const v=c.module$build$src$core$utils$xml.createElement("block");v.setAttribute("type","procedures_mutatorcontainer");var O=c.module$build$src$core$utils$xml.createElement("statement");O.setAttribute("name","STACK"),v.appendChild(O);for(let G=0;G<this.arguments_.length;G++){const Ke=c.module$build$src$core$utils$xml.createElement("block");Ke.setAttribute("type","procedures_mutatorarg");var x=c.module$build$src$core$utils$xml.createElement("field");x.setAttribute("name","NAME");const ki=c.module$build$src$core$utils$xml.createTextNode(this.arguments_[G]);x.appendChild(ki),Ke.appendChild(x),x=c.module$build$src$core$utils$xml.createElement("next"),Ke.appendChild(x),O.appendChild(Ke),O=x}return f=c.module$build$src$core$xml.domToBlock(v,f),this.type==="procedures_defreturn"?f.setFieldValue(this.hasStatements_,"STATEMENTS"):f.removeInput("STATEMENT_INPUT"),c.module$build$src$core$procedures.mutateCallers(this),f},compose:function(f){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let v=f.getInputTargetBlock("STACK");for(;v&&!v.isInsertionMarker();){var O=v.getFieldValue("NAME");this.arguments_.push(O),O=this.workspace.getVariable(O,""),this.argumentVarModels_.push(O),this.paramIds_.push(v.id),v=v.nextConnection&&v.nextConnection.targetBlock()}this.updateParams_(),c.module$build$src$core$procedures.mutateCallers(this),f=f.getFieldValue("STATEMENTS"),f!==null&&(f=f==="TRUE",this.hasStatements_!==f)&&(f?(this.setStatements_(!0),c.Mutator$$module$build$src$core$mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(f=this.getInput("STACK").connection,(this.statementConnection_=f.targetConnection)&&(f=f.targetBlock(),f.unplug(),f.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(f,v){var O=this.workspace.getVariableById(f);if(O.type===""){O=O.name,v=this.workspace.getVariableById(v);var x=!1;for(let G=0;G<this.argumentVarModels_.length;G++)this.argumentVarModels_[G].getId()===f&&(this.arguments_[G]=v.name,this.argumentVarModels_[G]=v,x=!0);x&&(this.displayRenamedVar_(O,v.name),c.module$build$src$core$procedures.mutateCallers(this))}},updateVarName:function(f){const v=f.name;let O=!1,x;for(let G=0;G<this.argumentVarModels_.length;G++)this.argumentVarModels_[G].getId()===f.getId()&&(x=this.arguments_[G],this.arguments_[G]=v,O=!0);O&&(this.displayRenamedVar_(x,v),c.module$build$src$core$procedures.mutateCallers(this))},displayRenamedVar_:function(f,v){if(this.updateParams_(),this.mutator&&this.mutator.isVisible()){const O=this.mutator.workspace_.getAllBlocks(!1);for(let x=0,G;G=O[x];x++)G.type==="procedures_mutatorarg"&&c.module$build$src$core$names.Names.equals(f,G.getFieldValue("NAME"))&&G.setFieldValue(v,"NAME")}},customContextMenu:function(f){if(!this.isInFlyout){var v={enabled:!0},O=this.getFieldValue("NAME");v.text=ce.PROCEDURES_CREATE_DO.replace("%1",O);var x=c.module$build$src$core$utils$xml.createElement("mutation");for(x.setAttribute("name",O),O=0;O<this.arguments_.length;O++){var G=c.module$build$src$core$utils$xml.createElement("arg");G.setAttribute("name",this.arguments_[O]),x.appendChild(G)}if(O=c.module$build$src$core$utils$xml.createElement("block"),O.setAttribute("type",this.callType_),O.appendChild(x),v.callback=c.module$build$src$core$contextmenu.callbackFactory(this,O),f.push(v),!this.isCollapsed())for(v=0;v<this.argumentVarModels_.length;v++)x={enabled:!0},O=this.argumentVarModels_[v],x.text=ce.VARIABLES_SET_CREATE_GET.replace("%1",O.name),O=c.module$build$src$core$variables.generateVariableFieldDom(O),G=c.module$build$src$core$utils$xml.createElement("block"),G.setAttribute("type","variables_get"),G.appendChild(O),x.callback=c.module$build$src$core$contextmenu.callbackFactory(this,G),f.push(x)}}};Ae.blocks.procedures_defnoreturn=Object.assign({},fe,{init:function(){var f=c.module$build$src$core$procedures.findLegalName("",this);f=new c.FieldTextInput$$module$build$src$core$field_textinput(f,c.module$build$src$core$procedures.rename),f.setSpellcheck(!1),this.appendDummyInput().appendField(ce.PROCEDURES_DEFNORETURN_TITLE).appendField(f,"NAME").appendField("","PARAMS"),this.setMutator(new c.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&ce.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(ce.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(ce.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(ce.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),Ae.blocks.procedures_defreturn=Object.assign({},fe,{init:function(){var f=c.module$build$src$core$procedures.findLegalName("",this);f=new c.FieldTextInput$$module$build$src$core$field_textinput(f,c.module$build$src$core$procedures.rename),f.setSpellcheck(!1),this.appendDummyInput().appendField(ce.PROCEDURES_DEFRETURN_TITLE).appendField(f,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(c.Align$$module$build$src$core$input.RIGHT).appendField(ce.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new c.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&ce.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(ce.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(ce.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(ce.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),Ae.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(ce.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(ce.PROCEDURES_ALLOW_STATEMENTS).appendField(new c.FieldCheckbox$$module$build$src$core$field_checkbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(ce.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},Ae.blocks.procedures_mutatorarg={init:function(){const f=new c.FieldTextInput$$module$build$src$core$field_textinput(c.module$build$src$core$procedures.DEFAULT_ARG,this.validator_);f.oldShowEditorFn_=f.showEditor_,f.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(ce.PROCEDURES_MUTATORARG_TITLE).appendField(f,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(ce.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,f.onFinishEditing_=this.deleteIntermediateVars_,f.createdVariables_=[],f.onFinishEditing_("x")},validator_:function(f){var v=this.getSourceBlock();const O=c.Mutator$$module$build$src$core$mutator.findParentWs(v.workspace);if(f=f.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!f)return null;const x=(v.workspace.targetWorkspace||v.workspace).getAllBlocks(!1),G=f.toLowerCase();for(let Ke=0;Ke<x.length;Ke++){if(x[Ke].id===this.getSourceBlock().id)continue;const ki=x[Ke].getFieldValue("NAME");if(ki&&ki.toLowerCase()===G)return null}return v.isInFlyout||((v=O.getVariable(f,""))&&v.name!==f&&O.renameVariableById(v.getId(),f),v||(v=O.createVariable(f,""))&&this.createdVariables_&&this.createdVariables_.push(v)),f},deleteIntermediateVars_:function(f){const v=c.Mutator$$module$build$src$core$mutator.findParentWs(this.getSourceBlock().workspace);if(v)for(let O=0;O<this.createdVariables_.length;O++){const x=this.createdVariables_[O];x.name!==f&&v.deleteVariableById(x.getId())}}};var et={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(f,v){c.module$build$src$core$names.Names.equals(f,this.getProcedureCall())&&(this.setFieldValue(v,"NAME"),this.setTooltip((this.outputConnection?ce.PROCEDURES_CALLRETURN_TOOLTIP:ce.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",v)))},setProcedureParameters_:function(f,v){var O=c.module$build$src$core$procedures.getDefinition(this.getProcedureCall(),this.workspace),x=O&&O.mutator&&O.mutator.isVisible();if(x?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),f.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=v;else{if(v.length!==f.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),O=this.rendered,this.rendered=!1;for(let Ke=0;Ke<this.arguments_.length;Ke++){var G=this.getInput("ARG"+Ke);G&&(G=G.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Ke]]=G,x&&G&&v.indexOf(this.quarkIds_[Ke])===-1&&(G.disconnect(),G.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(f),this.argumentVarModels_=[],f=0;f<this.arguments_.length;f++)x=c.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[f],""),this.argumentVarModels_.push(x);if(this.updateShape_(),this.quarkIds_=v)for(v=0;v<this.arguments_.length;v++)f=this.quarkIds_[v],f in this.quarkConnections_&&(c.Mutator$$module$build$src$core$mutator.reconnect(this.quarkConnections_[f],this,"ARG"+v)||delete this.quarkConnections_[f]);(this.rendered=O)&&this.render()}},updateShape_:function(){for(var f=0;f<this.arguments_.length;f++){var v=this.getField("ARGNAME"+f);if(v){c.module$build$src$core$events$events.disable();try{v.setValue(this.arguments_[f])}finally{c.module$build$src$core$events$events.enable()}}else v=new c.FieldLabel$$module$build$src$core$field_label(this.arguments_[f]),this.appendValueInput("ARG"+f).setAlign(c.Align$$module$build$src$core$input.RIGHT).appendField(v,"ARGNAME"+f).init()}for(f=this.arguments_.length;this.getInput("ARG"+f);f++)this.removeInput("ARG"+f);(f=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(f.appendField(ce.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),f.init()):this.getField("WITH")&&f.removeField("WITH"))},mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");f.setAttribute("name",this.getProcedureCall());for(let v=0;v<this.arguments_.length;v++){const O=c.module$build$src$core$utils$xml.createElement("arg");O.setAttribute("name",this.arguments_[v]),f.appendChild(O)}return f},domToMutation:function(f){var v=f.getAttribute("name");this.renameProcedure(this.getProcedureCall(),v),v=[];const O=[];for(let x=0,G;G=f.childNodes[x];x++)G.nodeName.toLowerCase()==="arg"&&(v.push(G.getAttribute("name")),O.push(G.getAttribute("paramId")));this.setProcedureParameters_(v,O)},saveExtraState:function(){const f=Object.create(null);return f.name=this.getProcedureCall(),this.arguments_.length&&(f.params=this.arguments_),f},loadExtraState:function(f){if(this.renameProcedure(this.getProcedureCall(),f.name),f=f.params){const v=[];v.length=f.length,v.fill(null),this.setProcedureParameters_(f,v)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(f){if(this.workspace&&!this.workspace.isFlyout&&f.recordUndo)if(f.type===c.module$build$src$core$events$events.BLOCK_CREATE&&f.ids.indexOf(this.id)!==-1){var v=this.getProcedureCall();if(v=c.module$build$src$core$procedures.getDefinition(v,this.workspace),!v||v.type===this.defType_&&JSON.stringify(v.getVars())===JSON.stringify(this.arguments_)||(v=null),!v){c.module$build$src$core$events$events.setGroup(f.group),f=c.module$build$src$core$utils$xml.createElement("xml"),v=c.module$build$src$core$utils$xml.createElement("block"),v.setAttribute("type",this.defType_);var O=this.getRelativeToSurfaceXY(),x=O.y+2*c.config$$module$build$src$core$config.snapRadius;v.setAttribute("x",O.x+c.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)),v.setAttribute("y",x),O=this.mutationToDom(),v.appendChild(O),O=c.module$build$src$core$utils$xml.createElement("field"),O.setAttribute("name","NAME"),x=this.getProcedureCall();const G=c.module$build$src$core$procedures.findLegalName(x,this);x!==G&&this.renameProcedure(x,G),O.appendChild(c.module$build$src$core$utils$xml.createTextNode(x)),v.appendChild(O),f.appendChild(v),c.module$build$src$core$xml.domToWorkspace(f,this.workspace),c.module$build$src$core$events$events.setGroup(!1)}}else f.type===c.module$build$src$core$events$events.BLOCK_DELETE&&f.blockId!=this.id?(v=this.getProcedureCall(),c.module$build$src$core$procedures.getDefinition(v,this.workspace)||(c.module$build$src$core$events$events.setGroup(f.group),this.dispose(!0),c.module$build$src$core$events$events.setGroup(!1))):f.type===c.module$build$src$core$events$events.CHANGE&&f.element==="disabled"&&(v=this.getProcedureCall(),(v=c.module$build$src$core$procedures.getDefinition(v,this.workspace))&&v.id===f.blockId&&((v=c.module$build$src$core$events$events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),c.module$build$src$core$events$events.setGroup(f.group),f.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),c.module$build$src$core$events$events.setGroup(v)))},customContextMenu:function(f){if(this.workspace.isMovable()){var v={enabled:!0};v.text=ce.PROCEDURES_HIGHLIGHT_DEF;var O=this.getProcedureCall(),x=this.workspace;v.callback=function(){const G=c.module$build$src$core$procedures.getDefinition(O,x);G&&(x.centerOnBlock(G.id),G.select())},f.push(v)}}};Ae.blocks.procedures_callnoreturn=Object.assign({},et,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(ce.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),Ae.blocks.procedures_callreturn=Object.assign({},et,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(ce.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),Ae.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(ce.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(ce.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(ce.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(ce.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");return f.setAttribute("value",Number(this.hasReturnValue_)),f},domToMutation:function(f){this.hasReturnValue_=f.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(ce.PROCEDURES_DEFRETURN_RETURN))},onchange:function(f){if(!(this.workspace.isDragging&&this.workspace.isDragging()||f.type!==c.module$build$src$core$events$events.BLOCK_MOVE)){var v=!1,O=this;do{if(this.FUNCTION_TYPES.indexOf(O.type)!==-1){v=!0;break}O=O.getSurroundParent()}while(O);v?(O.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(ce.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):O.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(ce.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(ce.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(O=c.module$build$src$core$events$events.getGroup(),c.module$build$src$core$events$events.setGroup(f.group),this.setEnabled(v),c.module$build$src$core$events$events.setGroup(O))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},ke(Ae.blocks);var Se={};c.module$build$src$core$extensions,c.module$build$src$core$field_dropdown,c.module$build$src$core$utils$xml;var A=c.module$build$src$core$common.createBlockDefinitionsFromJsonArray,oe=c.module$build$src$core$common.defineBlocks;Se.blocks=A([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03C0","PI"],["e","E"],["\u03C6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xBD)","SQRT1_2"],["\u221E","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var Ft={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};c.module$build$src$core$extensions.register("math_op_tooltip",c.module$build$src$core$extensions.buildTooltipForDropdown("OP",Ft));var Pe={mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation"),v=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return f.setAttribute("divisor_input",v),f},domToMutation:function(f){f=f.getAttribute("divisor_input")==="true",this.updateShape_(f)},updateShape_:function(f){const v=this.getInput("DIVISOR");f?v||this.appendValueInput("DIVISOR").setCheck("Number"):v&&this.removeInput("DIVISOR")}},Ys=function(){this.getField("PROPERTY").setValidator(function(f){f=f==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(f)})};c.module$build$src$core$extensions.registerMutator("math_is_divisibleby_mutator",Pe,Ys),c.module$build$src$core$extensions.register("math_change_tooltip",c.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var be={updateType_:function(f){f==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");return f.setAttribute("op",this.getFieldValue("OP")),f},domToMutation:function(f){this.updateType_(f.getAttribute("op"))}},St=function(){this.getField("OP").setValidator(function(f){this.updateType_(f)}.bind(this))};c.module$build$src$core$extensions.registerMutator("math_modes_of_list_mutator",be,St),oe(Se.blocks);var hs={};c.module$build$src$core$contextmenu,c.module$build$src$core$events$events,c.module$build$src$core$extensions,c.module$build$src$core$variables,c.module$build$src$core$utils$xml;var Kt=c.module$build$src$core$msg.Msg,vs=c.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Is=c.module$build$src$core$common.defineBlocks;hs.blocks=vs([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var C={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};c.module$build$src$core$extensions.register("controls_whileUntil_tooltip",c.module$build$src$core$extensions.buildTooltipForDropdown("MODE",C));var L={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};c.module$build$src$core$extensions.register("controls_flow_tooltip",c.module$build$src$core$extensions.buildTooltipForDropdown("FLOW",L));var U={customContextMenu:function(f){if(!this.isInFlyout){var v=this.getField("VAR").getVariable(),O=v.name;if(!this.isCollapsed()&&O!==null){const x={enabled:!0};x.text=Kt.VARIABLES_SET_CREATE_GET.replace("%1",O),v=c.module$build$src$core$variables.generateVariableFieldDom(v),O=c.module$build$src$core$utils$xml.createElement("block"),O.setAttribute("type","variables_get"),O.appendChild(v),x.callback=c.module$build$src$core$contextmenu.callbackFactory(this,O),f.push(x)}}}};c.module$build$src$core$extensions.registerMixin("contextMenu_newGetVariableBlock",U),c.module$build$src$core$extensions.register("controls_for_tooltip",c.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),c.module$build$src$core$extensions.register("controls_forEach_tooltip",c.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),hs.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var K={getSurroundLoop:function(){let f=this;do{if(hs.loopTypes.has(f.type))return f;f=f.getSurroundParent()}while(f);return null},onchange:function(f){if(this.workspace.isDragging&&!this.workspace.isDragging()&&f.type===c.module$build$src$core$events$events.BLOCK_MOVE){var v=this.getSurroundLoop(this);if(this.setWarningText(v?null:Kt.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){const O=c.module$build$src$core$events$events.getGroup();c.module$build$src$core$events$events.setGroup(f.group),this.setEnabled(v),c.module$build$src$core$events$events.setGroup(O)}}}};c.module$build$src$core$extensions.registerMixin("controls_flow_in_loop_check",K),Is(hs.blocks);var Y={};c.module$build$src$core$events$events,c.module$build$src$core$extensions,c.module$build$src$core$utils$xml;var ee=c.module$build$src$core$msg.Msg;c.Mutator$$module$build$src$core$mutator;var re=c.module$build$src$core$common.createBlockDefinitionsFromJsonArray,H=c.module$build$src$core$common.defineBlocks;Y.blocks=re([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200F<","LT"],["\u200F\u2264","LTE"],["\u200F>","GT"],["\u200F\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var ie={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};c.module$build$src$core$extensions.register("logic_op_tooltip",c.module$build$src$core$extensions.buildTooltipForDropdown("OP",ie));var q={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const f=c.module$build$src$core$utils$xml.createElement("mutation");return this.elseifCount_&&f.setAttribute("elseif",this.elseifCount_),this.elseCount_&&f.setAttribute("else",1),f},domToMutation:function(f){this.elseifCount_=parseInt(f.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(f.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const f=Object.create(null);return this.elseifCount_&&(f.elseIfCount=this.elseifCount_),this.elseCount_&&(f.hasElse=!0),f},loadExtraState:function(f){this.elseifCount_=f.elseIfCount||0,this.elseCount_=f.hasElse?1:0,this.updateShape_()},decompose:function(f){const v=f.newBlock("controls_if_if");v.initSvg();let O=v.nextConnection;for(let x=1;x<=this.elseifCount_;x++){const G=f.newBlock("controls_if_elseif");G.initSvg(),O.connect(G.previousConnection),O=G.nextConnection}return this.elseCount_&&(f=f.newBlock("controls_if_else"),f.initSvg(),O.connect(f.previousConnection)),v},compose:function(f){f=f.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const v=[null],O=[null];let x=null;for(;f;){if(!f.isInsertionMarker())switch(f.type){case"controls_if_elseif":this.elseifCount_++,v.push(f.valueConnection_),O.push(f.statementConnection_);break;case"controls_if_else":this.elseCount_++,x=f.statementConnection_;break;default:throw TypeError("Unknown block type: "+f.type)}f=f.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(v,O,x)},saveConnections:function(f){f=f.nextConnection.targetBlock();let v=1;for(;f;){if(!f.isInsertionMarker())switch(f.type){case"controls_if_elseif":var O=this.getInput("IF"+v);const x=this.getInput("DO"+v);f.valueConnection_=O&&O.connection.targetConnection,f.statementConnection_=x&&x.connection.targetConnection,v++;break;case"controls_if_else":O=this.getInput("ELSE"),f.statementConnection_=O&&O.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+f.type)}f=f.getNextBlock()}},rebuildShape_:function(){const f=[null],v=[null];let O=null;this.getInput("ELSE")&&(O=this.getInput("ELSE").connection.targetConnection);for(let x=1;this.getInput("IF"+x);x++){const G=this.getInput("IF"+x),Ke=this.getInput("DO"+x);f.push(G.connection.targetConnection),v.push(Ke.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(f,v,O)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var f=1;this.getInput("IF"+f);f++)this.removeInput("IF"+f),this.removeInput("DO"+f);for(f=1;f<=this.elseifCount_;f++)this.appendValueInput("IF"+f).setCheck("Boolean").appendField(ee.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+f).appendField(ee.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(ee.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(f,v,O){for(let x=1;x<=this.elseifCount_;x++)c.Mutator$$module$build$src$core$mutator.reconnect(f[x],this,"IF"+x),c.Mutator$$module$build$src$core$mutator.reconnect(v[x],this,"DO"+x);c.Mutator$$module$build$src$core$mutator.reconnect(O,this,"ELSE")}};c.module$build$src$core$extensions.registerMutator("controls_if_mutator",q,null,["controls_if_elseif","controls_if_else"]);var Ee=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return ee.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return ee.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return ee.CONTROLS_IF_TOOLTIP_4}else return ee.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};c.module$build$src$core$extensions.register("controls_if_tooltip",Ee);var _e={onchange:function(f){this.prevBlocks_||(this.prevBlocks_=[null,null]);var v=this.getInputTargetBlock("A");const O=this.getInputTargetBlock("B");v&&O&&!this.workspace.connectionChecker.doTypeChecks(v.outputConnection,O.outputConnection)&&(c.module$build$src$core$events$events.setGroup(f.group),f=this.prevBlocks_[0],f!==v&&(v.unplug(),!f||f.isDisposed()||f.isShadow()||this.getInput("A").connection.connect(f.outputConnection)),v=this.prevBlocks_[1],v!==O&&(O.unplug(),!v||v.isDisposed()||v.isShadow()||this.getInput("B").connection.connect(v.outputConnection)),this.bumpNeighbours(),c.module$build$src$core$events$events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},ye=function(){this.mixin(_e)};c.module$build$src$core$extensions.register("logic_compare",ye);var Oe={prevParentConnection_:null,onchange:function(f){const v=this.getInputTargetBlock("THEN"),O=this.getInputTargetBlock("ELSE"),x=this.outputConnection.targetConnection;if((v||O)&&x)for(let G=0;2>G;G++){const Ke=G===1?v:O;Ke&&!Ke.workspace.connectionChecker.doTypeChecks(Ke.outputConnection,x)&&(c.module$build$src$core$events$events.setGroup(f.group),x===this.prevParentConnection_?(this.unplug(),x.getSourceBlock().bumpNeighbours()):(Ke.unplug(),Ke.bumpNeighbours()),c.module$build$src$core$events$events.setGroup(!1))}this.prevParentConnection_=x}};c.module$build$src$core$extensions.registerMixin("logic_ternary",Oe),H(Y.blocks);var Le={};c.module$build$src$core$utils$xml,c.module$build$src$core$xml,c.Align$$module$build$src$core$input,c.module$build$src$core$connection_type.ConnectionType;var Xe=c.module$build$src$core$field_dropdown.FieldDropdown,j=c.module$build$src$core$msg.Msg;c.Mutator$$module$build$src$core$mutator;var at=c.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Jt=c.module$build$src$core$common.defineBlocks;Le.blocks=at([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Le.blocks.lists_create_with={init:function(){this.setHelpUrl(j.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new c.Mutator$$module$build$src$core$mutator(["lists_create_with_item"],this)),this.setTooltip(j.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");return f.setAttribute("items",this.itemCount_),f},domToMutation:function(f){this.itemCount_=parseInt(f.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(f){this.itemCount_=f.itemCount,this.updateShape_()},decompose:function(f){const v=f.newBlock("lists_create_with_container");v.initSvg();let O=v.getInput("STACK").connection;for(let x=0;x<this.itemCount_;x++){const G=f.newBlock("lists_create_with_item");G.initSvg(),O.connect(G.previousConnection),O=G.nextConnection}return v},compose:function(f){var v=f.getInputTargetBlock("STACK");for(f=[];v;)v.isInsertionMarker()||f.push(v.valueConnection_),v=v.getNextBlock();for(v=0;v<this.itemCount_;v++){const O=this.getInput("ADD"+v).connection.targetConnection;O&&f.indexOf(O)===-1&&O.disconnect()}for(this.itemCount_=f.length,this.updateShape_(),v=0;v<this.itemCount_;v++)c.Mutator$$module$build$src$core$mutator.reconnect(f[v],this,"ADD"+v)},saveConnections:function(f){f=f.getInputTargetBlock("STACK");let v=0;for(;f;){if(f.isInsertionMarker()){f=f.getNextBlock();continue}const O=this.getInput("ADD"+v);f.valueConnection_=O&&O.connection.targetConnection,f=f.getNextBlock(),v++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(j.LISTS_CREATE_EMPTY_TITLE);for(var f=0;f<this.itemCount_;f++)if(!this.getInput("ADD"+f)){const v=this.appendValueInput("ADD"+f).setAlign(c.Align$$module$build$src$core$input.RIGHT);f===0&&v.appendField(j.LISTS_CREATE_WITH_INPUT_WITH)}for(f=this.itemCount_;this.getInput("ADD"+f);f++)this.removeInput("ADD"+f)}},Le.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(j.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(j.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},Le.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(j.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(j.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},Le.blocks.lists_indexOf={init:function(){const f=[[j.LISTS_INDEX_OF_FIRST,"FIRST"],[j.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(j.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(j.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new Xe(f),"END"),this.setInputsInline(!0);const v=this;this.setTooltip(function(){return j.LISTS_INDEX_OF_TOOLTIP.replace("%1",v.workspace.options.oneBasedIndex?"0":"-1")})}},Le.blocks.lists_getIndex={init:function(){var f=[[j.LISTS_GET_INDEX_GET,"GET"],[j.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[j.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[j.LISTS_GET_INDEX_FROM_START,"FROM_START"],[j.LISTS_GET_INDEX_FROM_END,"FROM_END"],[j.LISTS_GET_INDEX_FIRST,"FIRST"],[j.LISTS_GET_INDEX_LAST,"LAST"],[j.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(j.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),f=new Xe(f,function(O){O=O==="REMOVE",this.getSourceBlock().updateStatement_(O)}),this.appendValueInput("VALUE").setCheck("Array").appendField(j.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(f,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),j.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(j.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);const v=this;this.setTooltip(function(){const O=v.getFieldValue("MODE"),x=v.getFieldValue("WHERE");let G="";switch(O+" "+x){case"GET FROM_START":case"GET FROM_END":G=j.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":G=j.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":G=j.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":G=j.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":G=j.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":G=j.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":G=j.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":G=j.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":G=j.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":G=j.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":G=j.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":G=j.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(x==="FROM_START"||x==="FROM_END")&&(G+="  "+(x==="FROM_START"?j.LISTS_INDEX_FROM_START_TOOLTIP:j.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",v.workspace.options.oneBasedIndex?"#1":"#0")),G})},mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");f.setAttribute("statement",!this.outputConnection);const v=this.getInput("AT").type===c.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return f.setAttribute("at",v),f},domToMutation:function(f){const v=f.getAttribute("statement")==="true";this.updateStatement_(v),f=f.getAttribute("at")!=="false",this.updateAt_(f)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(f){f.isStatement?this.updateStatement_(!0):typeof f=="string"&&this.domToMutation(c.module$build$src$core$xml.textToDom(f))},updateStatement_:function(f){f!==!this.outputConnection&&(this.unplug(!0,!0),f?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(f){this.removeInput("AT"),this.removeInput("ORDINAL",!0),f?(this.appendValueInput("AT").setCheck("Number"),j.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(j.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const v=new Xe(this.WHERE_OPTIONS,function(O){const x=O==="FROM_START"||O==="FROM_END";if(x!==f){const G=this.getSourceBlock();return G.updateAt_(x),G.setFieldValue(O,"WHERE"),null}});this.getInput("AT").appendField(v,"WHERE"),j.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},Le.blocks.lists_setIndex={init:function(){const f=[[j.LISTS_SET_INDEX_SET,"SET"],[j.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[j.LISTS_GET_INDEX_FROM_START,"FROM_START"],[j.LISTS_GET_INDEX_FROM_END,"FROM_END"],[j.LISTS_GET_INDEX_FIRST,"FIRST"],[j.LISTS_GET_INDEX_LAST,"LAST"],[j.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(j.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(j.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new Xe(f),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(j.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(j.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);const v=this;this.setTooltip(function(){const O=v.getFieldValue("MODE"),x=v.getFieldValue("WHERE");let G="";switch(O+" "+x){case"SET FROM_START":case"SET FROM_END":G=j.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":G=j.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":G=j.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":G=j.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":G=j.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":G=j.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":G=j.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":G=j.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(x==="FROM_START"||x==="FROM_END")&&(G+="  "+j.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",v.workspace.options.oneBasedIndex?"#1":"#0")),G})},mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation"),v=this.getInput("AT").type===c.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return f.setAttribute("at",v),f},domToMutation:function(f){f=f.getAttribute("at")!=="false",this.updateAt_(f)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(f){this.removeInput("AT"),this.removeInput("ORDINAL",!0),f?(this.appendValueInput("AT").setCheck("Number"),j.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(j.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const v=new Xe(this.WHERE_OPTIONS,function(O){const x=O==="FROM_START"||O==="FROM_END";if(x!==f){const G=this.getSourceBlock();return G.updateAt_(x),G.setFieldValue(O,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(v,"WHERE")}},Le.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[j.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[j.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[j.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[j.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[j.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[j.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(j.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(j.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),j.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(j.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(j.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");var v=this.getInput("AT1").type===c.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return f.setAttribute("at1",v),v=this.getInput("AT2").type===c.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,f.setAttribute("at2",v),f},domToMutation:function(f){const v=f.getAttribute("at1")==="true";f=f.getAttribute("at2")==="true",this.updateAt_(1,v),this.updateAt_(2,f)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(f,v){this.removeInput("AT"+f),this.removeInput("ORDINAL"+f,!0),v?(this.appendValueInput("AT"+f).setCheck("Number"),j.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+f).appendField(j.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+f);const O=new Xe(this["WHERE_OPTIONS_"+f],function(x){const G=x==="FROM_START"||x==="FROM_END";if(G!==v){const Ke=this.getSourceBlock();return Ke.updateAt_(f,G),Ke.setFieldValue(x,"WHERE"+f),null}});this.getInput("AT"+f).appendField(O,"WHERE"+f),f===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),j.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},Le.blocks.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Le.blocks.lists_split={init:function(){const f=this,v=new Xe([[j.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[j.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(O){f.updateType_(O)});this.setHelpUrl(j.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(v,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(j.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){const O=f.getFieldValue("MODE");if(O==="SPLIT")return j.LISTS_SPLIT_TOOLTIP_SPLIT;if(O==="JOIN")return j.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+O)})},updateType_:function(f){if(this.getFieldValue("MODE")!==f){const v=this.getInput("INPUT").connection;v.setShadowDom(null);const O=v.targetBlock();O&&(v.disconnect(),O.isShadow()?O.dispose():this.bumpNeighbours())}f==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const f=c.module$build$src$core$utils$xml.createElement("mutation");return f.setAttribute("mode",this.getFieldValue("MODE")),f},domToMutation:function(f){this.updateType_(f.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},Jt(Le.blocks);var ds={},No=c.module$build$src$core$common.createBlockDefinitionsFromJsonArray,zs=c.module$build$src$core$common.defineBlocks;ds.blocks=No([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),zs(ds.blocks);var Mt={};return Mt.colour=ds,Mt.lists=Le,Mt.logic=Y,Mt.loops=hs,Mt.math=Se,Mt.procedures=Ae,Mt.texts=N,Mt.variables=m,Mt.variablesDynamic=l,Mt.blocks=Object.assign({},ds.blocks,Le.blocks,Y.blocks,hs.blocks,Se.blocks,Ae.blocks,m.blocks,l.blocks),Mt.__namespace__=c,Mt})}(Td)),Td.exports}var aT;function dO(){return aT||(aT=1,function(s,r){(function(i,c){s.exports=c(hO())})(js,function(i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})}($d)),$d.exports}var bd={exports:{}},Ed={exports:{}},uT;function pO(){return uT||(uT=1,function(s,r){(function(i,c){s.exports=c(Ap())})(js,function(i){var c=i.__namespace__,l={};c.module$build$src$core$variables,c.module$build$src$core$utils$string,c.CodeGenerator$$module$build$src$core$generator,c.module$build$src$core$input_types.inputTypes,c.module$build$src$core$names.Names,c.NameType$$module$build$src$core$names,l.javascriptGenerator=new c.CodeGenerator$$module$build$src$core$generator("JavaScript"),l.javascriptGenerator.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(",")),l.javascriptGenerator.ORDER_ATOMIC=0,l.javascriptGenerator.ORDER_NEW=1.1,l.javascriptGenerator.ORDER_MEMBER=1.2,l.javascriptGenerator.ORDER_FUNCTION_CALL=2,l.javascriptGenerator.ORDER_INCREMENT=3,l.javascriptGenerator.ORDER_DECREMENT=3,l.javascriptGenerator.ORDER_BITWISE_NOT=4.1,l.javascriptGenerator.ORDER_UNARY_PLUS=4.2,l.javascriptGenerator.ORDER_UNARY_NEGATION=4.3,l.javascriptGenerator.ORDER_LOGICAL_NOT=4.4,l.javascriptGenerator.ORDER_TYPEOF=4.5,l.javascriptGenerator.ORDER_VOID=4.6,l.javascriptGenerator.ORDER_DELETE=4.7,l.javascriptGenerator.ORDER_AWAIT=4.8,l.javascriptGenerator.ORDER_EXPONENTIATION=5,l.javascriptGenerator.ORDER_MULTIPLICATION=5.1,l.javascriptGenerator.ORDER_DIVISION=5.2,l.javascriptGenerator.ORDER_MODULUS=5.3,l.javascriptGenerator.ORDER_SUBTRACTION=6.1,l.javascriptGenerator.ORDER_ADDITION=6.2,l.javascriptGenerator.ORDER_BITWISE_SHIFT=7,l.javascriptGenerator.ORDER_RELATIONAL=8,l.javascriptGenerator.ORDER_IN=8,l.javascriptGenerator.ORDER_INSTANCEOF=8,l.javascriptGenerator.ORDER_EQUALITY=9,l.javascriptGenerator.ORDER_BITWISE_AND=10,l.javascriptGenerator.ORDER_BITWISE_XOR=11,l.javascriptGenerator.ORDER_BITWISE_OR=12,l.javascriptGenerator.ORDER_LOGICAL_AND=13,l.javascriptGenerator.ORDER_LOGICAL_OR=14,l.javascriptGenerator.ORDER_CONDITIONAL=15,l.javascriptGenerator.ORDER_ASSIGNMENT=16,l.javascriptGenerator.ORDER_YIELD=17,l.javascriptGenerator.ORDER_COMMA=18,l.javascriptGenerator.ORDER_NONE=99,l.javascriptGenerator.ORDER_OVERRIDES=[[l.javascriptGenerator.ORDER_FUNCTION_CALL,l.javascriptGenerator.ORDER_MEMBER],[l.javascriptGenerator.ORDER_FUNCTION_CALL,l.javascriptGenerator.ORDER_FUNCTION_CALL],[l.javascriptGenerator.ORDER_MEMBER,l.javascriptGenerator.ORDER_MEMBER],[l.javascriptGenerator.ORDER_MEMBER,l.javascriptGenerator.ORDER_FUNCTION_CALL],[l.javascriptGenerator.ORDER_LOGICAL_NOT,l.javascriptGenerator.ORDER_LOGICAL_NOT],[l.javascriptGenerator.ORDER_MULTIPLICATION,l.javascriptGenerator.ORDER_MULTIPLICATION],[l.javascriptGenerator.ORDER_ADDITION,l.javascriptGenerator.ORDER_ADDITION],[l.javascriptGenerator.ORDER_LOGICAL_AND,l.javascriptGenerator.ORDER_LOGICAL_AND],[l.javascriptGenerator.ORDER_LOGICAL_OR,l.javascriptGenerator.ORDER_LOGICAL_OR]],l.javascriptGenerator.isInitialized=!1,l.javascriptGenerator.init=function(u){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new c.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(u.getVariableMap()),this.nameDB_.populateVariables(u),this.nameDB_.populateProcedures(u);const g=[];var m=c.module$build$src$core$variables.allDeveloperVariables(u);for(let b=0;b<m.length;b++)g.push(this.nameDB_.getName(m[b],c.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(u=c.module$build$src$core$variables.allUsedVarModels(u),m=0;m<u.length;m++)g.push(this.nameDB_.getName(u[m].getId(),c.NameType$$module$build$src$core$names.VARIABLE));g.length&&(this.definitions_.variables="var "+g.join(", ")+";"),this.isInitialized=!0},l.javascriptGenerator.finish=function(u){const g=Object.values(this.definitions_);return u=Object.getPrototypeOf(this).finish.call(this,u),this.isInitialized=!1,this.nameDB_.reset(),g.join(`

`)+`


`+u},l.javascriptGenerator.scrubNakedValue=function(u){return u+`;
`},l.javascriptGenerator.quote_=function(u){return u=u.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+u+"'"},l.javascriptGenerator.multiline_quote_=function(u){return u.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)},l.javascriptGenerator.scrub_=function(u,g,m){let b="";if(!u.outputConnection||!u.outputConnection.targetConnection){var E=u.getCommentText();E&&(E=c.module$build$src$core$utils$string.wrap(E,this.COMMENT_WRAP-3),b+=this.prefixLines(E+`
`,"// "));for(let I=0;I<u.inputList.length;I++)u.inputList[I].type===c.module$build$src$core$input_types.inputTypes.VALUE&&(E=u.inputList[I].connection.targetBlock())&&(E=this.allNestedComments(E))&&(b+=this.prefixLines(E,"// "))}return u=u.nextConnection&&u.nextConnection.targetBlock(),m=m?"":this.blockToCode(u),b+g+m},l.javascriptGenerator.getAdjusted=function(u,g,m,b,E){m=m||0,E=E||this.ORDER_NONE,u.workspace.options.oneBasedIndex&&m--;const I=u.workspace.options.oneBasedIndex?"1":"0";let y,F=E;return 0<m?y=F=this.ORDER_ADDITION:0>m?y=F=this.ORDER_SUBTRACTION:b&&(y=F=this.ORDER_UNARY_NEGATION),u=this.valueToCode(u,g,F)||I,c.module$build$src$core$utils$string.isNumber(u)?(u=Number(u)+m,b&&(u=-u)):(0<m?u=u+" + "+m:0>m&&(u=u+" - "+-m),b&&(u=m?"-("+u+")":"-"+u),y=Math.floor(y),E=Math.floor(E),y&&E>=y&&(u="("+u+")")),u},c.NameType$$module$build$src$core$names,l.javascriptGenerator.variables_get=function(u){return[l.javascriptGenerator.nameDB_.getName(u.getFieldValue("VAR"),c.NameType$$module$build$src$core$names.VARIABLE),l.javascriptGenerator.ORDER_ATOMIC]},l.javascriptGenerator.variables_set=function(u){const g=l.javascriptGenerator.valueToCode(u,"VALUE",l.javascriptGenerator.ORDER_ASSIGNMENT)||"0";return l.javascriptGenerator.nameDB_.getName(u.getFieldValue("VAR"),c.NameType$$module$build$src$core$names.VARIABLE)+" = "+g+`;
`},l.javascriptGenerator.variables_get_dynamic=l.javascriptGenerator.variables_get,l.javascriptGenerator.variables_set_dynamic=l.javascriptGenerator.variables_set,c.NameType$$module$build$src$core$names;var h=/^\s*'([^']|\\')*'\s*$/,d=function(u){return h.test(u)?[u,l.javascriptGenerator.ORDER_ATOMIC]:["String("+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},_=function(u,g,m){return g==="FIRST"?"0":g==="FROM_END"?u+".length - 1 - "+m:g==="LAST"?u+".length - 1":m};l.javascriptGenerator.text=function(u){return[l.javascriptGenerator.quote_(u.getFieldValue("TEXT")),l.javascriptGenerator.ORDER_ATOMIC]},l.javascriptGenerator.text_multiline=function(u){u=l.javascriptGenerator.multiline_quote_(u.getFieldValue("TEXT"));const g=u.indexOf("+")!==-1?l.javascriptGenerator.ORDER_ADDITION:l.javascriptGenerator.ORDER_ATOMIC;return[u,g]},l.javascriptGenerator.text_join=function(u){switch(u.itemCount_){case 0:return["''",l.javascriptGenerator.ORDER_ATOMIC];case 1:return u=l.javascriptGenerator.valueToCode(u,"ADD0",l.javascriptGenerator.ORDER_NONE)||"''",d(u);case 2:var g=l.javascriptGenerator.valueToCode(u,"ADD0",l.javascriptGenerator.ORDER_NONE)||"''";return u=l.javascriptGenerator.valueToCode(u,"ADD1",l.javascriptGenerator.ORDER_NONE)||"''",[d(g)[0]+" + "+d(u)[0],l.javascriptGenerator.ORDER_ADDITION];default:g=Array(u.itemCount_);for(let m=0;m<u.itemCount_;m++)g[m]=l.javascriptGenerator.valueToCode(u,"ADD"+m,l.javascriptGenerator.ORDER_NONE)||"''";return["["+g.join(",")+"].join('')",l.javascriptGenerator.ORDER_FUNCTION_CALL]}},l.javascriptGenerator.text_append=function(u){const g=l.javascriptGenerator.nameDB_.getName(u.getFieldValue("VAR"),c.NameType$$module$build$src$core$names.VARIABLE);return u=l.javascriptGenerator.valueToCode(u,"TEXT",l.javascriptGenerator.ORDER_NONE)||"''",g+" += "+d(u)[0]+`;
`},l.javascriptGenerator.text_length=function(u){return[(l.javascriptGenerator.valueToCode(u,"VALUE",l.javascriptGenerator.ORDER_MEMBER)||"''")+".length",l.javascriptGenerator.ORDER_MEMBER]},l.javascriptGenerator.text_isEmpty=function(u){return["!"+(l.javascriptGenerator.valueToCode(u,"VALUE",l.javascriptGenerator.ORDER_MEMBER)||"''")+".length",l.javascriptGenerator.ORDER_LOGICAL_NOT]},l.javascriptGenerator.text_indexOf=function(u){var g=u.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const m=l.javascriptGenerator.valueToCode(u,"FIND",l.javascriptGenerator.ORDER_NONE)||"''";return g=(l.javascriptGenerator.valueToCode(u,"VALUE",l.javascriptGenerator.ORDER_MEMBER)||"''")+"."+g+"("+m+")",u.workspace.options.oneBasedIndex?[g+" + 1",l.javascriptGenerator.ORDER_ADDITION]:[g,l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.text_charAt=function(u){const g=u.getFieldValue("WHERE")||"FROM_START",m=l.javascriptGenerator.valueToCode(u,"VALUE",g==="RANDOM"?l.javascriptGenerator.ORDER_NONE:l.javascriptGenerator.ORDER_MEMBER)||"''";switch(g){case"FIRST":return[m+".charAt(0)",l.javascriptGenerator.ORDER_FUNCTION_CALL];case"LAST":return[m+".slice(-1)",l.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_START":return u=l.javascriptGenerator.getAdjusted(u,"AT"),[m+".charAt("+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_END":return u=l.javascriptGenerator.getAdjusted(u,"AT",1,!0),[m+".slice("+u+").charAt(0)",l.javascriptGenerator.ORDER_FUNCTION_CALL];case"RANDOM":return[l.javascriptGenerator.provideFunction_("textRandomLetter",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+m+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},l.javascriptGenerator.text_getSubstring=function(u){var g=u.getFieldValue("WHERE1"),m=u.getFieldValue("WHERE2"),b=g!=="FROM_END"&&g!=="LAST"&&m!=="FROM_END"&&m!=="LAST",E=l.javascriptGenerator.valueToCode(u,"STRING",b?l.javascriptGenerator.ORDER_MEMBER:l.javascriptGenerator.ORDER_NONE)||"''";if(g==="FIRST"&&m==="LAST")return[E,l.javascriptGenerator.ORDER_NONE];if(E.match(/^'?\w+'?$/)||b){switch(g){case"FROM_START":g=l.javascriptGenerator.getAdjusted(u,"AT1");break;case"FROM_END":g=l.javascriptGenerator.getAdjusted(u,"AT1",1,!1,l.javascriptGenerator.ORDER_SUBTRACTION),g=E+".length - "+g;break;case"FIRST":g="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(m){case"FROM_START":m=l.javascriptGenerator.getAdjusted(u,"AT2",1);break;case"FROM_END":m=l.javascriptGenerator.getAdjusted(u,"AT2",0,!1,l.javascriptGenerator.ORDER_SUBTRACTION),m=E+".length - "+m;break;case"LAST":m=E+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}E=E+".slice("+g+", "+m+")"}else{b=l.javascriptGenerator.getAdjusted(u,"AT1"),u=l.javascriptGenerator.getAdjusted(u,"AT2");const I={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};E=l.javascriptGenerator.provideFunction_("subsequence"+I[g]+I[m],`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${g==="FROM_END"||g==="FROM_START"?", at1":""}${m==="FROM_END"||m==="FROM_START"?", at2":""}) {
  var start = ${_("sequence",g,"at1")};
  var end = ${_("sequence",m,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+E+(g==="FROM_END"||g==="FROM_START"?", "+b:"")+(m==="FROM_END"||m==="FROM_START"?", "+u:"")+")"}return[E,l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.text_changeCase=function(u){const g={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[u.getFieldValue("CASE")];return u=l.javascriptGenerator.valueToCode(u,"TEXT",g?l.javascriptGenerator.ORDER_MEMBER:l.javascriptGenerator.ORDER_NONE)||"''",[g?u+g:l.javascriptGenerator.provideFunction_("textToTitleCase",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.text_trim=function(u){const g={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[u.getFieldValue("MODE")];return[(l.javascriptGenerator.valueToCode(u,"TEXT",l.javascriptGenerator.ORDER_MEMBER)||"''")+g,l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.text_print=function(u){return"window.alert("+(l.javascriptGenerator.valueToCode(u,"TEXT",l.javascriptGenerator.ORDER_NONE)||"''")+`);
`},l.javascriptGenerator.text_prompt_ext=function(u){let g="window.prompt("+(u.getField("TEXT")?l.javascriptGenerator.quote_(u.getFieldValue("TEXT")):l.javascriptGenerator.valueToCode(u,"TEXT",l.javascriptGenerator.ORDER_NONE)||"''")+")";return u.getFieldValue("TYPE")==="NUMBER"&&(g="Number("+g+")"),[g,l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.text_prompt=l.javascriptGenerator.text_prompt_ext,l.javascriptGenerator.text_count=function(u){const g=l.javascriptGenerator.valueToCode(u,"TEXT",l.javascriptGenerator.ORDER_NONE)||"''";return u=l.javascriptGenerator.valueToCode(u,"SUB",l.javascriptGenerator.ORDER_NONE)||"''",[l.javascriptGenerator.provideFunction_("textCount",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+g+", "+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.text_replace=function(u){const g=l.javascriptGenerator.valueToCode(u,"TEXT",l.javascriptGenerator.ORDER_NONE)||"''",m=l.javascriptGenerator.valueToCode(u,"FROM",l.javascriptGenerator.ORDER_NONE)||"''";return u=l.javascriptGenerator.valueToCode(u,"TO",l.javascriptGenerator.ORDER_NONE)||"''",[l.javascriptGenerator.provideFunction_("textReplace",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+g+", "+m+", "+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.text_reverse=function(u){return[(l.javascriptGenerator.valueToCode(u,"TEXT",l.javascriptGenerator.ORDER_MEMBER)||"''")+".split('').reverse().join('')",l.javascriptGenerator.ORDER_FUNCTION_CALL]},c.NameType$$module$build$src$core$names,l.javascriptGenerator.procedures_defreturn=function(u){const g=l.javascriptGenerator.nameDB_.getName(u.getFieldValue("NAME"),c.NameType$$module$build$src$core$names.PROCEDURE);var m="";l.javascriptGenerator.STATEMENT_PREFIX&&(m+=l.javascriptGenerator.injectId(l.javascriptGenerator.STATEMENT_PREFIX,u)),l.javascriptGenerator.STATEMENT_SUFFIX&&(m+=l.javascriptGenerator.injectId(l.javascriptGenerator.STATEMENT_SUFFIX,u)),m&&(m=l.javascriptGenerator.prefixLines(m,l.javascriptGenerator.INDENT));let b="";l.javascriptGenerator.INFINITE_LOOP_TRAP&&(b=l.javascriptGenerator.prefixLines(l.javascriptGenerator.injectId(l.javascriptGenerator.INFINITE_LOOP_TRAP,u),l.javascriptGenerator.INDENT));const E=l.javascriptGenerator.statementToCode(u,"STACK");let I=l.javascriptGenerator.valueToCode(u,"RETURN",l.javascriptGenerator.ORDER_NONE)||"",y="";E&&I&&(y=m),I&&(I=l.javascriptGenerator.INDENT+"return "+I+`;
`);const F=[],B=u.getVars();for(let N=0;N<B.length;N++)F[N]=l.javascriptGenerator.nameDB_.getName(B[N],c.NameType$$module$build$src$core$names.VARIABLE);return m="function "+g+"("+F.join(", ")+`) {
`+m+b+E+y+I+"}",m=l.javascriptGenerator.scrub_(u,m),l.javascriptGenerator.definitions_["%"+g]=m,null},l.javascriptGenerator.procedures_defnoreturn=l.javascriptGenerator.procedures_defreturn,l.javascriptGenerator.procedures_callreturn=function(u){const g=l.javascriptGenerator.nameDB_.getName(u.getFieldValue("NAME"),c.NameType$$module$build$src$core$names.PROCEDURE),m=[],b=u.getVars();for(let E=0;E<b.length;E++)m[E]=l.javascriptGenerator.valueToCode(u,"ARG"+E,l.javascriptGenerator.ORDER_NONE)||"null";return[g+"("+m.join(", ")+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.procedures_callnoreturn=function(u){return l.javascriptGenerator.procedures_callreturn(u)[0]+`;
`},l.javascriptGenerator.procedures_ifreturn=function(u){let g="if ("+(l.javascriptGenerator.valueToCode(u,"CONDITION",l.javascriptGenerator.ORDER_NONE)||"false")+`) {
`;return l.javascriptGenerator.STATEMENT_SUFFIX&&(g+=l.javascriptGenerator.prefixLines(l.javascriptGenerator.injectId(l.javascriptGenerator.STATEMENT_SUFFIX,u),l.javascriptGenerator.INDENT)),u.hasReturnValue_?(u=l.javascriptGenerator.valueToCode(u,"VALUE",l.javascriptGenerator.ORDER_NONE)||"null",g+=l.javascriptGenerator.INDENT+"return "+u+`;
`):g+=l.javascriptGenerator.INDENT+`return;
`,g+`}
`},c.NameType$$module$build$src$core$names,l.javascriptGenerator.math_number=function(u){return u=Number(u.getFieldValue("NUM")),[u,0<=u?l.javascriptGenerator.ORDER_ATOMIC:l.javascriptGenerator.ORDER_UNARY_NEGATION]},l.javascriptGenerator.math_arithmetic=function(u){var g={ADD:[" + ",l.javascriptGenerator.ORDER_ADDITION],MINUS:[" - ",l.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:[" * ",l.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:[" / ",l.javascriptGenerator.ORDER_DIVISION],POWER:[null,l.javascriptGenerator.ORDER_NONE]}[u.getFieldValue("OP")];const m=g[0];g=g[1];const b=l.javascriptGenerator.valueToCode(u,"A",g)||"0";return u=l.javascriptGenerator.valueToCode(u,"B",g)||"0",m?[b+m+u,g]:["Math.pow("+b+", "+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.math_single=function(u){const g=u.getFieldValue("OP");let m;if(g==="NEG")return u=l.javascriptGenerator.valueToCode(u,"NUM",l.javascriptGenerator.ORDER_UNARY_NEGATION)||"0",u[0]==="-"&&(u=" "+u),["-"+u,l.javascriptGenerator.ORDER_UNARY_NEGATION];switch(u=g==="SIN"||g==="COS"||g==="TAN"?l.javascriptGenerator.valueToCode(u,"NUM",l.javascriptGenerator.ORDER_DIVISION)||"0":l.javascriptGenerator.valueToCode(u,"NUM",l.javascriptGenerator.ORDER_NONE)||"0",g){case"ABS":m="Math.abs("+u+")";break;case"ROOT":m="Math.sqrt("+u+")";break;case"LN":m="Math.log("+u+")";break;case"EXP":m="Math.exp("+u+")";break;case"POW10":m="Math.pow(10,"+u+")";break;case"ROUND":m="Math.round("+u+")";break;case"ROUNDUP":m="Math.ceil("+u+")";break;case"ROUNDDOWN":m="Math.floor("+u+")";break;case"SIN":m="Math.sin("+u+" / 180 * Math.PI)";break;case"COS":m="Math.cos("+u+" / 180 * Math.PI)";break;case"TAN":m="Math.tan("+u+" / 180 * Math.PI)"}if(m)return[m,l.javascriptGenerator.ORDER_FUNCTION_CALL];switch(g){case"LOG10":m="Math.log("+u+") / Math.log(10)";break;case"ASIN":m="Math.asin("+u+") / Math.PI * 180";break;case"ACOS":m="Math.acos("+u+") / Math.PI * 180";break;case"ATAN":m="Math.atan("+u+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+g)}return[m,l.javascriptGenerator.ORDER_DIVISION]},l.javascriptGenerator.math_constant=function(u){return{PI:["Math.PI",l.javascriptGenerator.ORDER_MEMBER],E:["Math.E",l.javascriptGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",l.javascriptGenerator.ORDER_DIVISION],SQRT2:["Math.SQRT2",l.javascriptGenerator.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",l.javascriptGenerator.ORDER_MEMBER],INFINITY:["Infinity",l.javascriptGenerator.ORDER_ATOMIC]}[u.getFieldValue("CONSTANT")]},l.javascriptGenerator.math_number_property=function(u){var g={EVEN:[" % 2 === 0",l.javascriptGenerator.ORDER_MODULUS,l.javascriptGenerator.ORDER_EQUALITY],ODD:[" % 2 === 1",l.javascriptGenerator.ORDER_MODULUS,l.javascriptGenerator.ORDER_EQUALITY],WHOLE:[" % 1 === 0",l.javascriptGenerator.ORDER_MODULUS,l.javascriptGenerator.ORDER_EQUALITY],POSITIVE:[" > 0",l.javascriptGenerator.ORDER_RELATIONAL,l.javascriptGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",l.javascriptGenerator.ORDER_RELATIONAL,l.javascriptGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,l.javascriptGenerator.ORDER_MODULUS,l.javascriptGenerator.ORDER_EQUALITY],PRIME:[null,l.javascriptGenerator.ORDER_NONE,l.javascriptGenerator.ORDER_FUNCTION_CALL]};const m=u.getFieldValue("PROPERTY"),[b,E,I]=g[m];return g=l.javascriptGenerator.valueToCode(u,"NUMBER_TO_CHECK",E)||"0",m==="PRIME"?u=l.javascriptGenerator.provideFunction_("mathIsPrime",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+g+")":m==="DIVISIBLE_BY"?(u=l.javascriptGenerator.valueToCode(u,"DIVISOR",l.javascriptGenerator.ORDER_MODULUS)||"0",u=g+" % "+u+" === 0"):u=g+b,[u,I]},l.javascriptGenerator.math_change=function(u){const g=l.javascriptGenerator.valueToCode(u,"DELTA",l.javascriptGenerator.ORDER_ADDITION)||"0";return u=l.javascriptGenerator.nameDB_.getName(u.getFieldValue("VAR"),c.NameType$$module$build$src$core$names.VARIABLE),u+" = (typeof "+u+" === 'number' ? "+u+" : 0) + "+g+`;
`},l.javascriptGenerator.math_round=l.javascriptGenerator.math_single,l.javascriptGenerator.math_trig=l.javascriptGenerator.math_single,l.javascriptGenerator.math_on_list=function(u){var g=u.getFieldValue("OP");switch(g){case"SUM":u=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_MEMBER)||"[]",u+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":u=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_NONE)||"[]",u="Math.min.apply(null, "+u+")";break;case"MAX":u=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_NONE)||"[]",u="Math.max.apply(null, "+u+")";break;case"AVERAGE":g=l.javascriptGenerator.provideFunction_("mathMean",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),u=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_NONE)||"[]",u=g+"("+u+")";break;case"MEDIAN":g=l.javascriptGenerator.provideFunction_("mathMedian",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),u=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_NONE)||"[]",u=g+"("+u+")";break;case"MODE":g=l.javascriptGenerator.provideFunction_("mathModes",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),u=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_NONE)||"[]",u=g+"("+u+")";break;case"STD_DEV":g=l.javascriptGenerator.provideFunction_("mathStandardDeviation",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),u=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_NONE)||"[]",u=g+"("+u+")";break;case"RANDOM":g=l.javascriptGenerator.provideFunction_("mathRandomList",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),u=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_NONE)||"[]",u=g+"("+u+")";break;default:throw Error("Unknown operator: "+g)}return[u,l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.math_modulo=function(u){const g=l.javascriptGenerator.valueToCode(u,"DIVIDEND",l.javascriptGenerator.ORDER_MODULUS)||"0";return u=l.javascriptGenerator.valueToCode(u,"DIVISOR",l.javascriptGenerator.ORDER_MODULUS)||"0",[g+" % "+u,l.javascriptGenerator.ORDER_MODULUS]},l.javascriptGenerator.math_constrain=function(u){const g=l.javascriptGenerator.valueToCode(u,"VALUE",l.javascriptGenerator.ORDER_NONE)||"0",m=l.javascriptGenerator.valueToCode(u,"LOW",l.javascriptGenerator.ORDER_NONE)||"0";return u=l.javascriptGenerator.valueToCode(u,"HIGH",l.javascriptGenerator.ORDER_NONE)||"Infinity",["Math.min(Math.max("+g+", "+m+"), "+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.math_random_int=function(u){const g=l.javascriptGenerator.valueToCode(u,"FROM",l.javascriptGenerator.ORDER_NONE)||"0";return u=l.javascriptGenerator.valueToCode(u,"TO",l.javascriptGenerator.ORDER_NONE)||"0",[l.javascriptGenerator.provideFunction_("mathRandomInt",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+g+", "+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.math_random_float=function(u){return["Math.random()",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.math_atan2=function(u){const g=l.javascriptGenerator.valueToCode(u,"X",l.javascriptGenerator.ORDER_NONE)||"0";return["Math.atan2("+(l.javascriptGenerator.valueToCode(u,"Y",l.javascriptGenerator.ORDER_NONE)||"0")+", "+g+") / Math.PI * 180",l.javascriptGenerator.ORDER_DIVISION]},c.module$build$src$core$utils$string,c.NameType$$module$build$src$core$names,l.javascriptGenerator.controls_repeat_ext=function(u){let g;g=u.getField("TIMES")?String(Number(u.getFieldValue("TIMES"))):l.javascriptGenerator.valueToCode(u,"TIMES",l.javascriptGenerator.ORDER_ASSIGNMENT)||"0";let m=l.javascriptGenerator.statementToCode(u,"DO");m=l.javascriptGenerator.addLoopTrap(m,u),u="";const b=l.javascriptGenerator.nameDB_.getDistinctName("count",c.NameType$$module$build$src$core$names.VARIABLE);let E=g;return g.match(/^\w+$/)||c.module$build$src$core$utils$string.isNumber(g)||(E=l.javascriptGenerator.nameDB_.getDistinctName("repeat_end",c.NameType$$module$build$src$core$names.VARIABLE),u+="var "+E+" = "+g+`;
`),u+("for (var "+b+" = 0; "+b+" < "+E+"; "+b+`++) {
`+m+`}
`)},l.javascriptGenerator.controls_repeat=l.javascriptGenerator.controls_repeat_ext,l.javascriptGenerator.controls_whileUntil=function(u){const g=u.getFieldValue("MODE")==="UNTIL";let m=l.javascriptGenerator.valueToCode(u,"BOOL",g?l.javascriptGenerator.ORDER_LOGICAL_NOT:l.javascriptGenerator.ORDER_NONE)||"false",b=l.javascriptGenerator.statementToCode(u,"DO");return b=l.javascriptGenerator.addLoopTrap(b,u),g&&(m="!"+m),"while ("+m+`) {
`+b+`}
`},l.javascriptGenerator.controls_for=function(u){var g=l.javascriptGenerator.nameDB_.getName(u.getFieldValue("VAR"),c.NameType$$module$build$src$core$names.VARIABLE),m=l.javascriptGenerator.valueToCode(u,"FROM",l.javascriptGenerator.ORDER_ASSIGNMENT)||"0",b=l.javascriptGenerator.valueToCode(u,"TO",l.javascriptGenerator.ORDER_ASSIGNMENT)||"0";const E=l.javascriptGenerator.valueToCode(u,"BY",l.javascriptGenerator.ORDER_ASSIGNMENT)||"1";let I=l.javascriptGenerator.statementToCode(u,"DO");if(I=l.javascriptGenerator.addLoopTrap(I,u),c.module$build$src$core$utils$string.isNumber(m)&&c.module$build$src$core$utils$string.isNumber(b)&&c.module$build$src$core$utils$string.isNumber(E)){var y=Number(m)<=Number(b);u="for ("+g+" = "+m+"; "+g+(y?" <= ":" >= ")+b+"; "+g,g=Math.abs(Number(E)),u=g===1?u+(y?"++":"--"):u+((y?" += ":" -= ")+g),u+=`) {
`+I+`}
`}else u="",y=m,m.match(/^\w+$/)||c.module$build$src$core$utils$string.isNumber(m)||(y=l.javascriptGenerator.nameDB_.getDistinctName(g+"_start",c.NameType$$module$build$src$core$names.VARIABLE),u+="var "+y+" = "+m+`;
`),m=b,b.match(/^\w+$/)||c.module$build$src$core$utils$string.isNumber(b)||(m=l.javascriptGenerator.nameDB_.getDistinctName(g+"_end",c.NameType$$module$build$src$core$names.VARIABLE),u+="var "+m+" = "+b+`;
`),b=l.javascriptGenerator.nameDB_.getDistinctName(g+"_inc",c.NameType$$module$build$src$core$names.VARIABLE),u+="var "+b+" = ",u=c.module$build$src$core$utils$string.isNumber(E)?u+(Math.abs(E)+`;
`):u+("Math.abs("+E+`);
`),u+="if ("+y+" > "+m+`) {
`,u+=l.javascriptGenerator.INDENT+b+" = -"+b+`;
`,u=u+`}
for (`+(g+" = "+y+"; "+b+" >= 0 ? "+g+" <= "+m+" : "+g+" >= "+m+"; "+g+" += "+b+`) {
`+I+`}
`);return u},l.javascriptGenerator.controls_forEach=function(u){const g=l.javascriptGenerator.nameDB_.getName(u.getFieldValue("VAR"),c.NameType$$module$build$src$core$names.VARIABLE);var m=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_ASSIGNMENT)||"[]";let b=l.javascriptGenerator.statementToCode(u,"DO");b=l.javascriptGenerator.addLoopTrap(b,u),u="";let E=m;return m.match(/^\w+$/)||(E=l.javascriptGenerator.nameDB_.getDistinctName(g+"_list",c.NameType$$module$build$src$core$names.VARIABLE),u+="var "+E+" = "+m+`;
`),m=l.javascriptGenerator.nameDB_.getDistinctName(g+"_index",c.NameType$$module$build$src$core$names.VARIABLE),b=l.javascriptGenerator.INDENT+g+" = "+E+"["+m+`];
`+b,u+("for (var "+m+" in "+E+`) {
`+b+`}
`)},l.javascriptGenerator.controls_flow_statements=function(u){let g="";if(l.javascriptGenerator.STATEMENT_PREFIX&&(g+=l.javascriptGenerator.injectId(l.javascriptGenerator.STATEMENT_PREFIX,u)),l.javascriptGenerator.STATEMENT_SUFFIX&&(g+=l.javascriptGenerator.injectId(l.javascriptGenerator.STATEMENT_SUFFIX,u)),l.javascriptGenerator.STATEMENT_PREFIX){const m=u.getSurroundLoop();m&&!m.suppressPrefixSuffix&&(g+=l.javascriptGenerator.injectId(l.javascriptGenerator.STATEMENT_PREFIX,m))}switch(u.getFieldValue("FLOW")){case"BREAK":return g+`break;
`;case"CONTINUE":return g+`continue;
`}throw Error("Unknown flow statement.")},l.javascriptGenerator.controls_if=function(u){var g=0;let m="";l.javascriptGenerator.STATEMENT_PREFIX&&(m+=l.javascriptGenerator.injectId(l.javascriptGenerator.STATEMENT_PREFIX,u));do{const b=l.javascriptGenerator.valueToCode(u,"IF"+g,l.javascriptGenerator.ORDER_NONE)||"false";let E=l.javascriptGenerator.statementToCode(u,"DO"+g);l.javascriptGenerator.STATEMENT_SUFFIX&&(E=l.javascriptGenerator.prefixLines(l.javascriptGenerator.injectId(l.javascriptGenerator.STATEMENT_SUFFIX,u),l.javascriptGenerator.INDENT)+E),m+=(0<g?" else ":"")+"if ("+b+`) {
`+E+"}",g++}while(u.getInput("IF"+g));return(u.getInput("ELSE")||l.javascriptGenerator.STATEMENT_SUFFIX)&&(g=l.javascriptGenerator.statementToCode(u,"ELSE"),l.javascriptGenerator.STATEMENT_SUFFIX&&(g=l.javascriptGenerator.prefixLines(l.javascriptGenerator.injectId(l.javascriptGenerator.STATEMENT_SUFFIX,u),l.javascriptGenerator.INDENT)+g),m+=` else {
`+g+"}"),m+`
`},l.javascriptGenerator.controls_ifelse=l.javascriptGenerator.controls_if,l.javascriptGenerator.logic_compare=function(u){const g={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[u.getFieldValue("OP")],m=g==="=="||g==="!="?l.javascriptGenerator.ORDER_EQUALITY:l.javascriptGenerator.ORDER_RELATIONAL,b=l.javascriptGenerator.valueToCode(u,"A",m)||"0";return u=l.javascriptGenerator.valueToCode(u,"B",m)||"0",[b+" "+g+" "+u,m]},l.javascriptGenerator.logic_operation=function(u){const g=u.getFieldValue("OP")==="AND"?"&&":"||",m=g==="&&"?l.javascriptGenerator.ORDER_LOGICAL_AND:l.javascriptGenerator.ORDER_LOGICAL_OR;let b=l.javascriptGenerator.valueToCode(u,"A",m);if(u=l.javascriptGenerator.valueToCode(u,"B",m),b||u){const E=g==="&&"?"true":"false";b||(b=E),u||(u=E)}else u=b="false";return[b+" "+g+" "+u,m]},l.javascriptGenerator.logic_negate=function(u){const g=l.javascriptGenerator.ORDER_LOGICAL_NOT;return["!"+(l.javascriptGenerator.valueToCode(u,"BOOL",g)||"true"),g]},l.javascriptGenerator.logic_boolean=function(u){return[u.getFieldValue("BOOL")==="TRUE"?"true":"false",l.javascriptGenerator.ORDER_ATOMIC]},l.javascriptGenerator.logic_null=function(u){return["null",l.javascriptGenerator.ORDER_ATOMIC]},l.javascriptGenerator.logic_ternary=function(u){const g=l.javascriptGenerator.valueToCode(u,"IF",l.javascriptGenerator.ORDER_CONDITIONAL)||"false",m=l.javascriptGenerator.valueToCode(u,"THEN",l.javascriptGenerator.ORDER_CONDITIONAL)||"null";return u=l.javascriptGenerator.valueToCode(u,"ELSE",l.javascriptGenerator.ORDER_CONDITIONAL)||"null",[g+" ? "+m+" : "+u,l.javascriptGenerator.ORDER_CONDITIONAL]},c.NameType$$module$build$src$core$names,l.javascriptGenerator.lists_create_empty=function(u){return["[]",l.javascriptGenerator.ORDER_ATOMIC]},l.javascriptGenerator.lists_create_with=function(u){const g=Array(u.itemCount_);for(let m=0;m<u.itemCount_;m++)g[m]=l.javascriptGenerator.valueToCode(u,"ADD"+m,l.javascriptGenerator.ORDER_NONE)||"null";return["["+g.join(", ")+"]",l.javascriptGenerator.ORDER_ATOMIC]},l.javascriptGenerator.lists_repeat=function(u){const g=l.javascriptGenerator.provideFunction_("listsRepeat",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),m=l.javascriptGenerator.valueToCode(u,"ITEM",l.javascriptGenerator.ORDER_NONE)||"null";return u=l.javascriptGenerator.valueToCode(u,"NUM",l.javascriptGenerator.ORDER_NONE)||"0",[g+"("+m+", "+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.lists_length=function(u){return[(l.javascriptGenerator.valueToCode(u,"VALUE",l.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",l.javascriptGenerator.ORDER_MEMBER]},l.javascriptGenerator.lists_isEmpty=function(u){return["!"+(l.javascriptGenerator.valueToCode(u,"VALUE",l.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",l.javascriptGenerator.ORDER_LOGICAL_NOT]},l.javascriptGenerator.lists_indexOf=function(u){var g=u.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const m=l.javascriptGenerator.valueToCode(u,"FIND",l.javascriptGenerator.ORDER_NONE)||"''";return g=(l.javascriptGenerator.valueToCode(u,"VALUE",l.javascriptGenerator.ORDER_MEMBER)||"[]")+"."+g+"("+m+")",u.workspace.options.oneBasedIndex?[g+" + 1",l.javascriptGenerator.ORDER_ADDITION]:[g,l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.lists_getIndex=function(u){const g=u.getFieldValue("MODE")||"GET",m=u.getFieldValue("WHERE")||"FROM_START";var b=l.javascriptGenerator.valueToCode(u,"VALUE",m==="RANDOM"?l.javascriptGenerator.ORDER_NONE:l.javascriptGenerator.ORDER_MEMBER)||"[]";switch(m){case"FIRST":if(g==="GET")return[b+"[0]",l.javascriptGenerator.ORDER_MEMBER];if(g==="GET_REMOVE")return[b+".shift()",l.javascriptGenerator.ORDER_MEMBER];if(g==="REMOVE")return b+`.shift();
`;break;case"LAST":if(g==="GET")return[b+".slice(-1)[0]",l.javascriptGenerator.ORDER_MEMBER];if(g==="GET_REMOVE")return[b+".pop()",l.javascriptGenerator.ORDER_MEMBER];if(g==="REMOVE")return b+`.pop();
`;break;case"FROM_START":if(u=l.javascriptGenerator.getAdjusted(u,"AT"),g==="GET")return[b+"["+u+"]",l.javascriptGenerator.ORDER_MEMBER];if(g==="GET_REMOVE")return[b+".splice("+u+", 1)[0]",l.javascriptGenerator.ORDER_FUNCTION_CALL];if(g==="REMOVE")return b+".splice("+u+`, 1);
`;break;case"FROM_END":if(u=l.javascriptGenerator.getAdjusted(u,"AT",1,!0),g==="GET")return[b+".slice("+u+")[0]",l.javascriptGenerator.ORDER_FUNCTION_CALL];if(g==="GET_REMOVE")return[b+".splice("+u+", 1)[0]",l.javascriptGenerator.ORDER_FUNCTION_CALL];if(g==="REMOVE")return b+".splice("+u+", 1);";break;case"RANDOM":if(b=l.javascriptGenerator.provideFunction_("listsGetRandomItem",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+b+", "+(g!=="GET")+")",g==="GET"||g==="GET_REMOVE")return[b,l.javascriptGenerator.ORDER_FUNCTION_CALL];if(g==="REMOVE")return b+`;
`}throw Error("Unhandled combination (lists_getIndex).")},l.javascriptGenerator.lists_setIndex=function(u){function g(){if(m.match(/^\w+$/))return"";const y=l.javascriptGenerator.nameDB_.getDistinctName("tmpList",c.NameType$$module$build$src$core$names.VARIABLE),F="var "+y+" = "+m+`;
`;return m=y,F}let m=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_MEMBER)||"[]";const b=u.getFieldValue("MODE")||"GET";var E=u.getFieldValue("WHERE")||"FROM_START";const I=l.javascriptGenerator.valueToCode(u,"TO",l.javascriptGenerator.ORDER_ASSIGNMENT)||"null";switch(E){case"FIRST":if(b==="SET")return m+"[0] = "+I+`;
`;if(b==="INSERT")return m+".unshift("+I+`);
`;break;case"LAST":if(b==="SET")return g()+(m+"["+m+".length - 1] = "+I+`;
`);if(b==="INSERT")return m+".push("+I+`);
`;break;case"FROM_START":if(u=l.javascriptGenerator.getAdjusted(u,"AT"),b==="SET")return m+"["+u+"] = "+I+`;
`;if(b==="INSERT")return m+".splice("+u+", 0, "+I+`);
`;break;case"FROM_END":if(u=l.javascriptGenerator.getAdjusted(u,"AT",1,!1,l.javascriptGenerator.ORDER_SUBTRACTION),E=g(),b==="SET")return E+(m+"["+m+".length - "+u+"] = "+I+`;
`);if(b==="INSERT")return E+(m+".splice("+m+".length - "+u+", 0, "+I+`);
`);break;case"RANDOM":if(u=g(),E=l.javascriptGenerator.nameDB_.getDistinctName("tmpX",c.NameType$$module$build$src$core$names.VARIABLE),u+="var "+E+" = Math.floor(Math.random() * "+m+`.length);
`,b==="SET")return u+(m+"["+E+"] = "+I+`;
`);if(b==="INSERT")return u+(m+".splice("+E+", 0, "+I+`);
`)}throw Error("Unhandled combination (lists_setIndex).")};var $=function(u,g,m){return g==="FIRST"?"0":g==="FROM_END"?u+".length - 1 - "+m:g==="LAST"?u+".length - 1":m};return l.javascriptGenerator.lists_getSublist=function(u){var g=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_MEMBER)||"[]",m=u.getFieldValue("WHERE1"),b=u.getFieldValue("WHERE2");if(m==="FIRST"&&b==="LAST")g+=".slice(0)";else if(g.match(/^\w+$/)||m!=="FROM_END"&&b==="FROM_START"){switch(m){case"FROM_START":m=l.javascriptGenerator.getAdjusted(u,"AT1");break;case"FROM_END":m=l.javascriptGenerator.getAdjusted(u,"AT1",1,!1,l.javascriptGenerator.ORDER_SUBTRACTION),m=g+".length - "+m;break;case"FIRST":m="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(b){case"FROM_START":b=l.javascriptGenerator.getAdjusted(u,"AT2",1);break;case"FROM_END":b=l.javascriptGenerator.getAdjusted(u,"AT2",0,!1,l.javascriptGenerator.ORDER_SUBTRACTION),b=g+".length - "+b;break;case"LAST":b=g+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}g=g+".slice("+m+", "+b+")"}else{const E=l.javascriptGenerator.getAdjusted(u,"AT1");u=l.javascriptGenerator.getAdjusted(u,"AT2");const I={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};g=l.javascriptGenerator.provideFunction_("subsequence"+I[m]+I[b],`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${m==="FROM_END"||m==="FROM_START"?", at1":""}${b==="FROM_END"||b==="FROM_START"?", at2":""}) {
  var start = ${$("sequence",m,"at1")};
  var end = ${$("sequence",b,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+g+(m==="FROM_END"||m==="FROM_START"?", "+E:"")+(b==="FROM_END"||b==="FROM_START"?", "+u:"")+")"}return[g,l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.lists_sort=function(u){const g=l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",m=u.getFieldValue("DIRECTION")==="1"?1:-1;u=u.getFieldValue("TYPE");const b=l.javascriptGenerator.provideFunction_("listsGetSortCompare",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return a.toString() > b.toString() ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `);return[g+".slice().sort("+b+'("'+u+'", '+m+"))",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.lists_split=function(u){let g=l.javascriptGenerator.valueToCode(u,"INPUT",l.javascriptGenerator.ORDER_MEMBER);const m=l.javascriptGenerator.valueToCode(u,"DELIM",l.javascriptGenerator.ORDER_NONE)||"''";if(u=u.getFieldValue("MODE"),u==="SPLIT")g||(g="''"),u="split";else if(u==="JOIN")g||(g="[]"),u="join";else throw Error("Unknown mode: "+u);return[g+"."+u+"("+m+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.lists_reverse=function(u){return[(l.javascriptGenerator.valueToCode(u,"LIST",l.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.colour_picker=function(u){return[l.javascriptGenerator.quote_(u.getFieldValue("COLOUR")),l.javascriptGenerator.ORDER_ATOMIC]},l.javascriptGenerator.colour_random=function(u){return[l.javascriptGenerator.provideFunction_("colourRandom",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.colour_rgb=function(u){const g=l.javascriptGenerator.valueToCode(u,"RED",l.javascriptGenerator.ORDER_NONE)||0,m=l.javascriptGenerator.valueToCode(u,"GREEN",l.javascriptGenerator.ORDER_NONE)||0;return u=l.javascriptGenerator.valueToCode(u,"BLUE",l.javascriptGenerator.ORDER_NONE)||0,[l.javascriptGenerator.provideFunction_("colourRgb",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+g+", "+m+", "+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.javascriptGenerator.colour_blend=function(u){const g=l.javascriptGenerator.valueToCode(u,"COLOUR1",l.javascriptGenerator.ORDER_NONE)||"'#000000'",m=l.javascriptGenerator.valueToCode(u,"COLOUR2",l.javascriptGenerator.ORDER_NONE)||"'#000000'";return u=l.javascriptGenerator.valueToCode(u,"RATIO",l.javascriptGenerator.ORDER_NONE)||.5,[l.javascriptGenerator.provideFunction_("colourBlend",`
function ${l.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+g+", "+m+", "+u+")",l.javascriptGenerator.ORDER_FUNCTION_CALL]},l.__namespace__=c,l})}(Ed)),Ed.exports}var hT;function nE(){return hT||(hT=1,function(s,r){(function(i,c){s.exports=c(Lp(),pO())})(js,function(i,c){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return c})}(bd)),bd.exports}var dT;function _O(){return dT||(dT=1,function(s,r){(function(i,c){s.exports=c(Lp(),uO(),dO(),nE())})(js,function(i,c,l,h){return i.setLocale(c),i})}(pd)),pd.exports}(function(s,r){(function(i,c){s.exports=c(_O())})(js,function(i){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})})(iE);const uA=iE.exports;var hA="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",dA="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",pA="M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z",_A="M13,19V16H21V19H13M8.5,13L2.47,7H6.71L11.67,11.95C12.25,12.54 12.25,13.5 11.67,14.07L6.74,19H2.5L8.5,13Z",gA="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",fA="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M12,18C9.95,18 8.19,16.76 7.42,15H9.13C9.76,15.9 10.81,16.5 12,16.5A3.5,3.5 0 0,0 15.5,13A3.5,3.5 0 0,0 12,9.5C10.65,9.5 9.5,10.28 8.9,11.4L10.5,13H6.5V9L7.8,10.3C8.69,8.92 10.23,8 12,8A5,5 0 0,1 17,13A5,5 0 0,1 12,18Z",mA="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",$A="M19,13H5V11H19V13Z",TA="M5,13H19V11H5M3,17H17V15H3M7,7V9H21V7",bA="M8,5.14V19.14L19,12.14L8,5.14Z",EA="M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z";const zt=rt({tag:{type:String,default:"div"}},"tag"),vA=lt({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...zt()},setup(s,r){let{slots:i}=r;return gt(()=>M(s.tag,{class:["v-container",{"v-container--fluid":s.fluid}]},i)),{}}}),gO=["sm","md","lg","xl","xxl"],Np=["start","end","center"],rE=["space-between","space-around","space-evenly"];function Dp(s,r){return gO.reduce((i,c)=>(i[s+ln(c)]=r(),i),{})}const fO=[...Np,"baseline","stretch"],lE=s=>fO.includes(s),cE=Dp("align",()=>({type:String,default:null,validator:lE})),mO=[...Np,...rE],aE=s=>mO.includes(s),uE=Dp("justify",()=>({type:String,default:null,validator:aE})),$O=[...Np,...rE,"stretch"],hE=s=>$O.includes(s),dE=Dp("alignContent",()=>({type:String,default:null,validator:hE})),pT={align:Object.keys(cE),justify:Object.keys(uE),alignContent:Object.keys(dE)},TO={align:"align",justify:"justify",alignContent:"align-content"};function bO(s,r,i){let c=TO[s];if(i!=null){if(r){const l=r.replace(s,"");c+=`-${l}`}return c+=`-${i}`,c.toLowerCase()}}const IA=lt({name:"VRow",props:{dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:lE},...cE,justify:{type:String,default:null,validator:aE},...uE,alignContent:{type:String,default:null,validator:hE},...dE,...zt()},setup(s,r){let{slots:i}=r;const c=X(()=>{const l=[];let h;for(h in pT)pT[h].forEach(d=>{const _=s[d],$=bO(h,d,_);$&&l.push($)});return l.push({"v-row--no-gutters":s.noGutters,"v-row--dense":s.dense,[`align-${s.align}`]:s.align,[`justify-${s.justify}`]:s.justify,[`align-content-${s.alignContent}`]:s.alignContent}),l});return()=>{var l;return Ri(s.tag,{class:["v-row",c.value]},(l=i.default)==null?void 0:l.call(i))}}}),yA=za("flex-grow-1","div","VSpacer");const EO=["x-small","small","default","large","x-large"],Ja=rt({size:{type:[String,Number],default:"default"}},"size");function qa(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hn();return Rp(()=>{let i,c;return va(EO,s.size)?i=`${r}--size-${s.size}`:s.size&&(c={width:Ve(s.size),height:Ve(s.size)}),{sizeClasses:i,sizeStyles:c}})}function Mp(s){return Rp(()=>{const r=[],i={};return s.value.background&&(H$(s.value.background)?i.backgroundColor=s.value.background:r.push(`bg-${s.value.background}`)),s.value.text&&(H$(s.value.text)?(i.color=s.value.text,i.caretColor=s.value.text):r.push(`text-${s.value.text}`)),{colorClasses:r,colorStyles:i}})}function lr(s,r){const i=X(()=>({text:Et(s)?s.value:r?s[r]:null})),{colorClasses:c,colorStyles:l}=Mp(i);return{textColorClasses:c,textColorStyles:l}}function rn(s,r){const i=X(()=>({background:Et(s)?s.value:r?s[r]:null})),{colorClasses:c,colorStyles:l}=Mp(i);return{backgroundColorClasses:c,backgroundColorStyles:l}}const vO=rt({color:String,start:Boolean,end:Boolean,icon:Es,...Ja(),...zt({tag:"i"}),...Ds()},"v-icon"),nn=lt({name:"VIcon",props:vO(),setup(s,r){let{attrs:i,slots:c}=r,l;c.default&&(l=X(()=>{var g,m;const b=(g=c.default)==null?void 0:g.call(c);if(!!b)return(m=Gb(b).filter(E=>E.children&&typeof E.children=="string")[0])==null?void 0:m.children}));const{themeClasses:h}=mo(s),{iconData:d}=Fk(l||s),{sizeClasses:_}=qa(s),{textColorClasses:$,textColorStyles:u}=lr(It(s,"color"));return gt(()=>M(d.value.component,{tag:s.tag,icon:d.value.icon,class:["v-icon","notranslate",h.value,_.value,$.value,{"v-icon--clickable":!!i.onClick,"v-icon--start":s.start,"v-icon--end":s.end}],style:[_.value?void 0:{fontSize:Ve(s.size),height:Ve(s.size),width:Ve(s.size)},u.value],role:i.onClick?"button":void 0,"aria-hidden":!i.onClick},null)),{}}});var SA=nE(),RA=Lp();const Gl=rt({border:[Boolean,Number,String]},"border");function Ul(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hn();return{borderClasses:X(()=>{const c=Et(s)?s.value:s.border,l=[];if(c===!0||c==="")l.push(`${r}--border`);else if(typeof c=="string"||c===0)for(const h of String(c).split(" "))l.push(`border-${h}`);return l})}}const IO=[null,"default","comfortable","compact"],_r=rt({density:{type:String,default:"default",validator:s=>IO.includes(s)}},"density");function Hl(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hn();return{densityClasses:X(()=>`${r}--density-${s.density}`)}}const Vl=rt({elevation:{type:[Number,String],validator(s){const r=parseInt(s);return!isNaN(r)&&r>=0&&r<=24}}},"elevation");function Wl(s){return{elevationClasses:X(()=>{const i=Et(s)?s.value:s.elevation,c=[];return i==null||c.push(`elevation-${i}`),c})}}const ti=rt({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function si(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hn();return{roundedClasses:X(()=>{const c=Et(s)?s.value:s.rounded,l=[];if(c===!0||c==="")l.push(`${r}--rounded`);else if(typeof c=="string"||c===0)for(const h of String(c).split(" "))l.push(`rounded-${h}`);return l})}}const yO=["elevated","flat","tonal","outlined","text","plain"];function Za(s,r){return M(Xt,null,[s&&M("span",{key:"overlay",class:`${r}__overlay`},null),M("span",{key:"underlay",class:`${r}__underlay`},null)])}const jl=rt({color:String,variant:{type:String,default:"elevated",validator:s=>yO.includes(s)}},"variant");function Qa(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hn();const i=X(()=>{const{variant:h}=tr(s);return`${r}--variant-${h}`}),{colorClasses:c,colorStyles:l}=Mp(X(()=>{const{variant:h,color:d}=tr(s);return{[["elevated","flat"].includes(h)?"background":"text"]:d}}));return{colorClasses:c,colorStyles:l,variantClasses:i}}const SO=lt({name:"VBtnGroup",props:{divided:Boolean,...Gl(),..._r(),...Vl(),...ti(),...zt(),...Ds(),...jl()},setup(s,r){let{slots:i}=r;const{themeClasses:c}=mo(s),{densityClasses:l}=Hl(s),{borderClasses:h}=Ul(s),{elevationClasses:d}=Wl(s),{roundedClasses:_}=si(s);dr({VBtn:{height:"auto",color:It(s,"color"),density:It(s,"density"),flat:!0,variant:It(s,"variant")}}),gt(()=>M(s.tag,{class:["v-btn-group",{"v-btn-group--divided":s.divided},c.value,h.value,l.value,d.value,_.value]},i))}}),pE=rt({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),xp=rt({value:null,disabled:Boolean,selectedClass:String},"group-item");function _E(s,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const c=us("useGroupItem");if(!c)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const l=Ya();Si(Symbol.for(`${r.description}:id`),l);const h=os(r,null);if(!h){if(!i)return h;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${r.description}`)}const d=It(s,"value"),_=X(()=>h.disabled.value||s.disabled);h.register({id:l,value:d,disabled:_},c),hr(()=>{h.unregister(l)});const $=X(()=>h.isSelected(l)),u=X(()=>$.value&&[h.selectedClass.value,s.selectedClass]);return nt($,g=>{c.emit("group:selected",{value:g})}),{id:l,isSelected:$,toggle:()=>h.select(l,!$.value),select:g=>h.select(l,g),selectedClass:u,value:d,disabled:_,group:h}}function Bp(s,r){let i=!1;const c=as([]),l=dn(s,"modelValue",[],b=>b==null?[]:gE(c,lk(b)),b=>{const E=CO(c,b);return s.multiple?E:E[0]}),h=us("useGroup");function d(b,E){const I=b,y=Symbol.for(`${r.description}:id`),B=Il(y,h==null?void 0:h.vnode).indexOf(E);B>-1?c.splice(B,0,I):c.push(I)}function _(b){if(i)return;$();const E=c.findIndex(I=>I.id===b);c.splice(E,1)}function $(){const b=c.find(E=>!E.disabled);b&&s.mandatory==="force"&&!l.value.length&&(l.value=[b.id])}an(()=>{$()}),hr(()=>{i=!0});function u(b,E){const I=c.find(y=>y.id===b);if(!(E&&I!=null&&I.disabled))if(s.multiple){const y=l.value.slice(),F=y.findIndex(N=>N===b),B=~F;if(E=E!=null?E:!B,B&&s.mandatory&&y.length<=1||!B&&s.max!=null&&y.length+1>s.max)return;F<0&&E?y.push(b):F>=0&&!E&&y.splice(F,1),l.value=y}else{const y=l.value.includes(b);if(s.mandatory&&y)return;l.value=(E!=null?E:!y)?[b]:[]}}function g(b){if(s.multiple&&ir('This method is not supported when using "multiple" prop'),l.value.length){const E=l.value[0],I=c.findIndex(B=>B.id===E);let y=(I+b)%c.length,F=c[y];for(;F.disabled&&y!==I;)y=(y+b)%c.length,F=c[y];if(F.disabled)return;l.value=[c[y].id]}else{const E=c.find(I=>!I.disabled);E&&(l.value=[E.id])}}const m={register:d,unregister:_,selected:l,select:u,disabled:It(s,"disabled"),prev:()=>g(c.length-1),next:()=>g(1),isSelected:b=>l.value.includes(b),selectedClass:X(()=>s.selectedClass),items:X(()=>c),getItemIndex:b=>RO(c,b)};return Si(r,m),m}function RO(s,r){const i=gE(s,[r]);return i.length?s.findIndex(c=>c.id===i[0]):-1}function gE(s,r){const i=[];for(let c=0;c<s.length;c++){const l=s[c];l.value!=null?r.find(h=>Bb(h,l.value))!=null&&i.push(l.id):r.includes(c)&&i.push(l.id)}return i}function CO(s,r){const i=[];for(let c=0;c<s.length;c++){const l=s[c];r.includes(l.id)&&i.push(l.value!=null?l.value:c)}return i}const fE=Symbol.for("vuetify:v-btn-toggle");Ci()({name:"VBtnToggle",props:pE(),emits:{"update:modelValue":s=>!0},setup(s,r){let{slots:i}=r;const{isSelected:c,next:l,prev:h,select:d,selected:_}=Bp(s,fE);return gt(()=>{var $;return M(SO,{class:"v-btn-toggle"},{default:()=>[($=i.default)==null?void 0:$.call(i,{isSelected:c,next:l,prev:h,select:d,selected:_})]})}),{next:l,prev:h,select:d}}});const Ei=mp({name:"VDefaultsProvider",props:{defaults:Object,reset:[Number,String],root:Boolean,scoped:Boolean},setup(s,r){let{slots:i}=r;const{defaults:c,reset:l,root:h,scoped:d}=dp(s);return dr(c,{reset:l,root:h,scoped:d}),()=>{var _;return(_=i.default)==null?void 0:_.call(i)}}});function mE(s){const r=we(),i=we(!1);if(Op){const c=new IntersectionObserver(l=>{s==null||s(l,c),i.value=!!l.find(h=>h.isIntersecting)});hr(()=>{c.disconnect()}),nt(r,(l,h)=>{h&&(c.unobserve(h),i.value=!1),l&&c.observe(l)},{flush:"post"})}return{intersectionRef:r,isIntersecting:i}}const kO=lt({name:"VProgressCircular",props:{bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Ja(),...zt({tag:"div"}),...Ds()},setup(s,r){let{slots:i}=r;const c=20,l=2*Math.PI*c,h=we(),{themeClasses:d}=mo(s),{sizeClasses:_,sizeStyles:$}=qa(s),{textColorClasses:u,textColorStyles:g}=lr(It(s,"color")),{textColorClasses:m,textColorStyles:b}=lr(It(s,"bgColor")),{intersectionRef:E,isIntersecting:I}=mE(),{resizeRef:y,contentRect:F}=Ca(),B=X(()=>Math.max(0,Math.min(100,parseFloat(s.modelValue)))),N=X(()=>Number(s.width)),R=X(()=>$.value?Number(s.size):F.value?F.value.width:Math.max(N.value,32)),z=X(()=>c/(1-N.value/R.value)*2),le=X(()=>N.value/R.value*z.value),he=X(()=>Ve((100-B.value)/100*l));return Qo(()=>{E.value=h.value,y.value=h.value}),gt(()=>M(s.tag,{ref:h,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!s.indeterminate,"v-progress-circular--visible":I.value,"v-progress-circular--disable-shrink":s.indeterminate==="disable-shrink"},d.value,_.value,u.value],style:[$.value,g.value],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":s.indeterminate?void 0:B.value},{default:()=>[M("svg",{style:{transform:`rotate(calc(-90deg + ${Number(s.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${z.value} ${z.value}`},[M("circle",{class:["v-progress-circular__underlay",m.value],style:b.value,fill:"transparent",cx:"50%",cy:"50%",r:c,"stroke-width":le.value,"stroke-dasharray":l,"stroke-dashoffset":0},null),M("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:c,"stroke-width":le.value,"stroke-dasharray":l,"stroke-dashoffset":he.value},null)]),i.default&&M("div",{class:"v-progress-circular__content"},[i.default({value:B.value})])]})),{}}});const jd=Symbol("rippleStop"),OO=80;function _T(s,r){s.style.transform=r,s.style.webkitTransform=r}function vd(s,r){s.style.opacity=`calc(${r} * var(--v-theme-overlay-multiplier))`}function Xd(s){return s.constructor.name==="TouchEvent"}function $E(s){return s.constructor.name==="KeyboardEvent"}const wO=function(s,r){var i;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=0,h=0;if(!$E(s)){const b=r.getBoundingClientRect(),E=Xd(s)?s.touches[s.touches.length-1]:s;l=E.clientX-b.left,h=E.clientY-b.top}let d=0,_=.3;(i=r._ripple)!=null&&i.circle?(_=.15,d=r.clientWidth/2,d=c.center?d:d+Math.sqrt((l-d)**2+(h-d)**2)/4):d=Math.sqrt(r.clientWidth**2+r.clientHeight**2)/2;const $=`${(r.clientWidth-d*2)/2}px`,u=`${(r.clientHeight-d*2)/2}px`,g=c.center?$:`${l-d}px`,m=c.center?u:`${h-d}px`;return{radius:d,scale:_,x:g,y:m,centerX:$,centerY:u}},ka={show(s,r){var i;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(r!=null&&(i=r._ripple)!=null&&i.enabled))return;const l=document.createElement("span"),h=document.createElement("span");l.appendChild(h),l.className="v-ripple__container",c.class&&(l.className+=` ${c.class}`);const{radius:d,scale:_,x:$,y:u,centerX:g,centerY:m}=wO(s,r,c),b=`${d*2}px`;h.className="v-ripple__animation",h.style.width=b,h.style.height=b,r.appendChild(l);const E=window.getComputedStyle(r);E&&E.position==="static"&&(r.style.position="relative",r.dataset.previousPosition="static"),h.classList.add("v-ripple__animation--enter"),h.classList.add("v-ripple__animation--visible"),_T(h,`translate(${$}, ${u}) scale3d(${_},${_},${_})`),vd(h,0),h.dataset.activated=String(performance.now()),setTimeout(()=>{h.classList.remove("v-ripple__animation--enter"),h.classList.add("v-ripple__animation--in"),_T(h,`translate(${g}, ${m}) scale3d(1,1,1)`),vd(h,.08)},0)},hide(s){var r;if(!(s!=null&&(r=s._ripple)!=null&&r.enabled))return;const i=s.getElementsByClassName("v-ripple__animation");if(i.length===0)return;const c=i[i.length-1];if(c.dataset.isHiding)return;c.dataset.isHiding="true";const l=performance.now()-Number(c.dataset.activated),h=Math.max(250-l,0);setTimeout(()=>{c.classList.remove("v-ripple__animation--in"),c.classList.add("v-ripple__animation--out"),vd(c,0),setTimeout(()=>{s.getElementsByClassName("v-ripple__animation").length===1&&s.dataset.previousPosition&&(s.style.position=s.dataset.previousPosition,delete s.dataset.previousPosition),c.parentNode&&s.removeChild(c.parentNode)},300)},h)}};function TE(s){return typeof s>"u"||!!s}function Ml(s){const r={},i=s.currentTarget;if(!(!(i!=null&&i._ripple)||i._ripple.touched||s[jd])){if(s[jd]=!0,Xd(s))i._ripple.touched=!0,i._ripple.isTouch=!0;else if(i._ripple.isTouch)return;if(r.center=i._ripple.centered||$E(s),i._ripple.class&&(r.class=i._ripple.class),Xd(s)){if(i._ripple.showTimerCommit)return;i._ripple.showTimerCommit=()=>{ka.show(s,i,r)},i._ripple.showTimer=window.setTimeout(()=>{var c;i!=null&&(c=i._ripple)!=null&&c.showTimerCommit&&(i._ripple.showTimerCommit(),i._ripple.showTimerCommit=null)},OO)}else ka.show(s,i,r)}}function gT(s){s[jd]=!0}function Ls(s){const r=s.currentTarget;if(!(!r||!r._ripple)){if(window.clearTimeout(r._ripple.showTimer),s.type==="touchend"&&r._ripple.showTimerCommit){r._ripple.showTimerCommit(),r._ripple.showTimerCommit=null,r._ripple.showTimer=window.setTimeout(()=>{Ls(s)});return}window.setTimeout(()=>{r._ripple&&(r._ripple.touched=!1)}),ka.hide(r)}}function bE(s){const r=s.currentTarget;!r||!r._ripple||(r._ripple.showTimerCommit&&(r._ripple.showTimerCommit=null),window.clearTimeout(r._ripple.showTimer))}let xl=!1;function EE(s){!xl&&(s.keyCode===x$.enter||s.keyCode===x$.space)&&(xl=!0,Ml(s))}function vE(s){xl=!1,Ls(s)}function IE(s){xl&&(xl=!1,Ls(s))}function yE(s,r,i){var d;const{value:c,modifiers:l}=r,h=TE(c);if(h||ka.hide(s),s._ripple=(d=s._ripple)!=null?d:{},s._ripple.enabled=h,s._ripple.centered=l.center,s._ripple.circle=l.circle,Gd(c)&&c.class&&(s._ripple.class=c.class),h&&!i){if(l.stop){s.addEventListener("touchstart",gT,{passive:!0}),s.addEventListener("mousedown",gT);return}s.addEventListener("touchstart",Ml,{passive:!0}),s.addEventListener("touchend",Ls,{passive:!0}),s.addEventListener("touchmove",bE,{passive:!0}),s.addEventListener("touchcancel",Ls),s.addEventListener("mousedown",Ml),s.addEventListener("mouseup",Ls),s.addEventListener("mouseleave",Ls),s.addEventListener("keydown",EE),s.addEventListener("keyup",vE),s.addEventListener("blur",IE),s.addEventListener("dragstart",Ls,{passive:!0})}else!h&&i&&SE(s)}function SE(s){s.removeEventListener("mousedown",Ml),s.removeEventListener("touchstart",Ml),s.removeEventListener("touchend",Ls),s.removeEventListener("touchmove",bE),s.removeEventListener("touchcancel",Ls),s.removeEventListener("mouseup",Ls),s.removeEventListener("mouseleave",Ls),s.removeEventListener("keydown",EE),s.removeEventListener("keyup",vE),s.removeEventListener("dragstart",Ls),s.removeEventListener("blur",IE)}function AO(s,r){yE(s,r,!1)}function LO(s){delete s._ripple,SE(s)}function NO(s,r){if(r.value===r.oldValue)return;const i=TE(r.oldValue);yE(s,r,i)}const RE={mounted:AO,unmounted:LO,updated:NO},Xl=rt({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Yl(s){return{dimensionStyles:X(()=>({height:Ve(s.height),maxHeight:Ve(s.maxHeight),maxWidth:Ve(s.maxWidth),minHeight:Ve(s.minHeight),minWidth:Ve(s.minWidth),width:Ve(s.width)}))}}const DO=lt({name:"VProgressLinear",props:{active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...ti(),...zt(),...Ds()},emits:{"update:modelValue":s=>!0},setup(s,r){let{slots:i}=r;const c=dn(s,"modelValue"),{isRtl:l}=pr(),{themeClasses:h}=mo(s),{textColorClasses:d,textColorStyles:_}=lr(s,"color"),{backgroundColorClasses:$,backgroundColorStyles:u}=rn(X(()=>s.bgColor||s.color)),{backgroundColorClasses:g,backgroundColorStyles:m}=rn(s,"color"),{roundedClasses:b}=si(s),{intersectionRef:E,isIntersecting:I}=mE(),y=X(()=>parseInt(s.max,10)),F=X(()=>parseInt(s.height,10)),B=X(()=>parseFloat(s.bufferValue)/y.value*100),N=X(()=>parseFloat(c.value)/y.value*100),R=X(()=>l.value!==s.reverse),z=X(()=>s.indeterminate?"fade-transition":"slide-x-transition"),le=X(()=>s.bgOpacity==null?s.bgOpacity:parseFloat(s.bgOpacity));function he(Q){if(!E.value)return;const{left:V,right:de,width:J}=E.value.getBoundingClientRect(),ue=R.value?J-Q.clientX+(de-J):Q.clientX-V;c.value=Math.round(ue/J*y.value)}return gt(()=>M(s.tag,{ref:E,class:["v-progress-linear",{"v-progress-linear--active":s.active&&I.value,"v-progress-linear--reverse":R.value,"v-progress-linear--rounded":s.rounded,"v-progress-linear--rounded-bar":s.roundedBar,"v-progress-linear--striped":s.striped},b.value,h.value],style:{height:s.active?Ve(F.value):0,"--v-progress-linear-height":Ve(F.value)},role:"progressbar","aria-valuemin":"0","aria-valuemax":s.max,"aria-valuenow":s.indeterminate?void 0:N.value,onClick:s.clickable&&he},{default:()=>[s.stream&&M("div",{key:"stream",class:["v-progress-linear__stream",d.value],style:{..._.value,[R.value?"left":"right"]:Ve(-F.value),borderTop:`${Ve(F.value/2)} dotted`,opacity:le.value,top:`calc(50% - ${Ve(F.value/4)})`,width:Ve(100-B.value,"%"),"--v-progress-linear-stream-to":Ve(F.value*(R.value?1:-1))}},null),M("div",{class:["v-progress-linear__background",$.value],style:[u.value,{opacity:le.value,width:Ve(s.stream?B.value:100,"%")}]},null),M(un,{name:z.value},{default:()=>[s.indeterminate?M("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(Q=>M("div",{key:Q,class:["v-progress-linear__indeterminate",Q,g.value],style:m.value},null))]):M("div",{class:["v-progress-linear__determinate",g.value],style:[m.value,{width:Ve(N.value,"%")}]},null)]}),i.default&&M("div",{class:"v-progress-linear__content"},[i.default({value:N.value,buffer:B.value})])]})),{}}}),CE=rt({loading:Boolean},"loader");function kE(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hn();return{loaderClasses:X(()=>({[`${r}--loading`]:s.loading}))}}function MO(s,r){var i;let{slots:c}=r;return M("div",{class:`${s.name}__loader`},[((i=c.default)==null?void 0:i.call(c,{color:s.color,isActive:s.active}))||M(DO,{active:s.active,color:s.color,height:"2",indeterminate:!0},null)])}const fT={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},zl=rt({location:String},"location");function Kl(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0;const{isRtl:c}=pr();return{locationStyles:X(()=>{if(!s.location)return{};const{side:h,align:d}=Ud(s.location.split(" ").length>1?s.location:`${s.location} center`,c.value);function _(u){return i?i(u):0}const $={};return h!=="center"&&(r?$[fT[h]]=`calc(100% - ${_(h)}px)`:$[h]=0),d!=="center"?r?$[fT[d]]=`calc(100% - ${_(d)}px)`:$[d]=0:(h==="center"?$.top=$.left="50%":$[{top:"left",bottom:"left",left:"top",right:"top"}[h]]="50%",$.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[h]),$})}}const xO=["static","relative","fixed","absolute","sticky"],eu=rt({position:{type:String,validator:s=>xO.includes(s)}},"position");function tu(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hn();return{positionClasses:X(()=>s.position?`${r}--${s.position}`:void 0)}}function BO(){var s,r;return(s=us("useRouter"))==null||(r=s.proxy)==null?void 0:r.$router}function OE(s,r){const i=jR("RouterLink"),c=X(()=>!!(s.href||s.to)),l=X(()=>(c==null?void 0:c.value)||B$(r,"click")||B$(s,"click"));if(typeof i=="string")return{isLink:c,isClickable:l,href:It(s,"href")};const h=s.to?i.useLink(s):void 0;return{isLink:c,isClickable:l,route:h==null?void 0:h.route,navigate:h==null?void 0:h.navigate,isActive:h&&X(()=>{var d,_;return s.exact?(d=h.isExactActive)==null?void 0:d.value:(_=h.isActive)==null?void 0:_.value}),href:X(()=>s.to?h==null?void 0:h.route.value.href:s.href)}}const Pp=rt({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let Id=!1;function PO(s,r){let i=!1,c,l;yt&&(fo(()=>{window.addEventListener("popstate",h),c=s==null?void 0:s.beforeEach((d,_,$)=>{Id?i?r($):$():setTimeout(()=>i?r($):$()),Id=!0}),l=s==null?void 0:s.afterEach(()=>{Id=!1})}),cn(()=>{var d,_;window.removeEventListener("popstate",h),(d=c)==null||d(),(_=l)==null||_()}));function h(d){var _;(_=d.state)!=null&&_.replaced||(i=!0,setTimeout(()=>i=!1))}}function FO(s,r){nt(()=>{var i;return(i=s.isActive)==null?void 0:i.value},i=>{s.isLink.value&&i&&r&&fo(()=>{r(!0)})},{immediate:!0})}const Yd=lt({name:"VBtn",directives:{Ripple:RE},props:{active:{type:Boolean,default:void 0},symbol:{type:null,default:fE},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Es,appendIcon:Es,block:Boolean,stacked:Boolean,ripple:{type:Boolean,default:!0},...Gl(),...ti(),..._r(),...Xl(),...Vl(),...xp(),...CE(),...zl(),...eu(),...Pp(),...Ja(),...zt({tag:"button"}),...Ds(),...jl({variant:"elevated"})},emits:{"group:selected":s=>!0},setup(s,r){let{attrs:i,slots:c}=r;const{themeClasses:l}=mo(s),{borderClasses:h}=Ul(s),{colorClasses:d,colorStyles:_,variantClasses:$}=Qa(s),{densityClasses:u}=Hl(s),{dimensionStyles:g}=Yl(s),{elevationClasses:m}=Wl(s),{loaderClasses:b}=kE(s),{locationStyles:E}=Kl(s),{positionClasses:I}=tu(s),{roundedClasses:y}=si(s),{sizeClasses:F,sizeStyles:B}=qa(s),N=_E(s,s.symbol,!1),R=OE(s,i),z=X(()=>{var Q;return s.active!==!1&&(s.active||((Q=R.isActive)==null?void 0:Q.value)||(N==null?void 0:N.isSelected.value))}),le=X(()=>(N==null?void 0:N.disabled.value)||s.disabled),he=X(()=>s.variant==="elevated"&&!(s.disabled||s.flat||s.border));return FO(R,N==null?void 0:N.select),gt(()=>{var Q,V,de,J;const ue=R.isLink.value?"a":s.tag,Z=!N||N.isSelected.value,ne=!!(s.prependIcon||c.prepend),$e=!!(s.appendIcon||c.append),Ae=!!(s.icon&&s.icon!==!0);return Ii(M(ue,{type:ue==="a"?void 0:"button",class:["v-btn",N==null?void 0:N.selectedClass.value,{"v-btn--active":z.value,"v-btn--block":s.block,"v-btn--disabled":le.value,"v-btn--elevated":he.value,"v-btn--flat":s.flat,"v-btn--icon":!!s.icon,"v-btn--loading":s.loading,"v-btn--stacked":s.stacked},l.value,h.value,Z?d.value:void 0,u.value,m.value,b.value,I.value,y.value,F.value,$.value],style:[Z?_.value:void 0,g.value,E.value,B.value],disabled:le.value||void 0,href:R.href.value,onClick:ce=>{var ke;le.value||((ke=R.navigate)==null||ke.call(R,ce),N==null||N.toggle())}},{default:()=>{var ce;return[Za(!0,"v-btn"),!s.icon&&ne&&M(Ei,{key:"prepend",defaults:{VIcon:{icon:s.prependIcon}}},{default:()=>{var ke;return[M("span",{class:"v-btn__prepend"},[(ke=(Q=c.prepend)==null?void 0:Q.call(c))!=null?ke:M(nn,null,null)])]}}),M("span",{class:"v-btn__content","data-no-activator":""},[M(Ei,{key:"content",defaults:{VIcon:{icon:Ae?s.icon:void 0}}},{default:()=>{var ke;return[(ke=(V=c.default)==null?void 0:V.call(c))!=null?ke:Ae&&M(nn,{key:"icon"},null)]}})]),!s.icon&&$e&&M(Ei,{key:"append",defaults:{VIcon:{icon:s.appendIcon}}},{default:()=>{var ke;return[M("span",{class:"v-btn__append"},[(ke=(de=c.append)==null?void 0:de.call(c))!=null?ke:M(nn,null,null)])]}}),!!s.loading&&M("span",{key:"loader",class:"v-btn__loader"},[(ce=(J=c.loader)==null?void 0:J.call(c))!=null?ce:M(kO,{color:typeof s.loading=="boolean"?void 0:s.loading,indeterminate:!0,size:"23",width:"2"},null)])]}}),[[Fl("ripple"),!le.value&&s.ripple,null]])}),{}}});const GO=lt({name:"VCardActions",setup(s,r){let{slots:i}=r;return dr({VBtn:{variant:"text"}}),gt(()=>{var c;return M("div",{class:"v-card-actions"},[(c=i.default)==null?void 0:c.call(i)])}),{}}});function UO(s){return{aspectStyles:X(()=>{const r=Number(s.aspectRatio);return r?{paddingBottom:String(1/r*100)+"%"}:void 0})}}const HO=lt({name:"VResponsive",props:{aspectRatio:[String,Number],contentClass:String,...Xl()},setup(s,r){let{slots:i}=r;const{aspectStyles:c}=UO(s),{dimensionStyles:l}=Yl(s);return gt(()=>{var h;return M("div",{class:"v-responsive",style:l.value},[M("div",{class:"v-responsive__sizer",style:c.value},null),(h=i.additional)==null?void 0:h.call(i),i.default&&M("div",{class:["v-responsive__content",s.contentClass]},[i.default()])])}),{}}});function VO(s,r){if(!Op)return;const i=r.modifiers||{},c=r.value,{handler:l,options:h}=typeof c=="object"?c:{handler:c,options:{}},d=new IntersectionObserver(function(){var _;let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],u=arguments.length>1?arguments[1]:void 0;const g=(_=s._observe)==null?void 0:_[r.instance.$.uid];if(!g)return;const m=$.some(b=>b.isIntersecting);l&&(!i.quiet||g.init)&&(!i.once||m||g.init)&&l(m,$,u),m&&i.once?wE(s,r):g.init=!0},h);s._observe=Object(s._observe),s._observe[r.instance.$.uid]={init:!1,observer:d},d.observe(s)}function wE(s,r){var i;const c=(i=s._observe)==null?void 0:i[r.instance.$.uid];!c||(c.observer.unobserve(s),delete s._observe[r.instance.$.uid])}const WO={mounted:VO,unmounted:wE},jO=WO,Fp=rt({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:s=>s!==!0}},"transition"),tn=(s,r)=>{let{slots:i}=r;const{transition:c,...l}=s,{component:h=un,...d}=typeof c=="object"?c:{};return Ri(h,ss(typeof c=="string"?{name:c}:d,l),i)},Gp=lt({name:"VImg",directives:{intersect:jO},props:{aspectRatio:[String,Number],alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,width:[String,Number],...Fp()},emits:{loadstart:s=>!0,load:s=>!0,error:s=>!0},setup(s,r){let{emit:i,slots:c}=r;const l=we(""),h=we(),d=we(s.eager?"loading":"idle"),_=we(),$=we(),u=X(()=>s.src&&typeof s.src=="object"?{src:s.src.src,srcset:s.srcset||s.src.srcset,lazySrc:s.lazySrc||s.src.lazySrc,aspect:Number(s.aspectRatio||s.src.aspect)}:{src:s.src,srcset:s.srcset,lazySrc:s.lazySrc,aspect:Number(s.aspectRatio||0)}),g=X(()=>u.value.aspect||_.value/$.value||0);nt(()=>s.src,()=>{m(d.value!=="idle")}),pb(()=>m());function m(Q){if(!(s.eager&&Q)&&!(Op&&!Q&&!s.eager)){if(d.value="loading",u.value.lazySrc){const V=new Image;V.src=u.value.lazySrc,y(V,null)}!u.value.src||fo(()=>{var V,de;if(i("loadstart",((V=h.value)==null?void 0:V.currentSrc)||u.value.src),(de=h.value)!=null&&de.complete){if(h.value.naturalWidth||E(),d.value==="error")return;g.value||y(h.value,null),b()}else g.value||y(h.value),I()})}}function b(){var Q;I(),d.value="loaded",i("load",((Q=h.value)==null?void 0:Q.currentSrc)||u.value.src)}function E(){var Q;d.value="error",i("error",((Q=h.value)==null?void 0:Q.currentSrc)||u.value.src)}function I(){const Q=h.value;Q&&(l.value=Q.currentSrc||Q.src)}function y(Q){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const de=()=>{const{naturalHeight:J,naturalWidth:ue}=Q;J||ue?(_.value=ue,$.value=J):!Q.complete&&d.value==="loading"&&V!=null?setTimeout(de,V):(Q.currentSrc.endsWith(".svg")||Q.currentSrc.startsWith("data:image/svg+xml"))&&(_.value=1,$.value=1)};de()}const F=X(()=>({"v-img__img--cover":s.cover,"v-img__img--contain":!s.cover})),B=()=>{var Q;if(!u.value.src||d.value==="idle")return null;const V=M("img",{class:["v-img__img",F.value],src:u.value.src,srcset:u.value.srcset,alt:"",sizes:s.sizes,ref:h,onLoad:b,onError:E},null),de=(Q=c.sources)==null?void 0:Q.call(c);return M(tn,{transition:s.transition,appear:!0},{default:()=>[Ii(de?M("picture",{class:"v-img__picture"},[de,V]):V,[[ja,d.value==="loaded"]])]})},N=()=>M(tn,{transition:s.transition},{default:()=>[u.value.lazySrc&&d.value!=="loaded"&&M("img",{class:["v-img__img","v-img__img--preload",F.value],src:u.value.lazySrc,alt:""},null)]}),R=()=>c.placeholder?M(tn,{transition:s.transition,appear:!0},{default:()=>[(d.value==="loading"||d.value==="error"&&!c.error)&&M("div",{class:"v-img__placeholder"},[c.placeholder()])]}):null,z=()=>c.error?M(tn,{transition:s.transition,appear:!0},{default:()=>[d.value==="error"&&M("div",{class:"v-img__error"},[c.error()])]}):null,le=()=>s.gradient?M("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${s.gradient})`}},null):null,he=we(!1);{const Q=nt(g,V=>{V&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{he.value=!0})}),Q())})}return gt(()=>Ii(M(HO,{class:["v-img",{"v-img--booting":!he.value}],style:{width:Ve(s.width==="auto"?_.value:s.width)},aspectRatio:g.value,"aria-label":s.alt,role:s.alt?"img":void 0},{additional:()=>M(Xt,null,[M(B,null,null),M(N,null,null),M(le,null,null),M(R,null,null),M(z,null,null)]),default:c.default}),[[Fl("intersect"),{handler:m,options:s.options},null,{once:!0}]])),{currentSrc:l,image:h,state:d,naturalWidth:_,naturalHeight:$}}}),XO=rt({start:Boolean,end:Boolean,icon:Es,image:String,..._r(),...ti(),...Ja(),...zt(),...jl({variant:"flat"})},"v-avatar"),mT=lt({name:"VAvatar",props:XO(),setup(s,r){let{slots:i}=r;const{colorClasses:c,colorStyles:l,variantClasses:h}=Qa(s),{densityClasses:d}=Hl(s),{roundedClasses:_}=si(s),{sizeClasses:$,sizeStyles:u}=qa(s);return gt(()=>{var g;return M(s.tag,{class:["v-avatar",{"v-avatar--start":s.start,"v-avatar--end":s.end},c.value,d.value,_.value,$.value,h.value],style:[l.value,u.value]},{default:()=>[s.image?M(Gp,{key:"image",src:s.image,alt:""},null):s.icon?M(nn,{key:"icon",icon:s.icon},null):(g=i.default)==null?void 0:g.call(i),Za(!1,"v-avatar")]})}),{}}}),YO=za("v-card-subtitle"),zO=za("v-card-title"),KO=mp({name:"VCardItem",props:{appendAvatar:String,appendIcon:Es,prependAvatar:String,prependIcon:Es,subtitle:String,title:String,..._r()},setup(s,r){let{slots:i}=r;return gt(()=>{var c,l,h,d,_;const $=!!(s.prependAvatar||s.prependIcon||i.prepend),u=!!(s.appendAvatar||s.appendIcon||i.append),g=!!(s.title||i.title),m=!!(s.subtitle||i.subtitle);return M("div",{class:"v-card-item"},[$&&M(Ei,{key:"prepend",defaults:{VAvatar:{density:s.density,icon:s.prependIcon,image:s.prependAvatar},VIcon:{density:s.density,icon:s.prependIcon}}},{default:()=>{var b;return[M("div",{class:"v-card-item__prepend"},[(b=(c=i.prepend)==null?void 0:c.call(i))!=null?b:M(mT,null,null)])]}}),M("div",{class:"v-card-item__content"},[g&&M(zO,{key:"title"},{default:()=>{var b;return[(b=(l=i.title)==null?void 0:l.call(i))!=null?b:s.title]}}),m&&M(YO,{key:"subtitle"},{default:()=>{var b;return[(b=(h=i.subtitle)==null?void 0:h.call(i))!=null?b:s.subtitle]}}),(d=i.default)==null?void 0:d.call(i)]),u&&M(Ei,{key:"append",defaults:{VAvatar:{density:s.density,icon:s.appendIcon,image:s.appendAvatar},VIcon:{density:s.density,icon:s.appendIcon}}},{default:()=>{var b;return[M("div",{class:"v-card-item__append"},[(b=(_=i.append)==null?void 0:_.call(i))!=null?b:M(mT,null,null)])]}})])}),{}}}),JO=za("v-card-text"),CA=lt({name:"VCard",directives:{Ripple:RE},props:{appendAvatar:String,appendIcon:Es,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Es,ripple:Boolean,subtitle:String,text:String,title:String,...Ds(),...Gl(),..._r(),...Xl(),...Vl(),...CE(),...zl(),...eu(),...ti(),...Pp(),...zt(),...jl({variant:"elevated"})},setup(s,r){let{attrs:i,slots:c}=r;const{themeClasses:l}=mo(s),{borderClasses:h}=Ul(s),{colorClasses:d,colorStyles:_,variantClasses:$}=Qa(s),{densityClasses:u}=Hl(s),{dimensionStyles:g}=Yl(s),{elevationClasses:m}=Wl(s),{loaderClasses:b}=kE(s),{locationStyles:E}=Kl(s),{positionClasses:I}=tu(s),{roundedClasses:y}=si(s),F=OE(s,i),B=X(()=>s.link!==!1&&F.isLink.value),N=X(()=>!s.disabled&&s.link!==!1&&(s.link||F.isClickable.value));return gt(()=>{var R,z,le;const he=B.value?"a":s.tag,Q=!!(c.title||s.title),V=!!(c.subtitle||s.subtitle),de=Q||V,J=!!(c.append||s.appendAvatar||s.appendIcon),ue=!!(c.prepend||s.prependAvatar||s.prependIcon),Z=!!(c.image||s.image),ne=de||ue||J,$e=!!(c.text||s.text);return Ii(M(he,{class:["v-card",{"v-card--disabled":s.disabled,"v-card--flat":s.flat,"v-card--hover":s.hover&&!(s.disabled||s.flat),"v-card--link":N.value},l.value,h.value,d.value,u.value,m.value,b.value,I.value,y.value,$.value],style:[_.value,g.value,E.value],href:F.href.value,onClick:N.value&&F.navigate},{default:()=>[Z&&M(Ei,{key:"image",defaults:{VImg:{cover:!0,src:s.image}}},{default:()=>{var Ae;return[M("div",{class:"v-card__image"},[(Ae=(R=c.image)==null?void 0:R.call(c))!=null?Ae:M(Gp,null,null)])]}}),M(MO,{name:"v-card",active:!!s.loading,color:typeof s.loading=="boolean"?void 0:s.loading},{default:c.loader}),ne&&M(KO,{key:"item",prependAvatar:s.prependAvatar,prependIcon:s.prependIcon,title:s.title,subtitle:s.subtitle,appendAvatar:s.appendAvatar,appendIcon:s.appendIcon},{default:c.item,prepend:c.prepend,title:c.title,subtitle:c.subtitle,append:c.append}),$e&&M(JO,{key:"text"},{default:()=>{var Ae;return[(Ae=(z=c.text)==null?void 0:z.call(c))!=null?Ae:s.text]}}),(le=c.default)==null?void 0:le.call(c),c.actions&&M(GO,null,{default:c.actions}),Za(N.value,"v-card")]}),[[Fl("ripple"),N.value]])}),{}}});function Ms(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top center 0",i=arguments.length>2?arguments[2]:void 0;return lt({name:s,props:{group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:{type:String,default:i},origin:{type:String,default:r}},setup(c,l){let{slots:h}=l;return()=>{const d=c.group?JC:un;return Ri(d,{name:s,mode:c.mode,onBeforeEnter(_){_.style.transformOrigin=c.origin},onLeave(_){if(c.leaveAbsolute){const{offsetTop:$,offsetLeft:u,offsetWidth:g,offsetHeight:m}=_;_._transitionInitialStyles={position:_.style.position,top:_.style.top,left:_.style.left,width:_.style.width,height:_.style.height},_.style.position="absolute",_.style.top=`${$}px`,_.style.left=`${u}px`,_.style.width=`${g}px`,_.style.height=`${m}px`}c.hideOnLeave&&_.style.setProperty("display","none","important")},onAfterLeave(_){if(c.leaveAbsolute&&_!=null&&_._transitionInitialStyles){const{position:$,top:u,left:g,width:m,height:b}=_._transitionInitialStyles;delete _._transitionInitialStyles,_.style.position=$||"",_.style.top=u||"",_.style.left=g||"",_.style.width=m||"",_.style.height=b||""}}},h.default)}}})}function AE(s,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return lt({name:s,props:{mode:{type:String,default:i}},setup(c,l){let{slots:h}=l;return()=>Ri(un,{name:s,...r},h.default)}})}function LE(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",c=Xs(`offset-${i}`);return{onBeforeEnter(d){d._parent=d.parentNode,d._initialStyle={transition:d.style.transition,overflow:d.style.overflow,[i]:d.style[i]}},onEnter(d){const _=d._initialStyle;d.style.setProperty("transition","none","important"),d.style.overflow="hidden";const $=`${d[c]}px`;d.style[i]="0",d.offsetHeight,d.style.transition=_.transition,s&&d._parent&&d._parent.classList.add(s),requestAnimationFrame(()=>{d.style[i]=$})},onAfterEnter:h,onEnterCancelled:h,onLeave(d){d._initialStyle={transition:"",overflow:d.style.overflow,[i]:d.style[i]},d.style.overflow="hidden",d.style[i]=`${d[c]}px`,d.offsetHeight,requestAnimationFrame(()=>d.style[i]="0")},onAfterLeave:l,onLeaveCancelled:l};function l(d){s&&d._parent&&d._parent.classList.remove(s),h(d)}function h(d){const _=d._initialStyle[i];d.style.overflow=d._initialStyle.overflow,_!=null&&(d.style[i]=_),delete d._initialStyle}}Ms("fab-transition","center center","out-in");Ms("dialog-bottom-transition");Ms("dialog-top-transition");const $T=Ms("fade-transition");Ms("scale-transition");Ms("scroll-x-transition");Ms("scroll-x-reverse-transition");Ms("scroll-y-transition");Ms("scroll-y-reverse-transition");Ms("slide-x-transition");Ms("slide-x-reverse-transition");Ms("slide-y-transition");Ms("slide-y-reverse-transition");const qO=AE("expand-transition",LE());AE("expand-x-transition",LE("",!0));function TT(s){const i=Math.abs(s);return Math.sign(s)*(i/((1/.501-2)*(1-i)+1))}function bT(s){let{selectedElement:r,containerSize:i,contentSize:c,isRtl:l,currentScrollOffset:h,isHorizontal:d}=s;const _=d?r.clientWidth:r.clientHeight,$=d?r.offsetLeft:r.offsetTop,u=l&&d?c-$-_:$,g=i+h,m=_+u,b=_*.4;return u<=h?h=Math.max(u-b,0):g<=m&&(h=Math.min(h-(g-m-b),c-i)),h}function ZO(s){let{selectedElement:r,containerSize:i,contentSize:c,isRtl:l,isHorizontal:h}=s;const d=h?r.clientWidth:r.clientHeight,_=h?r.offsetLeft:r.offsetTop,$=l&&h?c-_-d/2-i/2:_+d/2-i/2;return Math.min(c-i,Math.max(0,$))}const QO=Symbol.for("vuetify:v-slide-group"),ew=Ci()({name:"VSlideGroup",props:{centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:QO},nextIcon:{type:Es,default:"$next"},prevIcon:{type:Es,default:"$prev"},showArrows:{type:[Boolean,String],validator:s=>typeof s=="boolean"||["always","desktop","mobile"].includes(s)},...zt(),...pE({selectedClass:"v-slide-group-item--active"})},emits:{"update:modelValue":s=>!0},setup(s,r){let{slots:i}=r;const{isRtl:c}=pr(),{mobile:l}=Nk(),h=Bp(s,s.symbol),d=we(!1),_=we(0),$=we(0),u=we(0),g=X(()=>s.direction==="horizontal"),{resizeRef:m,contentRect:b}=Ca(),{resizeRef:E,contentRect:I}=Ca(),y=X(()=>h.selected.value.length?h.items.value.findIndex(Se=>Se.id===h.selected.value[0]):-1),F=X(()=>h.selected.value.length?h.items.value.findIndex(Se=>Se.id===h.selected.value[h.selected.value.length-1]):-1);if(yt){let Se=-1;nt(()=>[h.selected.value,b.value,I.value,g.value],()=>{cancelAnimationFrame(Se),Se=requestAnimationFrame(()=>{if(b.value&&I.value){const A=g.value?"width":"height";$.value=b.value[A],u.value=I.value[A],d.value=$.value+1<u.value}if(y.value>=0&&E.value){const A=E.value.children[F.value];y.value===0||!d.value?_.value=0:s.centerActive?_.value=ZO({selectedElement:A,containerSize:$.value,contentSize:u.value,isRtl:c.value,isHorizontal:g.value}):d.value&&(_.value=bT({selectedElement:A,containerSize:$.value,contentSize:u.value,isRtl:c.value,currentScrollOffset:_.value,isHorizontal:g.value}))}})})}const B=we(!1);let N=0,R=0;function z(Se){const A=g.value?"clientX":"clientY";R=(c.value&&g.value?-1:1)*_.value,N=Se.touches[0][A],B.value=!0}function le(Se){if(!d.value)return;const A=g.value?"clientX":"clientY",oe=c.value&&g.value?-1:1;_.value=oe*(R+N-Se.touches[0][A])}function he(Se){const A=u.value-$.value;_.value<0||!d.value?_.value=0:_.value>=A&&(_.value=A),B.value=!1}function Q(){!m.value||(m.value[g.value?"scrollLeft":"scrollTop"]=0)}const V=we(!1);function de(Se){if(V.value=!0,!(!d.value||!E.value)){for(const A of Se.composedPath())for(const oe of E.value.children)if(oe===A){_.value=bT({selectedElement:oe,containerSize:$.value,contentSize:u.value,isRtl:c.value,currentScrollOffset:_.value,isHorizontal:g.value});return}}}function J(Se){V.value=!1}function ue(Se){var A;!V.value&&!(Se.relatedTarget&&(A=E.value)!=null&&A.contains(Se.relatedTarget))&&ne()}function Z(Se){!E.value||(g.value?Se.key==="ArrowRight"?ne(c.value?"prev":"next"):Se.key==="ArrowLeft"&&ne(c.value?"next":"prev"):Se.key==="ArrowDown"?ne("next"):Se.key==="ArrowUp"&&ne("prev"),Se.key==="Home"?ne("first"):Se.key==="End"&&ne("last"))}function ne(Se){if(!!E.value)if(Se){if(Se==="next"){var oe;const be=(oe=E.value.querySelector(":focus"))==null?void 0:oe.nextElementSibling;be?be.focus():ne("first")}else if(Se==="prev"){var Ft;const be=(Ft=E.value.querySelector(":focus"))==null?void 0:Ft.previousElementSibling;be?be.focus():ne("last")}else if(Se==="first"){var Pe;(Pe=E.value.firstElementChild)==null||Pe.focus()}else if(Se==="last"){var Ys;(Ys=E.value.lastElementChild)==null||Ys.focus()}}else{var A;(A=[...E.value.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')].filter(St=>!St.hasAttribute("disabled"))[0])==null||A.focus()}}function $e(Se){const A=_.value+(Se==="prev"?-1:1)*$.value;_.value=Ea(A,0,u.value-$.value)}const Ae=X(()=>{let Se=_.value>u.value-$.value?-(u.value-$.value)+TT(u.value-$.value-_.value):-_.value;_.value<=0&&(Se=TT(-_.value));const A=c.value&&g.value?-1:1;return{transform:`translate${g.value?"X":"Y"}(${A*Se}px)`,transition:B.value?"none":"",willChange:B.value?"transform":""}}),ce=X(()=>({next:h.next,prev:h.prev,select:h.select,isSelected:h.isSelected})),ke=X(()=>{switch(s.showArrows){case"always":return!0;case"desktop":return!l.value;case!0:return d.value||Math.abs(_.value)>0;case"mobile":return l.value||d.value||Math.abs(_.value)>0;default:return!l.value&&(d.value||Math.abs(_.value)>0)}}),fe=X(()=>Math.abs(_.value)>0),et=X(()=>u.value>Math.abs(_.value)+$.value);return gt(()=>{var Se,A,oe;return M(s.tag,{class:["v-slide-group",{"v-slide-group--vertical":!g.value,"v-slide-group--has-affixes":ke.value,"v-slide-group--is-overflowing":d.value}],tabindex:V.value||h.selected.value.length?-1:0,onFocus:ue},{default:()=>{var Ft,Pe;return[ke.value&&M("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!fe.value}],onClick:()=>$e("prev")},[(Ft=(Se=i.prev)==null?void 0:Se.call(i,ce.value))!=null?Ft:M($T,null,{default:()=>[M(nn,{icon:c.value?s.nextIcon:s.prevIcon},null)]})]),M("div",{key:"container",ref:m,class:"v-slide-group__container",onScroll:Q},[M("div",{ref:E,class:"v-slide-group__content",style:Ae.value,onTouchstartPassive:z,onTouchmovePassive:le,onTouchendPassive:he,onFocusin:de,onFocusout:J,onKeydown:Z},[(A=i.default)==null?void 0:A.call(i,ce.value)])]),ke.value&&M("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!et.value}],onClick:()=>$e("next")},[(Pe=(oe=i.next)==null?void 0:oe.call(i,ce.value))!=null?Pe:M($T,null,{default:()=>[M(nn,{icon:c.value?s.prevIcon:s.nextIcon},null)]})])]}})}),{selected:h.selected,scrollTo:$e,scrollOffset:_,focus:ne}}});const NE=Symbol.for("vuetify:v-tabs"),tw=lt({name:"VTab",props:{fixed:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Es,appendIcon:Es,stacked:Boolean,title:String,ripple:{type:Boolean,default:!0},color:String,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...zt(),...Pp(),...xp({selectedClass:"v-tab--selected"}),...Ds()},setup(s,r){let{slots:i,attrs:c}=r;const{textColorClasses:l,textColorStyles:h}=lr(s,"sliderColor"),d=X(()=>s.direction==="horizontal"),_=we(!1),$=we(),u=we();function g(m){let{value:b}=m;if(_.value=b,b){var E,I;const y=(E=$.value)==null||(I=E.$el.parentElement)==null?void 0:I.querySelector(".v-tab--selected .v-tab__slider"),F=u.value;if(!y||!F)return;const B=getComputedStyle(y).color,N=y.getBoundingClientRect(),R=F.getBoundingClientRect(),z=d.value?"x":"y",le=d.value?"X":"Y",he=d.value?"right":"bottom",Q=d.value?"width":"height",V=N[z],de=R[z],J=V>de?N[he]-R[he]:N[z]-R[z],ue=Math.sign(J)>0?d.value?"right":"bottom":Math.sign(J)<0?d.value?"left":"top":"center",ne=(Math.abs(J)+(Math.sign(J)<0?N[Q]:R[Q]))/Math.max(N[Q],R[Q]),$e=N[Q]/R[Q],Ae=1.5;Hb(F,{backgroundColor:[B,""],transform:[`translate${le}(${J}px) scale${le}(${$e})`,`translate${le}(${J/Ae}px) scale${le}(${(ne-1)/Ae+1})`,""],transformOrigin:Array(3).fill(ue)},{duration:225,easing:Jb})}}return gt(()=>{const[m]=Sp(s,["href","to","replace","icon","stacked","prependIcon","appendIcon","ripple","theme","disabled","selectedClass","value","color"]);return M(Yd,ss({_as:"VTab",symbol:NE,ref:$,class:["v-tab"],tabindex:_.value?0:-1,role:"tab","aria-selected":String(_.value),active:!1,block:s.fixed,maxWidth:s.fixed?300:void 0,variant:"text",rounded:0},m,c,{"onGroup:selected":g}),{default:()=>[i.default?i.default():s.title,!s.hideSlider&&M("div",{ref:u,class:["v-tab__slider",l.value],style:h.value},null)]})}),{}}});function sw(s){return s?s.map(r=>typeof r=="string"?{title:r,value:r}:r):[]}const kA=lt({name:"VTabs",props:{alignTabs:{type:String,default:"start"},color:String,direction:{type:String,default:"horizontal"},fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,modelValue:null,mandatory:{type:[Boolean,String],default:"force"},..._r(),...zt()},emits:{"update:modelValue":s=>!0},setup(s,r){let{slots:i}=r;const c=dn(s,"modelValue"),l=X(()=>sw(s.items)),{densityClasses:h}=Hl(s),{backgroundColorClasses:d,backgroundColorStyles:_}=rn(It(s,"bgColor"));return dr({VTab:{color:It(s,"color"),direction:It(s,"direction"),stacked:It(s,"stacked"),fixed:It(s,"fixedTabs"),sliderColor:It(s,"sliderColor"),hideSlider:It(s,"hideSlider")}}),gt(()=>M(ew,{modelValue:c.value,"onUpdate:modelValue":$=>c.value=$,class:["v-tabs",`v-tabs--${s.direction}`,`v-tabs--align-tabs-${s.alignTabs}`,{"v-tabs--fixed-tabs":s.fixedTabs,"v-tabs--grow":s.grow,"v-tabs--stacked":s.stacked},h.value,d.value],style:[{"--v-tabs-height":Ve(s.height)},_.value],role:"tablist",symbol:NE,mandatory:s.mandatory,direction:s.direction},{default:()=>[i.default?i.default():l.value.map($=>M(tw,ss($,{key:$.title}),null))]})),{}}});const ow=Ci()({name:"VToolbarTitle",props:{text:String,...zt()},setup(s,r){let{slots:i}=r;return gt(()=>{var c;const l=!!(i.default||i.text||s.text);return M(s.tag,{class:"v-toolbar-title"},{default:()=>[l&&M("div",{class:"v-toolbar-title__placeholder"},[i.text?i.text():s.text,(c=i.default)==null?void 0:c.call(i)])]})}),{}}}),iw=[null,"prominent","default","comfortable","compact"],nw=rt({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:s=>iw.includes(s)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Gl(),...Vl(),...ti(),...zt({tag:"header"}),...Ds()},"v-toolbar"),OA=Ci()({name:"VToolbar",props:nw(),setup(s,r){var i;let{slots:c}=r;const{backgroundColorClasses:l,backgroundColorStyles:h}=rn(It(s,"color")),{borderClasses:d}=Ul(s),{elevationClasses:_}=Wl(s),{roundedClasses:$}=si(s),{themeClasses:u}=mo(s),g=we(!!(s.extended||(i=c.extension)!=null&&i.call(c))),m=X(()=>parseInt(Number(s.height)+(s.density==="prominent"?Number(s.height):0)-(s.density==="comfortable"?8:0)-(s.density==="compact"?16:0),10)),b=X(()=>g.value?parseInt(Number(s.extensionHeight)+(s.density==="prominent"?Number(s.extensionHeight):0)-(s.density==="comfortable"?4:0)-(s.density==="compact"?8:0),10):0);return dr({VBtn:{variant:"text"}}),gt(()=>{var E,I,y,F,B;const N=!!(s.title||c.title),R=!!(c.image||s.image),z=(E=c.extension)==null?void 0:E.call(c);return g.value=!!(s.extended||z),M(s.tag,{class:["v-toolbar",{"v-toolbar--absolute":s.absolute,"v-toolbar--collapse":s.collapse,"v-toolbar--flat":s.flat,"v-toolbar--floating":s.floating,[`v-toolbar--density-${s.density}`]:!0},l.value,d.value,_.value,$.value,u.value],style:[h.value]},{default:()=>[R&&M("div",{key:"image",class:"v-toolbar__image"},[M(Ei,{defaults:{VImg:{cover:!0,src:s.image}}},{default:()=>[c.image?(I=c.image)==null?void 0:I.call(c):M(Gp,null,null)]})]),M("div",{class:"v-toolbar__content",style:{height:Ve(m.value)}},[c.prepend&&M("div",{class:"v-toolbar__prepend"},[(y=c.prepend)==null?void 0:y.call(c)]),N&&M(ow,{key:"title",text:s.title},{text:c.title}),(F=c.default)==null?void 0:F.call(c),c.append&&M("div",{class:"v-toolbar__append"},[(B=c.append)==null?void 0:B.call(c)])]),M(qO,null,{default:()=>[g.value&&M("div",{class:"v-toolbar__extension",style:{height:Ve(b.value)}},[z])]})]})}),{contentHeight:m,extensionHeight:b}}});const rw=rt({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function lw(s,r){const i={},c=l=>()=>{if(!yt)return Promise.resolve(!0);const h=l==="openDelay";return i.closeDelay&&window.clearTimeout(i.closeDelay),delete i.closeDelay,i.openDelay&&window.clearTimeout(i.openDelay),delete i.openDelay,new Promise(d=>{var $;const _=parseInt(($=s[l])!=null?$:0,10);i[l]=window.setTimeout(()=>{r==null||r(h),d(h)},_)})};return{runCloseDelay:c("closeDelay"),runOpenDelay:c("openDelay")}}const cw=Symbol.for("vuetify:v-menu"),aw=rt({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...rw()},"v-overlay-activator");function uw(s,r){let{isActive:i,isTop:c}=r;const l=we();let h=!1,d=!1,_=!0;const $=X(()=>s.openOnFocus||s.openOnFocus==null&&s.openOnHover),u=X(()=>s.openOnClick||s.openOnClick==null&&!s.openOnHover&&!$.value),{runOpenDelay:g,runCloseDelay:m}=lw(s,R=>{R===(s.openOnHover&&h||$.value&&d)&&!(s.openOnHover&&i.value&&!c.value)&&(i.value!==R&&(_=!0),i.value=R)}),b={click:R=>{R.stopPropagation(),l.value=R.currentTarget||R.target,i.value=!i.value},mouseenter:R=>{h=!0,l.value=R.currentTarget||R.target,g()},mouseleave:R=>{h=!1,m()},focus:R=>{Ck&&!R.target.matches(":focus-visible")||(d=!0,R.stopPropagation(),l.value=R.currentTarget||R.target,g())},blur:R=>{d=!1,R.stopPropagation(),m()}},E=X(()=>{const R={};return u.value&&(R.click=b.click),s.openOnHover&&(R.mouseenter=b.mouseenter,R.mouseleave=b.mouseleave),$.value&&(R.focus=b.focus,R.blur=b.blur),R}),I=X(()=>{const R={};if(s.openOnHover&&(R.mouseenter=()=>{h=!0,g()},R.mouseleave=()=>{h=!1,m()}),s.closeOnContentClick){const z=os(cw,null);R.click=()=>{i.value=!1,z==null||z.closeParents()}}return R}),y=X(()=>{const R={};return s.openOnHover&&(R.mouseenter=()=>{_&&(h=!0,_=!1,g())},R.mouseleave=()=>{h=!1,m()}),R});nt(c,R=>{R&&(s.openOnHover&&!h&&(!$.value||!d)||$.value&&!d&&(!s.openOnHover||!h))&&(i.value=!1)});const F=we();Qo(()=>{!F.value||fo(()=>{const R=F.value;l.value=rk(R)?R.$el:R})});const B=us("useActivator");let N;return nt(()=>!!s.activator,R=>{R&&yt?(N=Bl(),N.run(()=>{hw(s,B,{activatorEl:l,activatorEvents:E})})):N&&N.stop()},{flush:"post",immediate:!0}),{activatorEl:l,activatorRef:F,activatorEvents:E,contentEvents:I,scrimEvents:y}}function hw(s,r,i){let{activatorEl:c,activatorEvents:l}=i;nt(()=>s.activator,($,u)=>{if(u&&$!==u){const g=_(u);g&&d(g)}$&&fo(()=>h())},{immediate:!0}),nt(()=>s.activatorProps,()=>{h()}),cn(()=>{d()});function h(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.activatorProps;!$||(Object.entries(l.value).forEach(g=>{let[m,b]=g;$.addEventListener(m,b)}),Object.keys(u).forEach(g=>{u[g]==null?$.removeAttribute(g):$.setAttribute(g,u[g])}))}function d(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.activatorProps;!$||(Object.entries(l.value).forEach(g=>{let[m,b]=g;$.removeEventListener(m,b)}),Object.keys(u).forEach(g=>{$.removeAttribute(g)}))}function _(){var $;let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.activator,g;if(u)if(u==="parent"){var m,b;let E=r==null||(m=r.proxy)==null||(b=m.$el)==null?void 0:b.parentNode;for(;E.hasAttribute("data-no-activator");)E=E.parentNode;g=E}else typeof u=="string"?g=document.querySelector(u):"$el"in u?g=u.$el:g=u;return c.value=(($=g)==null?void 0:$.nodeType)===Node.ELEMENT_NODE?g:null,c.value}}const DE=rt({eager:Boolean},"lazy");function ME(s,r){const i=we(!1),c=X(()=>i.value||s.eager||r.value);nt(r,()=>i.value=!0);function l(){s.eager||(i.value=!1)}return{isBooted:i,hasContent:c,onAfterLeave:l}}function yd(s,r){return{x:s.x+r.x,y:s.y+r.y}}function dw(s,r){return{x:s.x-r.x,y:s.y-r.y}}function ET(s,r){if(s.side==="top"||s.side==="bottom"){const{side:i,align:c}=s,l=c==="left"?0:c==="center"?r.width/2:c==="right"?r.width:c,h=i==="top"?0:i==="bottom"?r.height:i;return yd({x:l,y:h},r)}else if(s.side==="left"||s.side==="right"){const{side:i,align:c}=s,l=i==="left"?0:i==="right"?r.width:i,h=c==="top"?0:c==="center"?r.height/2:c==="bottom"?r.height:c;return yd({x:l,y:h},r)}return yd({x:r.width/2,y:r.height/2},r)}const xE={static:gw,connected:mw},pw=rt({locationStrategy:{type:[String,Function],default:"static",validator:s=>typeof s=="function"||s in xE},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"v-overlay-location-strategies");function _w(s,r){const i=we({}),c=we();let l;Qo(async()=>{var d;(d=l)==null||d.stop(),c.value=void 0,yt&&r.isActive.value&&s.locationStrategy&&(l=Bl(),await fo(),l.run(()=>{if(typeof s.locationStrategy=="function"){var _;c.value=(_=s.locationStrategy(r,s,i))==null?void 0:_.updateLocation}else{var $;c.value=($=xE[s.locationStrategy](r,s,i))==null?void 0:$.updateLocation}}))}),yt&&window.addEventListener("resize",h,{passive:!0}),cn(()=>{var d;yt&&window.removeEventListener("resize",h),c.value=void 0,(d=l)==null||d.stop()});function h(d){var _;(_=c.value)==null||_.call(c,d)}return{contentStyles:i,updateLocation:c}}function gw(){}function fw(s){const r=ak(s);return r.x-=parseFloat(s.style.left||0),r.y-=parseFloat(s.style.top||0),r}function mw(s,r,i){const c=kk(s.activatorEl.value);c&&Object.assign(i.value,{position:"fixed"});const{preferredAnchor:l,preferredOrigin:h}=Rp(()=>{const I=Ud(r.location,s.isRtl.value),y=r.origin==="overlap"?I:r.origin==="auto"?ad(I):Ud(r.origin,s.isRtl.value);return I.side===y.side&&I.align===ud(y).align?{preferredAnchor:F$(I),preferredOrigin:F$(y)}:{preferredAnchor:I,preferredOrigin:y}}),[d,_,$,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(I=>X(()=>{const y=parseFloat(r[I]);return isNaN(y)?1/0:y})),g=X(()=>{if(Array.isArray(r.offset))return r.offset;if(typeof r.offset=="string"){const I=r.offset.split(" ").map(parseFloat);return I.length<2&&I.push(0),I}return typeof r.offset=="number"?[r.offset,0]:[0,0]});let m=!1;const b=new ResizeObserver(()=>{m&&E()});nt([s.activatorEl,s.contentEl],(I,y)=>{let[F,B]=I,[N,R]=y;N&&b.unobserve(N),F&&b.observe(F),R&&b.unobserve(R),B&&b.observe(B)},{immediate:!0}),cn(()=>{b.disconnect()});function E(){if(m=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>m=!0)}),!s.activatorEl.value||!s.contentEl.value)return;const I=s.activatorEl.value.getBoundingClientRect(),y=fw(s.contentEl.value),F=Sa(s.contentEl.value),B=12;F.length||(F.push(document.documentElement),s.contentEl.value.style.top&&s.contentEl.value.style.left||(y.x+=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),y.y+=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const N=F.reduce((ue,Z)=>{const ne=Z.getBoundingClientRect(),$e=new or({x:Z===document.documentElement?0:ne.x,y:Z===document.documentElement?0:ne.y,width:Z.clientWidth,height:Z.clientHeight});return ue?new or({x:Math.max(ue.left,$e.left),y:Math.max(ue.top,$e.top),width:Math.min(ue.right,$e.right)-Math.max(ue.left,$e.left),height:Math.min(ue.bottom,$e.bottom)-Math.max(ue.top,$e.top)}):$e},void 0);N.x+=B,N.y+=B,N.width-=B*2,N.height-=B*2;let R={anchor:l.value,origin:h.value};function z(ue){const Z=new or(y),ne=ET(ue.anchor,I),$e=ET(ue.origin,Z);let{x:Ae,y:ce}=dw(ne,$e);switch(ue.anchor.side){case"top":ce-=g.value[0];break;case"bottom":ce+=g.value[0];break;case"left":Ae-=g.value[0];break;case"right":Ae+=g.value[0];break}switch(ue.anchor.align){case"top":ce-=g.value[1];break;case"bottom":ce+=g.value[1];break;case"left":Ae-=g.value[1];break;case"right":Ae+=g.value[1];break}return Z.x+=Ae,Z.y+=ce,Z.width=Math.min(Z.width,$.value),Z.height=Math.min(Z.height,u.value),{overflows:U$(Z,N),x:Ae,y:ce}}let le=0,he=0;const Q={x:0,y:0},V={x:!1,y:!1};let de=-1;for(;;){if(de++>10){Hd("Infinite loop detected in connectedLocationStrategy");break}const{x:ue,y:Z,overflows:ne}=z(R);le+=ue,he+=Z,y.x+=ue,y.y+=Z;{const $e=G$(R.anchor),Ae=ne.x.before||ne.x.after,ce=ne.y.before||ne.y.after;let ke=!1;if(["x","y"].forEach(fe=>{if(fe==="x"&&Ae&&!V.x||fe==="y"&&ce&&!V.y){const et={anchor:{...R.anchor},origin:{...R.origin}},Se=fe==="x"?$e==="y"?ud:ad:$e==="y"?ad:ud;et.anchor=Se(et.anchor),et.origin=Se(et.origin);const{overflows:A}=z(et);(A[fe].before<=ne[fe].before&&A[fe].after<=ne[fe].after||A[fe].before+A[fe].after<(ne[fe].before+ne[fe].after)/2)&&(R=et,ke=V[fe]=!0)}}),ke)continue}ne.x.before&&(le+=ne.x.before,y.x+=ne.x.before),ne.x.after&&(le-=ne.x.after,y.x-=ne.x.after),ne.y.before&&(he+=ne.y.before,y.y+=ne.y.before),ne.y.after&&(he-=ne.y.after,y.y-=ne.y.after);{const $e=U$(y,N);Q.x=N.width-$e.x.before-$e.x.after,Q.y=N.height-$e.y.before-$e.y.after,le+=$e.x.before,y.x+=$e.x.before,he+=$e.y.before,y.y+=$e.y.before}break}const J=G$(R.anchor);Object.assign(i.value,{"--v-overlay-anchor-origin":`${R.anchor.side} ${R.anchor.align}`,transformOrigin:`${R.origin.side} ${R.origin.align}`,top:Ve(vT(he)),left:Ve(vT(le)),minWidth:Ve(J==="y"?Math.min(d.value,I.width):d.value),maxWidth:Ve(IT(Ea(Q.x,d.value===1/0?0:d.value,$.value))),maxHeight:Ve(IT(Ea(Q.y,_.value===1/0?0:_.value,u.value)))})}return nt(()=>[l.value,h.value,r.offset,r.minWidth,r.minHeight,r.maxWidth,r.maxHeight],()=>E(),{immediate:!c}),c&&fo(()=>E()),requestAnimationFrame(()=>{i.value.maxHeight&&E()}),{updateLocation:E}}function vT(s){return Math.round(s*devicePixelRatio)/devicePixelRatio}function IT(s){return Math.ceil(s*devicePixelRatio)/devicePixelRatio}let zd=!0;const Oa=[];function $w(s){!zd||Oa.length?(Oa.push(s),Kd()):(zd=!1,s(),Kd())}let yT=-1;function Kd(){cancelAnimationFrame(yT),yT=requestAnimationFrame(()=>{const s=Oa.shift();s&&s(),Oa.length?Kd():zd=!0})}const Jd={none:null,close:Ew,block:vw,reposition:Iw},Tw=rt({scrollStrategy:{type:[String,Function],default:"block",validator:s=>typeof s=="function"||s in Jd}},"v-overlay-scroll-strategies");function bw(s,r){if(!yt)return;let i;Qo(async()=>{var c;(c=i)==null||c.stop(),r.isActive.value&&s.scrollStrategy&&(i=Bl(),await fo(),i.run(()=>{if(typeof s.scrollStrategy=="function")s.scrollStrategy(r,s);else{var l;(l=Jd[s.scrollStrategy])==null||l.call(Jd,r,s)}}))})}function Ew(s){var i;function r(c){s.isActive.value=!1}BE((i=s.activatorEl.value)!=null?i:s.contentEl.value,r)}function vw(s,r){var i;const c=(i=s.root.value)==null?void 0:i.offsetParent,l=[...new Set([...Sa(s.activatorEl.value,r.contained?c:void 0),...Sa(s.contentEl.value,r.contained?c:void 0)])].filter(_=>!_.classList.contains("v-overlay-scroll-blocked")),h=window.innerWidth-document.documentElement.offsetWidth,d=(_=>kp(_)&&_)(c||document.documentElement);d&&s.root.value.classList.add("v-overlay--scroll-blocked"),l.forEach((_,$)=>{_.style.setProperty("--v-body-scroll-x",Ve(-_.scrollLeft)),_.style.setProperty("--v-body-scroll-y",Ve(-_.scrollTop)),_.style.setProperty("--v-scrollbar-offset",Ve(h)),_.classList.add("v-overlay-scroll-blocked")}),cn(()=>{l.forEach((_,$)=>{const u=parseFloat(_.style.getPropertyValue("--v-body-scroll-x")),g=parseFloat(_.style.getPropertyValue("--v-body-scroll-y"));_.style.removeProperty("--v-body-scroll-x"),_.style.removeProperty("--v-body-scroll-y"),_.style.removeProperty("--v-scrollbar-offset"),_.classList.remove("v-overlay-scroll-blocked"),_.scrollLeft=-u,_.scrollTop=-g}),d&&s.root.value.classList.remove("v-overlay--scroll-blocked")})}function Iw(s){var l;let r=!1,i=-1;function c(h){$w(()=>{var d,_;const $=performance.now();(d=(_=s.updateLocation).value)==null||d.call(_,h),r=(performance.now()-$)/(1e3/60)>2})}BE((l=s.activatorEl.value)!=null?l:s.contentEl.value,h=>{r?(cancelAnimationFrame(i),i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{c(h)})})):c(h)})}function BE(s,r){const i=[document,...Sa(s)];i.forEach(c=>{c.addEventListener("scroll",r,{passive:!0})}),cn(()=>{i.forEach(c=>{c.removeEventListener("scroll",r)})})}function yw(){var s,r,i;if(!yt)return we(!1);const c=us("useHydration"),l=c==null||(s=c.root)==null||(r=s.appContext)==null||(i=r.app)==null?void 0:i._container,h=we(!!(l!=null&&l.__vue_app__));return h.value||an(()=>h.value=!0),h}const ST=Symbol.for("vuetify:stack"),ml=as([]);function Sw(s,r){const i=us("useStack"),c=os(ST,void 0),l=as({activeChildren:new Set});Si(ST,l);const h=we(+r.value);wp(s,()=>{var $;const u=($=ml.at(-1))==null?void 0:$[1];h.value=u?u+10:+r.value,ml.push([i.uid,h.value]),c==null||c.activeChildren.add(i.uid),cn(()=>{const g=ml.findIndex(m=>m[0]===i.uid);ml.splice(g,1),c==null||c.activeChildren.delete(i.uid)})});const d=we(!0);Qo(()=>{var $;const u=(($=ml.at(-1))==null?void 0:$[0])===i.uid;setTimeout(()=>d.value=u)});const _=X(()=>!l.activeChildren.size);return{globalTop:Pl(d),localTop:_,stackStyles:X(()=>({zIndex:h.value}))}}function yl(s){return{teleportTarget:X(()=>{const i=s.value;if(i===!0||!yt)return;const c=i===!1?document.body:typeof i=="string"?document.querySelector(i):i;if(c!=null){if(!yl.cache.has(c)){const l=document.createElement("div");l.className="v-overlay-container",c.appendChild(l),yl.cache.set(c,l)}return yl.cache.get(c)}})}}yl.cache=new WeakMap;function Rw(){return!0}function PE(s,r,i){if(!s||FE(s,i)===!1)return!1;const c=Kb(r);if(typeof ShadowRoot<"u"&&c instanceof ShadowRoot&&c.host===s.target)return!1;const l=(typeof i.value=="object"&&i.value.include||(()=>[]))();return l.push(r),!l.some(h=>h==null?void 0:h.contains(s.target))}function FE(s,r){return(typeof r.value=="object"&&r.value.closeConditional||Rw)(s)}function Cw(s,r,i){const c=typeof i.value=="function"?i.value:i.value.handler;r._clickOutside.lastMousedownWasOutside&&PE(s,r,i)&&setTimeout(()=>{FE(s,i)&&c&&c(s)},0)}function RT(s,r){const i=Kb(s);r(document),typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&r(i)}const kw={mounted(s,r){const i=l=>Cw(l,s,r),c=l=>{s._clickOutside.lastMousedownWasOutside=PE(l,s,r)};RT(s,l=>{l.addEventListener("click",i,!0),l.addEventListener("mousedown",c,!0)}),s._clickOutside||(s._clickOutside={lastMousedownWasOutside:!0}),s._clickOutside[r.instance.$.uid]={onClick:i,onMousedown:c}},unmounted(s,r){!s._clickOutside||(RT(s,i=>{var c;if(!i||!((c=s._clickOutside)!=null&&c[r.instance.$.uid]))return;const{onClick:l,onMousedown:h}=s._clickOutside[r.instance.$.uid];i.removeEventListener("click",l,!0),i.removeEventListener("mousedown",h,!0)}),delete s._clickOutside[r.instance.$.uid])}};function Ow(s){const{modelValue:r,color:i,...c}=s;return M(un,{name:"fade-transition",appear:!0},{default:()=>[s.modelValue&&M("div",ss({class:["v-overlay__scrim",s.color.backgroundColorClasses.value],style:s.color.backgroundColorStyles.value},c),null)]})}const Up=rt({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[String,Boolean],default:!0},zIndex:{type:[Number,String],default:2e3},...aw(),...Xl(),...DE(),...pw(),...Tw(),...Ds(),...Fp()},"v-overlay"),Hp=Ci()({name:"VOverlay",directives:{ClickOutside:kw},inheritAttrs:!1,props:Up(),emits:{"click:outside":s=>!0,"update:modelValue":s=>!0,afterLeave:()=>!0},setup(s,r){let{slots:i,attrs:c,emit:l}=r;const h=dn(s,"modelValue"),d=X({get:()=>h.value,set:fe=>{fe&&s.disabled||(h.value=fe)}}),{teleportTarget:_}=yl(X(()=>s.attach||s.contained)),{themeClasses:$}=mo(s),{rtlClasses:u,isRtl:g}=pr(),{hasContent:m,onAfterLeave:b}=ME(s,d),E=rn(X(()=>typeof s.scrim=="string"?s.scrim:null)),{globalTop:I,localTop:y,stackStyles:F}=Sw(d,It(s,"zIndex")),{activatorEl:B,activatorRef:N,activatorEvents:R,contentEvents:z,scrimEvents:le}=uw(s,{isActive:d,isTop:y}),{dimensionStyles:he}=Yl(s),Q=yw();nt(()=>s.disabled,fe=>{fe&&(d.value=!1)});const V=we(),de=we(),{contentStyles:J,updateLocation:ue}=_w(s,{isRtl:g,contentEl:de,activatorEl:B,isActive:d});bw(s,{root:V,contentEl:de,activatorEl:B,isActive:d,updateLocation:ue});function Z(fe){l("click:outside",fe),s.persistent?ke():d.value=!1}function ne(){return d.value&&I.value}yt&&nt(d,fe=>{fe?window.addEventListener("keydown",$e):window.removeEventListener("keydown",$e)},{immediate:!0});function $e(fe){fe.key==="Escape"&&I.value&&(s.persistent?ke():d.value=!1)}const Ae=BO();wp(()=>s.closeOnBack,()=>{PO(Ae,fe=>{I.value&&d.value?(fe(!1),s.persistent?ke():d.value=!1):fe()})});const ce=we();nt(()=>d.value&&(s.absolute||s.contained)&&_.value==null,fe=>{if(fe){const et=Sk(V.value);et&&et!==document.scrollingElement&&(ce.value=et.scrollTop)}});function ke(){s.noClickAnimation||de.value&&Hb(de.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Jb})}return gt(()=>{var fe,et;return M(Xt,null,[(fe=i.activator)==null?void 0:fe.call(i,{isActive:d.value,props:ss({ref:N},od(R.value),s.activatorProps)}),Q.value&&M(dC,{disabled:!_.value,to:_.value},{default:()=>[m.value&&M("div",ss({class:["v-overlay",{"v-overlay--absolute":s.absolute||s.contained,"v-overlay--active":d.value,"v-overlay--contained":s.contained},$.value,u.value],style:[F.value,{top:Ve(ce.value)}],ref:V},c),[M(Ow,ss({color:E,modelValue:d.value&&!!s.scrim},od(le.value)),null),M(tn,{appear:!0,persisted:!0,transition:s.transition,target:B.value,onAfterLeave:()=>{b(),l("afterLeave")}},{default:()=>[Ii(M("div",ss({ref:de,class:["v-overlay__content",s.contentClass],style:[he.value,J.value]},od(z.value),s.contentProps),[(et=i.default)==null?void 0:et.call(i,{isActive:d})]),[[ja,d.value],[Fl("click-outside"),{handler:Z,closeConditional:ne,include:()=>[B.value]}]])]})])]})])}),{activatorEl:B,animateClick:ke,contentEl:de,globalTop:I,localTop:y,updateLocation:ue}}});function GE(s){return Sp(s,Object.keys(Hp.props))}function UE(){const r=us("useScopeId").vnode.scopeId;return{scopeId:r?{[r]:""}:void 0}}const Sd=Symbol("Forwarded refs");function HE(s){for(var r=arguments.length,i=new Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];return s[Sd]=i,new Proxy(s,{get(l,h){if(Reflect.has(l,h))return Reflect.get(l,h);for(const d of i)if(d.value&&Reflect.has(d.value,h)){const _=Reflect.get(d.value,h);return typeof _=="function"?_.bind(d.value):_}},getOwnPropertyDescriptor(l,h){const d=Reflect.getOwnPropertyDescriptor(l,h);if(d)return d;if(!(typeof h=="symbol"||h.startsWith("__"))){for(const _ of i){if(!_.value)continue;const $=Reflect.getOwnPropertyDescriptor(_.value,h);if($)return $;if("_"in _.value&&"setupState"in _.value._){const u=Reflect.getOwnPropertyDescriptor(_.value._.setupState,h);if(u)return u}}for(const _ of i){let $=_.value&&Object.getPrototypeOf(_.value);for(;$;){const u=Reflect.getOwnPropertyDescriptor($,h);if(u)return u;$=Object.getPrototypeOf($)}}for(const _ of i){const $=_.value&&_.value[Sd];if(!$)continue;const u=$.slice();for(;u.length;){const g=u.shift(),m=Reflect.getOwnPropertyDescriptor(g.value,h);if(m)return m;const b=g.value&&g.value[Sd];b&&u.push(...b)}}}}})}const wA=Ci()({name:"VTooltip",props:{id:String,text:String,...Fb(Up({closeOnBack:!1,location:"end",locationStrategy:"connected",minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent","eager"])},emits:{"update:modelValue":s=>!0},setup(s,r){let{slots:i}=r;const c=dn(s,"modelValue"),{scopeId:l}=UE(),h=Ya(),d=X(()=>s.id||`v-tooltip-${h}`),_=we(),$=X(()=>s.location.split(" ").length>1?s.location:s.location+" center"),u=X(()=>s.origin==="auto"||s.origin==="overlap"||s.origin.split(" ").length>1||s.location.split(" ").length>1?s.origin:s.origin+" center"),g=X(()=>s.transition?s.transition:c.value?"scale-transition":"fade-transition");return gt(()=>{const[m]=GE(s);return M(Hp,ss({ref:_,class:["v-tooltip"],id:d.value},m,{modelValue:c.value,"onUpdate:modelValue":b=>c.value=b,transition:g.value,absolute:!0,location:$.value,origin:u.value,persistent:!0,role:"tooltip",eager:!0,activatorProps:ss({"aria-describedby":d.value},s.activatorProps)},l),{activator:i.activator,default:function(){var F;for(var b,E=arguments.length,I=new Array(E),y=0;y<E;y++)I[y]=arguments[y];return(F=(b=i.default)==null?void 0:b.call(i,...I))!=null?F:s.text}})}),HE({},_)}});const ww=s=>{const{touchstartX:r,touchendX:i,touchstartY:c,touchendY:l}=s,h=.5,d=16;s.offsetX=i-r,s.offsetY=l-c,Math.abs(s.offsetY)<h*Math.abs(s.offsetX)&&(s.left&&i<r-d&&s.left(s),s.right&&i>r+d&&s.right(s)),Math.abs(s.offsetX)<h*Math.abs(s.offsetY)&&(s.up&&l<c-d&&s.up(s),s.down&&l>c+d&&s.down(s))};function Aw(s,r){var i;const c=s.changedTouches[0];r.touchstartX=c.clientX,r.touchstartY=c.clientY,(i=r.start)==null||i.call(r,{originalEvent:s,...r})}function Lw(s,r){var i;const c=s.changedTouches[0];r.touchendX=c.clientX,r.touchendY=c.clientY,(i=r.end)==null||i.call(r,{originalEvent:s,...r}),ww(r)}function Nw(s,r){var i;const c=s.changedTouches[0];r.touchmoveX=c.clientX,r.touchmoveY=c.clientY,(i=r.move)==null||i.call(r,{originalEvent:s,...r})}function Dw(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:s.left,right:s.right,up:s.up,down:s.down,start:s.start,move:s.move,end:s.end};return{touchstart:i=>Aw(i,r),touchend:i=>Lw(i,r),touchmove:i=>Nw(i,r)}}function Mw(s,r){var $,u;var i;const c=r.value,l=c!=null&&c.parent?s.parentElement:s,h=($=c==null?void 0:c.options)!=null?$:{passive:!0},d=(i=r.instance)==null?void 0:i.$.uid;if(!l||!d)return;const _=Dw(r.value);l._touchHandlers=(u=l._touchHandlers)!=null?u:Object.create(null),l._touchHandlers[d]=_,Pb(_).forEach(g=>{l.addEventListener(g,_[g],h)})}function xw(s,r){var i,c;const l=(i=r.value)!=null&&i.parent?s.parentElement:s,h=(c=r.instance)==null?void 0:c.$.uid;if(!(l!=null&&l._touchHandlers)||!h)return;const d=l._touchHandlers[h];Pb(d).forEach(_=>{l.removeEventListener(_,d[_])}),delete l._touchHandlers[h]}const VE={mounted:Mw,unmounted:xw},Bw=VE,WE=Symbol.for("vuetify:v-window"),jE=Symbol.for("vuetify:v-window-group"),AA=Ci()({name:"VWindow",directives:{Touch:VE},props:{continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:s=>typeof s=="boolean"||s==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...zt(),...Ds()},emits:{"update:modelValue":s=>!0},setup(s,r){let{slots:i}=r;const{themeClasses:c}=mo(s),{isRtl:l}=pr(),{t:h}=oE(),d=Bp(s,jE),_=we(),$=X(()=>l.value?!s.reverse:s.reverse),u=we(!1),g=X(()=>{const z=s.direction==="vertical"?"y":"x",he=($.value?!u.value:u.value)?"-reverse":"";return`v-window-${z}${he}-transition`}),m=we(0),b=we(void 0),E=X(()=>d.items.value.findIndex(z=>d.selected.value.includes(z.id)));nt(E,(z,le)=>{const he=d.items.value.length,Q=he-1;he<=2?u.value=z<le:z===Q&&le===0?u.value=!0:z===0&&le===Q?u.value=!1:u.value=z<le}),Si(WE,{transition:g,isReversed:u,transitionCount:m,transitionHeight:b,rootRef:_});const I=X(()=>s.continuous||E.value!==0),y=X(()=>s.continuous||E.value!==d.items.value.length-1);function F(){I.value&&d.prev()}function B(){y.value&&d.next()}const N=X(()=>{const z=[],le={icon:l.value?s.nextIcon:s.prevIcon,class:`v-window__${$.value?"right":"left"}`,onClick:d.prev,ariaLabel:h("$vuetify.carousel.prev")};z.push(I.value?i.prev?i.prev({props:le}):M(Yd,le,null):M("div",null,null));const he={icon:l.value?s.prevIcon:s.nextIcon,class:`v-window__${$.value?"left":"right"}`,onClick:d.next,ariaLabel:h("$vuetify.carousel.next")};return z.push(y.value?i.next?i.next({props:he}):M(Yd,he,null):M("div",null,null)),z}),R=X(()=>s.touch===!1?s.touch:{...{left:()=>{$.value?F():B()},right:()=>{$.value?B():F()},start:le=>{let{originalEvent:he}=le;he.stopPropagation()}},...s.touch===!0?{}:s.touch});return gt(()=>{var z,le;return Ii(M(s.tag,{ref:_,class:["v-window",{"v-window--show-arrows-on-hover":s.showArrows==="hover"},c.value]},{default:()=>[M("div",{class:"v-window__container",style:{height:b.value}},[(z=i.default)==null?void 0:z.call(i,{group:d}),s.showArrows!==!1&&M("div",{class:"v-window__controls"},[N.value])]),(le=i.additional)==null?void 0:le.call(i,{group:d})]}),[[Fl("touch"),R.value]])}),{group:d}}});function Pw(){const s=we(!1);return an(()=>{window.requestAnimationFrame(()=>{s.value=!0})}),{ssrBootStyles:X(()=>s.value?void 0:{transition:"none !important"}),isBooted:Pl(s)}}const LA=lt({name:"VWindowItem",directives:{Touch:Bw},props:{reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...xp(),...DE()},emits:{"group:selected":s=>!0},setup(s,r){let{slots:i}=r;const c=os(WE),l=_E(s,jE),{isBooted:h}=Pw();if(!c||!l)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const d=we(!1),_=X(()=>c.isReversed.value?s.reverseTransition!==!1:s.transition!==!1);function $(){!d.value||!c||(d.value=!1,c.transitionCount.value>0&&(c.transitionCount.value-=1,c.transitionCount.value===0&&(c.transitionHeight.value=void 0)))}function u(){if(!(d.value||!c)){if(d.value=!0,c.transitionCount.value===0){var I;c.transitionHeight.value=Ve((I=c.rootRef.value)==null?void 0:I.clientHeight)}c.transitionCount.value+=1}}function g(){$()}function m(I){!d.value||fo(()=>{!_.value||!d.value||!c||(c.transitionHeight.value=Ve(I.clientHeight))})}const b=X(()=>{const I=c.isReversed.value?s.reverseTransition:s.transition;return _.value?{name:typeof I!="string"?c.transition.value:I,onBeforeEnter:u,onAfterEnter:$,onEnterCancelled:g,onBeforeLeave:u,onAfterLeave:$,onLeaveCancelled:g,onEnter:m}:!1}),{hasContent:E}=ME(s,l.isSelected);return gt(()=>{var I;return M(tn,{transition:h.value&&b.value},{default:()=>[Ii(M("div",{class:["v-window-item",l.selectedClass.value]},[E.value&&((I=i.default)==null?void 0:I.call(i))]),[[ja,l.isSelected.value]])]})}),{}}}),Fw=(s,r)=>{const i=s.__vccOpts||s;for(const[c,l]of r)i[c]=l;return i},dt={quote:/("(?:\\"|[^"])*")|('(?:\\'|[^'])*')/,comment:/(\/\/.*?(?:\n|$)|\/\*.*?\*\/)/,htmlTag:/(<([^>])*>)/,htmlentity:/(&amp;[a-zA-Z0-9#]+;)/,punctuation:/(!==?|(?:[[\](){}.:;,+\-?=!]|&lt;|&gt;)+|&&|\|\|)/,number:/(-?(?:\.\d+|\d+(?:\.\d+)?))/,boolean:/\b(true|false)\b/},Rd={shell:{quote:dt.quote,comment:/(#.*?)(?:\n|$)/,keyword:/(?:^|\b)(npm|yarn|install|run)(?:\b|$)/,param:/( --(?:save|save-dev))(?:\s|$)/},xml:{doctype:/(&lt;\!DOCTYPE.*?&gt;)/,quote:dt.quote,comment:/(&lt;!--.*?--&gt;)/,htmlentity:dt.htmlentity,tag:/(&lt;\/?)([a-zA-Z\-:]+)(.*?)(\/?&gt;)/},html:{doctype:/(DOCTYPE)/,quote:dt.quote,comment:/(&lt;!--.*?--&gt;)/,htmlentity:dt.htmlentity,tag:/(&lt;\/?)([a-z]\w*)(.*?)(\/?&gt;)/},"html-vue":{doctype:/(DOCTYPE)/,quote:dt.quote,comment:/(&lt;!--.*?--&gt;)/,htmlentity:dt.htmlentity,tag:/(&lt;\/?)([a-zA-Z][\w\d-]*)((?:.|\s)*?)(\/?&gt;)/},pug:{text:/((?:^|\n)[ \t]*|^)\|([ \t]*)([^\n]+(?=\s*(?:\n|$)))/,text2:/([ \t]*)([.#\-\w\d]+(?:\([^)]*\))*)\.\n((?:\n+(?=\4[ \t]+)|(?=\4[ \t]+).+?(?:\n|$)*?)*)(?=\s*(?:\n|$))/,quote:dt.quote,comment:/(^|\n)([ \t]*|^)(\/\/-[ \t]*(?:[^\n]*?(?:\n\10[ \t]+[^\n]*)+|[^\n]+(?=\n|$)))/,tag:/([a-zA-Z][\w\d-]*|)([.#][a-zA-Z][-.\w\d]*|)\b(?:\((.*?)\))?(\.?)([ \t]*)([^\n]+)?(?=\n|$)/,punctuation:/(!==?|(?:[#[\]().,+\-?=!|]|&lt;|&gt;)+)/},css:{quote:dt.quote,comment:/(\/\*.*?\*\/)/,pseudo:/(:(?:hover|active|focus|visited|not|before|after|(?:first|last|nth)-child))/,"selector keyword vendor":/(@-(?:moz|o|webkit|ms)-(?=keyframes\s))/,"selector keyword":/((?:@(?:import|media|font-face|keyframes)|screen|print|and)(?=[\s({])|keyframes|\s(?:ul|ol|li|table|div|pre|p|a|img|br|hr|h[1-6]|em|strong|span|html|body|iframe|video|audio|input|button|form|label|fieldset|small|abbr|i|dd|dt)\b)(?=.*\{})/,variable:/(--[a-zA-Z0-9\-]+)/,selector:/((?:[.#-\w*+ >:,[\]="~\n]|&gt;)+)(?=\s*\{)/,"attribute keyword vendor":/(-(?:moz|o|webkit|ms)-(?=transform|transition|user-select|tap-highlight-color|animation|background-size|box-shadow))/,"attribute keyword":/\b(content|float|display|position|top|left|right|bottom|(?:(?:max|min)-)?width|(?:(?:max|min|line)-)?height|font(?:-(?:family|style|size|weight|variant|stretch))?|vertical-align|color|opacity|visibility|z-index|pointer-events|user-select|transform(?:-(?:origin|style|delay|duration|property|timing-function))?|transition(?:-(?:delay|duration))?|animation(?:-(?:name|delay|duration|direction|fill-mode))?|backface-visibility|backdrop-filter|background(?:-(?:color|position|image|repeat|size|attachment|origin|clip|blend-mode))?|(?:padding|margin|border)(?:-(?:top|left|right|bottom))?|border(?:-(?:radius|color|width|style|spacing))|white-space|text-(?:align|transform|decoration|shadow|indent)|overflow(?:-(?:x|y))?|(?:letter|word)-spacing|word-break|box-(?:sizing|shadow)|stroke(?:-(?:width|opacity|dasharray|dashoffset|linecap|linejoin))?|fill|speak|outline|user-select|cursor|flex(?:-(?:direction|flow|grow|shrink|basis|wrap))?|(?:justify|align)-(?:content|self|items))(?=\s*:)/,"value keyword vendor":/(-(?:moz|o|webkit|ms)-(?=linear-gradient))/,"value keyword":/\b(inherit|initial|normal|none|unset|auto|inline(?:-(?:block|flex))?|block|flex|absolute|relative|static|fixed|sticky|hidden|visible|top|left|right|bottom|center|middle|baseline|solid|dotted|dashed|line-through|(?:over|under)line|wavy|double|(?:pre-|no)?wrap|pre|break-word|(?:upper|lower)case|capitalize|italic|bold|attr\(.*?\)|linear|ease(?:-in)?(?:-out)?|all|infinite|cubic-bezier|(?:translate|rotate)(?:[X-Z]|3d)?|skew[XY]?|scale|(?:no-)?repeat|repeat(?:-x|-y)|contain|cover|url|(?:repeating-)?(?:linear|radial)-gradient|inset|pointer|(?:flex-)?(?:start|end)|space-(?:between|evenly|around)|stretch|revert|row(?:-reverse)?|column(?:-reverse)?)(?=\s*[,;}(]|\s+[\da-z!])/,"value keyword important":/( ?!important)/,number:dt.number,color:/(transparent|#(?:[\da-fA-F]{6}|[\da-fA-F]{3})|rgba?\([\d., ]*\))/,htmlentity:/(&.*?;)/,punctuation:/([:,;{}@#()!]+|&lt;|&gt;)/,attribute:/([a-zA-Z-]+)(?=\s*:)/,unit:/(px|pt|cm|%|r?em|m?s|deg|vh|vw|vmin|vmax)(?=(?:\s*[;,{}})]|\s+[-\da-z#]))/},json:{quote:dt.quote,comment:dt.comment,number:dt.number,boolean:dt.boolean,punctuation:/([[\](){}:;,-]+)/},js:{quote:dt.quote,comment:dt.comment,number:/\b(\d+(?:\.\d+)?|null)\b/,boolean:dt.boolean,this:/\b(this)(?=\W)/,keyword:/\b(new|getElementsBy(?:Tag|Class|)Name|getElementById|querySelector|querySelectorAll|arguments|if|else|do|return|case|default|(?:f|F)unction|typeof|instanceof|undefined|document|window|while|for|forEach|switch|in|break|continue|delete|length|var|let|const|export|import|as|require|from|Class|constructor|Number|Boolean|String|Array|Object|RegExp|Integer|Date|Promise|async|await|(?:clear|set)(?:Timeout|Interval)|parse(?:Int|Float)|Math(?=\.)|isNaN)(?=\W)/,punctuation:/(!==?|(?:[[\]!(){}:;,+\-%*/?=]|&lt;|&gt;)+|\.+(?![a-zA-Z])|&amp;&amp;|\|\|)/,variable:/(\.?[a-zA-Z_][\w\d]*)/,htmlentity:/(&.*?;)/,"external-var":/(\$|jQuery|JSON)(?=\W|$)/},php:{quote:dt.quote,comment:dt.comment,special:/(&lt;\?php|\?&gt;|__(?:DIR|FILE|LINE)__)/,punctuation:dt.punctuation,number:dt.number,boolean:dt.boolean,variable:/(\$[\w\d_]+)/,keyword:/\b(define|echo|die|exit|print_r|var_dump|if|else|elseif|do|return|case|default|function|\$this|while|foreach|for|switch|in|break|continue|empty|isset|unset|parse_ini_file|session_(?:start|destroy|id)|header|json_(?:encode|decode)|error_log|(require|include)(:?_once)?|try|throw|new|Exception|catch|finally|preg_(?:match|replace)|list|strlen|substr|str_replace|array_(?:keys|values))(?=\W|$)/},sql:{quote:dt.quote,comment:/((?:\-\-|#)\s.*?(?:\n|$)|\/\*.*?\*\/)/,punctuation:dt.punctuation,number:/\b(\d+(?:\.\d+)?|null)\b/,boolean:dt.boolean,keyword:/\b(\*|CREATE|DATABASE|TABLE|GRANT|ALL|PRIVILEGES|IDENTIFIED|FLUSH|ALTER|MODIFY|DROP|TRUNCATE|CONSTRAINT|ADD|(?:(?:PRIMARY|FOREIGN|UNIQUE) )?KEY|REFERENCES|AUTO_INCREMENT|COMMENT|DEFAULT|UNSIGNED|CHARSET|COLLATE|CHARACTER|ENGINE|SQL_MODE|USE|IF|NOT|NULL|EXISTS|SELECT|UPDATE|DELETE|INSERT(?: INTO)?|VALUES|SET|FROM|WHERE|(?:ORDER|GROUP) BY|LIMIT|(?:(?:LEFT|RIGHT|INNER|OUTER) |)JOIN|AS|ON|COUNT|CASE|TO|WHEN|BETWEEN|AND|OR|IN|LIKE|CONCAT|CURRENT_TIMESTAMP)(?=\W|$)/,"var-type":/\b((?:var)?char|(?:tiny|small|medium|big)?int|decimal|float|double|real|bit|boolean|date(?:time)?|time(?:stamp)?|year|(?:tiny|medium|long)?(?:text|blob)|enum)\b/}},Gw={xml:/(\s*)([a-zA-Z\d\-:]+)=("|')(.*?)\3/g,html:/(\s*)([a-zA-Z-]+)=("|')(.*?)\3/g,"html-vue":/(\s*)([@:#]?[a-zA-Z\d-]+)(?:(?:=("|')(.*?)\3)|)/g,pug:/(\s*|,)([@:#]?[a-zA-Z\d-]+)(?:(?:=("|')(.*?)\3)|)/g},Uw={shell:{quote:2},xml:{quote:2,tag:4},html:{quote:2,tag:4},"html-vue":{quote:2,tag:4},pug:{text:3,text2:3,quote:2,comment:3,tag:6},json:{quote:2},php:{quote:2},sql:{quote:2},css:{quote:2},js:{quote:2}},qd=s=>s.map(r=>{if(!r.children||typeof r.children=="string")return r.children||"";if(Array.isArray(r.children))return qd(r.children);if(r.children.default)return qd(r.children.default())}).join(""),Hw={name:"sshpre",props:{language:{type:String,default:""},label:{type:[String,Boolean],default:!1},reactive:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},copyButton:{type:Boolean,default:!1}},data:()=>({knownLanguages:Object.keys(Rd),content:"",slotTexts:""}),methods:{htmlize(s){return s.replace(/&(lt|gt|amp);/g,(r,i)=>({lt:"<",gt:">",amp:"&"})[i])},unhtmlize(s){return s.replace(/[<>]/g,r=>({"<":"&lt;",">":"&gt;"})[r])},isColorDark(s){let r,i,c,l,h,d;if(r=s.match(/rgba?\((.*),\s*(.*),\s*(.*?)(?:,\s*([^)]*))\)/))c=parseInt(r[1])<=100,l=parseInt(r[2])<=100,h=parseInt(r[3])<=100,d=parseFloat(r[4])<.3;else if(i=s.match(/#([\da-f]{3}(?:[\da-f]{3})?)/)){const _=i[1].length===3;c=parseInt(i[1][0])<=9,l=parseInt(i[1][_?1:2])<=9,h=parseInt(i[1][_?2:4])<=9}return(c&&l&&h||c&&l&&!h||!c&&l&&h)&&!d},createRegexPattern(){let s="";const r=[];for(const i in Rd[this.language]){const c=Uw[this.language][i]||1;for(let l=0;l<c;l++)r.push(i);s+=(s?"|":"")+Rd[this.language][i].source}return[s,r]},syntaxHighlightHtmlTag(s){const r=(c,l,h,d,_)=>`${l}<span class="attribute">${h}</span>`+(_?'<span class="punctuation">=</span>':"")+(_?`<span class="quote">${d||""}${_||""}${d||""}</span>`:"");let i=(s[2]||"").replace(Gw[this.language],r);if(this.language==="pug"){const c=(s[1]||"").replace(/#[a-z\d-]+/g,l=>`<span class="id">${l}</span>`).replace(/\.[a-z\d-]+/g,l=>`<span class="class">${l}</span>`);return i&&(i='<span class="punctuation">(</span>'+i+'<span class="punctuation">)</span>'),`<span class="tag-name">${s[0]||""}</span>${c}${i}`+(s[3]?'<span class="punctuation">.</span>':"")+(s[4]||"")+(s[5]?`<span class="text">${s[5]}</span>`:"")}return`<span class="punctuation">${s[0]}</span><span class="tag-name">${s[1]}</span>`+i+`<span class="punctuation">${s[3]}</span>`},syntaxHighlightContent(s){if(!this.knownLanguages.includes(this.language))return s;const[r,i]=this.createRegexPattern();return this.unhtmlize(s).replace(new RegExp(r,"gs"),(c,...l)=>{l=l.slice(0,l.length-2);let h;const d=this.language==="pug";let _=l.find((u,g)=>u&&(h=i[g])&&u);if(h==="quote")_=this.unhtmlize(_);else if(h==="comment")if(d){const[u,g,m]=l.slice(i.indexOf("comment"));_=`${u}${g}${this.unhtmlize(m)}`}else _=this.unhtmlize(_);else{if(h==="text"&&d)return`${l[0]}<span class="punctuation">|</span>${l[1]}<span class="text">${l[2]}</span>`;if(h==="text2"&&d){const[,,,u,g,m]=l,b=this.syntaxHighlightContent(g);return`${u}${b}<span class="punctuation">.</span>
<span class="text">${m}</span>`}else{if(h==="tag"&&["xml","html","html-vue","pug"].includes(this.language))return this.syntaxHighlightHtmlTag(l.slice(i.indexOf("tag")));if(h==="variable"&&_[0]==="."&&this.language==="js")return`<span class="punctuation">.</span><span class="obj-attr">${_.substr(1)}</span>`}}let $="";return h==="color"&&this.language==="css"&&($=` style="background-color: ${_};color: #${this.isColorDark(_)?"fff":"000"}"`),h&&`<span class="${h}"${$}>${_}</span>`||""})},checkSlots(){const s=this.$slots.default&&qd(this.$slots.default())||"";this.slotTexts!==s&&(this.slotTexts=s,this.content=this.syntaxHighlightContent(this.slotTexts))},copyCode(s){s.target.insertAdjacentHTML("afterend",`<textarea id="clipboard-textarea">${this.$refs.code.innerText}</textarea>`);const r=document.getElementById("clipboard-textarea");r.select(),r.setSelectionRange(0,99999),document.execCommand("copy"),r.remove(),this.$emit("copied",this.$refs.code.innerText)}},mounted(){this.checkSlots()}},Vw=["data-type","data-label","reactive"],Ww=["innerHTML"];function jw(s,r,i,c,l,h){return Ta(),b$("div",{class:Aa(["ssh-pre",{"ssh-pre--dark":i.dark}]),"data-type":i.language,"data-label":i.label||null,reactive:i.reactive&&h.checkSlots()||null},[i.copyButton?(Ta(),b$("button",{key:0,class:"ssh-pre__copy",onClick:r[0]||(r[0]=(...d)=>h.copyCode&&h.copyCode(...d))},[XR(s.$slots,"copy-button",{},()=>[Pd("Copy")])])):fC("",!0),Pd(),Ip("pre",{ref:"code",class:"ssh-pre__content",innerHTML:s.content},null,8,Ww)],10,Vw)}const NA=Fw(Hw,[["render",jw]]);const DA=lt({name:"VApp",props:{...iO({fullHeight:!0}),...Ds()},setup(s,r){let{slots:i}=r;const c=mo(s),{layoutClasses:l,layoutStyles:h,getLayoutItem:d,items:_,layoutRef:$}=rO(s),{rtlClasses:u}=pr();return gt(()=>{var g;return M("div",{ref:$,class:["v-application",c.themeClasses.value,l.value,u.value],style:h.value},[M("div",{class:"v-application__wrap"},[(g=i.default)==null?void 0:g.call(i)])])}),{getLayoutItem:d,items:_,theme:c}}});const MA=lt({name:"VBadge",inheritAttrs:!1,props:{bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Es,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...zl({location:"top end"}),...ti(),...zt(),...Ds(),...Fp({transition:"scale-rotate-transition"})},setup(s,r){const{backgroundColorClasses:i,backgroundColorStyles:c}=rn(It(s,"color")),{roundedClasses:l}=si(s),{t:h}=oE(),{textColorClasses:d,textColorStyles:_}=lr(It(s,"textColor")),{themeClasses:$}=tO(),{locationStyles:u}=Kl(s,!0,g=>{var b,E;return(s.floating?s.dot?2:4:s.dot?8:12)+(["top","bottom"].includes(g)?+((b=s.offsetY)!=null?b:0):["left","right"].includes(g)?+((E=s.offsetX)!=null?E:0):0)});return gt(()=>{var g,m,b,E;const I=Number(s.content),y=!s.max||isNaN(I)?s.content:I<=s.max?I:`${s.max}+`,[F,B]=Sp(r.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return M(s.tag,ss({class:["v-badge",{"v-badge--bordered":s.bordered,"v-badge--dot":s.dot,"v-badge--floating":s.floating,"v-badge--inline":s.inline}]},B),{default:()=>[M("div",{class:"v-badge__wrapper"},[(g=(m=r.slots).default)==null?void 0:g.call(m),M(tn,{transition:s.transition},{default:()=>[Ii(M("span",ss({class:["v-badge__badge",$.value,i.value,l.value,d.value],style:[c.value,_.value,s.inline?{}:u.value],"aria-atomic":"true","aria-label":h(s.label,I),"aria-live":"polite",role:"status"},F),[s.dot?void 0:r.slots.badge?(b=(E=r.slots).badge)==null?void 0:b.call(E):s.icon?M(nn,{icon:s.icon},null):y]),[[ja,s.modelValue]])]})])]})}),{}}});const xA=lt({name:"VSheet",props:{color:String,...Gl(),...Xl(),...Vl(),...zl(),...eu(),...ti(),...zt(),...Ds()},setup(s,r){let{slots:i}=r;const{themeClasses:c}=mo(s),{backgroundColorClasses:l,backgroundColorStyles:h}=rn(It(s,"color")),{borderClasses:d}=Ul(s),{dimensionStyles:_}=Yl(s),{elevationClasses:$}=Wl(s),{locationStyles:u}=Kl(s),{positionClasses:g}=tu(s),{roundedClasses:m}=si(s);return()=>M(s.tag,{class:["v-sheet",c.value,l.value,d.value,$.value,g.value,m.value],style:[h.value,_.value,u.value]},i)}});const BA=Ci()({name:"VSnackbar",props:{multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...zl({location:"bottom"}),...eu(),...ti(),...jl(),...Fb(Up({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},emits:{"update:modelValue":s=>!0},setup(s,r){let{slots:i}=r;const c=dn(s,"modelValue"),{locationStyles:l}=Kl(s),{positionClasses:h}=tu(s),{scopeId:d}=UE(),{colorClasses:_,colorStyles:$,variantClasses:u}=Qa(s),{roundedClasses:g}=si(s),m=we();nt(c,E),nt(()=>s.timeout,E),an(()=>{c.value&&E()});let b=-1;function E(){window.clearTimeout(b);const y=Number(s.timeout);!c.value||y===-1||(b=window.setTimeout(()=>{c.value=!1},y))}function I(){window.clearTimeout(b)}return gt(()=>{const[y]=GE(s);return M(Hp,ss({ref:m,class:["v-snackbar",{"v-snackbar--active":c.value,"v-snackbar--multi-line":s.multiLine&&!s.vertical,"v-snackbar--vertical":s.vertical},h.value]},y,{modelValue:c.value,"onUpdate:modelValue":F=>c.value=F,contentProps:ss({style:l.value},y.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none"},d),{default:()=>[M("div",{class:["v-snackbar__wrapper",_.value,g.value,u.value],style:[$.value],onPointerenter:I,onPointerleave:E},[Za(!1,"v-snackbar"),i.default&&M("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[i.default()]),i.actions&&M(Ei,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[M("div",{class:"v-snackbar__actions"},[i.actions()])]})])],activator:i.activator})}),HE({},m)}}),PA={collapse:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",complete:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",cancel:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",close:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",delete:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",clear:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",success:"M12,2C17.52,2 22,6.48 22,12C22,17.52 17.52,22 12,22C6.48,22 2,17.52 2,12C2,6.48 6.48,2 12,2M11,16.5L18,9.5L16.59,8.09L11,13.67L7.91,10.59L6.5,12L11,16.5Z",info:"M13,9H11V7H13M13,17H11V11H13M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",warning:"M11,4.5H13V15.5H11V4.5M13,17.5V19.5H11V17.5H13Z",error:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z",prev:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",next:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",checkboxOn:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z",checkboxOff:"M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z",checkboxIndeterminate:"M17,13H7V11H17M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z",delimiter:"M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",sort:"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",expand:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",menu:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",subgroup:"M7,10L12,15L17,10H7Z",dropdown:"M7,10L12,15L17,10H7Z",radioOn:"M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,7C9.24,7 7,9.24 7,12C7,14.76 9.24,17 12,17C14.76,17 17,14.76 17,12C17,9.24 14.76,7 12,7Z",radioOff:"M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",edit:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",ratingEmpty:"M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z",ratingFull:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",ratingHalf:"M12,15.4V6.1L13.71,10.13L18.09,10.5L14.77,13.39L15.76,17.67M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z",loading:"M19,8L15,12H18C18,15.31 15.31,18 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20C16.42,20 20,16.42 20,12H23M6,12C6,8.69 8.69,6 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4C7.58,4 4,7.58 4,12H1L5,16L9,12",first:"M18.41,16.59L13.82,12L18.41,7.41L17,6L11,12L17,18L18.41,16.59M6,6H8V18H6V6Z",last:"M5.59,7.41L10.18,12L5.59,16.59L7,18L13,12L7,6L5.59,7.41M16,6H18V18H16V6Z",unfold:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z",file:"M16.5,6V17.5C16.5,19.71 14.71,21.5 12.5,21.5C10.29,21.5 8.5,19.71 8.5,17.5V5C8.5,3.62 9.62,2.5 11,2.5C12.38,2.5 13.5,3.62 13.5,5V15.5C13.5,16.05 13.05,16.5 12.5,16.5C11.95,16.5 11.5,16.05 11.5,15.5V6H10V15.5C10,16.88 11.12,18 12.5,18C13.88,18 15,16.88 15,15.5V5C15,2.79 13.21,1 11,1C8.79,1 7,2.79 7,5V17.5C7,20.54 9.46,23 12.5,23C15.54,23 18,20.54 18,17.5V6H16.5Z",plus:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",minus:"M19,13H5V11H19V13Z"},FA={component:Zb};/*!
 * perfect-scrollbar v1.5.3
 * Copyright 2021 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function Lo(s){return getComputedStyle(s)}function bs(s,r){for(var i in r){var c=r[i];typeof c=="number"&&(c=c+"px"),s.style[i]=c}return s}function aa(s){var r=document.createElement("div");return r.className=s,r}var CT=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function $i(s,r){if(!CT)throw new Error("No element matching method supported");return CT.call(s,r)}function qn(s){s.remove?s.remove():s.parentNode&&s.parentNode.removeChild(s)}function kT(s,r){return Array.prototype.filter.call(s.children,function(i){return $i(i,r)})}var Dt={main:"ps",rtl:"ps__rtl",element:{thumb:function(s){return"ps__thumb-"+s},rail:function(s){return"ps__rail-"+s},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(s){return"ps--active-"+s},scrolling:function(s){return"ps--scrolling-"+s}}},XE={x:null,y:null};function YE(s,r){var i=s.element.classList,c=Dt.state.scrolling(r);i.contains(c)?clearTimeout(XE[r]):i.add(c)}function zE(s,r){XE[r]=setTimeout(function(){return s.isAlive&&s.element.classList.remove(Dt.state.scrolling(r))},s.settings.scrollingThreshold)}function Xw(s,r){YE(s,r),zE(s,r)}var Jl=function(r){this.element=r,this.handlers={}},KE={isEmpty:{configurable:!0}};Jl.prototype.bind=function(r,i){typeof this.handlers[r]>"u"&&(this.handlers[r]=[]),this.handlers[r].push(i),this.element.addEventListener(r,i,!1)};Jl.prototype.unbind=function(r,i){var c=this;this.handlers[r]=this.handlers[r].filter(function(l){return i&&l!==i?!0:(c.element.removeEventListener(r,l,!1),!1)})};Jl.prototype.unbindAll=function(){for(var r in this.handlers)this.unbind(r)};KE.isEmpty.get=function(){var s=this;return Object.keys(this.handlers).every(function(r){return s.handlers[r].length===0})};Object.defineProperties(Jl.prototype,KE);var gr=function(){this.eventElements=[]};gr.prototype.eventElement=function(r){var i=this.eventElements.filter(function(c){return c.element===r})[0];return i||(i=new Jl(r),this.eventElements.push(i)),i};gr.prototype.bind=function(r,i,c){this.eventElement(r).bind(i,c)};gr.prototype.unbind=function(r,i,c){var l=this.eventElement(r);l.unbind(i,c),l.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(l),1)};gr.prototype.unbindAll=function(){this.eventElements.forEach(function(r){return r.unbindAll()}),this.eventElements=[]};gr.prototype.once=function(r,i,c){var l=this.eventElement(r),h=function(d){l.unbind(i,h),c(d)};l.bind(i,h)};function ua(s){if(typeof window.CustomEvent=="function")return new CustomEvent(s);var r=document.createEvent("CustomEvent");return r.initCustomEvent(s,!1,!1,void 0),r}function wa(s,r,i,c,l){c===void 0&&(c=!0),l===void 0&&(l=!1);var h;if(r==="top")h=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(r==="left")h=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");Yw(s,i,h,c,l)}function Yw(s,r,i,c,l){var h=i[0],d=i[1],_=i[2],$=i[3],u=i[4],g=i[5];c===void 0&&(c=!0),l===void 0&&(l=!1);var m=s.element;s.reach[$]=null,m[_]<1&&(s.reach[$]="start"),m[_]>s[h]-s[d]-1&&(s.reach[$]="end"),r&&(m.dispatchEvent(ua("ps-scroll-"+$)),r<0?m.dispatchEvent(ua("ps-scroll-"+u)):r>0&&m.dispatchEvent(ua("ps-scroll-"+g)),c&&Xw(s,$)),s.reach[$]&&(r||l)&&m.dispatchEvent(ua("ps-"+$+"-reach-"+s.reach[$]))}function bt(s){return parseInt(s,10)||0}function zw(s){return $i(s,"input,[contenteditable]")||$i(s,"select,[contenteditable]")||$i(s,"textarea,[contenteditable]")||$i(s,"button,[contenteditable]")}function Kw(s){var r=Lo(s);return bt(r.width)+bt(r.paddingLeft)+bt(r.paddingRight)+bt(r.borderLeftWidth)+bt(r.borderRightWidth)}var Jn={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function Zo(s){var r=s.element,i=Math.floor(r.scrollTop),c=r.getBoundingClientRect();s.containerWidth=Math.round(c.width),s.containerHeight=Math.round(c.height),s.contentWidth=r.scrollWidth,s.contentHeight=r.scrollHeight,r.contains(s.scrollbarXRail)||(kT(r,Dt.element.rail("x")).forEach(function(l){return qn(l)}),r.appendChild(s.scrollbarXRail)),r.contains(s.scrollbarYRail)||(kT(r,Dt.element.rail("y")).forEach(function(l){return qn(l)}),r.appendChild(s.scrollbarYRail)),!s.settings.suppressScrollX&&s.containerWidth+s.settings.scrollXMarginOffset<s.contentWidth?(s.scrollbarXActive=!0,s.railXWidth=s.containerWidth-s.railXMarginWidth,s.railXRatio=s.containerWidth/s.railXWidth,s.scrollbarXWidth=OT(s,bt(s.railXWidth*s.containerWidth/s.contentWidth)),s.scrollbarXLeft=bt((s.negativeScrollAdjustment+r.scrollLeft)*(s.railXWidth-s.scrollbarXWidth)/(s.contentWidth-s.containerWidth))):s.scrollbarXActive=!1,!s.settings.suppressScrollY&&s.containerHeight+s.settings.scrollYMarginOffset<s.contentHeight?(s.scrollbarYActive=!0,s.railYHeight=s.containerHeight-s.railYMarginHeight,s.railYRatio=s.containerHeight/s.railYHeight,s.scrollbarYHeight=OT(s,bt(s.railYHeight*s.containerHeight/s.contentHeight)),s.scrollbarYTop=bt(i*(s.railYHeight-s.scrollbarYHeight)/(s.contentHeight-s.containerHeight))):s.scrollbarYActive=!1,s.scrollbarXLeft>=s.railXWidth-s.scrollbarXWidth&&(s.scrollbarXLeft=s.railXWidth-s.scrollbarXWidth),s.scrollbarYTop>=s.railYHeight-s.scrollbarYHeight&&(s.scrollbarYTop=s.railYHeight-s.scrollbarYHeight),Jw(r,s),s.scrollbarXActive?r.classList.add(Dt.state.active("x")):(r.classList.remove(Dt.state.active("x")),s.scrollbarXWidth=0,s.scrollbarXLeft=0,r.scrollLeft=s.isRtl===!0?s.contentWidth:0),s.scrollbarYActive?r.classList.add(Dt.state.active("y")):(r.classList.remove(Dt.state.active("y")),s.scrollbarYHeight=0,s.scrollbarYTop=0,r.scrollTop=0)}function OT(s,r){return s.settings.minScrollbarLength&&(r=Math.max(r,s.settings.minScrollbarLength)),s.settings.maxScrollbarLength&&(r=Math.min(r,s.settings.maxScrollbarLength)),r}function Jw(s,r){var i={width:r.railXWidth},c=Math.floor(s.scrollTop);r.isRtl?i.left=r.negativeScrollAdjustment+s.scrollLeft+r.containerWidth-r.contentWidth:i.left=s.scrollLeft,r.isScrollbarXUsingBottom?i.bottom=r.scrollbarXBottom-c:i.top=r.scrollbarXTop+c,bs(r.scrollbarXRail,i);var l={top:c,height:r.railYHeight};r.isScrollbarYUsingRight?r.isRtl?l.right=r.contentWidth-(r.negativeScrollAdjustment+s.scrollLeft)-r.scrollbarYRight-r.scrollbarYOuterWidth-9:l.right=r.scrollbarYRight-s.scrollLeft:r.isRtl?l.left=r.negativeScrollAdjustment+s.scrollLeft+r.containerWidth*2-r.contentWidth-r.scrollbarYLeft-r.scrollbarYOuterWidth:l.left=r.scrollbarYLeft+s.scrollLeft,bs(r.scrollbarYRail,l),bs(r.scrollbarX,{left:r.scrollbarXLeft,width:r.scrollbarXWidth-r.railBorderXWidth}),bs(r.scrollbarY,{top:r.scrollbarYTop,height:r.scrollbarYHeight-r.railBorderYWidth})}function qw(s){s.element,s.event.bind(s.scrollbarY,"mousedown",function(r){return r.stopPropagation()}),s.event.bind(s.scrollbarYRail,"mousedown",function(r){var i=r.pageY-window.pageYOffset-s.scrollbarYRail.getBoundingClientRect().top,c=i>s.scrollbarYTop?1:-1;s.element.scrollTop+=c*s.containerHeight,Zo(s),r.stopPropagation()}),s.event.bind(s.scrollbarX,"mousedown",function(r){return r.stopPropagation()}),s.event.bind(s.scrollbarXRail,"mousedown",function(r){var i=r.pageX-window.pageXOffset-s.scrollbarXRail.getBoundingClientRect().left,c=i>s.scrollbarXLeft?1:-1;s.element.scrollLeft+=c*s.containerWidth,Zo(s),r.stopPropagation()})}function Zw(s){wT(s,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),wT(s,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function wT(s,r){var i=r[0],c=r[1],l=r[2],h=r[3],d=r[4],_=r[5],$=r[6],u=r[7],g=r[8],m=s.element,b=null,E=null,I=null;function y(N){N.touches&&N.touches[0]&&(N[l]=N.touches[0].pageY),m[$]=b+I*(N[l]-E),YE(s,u),Zo(s),N.stopPropagation(),N.type.startsWith("touch")&&N.changedTouches.length>1&&N.preventDefault()}function F(){zE(s,u),s[g].classList.remove(Dt.state.clicking),s.event.unbind(s.ownerDocument,"mousemove",y)}function B(N,R){b=m[$],R&&N.touches&&(N[l]=N.touches[0].pageY),E=N[l],I=(s[c]-s[i])/(s[h]-s[_]),R?s.event.bind(s.ownerDocument,"touchmove",y):(s.event.bind(s.ownerDocument,"mousemove",y),s.event.once(s.ownerDocument,"mouseup",F),N.preventDefault()),s[g].classList.add(Dt.state.clicking),N.stopPropagation()}s.event.bind(s[d],"mousedown",function(N){B(N)}),s.event.bind(s[d],"touchstart",function(N){B(N,!0)})}function Qw(s){var r=s.element,i=function(){return $i(r,":hover")},c=function(){return $i(s.scrollbarX,":focus")||$i(s.scrollbarY,":focus")};function l(h,d){var _=Math.floor(r.scrollTop);if(h===0){if(!s.scrollbarYActive)return!1;if(_===0&&d>0||_>=s.contentHeight-s.containerHeight&&d<0)return!s.settings.wheelPropagation}var $=r.scrollLeft;if(d===0){if(!s.scrollbarXActive)return!1;if($===0&&h<0||$>=s.contentWidth-s.containerWidth&&h>0)return!s.settings.wheelPropagation}return!0}s.event.bind(s.ownerDocument,"keydown",function(h){if(!(h.isDefaultPrevented&&h.isDefaultPrevented()||h.defaultPrevented)&&!(!i()&&!c())){var d=document.activeElement?document.activeElement:s.ownerDocument.activeElement;if(d){if(d.tagName==="IFRAME")d=d.contentDocument.activeElement;else for(;d.shadowRoot;)d=d.shadowRoot.activeElement;if(zw(d))return}var _=0,$=0;switch(h.which){case 37:h.metaKey?_=-s.contentWidth:h.altKey?_=-s.containerWidth:_=-30;break;case 38:h.metaKey?$=s.contentHeight:h.altKey?$=s.containerHeight:$=30;break;case 39:h.metaKey?_=s.contentWidth:h.altKey?_=s.containerWidth:_=30;break;case 40:h.metaKey?$=-s.contentHeight:h.altKey?$=-s.containerHeight:$=-30;break;case 32:h.shiftKey?$=s.containerHeight:$=-s.containerHeight;break;case 33:$=s.containerHeight;break;case 34:$=-s.containerHeight;break;case 36:$=s.contentHeight;break;case 35:$=-s.contentHeight;break;default:return}s.settings.suppressScrollX&&_!==0||s.settings.suppressScrollY&&$!==0||(r.scrollTop-=$,r.scrollLeft+=_,Zo(s),l(_,$)&&h.preventDefault())}})}function eA(s){var r=s.element;function i(d,_){var $=Math.floor(r.scrollTop),u=r.scrollTop===0,g=$+r.offsetHeight===r.scrollHeight,m=r.scrollLeft===0,b=r.scrollLeft+r.offsetWidth===r.scrollWidth,E;return Math.abs(_)>Math.abs(d)?E=u||g:E=m||b,E?!s.settings.wheelPropagation:!0}function c(d){var _=d.deltaX,$=-1*d.deltaY;return(typeof _>"u"||typeof $>"u")&&(_=-1*d.wheelDeltaX/6,$=d.wheelDeltaY/6),d.deltaMode&&d.deltaMode===1&&(_*=10,$*=10),_!==_&&$!==$&&(_=0,$=d.wheelDelta),d.shiftKey?[-$,-_]:[_,$]}function l(d,_,$){if(!Jn.isWebKit&&r.querySelector("select:focus"))return!0;if(!r.contains(d))return!1;for(var u=d;u&&u!==r;){if(u.classList.contains(Dt.element.consuming))return!0;var g=Lo(u);if($&&g.overflowY.match(/(scroll|auto)/)){var m=u.scrollHeight-u.clientHeight;if(m>0&&(u.scrollTop>0&&$<0||u.scrollTop<m&&$>0))return!0}if(_&&g.overflowX.match(/(scroll|auto)/)){var b=u.scrollWidth-u.clientWidth;if(b>0&&(u.scrollLeft>0&&_<0||u.scrollLeft<b&&_>0))return!0}u=u.parentNode}return!1}function h(d){var _=c(d),$=_[0],u=_[1];if(!l(d.target,$,u)){var g=!1;s.settings.useBothWheelAxes?s.scrollbarYActive&&!s.scrollbarXActive?(u?r.scrollTop-=u*s.settings.wheelSpeed:r.scrollTop+=$*s.settings.wheelSpeed,g=!0):s.scrollbarXActive&&!s.scrollbarYActive&&($?r.scrollLeft+=$*s.settings.wheelSpeed:r.scrollLeft-=u*s.settings.wheelSpeed,g=!0):(r.scrollTop-=u*s.settings.wheelSpeed,r.scrollLeft+=$*s.settings.wheelSpeed),Zo(s),g=g||i($,u),g&&!d.ctrlKey&&(d.stopPropagation(),d.preventDefault())}}typeof window.onwheel<"u"?s.event.bind(r,"wheel",h):typeof window.onmousewheel<"u"&&s.event.bind(r,"mousewheel",h)}function tA(s){if(!Jn.supportsTouch&&!Jn.supportsIePointer)return;var r=s.element;function i(I,y){var F=Math.floor(r.scrollTop),B=r.scrollLeft,N=Math.abs(I),R=Math.abs(y);if(R>N){if(y<0&&F===s.contentHeight-s.containerHeight||y>0&&F===0)return window.scrollY===0&&y>0&&Jn.isChrome}else if(N>R&&(I<0&&B===s.contentWidth-s.containerWidth||I>0&&B===0))return!0;return!0}function c(I,y){r.scrollTop-=y,r.scrollLeft-=I,Zo(s)}var l={},h=0,d={},_=null;function $(I){return I.targetTouches?I.targetTouches[0]:I}function u(I){return I.pointerType&&I.pointerType==="pen"&&I.buttons===0?!1:!!(I.targetTouches&&I.targetTouches.length===1||I.pointerType&&I.pointerType!=="mouse"&&I.pointerType!==I.MSPOINTER_TYPE_MOUSE)}function g(I){if(!!u(I)){var y=$(I);l.pageX=y.pageX,l.pageY=y.pageY,h=new Date().getTime(),_!==null&&clearInterval(_)}}function m(I,y,F){if(!r.contains(I))return!1;for(var B=I;B&&B!==r;){if(B.classList.contains(Dt.element.consuming))return!0;var N=Lo(B);if(F&&N.overflowY.match(/(scroll|auto)/)){var R=B.scrollHeight-B.clientHeight;if(R>0&&(B.scrollTop>0&&F<0||B.scrollTop<R&&F>0))return!0}if(y&&N.overflowX.match(/(scroll|auto)/)){var z=B.scrollWidth-B.clientWidth;if(z>0&&(B.scrollLeft>0&&y<0||B.scrollLeft<z&&y>0))return!0}B=B.parentNode}return!1}function b(I){if(u(I)){var y=$(I),F={pageX:y.pageX,pageY:y.pageY},B=F.pageX-l.pageX,N=F.pageY-l.pageY;if(m(I.target,B,N))return;c(B,N),l=F;var R=new Date().getTime(),z=R-h;z>0&&(d.x=B/z,d.y=N/z,h=R),i(B,N)&&I.preventDefault()}}function E(){s.settings.swipeEasing&&(clearInterval(_),_=setInterval(function(){if(s.isInitialized){clearInterval(_);return}if(!d.x&&!d.y){clearInterval(_);return}if(Math.abs(d.x)<.01&&Math.abs(d.y)<.01){clearInterval(_);return}if(!s.element){clearInterval(_);return}c(d.x*30,d.y*30),d.x*=.8,d.y*=.8},10))}Jn.supportsTouch?(s.event.bind(r,"touchstart",g),s.event.bind(r,"touchmove",b),s.event.bind(r,"touchend",E)):Jn.supportsIePointer&&(window.PointerEvent?(s.event.bind(r,"pointerdown",g),s.event.bind(r,"pointermove",b),s.event.bind(r,"pointerup",E)):window.MSPointerEvent&&(s.event.bind(r,"MSPointerDown",g),s.event.bind(r,"MSPointerMove",b),s.event.bind(r,"MSPointerUp",E)))}var sA=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},oA={"click-rail":qw,"drag-thumb":Zw,keyboard:Qw,wheel:eA,touch:tA},ql=function(r,i){var c=this;if(i===void 0&&(i={}),typeof r=="string"&&(r=document.querySelector(r)),!r||!r.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=r,r.classList.add(Dt.main),this.settings=sA();for(var l in i)this.settings[l]=i[l];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var h=function(){return r.classList.add(Dt.state.focus)},d=function(){return r.classList.remove(Dt.state.focus)};this.isRtl=Lo(r).direction==="rtl",this.isRtl===!0&&r.classList.add(Dt.rtl),this.isNegativeScroll=function(){var u=r.scrollLeft,g=null;return r.scrollLeft=-1,g=r.scrollLeft<0,r.scrollLeft=u,g}(),this.negativeScrollAdjustment=this.isNegativeScroll?r.scrollWidth-r.clientWidth:0,this.event=new gr,this.ownerDocument=r.ownerDocument||document,this.scrollbarXRail=aa(Dt.element.rail("x")),r.appendChild(this.scrollbarXRail),this.scrollbarX=aa(Dt.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",h),this.event.bind(this.scrollbarX,"blur",d),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var _=Lo(this.scrollbarXRail);this.scrollbarXBottom=parseInt(_.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=bt(_.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=bt(_.borderLeftWidth)+bt(_.borderRightWidth),bs(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=bt(_.marginLeft)+bt(_.marginRight),bs(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=aa(Dt.element.rail("y")),r.appendChild(this.scrollbarYRail),this.scrollbarY=aa(Dt.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",h),this.event.bind(this.scrollbarY,"blur",d),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var $=Lo(this.scrollbarYRail);this.scrollbarYRight=parseInt($.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=bt($.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?Kw(this.scrollbarY):null,this.railBorderYWidth=bt($.borderTopWidth)+bt($.borderBottomWidth),bs(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=bt($.marginTop)+bt($.marginBottom),bs(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:r.scrollLeft<=0?"start":r.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:r.scrollTop<=0?"start":r.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(u){return oA[u](c)}),this.lastScrollTop=Math.floor(r.scrollTop),this.lastScrollLeft=r.scrollLeft,this.event.bind(this.element,"scroll",function(u){return c.onScroll(u)}),Zo(this)};ql.prototype.update=function(){!this.isAlive||(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,bs(this.scrollbarXRail,{display:"block"}),bs(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=bt(Lo(this.scrollbarXRail).marginLeft)+bt(Lo(this.scrollbarXRail).marginRight),this.railYMarginHeight=bt(Lo(this.scrollbarYRail).marginTop)+bt(Lo(this.scrollbarYRail).marginBottom),bs(this.scrollbarXRail,{display:"none"}),bs(this.scrollbarYRail,{display:"none"}),Zo(this),wa(this,"top",0,!1,!0),wa(this,"left",0,!1,!0),bs(this.scrollbarXRail,{display:""}),bs(this.scrollbarYRail,{display:""}))};ql.prototype.onScroll=function(r){!this.isAlive||(Zo(this),wa(this,"top",this.element.scrollTop-this.lastScrollTop),wa(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};ql.prototype.destroy=function(){!this.isAlive||(this.event.unbindAll(),qn(this.scrollbarX),qn(this.scrollbarY),qn(this.scrollbarXRail),qn(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};ql.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(r){return!r.match(/^ps([-_].+|)$/)}).join(" ")};const AT=["scroll","ps-scroll-y","ps-scroll-x","ps-scroll-up","ps-scroll-down","ps-scroll-left","ps-scroll-right","ps-y-reach-start","ps-y-reach-end","ps-x-reach-start","ps-x-reach-end"];var Kn={name:"PerfectScrollbar",props:{options:{type:Object,required:!1,default:()=>{}},tag:{type:String,required:!1,default:"div"},watchOptions:{type:Boolean,required:!1,default:!1}},emits:AT,data(){return{ps:null}},watch:{watchOptions(s){!s&&this.watcher?this.watcher():this.createWatcher()}},mounted(){this.create(),this.watchOptions&&this.createWatcher()},updated(){this.$nextTick(()=>{this.update()})},beforeUnmount(){this.destroy()},methods:{create(){this.ps&&this.$isServer||(this.ps=new ql(this.$el,this.options),AT.forEach(s=>{this.ps.element.addEventListener(s,r=>this.$emit(s,r))}))},createWatcher(){this.watcher=this.$watch("options",()=>{this.destroy(),this.create()},{deep:!0})},update(){this.ps&&this.ps.update()},destroy(){this.ps&&(this.ps.destroy(),this.ps=null)}},render(){return Ri(this.tag,{class:"ps"},this.$slots.default&&this.$slots.default())}},GA={install:(s,r)=>{r&&(r.name&&typeof r.name=="string"&&(Kn.name=r.name),r.options&&typeof r.options=="object"&&(Kn.props.options.default=()=>r.options),r.tag&&typeof r.tag=="string"&&(Kn.props.tag.default=r.tag),r.watchOptions&&typeof r.watchOptions=="boolean"&&(Kn.props.watchOptions=r.watchOptions)),s.component(Kn.name,Kn)}};export{GO as $,Yd as A,uA as B,wA as C,OA as D,LA as E,CA as F,JO as G,AA as H,bA as I,pA as J,TA as K,tO as L,DA as M,gA as N,fA as O,EA as P,mA as Q,IA as R,ow as S,xA as T,fC as U,nn as V,cA as W,Xt as X,vA as Y,zO as Z,iA as _,Ta as a,BA as a0,MA as a1,NA as a2,lO as a3,PA as a4,FA as a5,GA as a6,aA as a7,Ip as b,b$ as c,mp as d,Pd as e,XR as f,dA as g,$A as h,hA as i,lA as j,M as k,yA as l,_A as m,rA as n,an as o,nA as p,RA as q,we as r,gR as s,as as t,SA as u,Cb as v,CR as w,kA as x,tr as y,tw as z};
